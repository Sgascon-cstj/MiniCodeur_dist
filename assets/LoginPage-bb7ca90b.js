import{d as B,r as u,o as P,a as h,b as d,c as R,e as $,f as c,g as e,w as o,h as t,F as z,i as w}from"./index-3512041f.js";import{U as F}from"./UserRepository-6a763eae.js";const I=c("h1",{class:"text-h1"},[c("span",{style:{color:"yellow"}},"M"),t("ini"),c("span",{style:{color:"yellow"}},"C"),t("odeur ")],-1),M=c("span",null,"Petits curieux, grands codeurs : Réponses à la programmation!",-1),N=c("span",{style:{color:"red"}},"v0.9",-1),S=B({__name:"LoginPage",setup(T){const x=new F,f=u(!1),m=u(!1),v=u(!1),y=u(3e3),n=u(""),r=u(""),i={required:a=>!!a||"Champs requis",email:a=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(a)?!0:"Courriel invalide"};P(()=>{delete h.defaults.headers.common.Authorization});async function _(){if(m.value=!1,f.value=!0,i.email(n.value)&&i.required(n.value)&&i.required(r.value))try{const a=await x.loginCheck(n.value,r.value);a&&(localStorage.setItem("token",a.token),h.defaults.headers.common={Authorization:`bearer ${a.token}`},w.push({name:"home"}))}catch{m.value=!0,f.value=!1}}function C(){w.push({name:"inscription"})}function g(){n.value="amartel-user@cstj.ca",r.value="Password1!",_()}function V(){n.value="amartel-admin@cstj.qc.ca",r.value="Password1!",_()}return(a,l)=>{const k=d("v-text-field"),p=d("v-btn"),b=d("v-col"),q=d("v-row"),U=d("v-sheet"),A=d("v-snackbar");return R(),$(z,null,[c("div",null,[I,M,e(U,{border:"",rounded:"lg",elevation:"10","max-width":"40vh",width:"auto",class:"mx-auto pa-5 ma-10"},{default:o(()=>[e(k,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=s=>n.value=s),label:"Courriel","prepend-inner-icon":"mdi-email",type:"text",rules:[i.required,i.email],class:"my-2"},null,8,["modelValue","rules"]),e(k,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=s=>r.value=s),"append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",type:v.value?"text":"password","onClick:appendInner":l[2]||(l[2]=s=>v.value=!v.value),label:"Mot de passe",rules:[i.required],"prepend-inner-icon":"mdi-lock-outline",class:"my-2"},null,8,["modelValue","append-inner-icon","type","rules"]),e(p,{onClick:_,loading:f.value,block:"",color:"green"},{default:o(()=>[t("Connexion")]),_:1},8,["loading"]),e(p,{onClick:C,block:"",class:"mt-3",color:"blue"},{default:o(()=>[t("Créer compte")]),_:1}),e(q,{class:"mt-1"},{default:o(()=>[e(b,{cols:"6"},{default:o(()=>[e(p,{onClick:g,block:"",color:"red"},{default:o(()=>[t("Triche user")]),_:1})]),_:1}),e(b,{cols:"6"},{default:o(()=>[e(p,{onClick:V,block:"",color:"red"},{default:o(()=>[t("Triche Admin")]),_:1})]),_:1})]),_:1})]),_:1})]),e(A,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=s=>m.value=s),timeout:y.value},{actions:o(()=>[e(p,{color:"red",variant:"text",onClick:l[3]||(l[3]=s=>m.value=!1)},{default:o(()=>[t(" Fermer ")]),_:1})]),default:o(()=>[t(" Informations de connexion invalides. Veuillez contacter le support si le problème persiste. ")]),_:1},8,["modelValue","timeout"]),N],64)}}});export{S as default};
