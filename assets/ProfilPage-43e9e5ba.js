var ee=Object.defineProperty;var te=(p,a,l)=>a in p?ee(p,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[a]=l;var J=(p,a,l)=>(te(p,typeof a!="symbol"?a+"":a,l),l);import{d as M,r as d,o as q,b as o,c as f,l as A,w as t,g as e,e as S,s as z,F as N,t as G,h as i,x as oe,m as O,f as b,q as T,y as ae,u as U,p as le,k as ne,_ as se}from"./index-3512041f.js";import{_ as K,a as Q,u as B,b as re,D as ce}from"./DefaultLayout-bfd4b0b8.js";import{U as E,S as ue}from"./UserRepository-6a763eae.js";import{A as ie}from"./AwardRepository-0bf80054.js";import{u as _e,a as de}from"./vee-validate.esm-2be86ce8.js";const ve=M({__name:"friendList",setup(p){const a=new E,l=d(),m=d();q(async()=>{w()});async function w(){var v;l.value=await a.retrieveOne(),m.value=await a.retrieveFriends((v=l.value)==null?void 0:v.uuid_user),console.log(m.value)}async function g(v){try{const r=await a.deleteFriend(v.idFriendShip);(r==null?void 0:r.status)==200&&(w(),location.reload)}catch(r){console.log(r)}}return(v,r)=>{const _=o("v-col"),s=o("v-list-item-title"),V=o("v-list-item-content"),C=o("v-btn"),x=o("v-row"),y=o("v-list-item"),n=o("v-list"),k=o("v-card");return f(),A(k,{class:"border border-opacity-50 elevation-4",height:"320px"},{default:t(()=>[e(n,{height:"300px",style:{"overflow-y":"auto"}},{default:t(()=>[(f(!0),S(N,null,z(m.value,(h,u)=>(f(),A(y,{key:u,value:h,color:"primary"},{default:t(()=>[e(x,null,{default:t(()=>[e(_,{cols:"2"},{default:t(()=>[e(K,{user:h.profil},null,8,["user"])]),_:2},1024),e(_,{cols:"6"},{default:t(()=>[e(V,null,{default:t(()=>[e(s,{textContent:G(h.profil.displayname)},null,8,["textContent"])]),_:2},1024)]),_:2},1024),e(_,{cols:"4"},{default:t(()=>[e(C,{onClick:$=>g(h),style:{"font-size":"8px"},color:"red"},{default:t(()=>[i("Supprimer")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})}}});class me{constructor(){J(this,"axios",oe("axios"))}async retrieveAll(){try{const a=await this.axios.get(`${ue}/api/users`);if(a.status===200)return a.data}catch(a){throw a}}}const fe=b("p",{class:"text-center"},"Avatar",-1),pe=b("p",{class:"text-center"},"Nom d'utilisateur",-1),we=b("hr",{class:"ma-5"},null,-1),he=M({__name:"addFriendList",setup(p){const a=d([]),l=new E,m=new me,w=d(!1);q(async()=>{await v()});async function g(_){await v(),a.value=a.value.filter(s=>s.displayname.includes(_))}async function v(){a.value=await m.retrieveAll()}async function r(_){try{const s=await l.sendFriendRequest({uuid:_});(s==null?void 0:s.status)==200&&(v(),w.value=!1,location.reload())}catch{}}return(_,s)=>{const V=o("v-btn"),C=o("v-combobox"),x=o("v-col"),y=o("v-row"),n=o("v-card-text"),k=o("v-spacer"),h=o("v-card-actions"),u=o("v-card"),$=o("v-dialog");return f(),A($,O({width:"800px",height:"auto"},w.value),{activator:t(({props:I})=>[e(V,O(I,{width:"75%",color:"yellow",onClick:s[0]||(s[0]=R=>v())}),{default:t(()=>[i("Ajouter")]),_:2},1040)]),default:t(({isActive:I})=>[e(u,{title:"Ajouter des amis"},{default:t(()=>[e(C,{ref:"searchBar",class:"ma-5 mb-1",outlined:"",dense:"","hide-no-data":"",placeholder:"Rechecher un ami","onUpdate:search":s[1]||(s[1]=R=>g(R)),rounded:"",variant:"solo","prepend-icon":"mdi-magnify"},null,512),e(y,null,{default:t(()=>[e(x,{cols:"4"},{default:t(()=>[fe]),_:1}),e(x,{cols:"3"},{default:t(()=>[pe]),_:1}),e(x,{cols:"2"})]),_:1}),we,e(n,null,{default:t(()=>[(f(!0),S(N,null,z(a.value,R=>(f(),A(y,{class:"text-center"},{default:t(()=>[e(x,{cols:"4"},{default:t(()=>[e(K,{user:R,onClick:s[2]||(s[2]=P=>w.value=!1)},null,8,["user"])]),_:2},1024),e(x,{cols:"3"},{default:t(()=>[i(G(R.displayname),1)]),_:2},1024),e(x,{cols:"3",class:"text-end"},{default:t(()=>[e(V,{color:"green",onClick:P=>r(R.uuid_user)},{default:t(()=>[i("Ajouter")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(h,null,{default:t(()=>[e(k),e(V,{text:"Fermer",onClick:R=>I.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},16)}}}),ye={key:0},be={key:1},ge={key:2},xe=b("div",null,null,-1),ke=M({__name:"changeUserProfilePicture",setup(p){const a=d(),l=new E,m=d(!1),w=d(!1),g=d(!1);async function v(){if(a.value)try{const r=await l.changeProfilPicture(a.value);(r==null?void 0:r.status)==200&&(m.value=!0,w.value=!1,g.value=!1,location.reload())}catch{w.value=!0,m.value=!1,g.value=!1}else g.value=!0,w.value=!1,m.value=!1}return(r,_)=>{const s=o("v-icon"),V=o("v-file-input"),C=o("v-btn"),x=o("v-spacer"),y=o("v-card-actions"),n=o("v-card"),k=o("v-dialog");return f(),A(k,{width:"50%"},{activator:t(({props:h})=>[e(s,O(h,{class:"mt-13"}),{default:t(()=>[i("mdi-camera")]),_:2},1040)]),default:t(({isActive:h})=>[e(n,{class:"pa-5"},{default:t(()=>[e(V,{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=u=>a.value=u),color:"deep-purple-accent-4",counter:"",label:"File input",placeholder:"Select your avatar","prepend-icon":"mdi-camera",variant:"outlined","show-size":1e3,accept:"image/png, image/jpeg"},null,8,["modelValue"]),m.value?(f(),S("p",ye,[e(s,{color:"green"},{default:t(()=>[i("mdi-check")]),_:1}),i(" Photo mise a jour ")])):T("",!0),w.value?(f(),S("p",be,[e(s,{color:"red"},{default:t(()=>[i("mdi-cancel")]),_:1}),i(" Veuiller réessayer ")])):T("",!0),g.value?(f(),S("p",ge,[e(s,{color:"red"},{default:t(()=>[i("mdi-cancel")]),_:1}),i(" Veuiller sélectionner un fichier ")])):T("",!0),e(C,{onClick:_[1]||(_[1]=u=>v())},{default:t(()=>[i("Change profile picture")]),_:1}),xe,e(y,null,{default:t(()=>[e(x),e(C,{text:"Fermer",onClick:u=>h.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}}}),Ce=b("hr",null,null,-1),$e=b("p",null,"Toute les récompense disponnible",-1),Re=M({__name:"showAllAward",setup(p){const a=d(),l=new ie;return q(async()=>{a.value=await l.retrieveAll()}),(m,w)=>{const g=o("v-col"),v=o("v-row");return f(),A(v,{class:"ma-10"},{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[Ce,$e]),_:1}),(f(!0),S(N,null,z(a.value,(r,_)=>(f(),A(Q,{class:"ma-1",key:_,award:r},null,8,["award"]))),128))]),_:1})}}}),j=p=>(le("data-v-ed619722"),p=p(),ne(),p),Ve=j(()=>b("h4",null,"Information",-1)),Se=j(()=>b("hr",null,null,-1)),Ae=j(()=>b("p",null,"Mes récompense",-1)),Fe=j(()=>b("p",null,"Paramètres",-1)),Pe=j(()=>b("h2",null,"Méthode de correction",-1)),Ie={style:{"font-weight":"14",color:"black"}},Ue=M({__name:"ProfilPage",setup(p){const a=new E,l=d(),m=d(null),w=d(),g=d(!1),v=d(["Rétroaction du nombre de mauvaise réponse","Rétroaction du nombre de bonne réponse","Rétroaction des explications de mes mauvaises réponses"]),r=d(!1),_=d(),s=d();q(async()=>{var y,n,k,h;if(l.value=await a.retrieveOne(),w.value=await a.retrieveAllAwards((y=l.value)==null?void 0:y.awards_href),(n=l.value)!=null&&n.uuid_user&&localStorage.getItem((k=l.value)==null?void 0:k.uuid_user)){const u=parseInt(localStorage.getItem((h=l.value)==null?void 0:h.uuid_user)||"");C.value.value=v.value[u-1]}});const{handleSubmit:V}=_e({validationSchema:{selectCorrection(y){return y?(g.value=!0,!0):(g.value=!1,"Choisir une option.")}}}),C=de("selectCorrection"),x=V(y=>{var k;const n=d(1);switch(y.selectCorrection){case"Rétroaction du nombre de mauvaise réponse":n.value=1;break;case"Rétroaction du nombre de bonne réponse":n.value=2;break;case"Rétroaction des explications de mes mauvaises réponses":n.value=3;break}localStorage.setItem(((k=l.value)==null?void 0:k.uuid_user)||"",String(n.value)),_.value="Action réussie.",s.value="green",r.value=!0});return(y,n)=>{const k=o("v-img"),h=o("v-avatar"),u=o("v-col"),$=o("v-row"),I=o("v-icon"),R=o("v-btn"),P=o("v-card"),D=o("v-tab"),W=o("v-tabs"),L=o("v-window-item"),X=o("v-select"),Y=o("v-window"),Z=o("v-snackbar");return f(),S(N,null,[e(ce,null,{default:t(()=>[e(P,{class:"ma-5 pa-5 elevation-5",height:"85%"},{default:t(()=>[e($,{height:"30%"},{default:t(()=>[e(u,{cols:"4",class:"ma-auto"},{default:t(()=>[e(h,{size:"200px"},{default:t(()=>{var c;return[e(k,{src:(c=l.value)==null?void 0:c.avatar_href,class:"pa-16"},{default:t(()=>[e(ke)]),_:1},8,["src"])]}),_:1})]),_:1}),e(u,{cols:"8"},{default:t(()=>[e(P,{color:"grey-darken-3",class:"ma-2 elevation-7"},{default:t(()=>[Ve,e($,null,{default:t(()=>[e(u,{cols:"6"},{default:t(()=>{var c,F,H;return[e(B,{information:(c=l.value)==null?void 0:c.firstname,label:"Prenom"},null,8,["information"]),e(B,{information:(F=l.value)==null?void 0:F.birthday,label:"Date de naissance"},null,8,["information"]),e(B,{information:(H=l.value)==null?void 0:H.email,label:"Adresse courriel"},null,8,["information"])]}),_:1}),e(u,{cols:"6"},{default:t(()=>{var c,F;return[e(B,{information:(c=l.value)==null?void 0:c.lastname,label:"Nom "},null,8,["information"]),e(B,{information:(F=l.value)==null?void 0:F.displayname,label:"Nom d'utilisateur"},null,8,["information"])]}),_:1})]),_:1}),e($,null,{default:t(()=>[e(R,{class:"align-start-in-row ml-10 mb-5",color:"light-blue-accent-3"},{default:t(()=>[e(I,null,{default:t(()=>[i("mdi-pencil")]),_:1}),i("Mofifier")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e($,{class:"ma-auto"},{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(P,{class:"elevation-5 pa-4"},{default:t(()=>[b("div",null,[e($,null,{default:t(()=>[e(u,{cols:"2"},{default:t(()=>[e(W,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=c=>m.value=c),direction:"vertical",color:"primary"},{default:t(()=>[e(D,{value:"award"},{default:t(()=>[i("Récompense")]),_:1}),e(D,{value:"friends"},{default:t(()=>[i("Amis(e)s")]),_:1}),e(D,{value:"notification"},{default:t(()=>[i("Notification")]),_:1}),e(D,{value:"setting"},{default:t(()=>[i("Paramètre")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"10"},{default:t(()=>[e(Y,{modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=c=>m.value=c)},{default:t(()=>[e(L,{value:"award"},{default:t(()=>[e(P,{flat:""},{default:t(()=>[e($,{class:"ml-8 mt-5 mr-8"},{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[Se,Ae]),_:1}),(f(!0),S(N,null,z(w.value,(c,F)=>(f(),A(Q,{key:F,award:c},null,8,["award"]))),128))]),_:1}),e($,null,{default:t(()=>[e(Re)]),_:1})]),_:1})]),_:1}),e(L,{value:"friends",class:"ma-5"},{default:t(()=>[e($,null,{default:t(()=>[e(u,{cols:"10"},{default:t(()=>[e(ve)]),_:1}),e(u,null,{default:t(()=>[e(he)]),_:1})]),_:1})]),_:1}),e(L,{value:"notification",class:"ma-5"},{default:t(()=>[e(re)]),_:1}),e(L,{value:"setting",class:"ma-5"},{default:t(()=>[Fe,Pe,b("form",{onSubmit:n[2]||(n[2]=ae((...c)=>U(x)&&U(x)(...c),["prevent"]))},[e(X,{modelValue:U(C).value.value,"onUpdate:modelValue":n[1]||(n[1]=c=>U(C).value.value=c),items:v.value,transition:"slide-x-transition","error-messages":U(C).errorMessage.value,label:"Méthode de correction ..."},null,8,["modelValue","items","error-messages"]),e(R,{type:"submit"},{default:t(()=>[i("Confirmer")]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=c=>r.value=c),color:s.value,"multi-line":""},{actions:t(()=>[e(R,{color:"red",variant:"text",onClick:n[4]||(n[4]=c=>r.value=!1)},{default:t(()=>[i(" Close ")]),_:1})]),default:t(()=>[b("span",Ie,G(_.value),1)]),_:1},8,["modelValue","color"])],64)}}});const qe=se(Ue,[["__scopeId","data-v-ed619722"]]);export{qe as default};
