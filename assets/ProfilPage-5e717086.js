var ee=Object.defineProperty;var te=(p,a,l)=>a in p?ee(p,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[a]=l;var J=(p,a,l)=>(te(p,typeof a!="symbol"?a+"":a,l),l);import{d as M,r as d,o as q,b as o,c as f,l as F,w as t,g as e,e as A,s as z,F as N,t as G,h as u,x as oe,m as O,f as C,q as T,y as ae,u as U,p as le,k as ne,_ as se}from"./index-008c8163.js";import{_ as K,a as Q,u as B,b as re,D as ce}from"./DefaultLayout-fbb1746d.js";import{U as E,S as ue}from"./UserRepository-a77d85ad.js";import{A as ie}from"./AwardRepository-89665adb.js";import{u as _e,a as de}from"./vee-validate.esm-d91e0a19.js";const ve=M({__name:"friendList",setup(p){const a=new E,l=d(),m=d();q(async()=>{w()});async function w(){var v;l.value=await a.retrieveOne(),m.value=await a.retrieveFriends((v=l.value)==null?void 0:v.uuid_user),console.log(m.value)}async function g(v){try{const r=await a.deleteFriend(v.idFriendShip);(r==null?void 0:r.status)==200&&(w(),location.reload)}catch(r){console.log(r)}}return(v,r)=>{const i=o("v-col"),s=o("v-list-item-title"),V=o("v-list-item-content"),$=o("v-btn"),y=o("v-row"),b=o("v-list-item"),n=o("v-list"),x=o("v-card");return f(),F(x,{class:"border border-opacity-50 elevation-4",height:"320px"},{default:t(()=>[e(n,{height:"300px",style:{"overflow-y":"auto"}},{default:t(()=>[(f(!0),A(N,null,z(m.value,(k,_)=>(f(),F(b,{key:_,value:k,color:"primary"},{default:t(()=>[e(y,null,{default:t(()=>[e(i,{cols:"2"},{default:t(()=>[e(K,{user:k.profil},null,8,["user"])]),_:2},1024),e(i,{cols:"6"},{default:t(()=>[e(V,null,{default:t(()=>[e(s,{textContent:G(k.profil.displayname)},null,8,["textContent"])]),_:2},1024)]),_:2},1024),e(i,{cols:"4"},{default:t(()=>[e($,{onClick:h=>g(k),style:{"font-size":"8px"},color:"red"},{default:t(()=>[u("Supprimer")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})}}});class me{constructor(){J(this,"axios",oe("axios"))}async retrieveAll(){try{const a=await this.axios.get(`${ue}/api/users`);if(a.status===200)return a.data}catch(a){throw a}}}const fe=C("p",{class:"text-center"},"Avatar",-1),pe=C("p",{class:"text-center"},"Nom d'utilisateur",-1),we=C("hr",{class:"ma-5"},null,-1),he=M({__name:"addFriendList",setup(p){const a=d([]),l=new E,m=new me,w=d(!1);q(async()=>{await v()});async function g(i){await v(),a.value=a.value.filter(s=>s.displayname.includes(i))}async function v(){a.value=await m.retrieveAll()}async function r(i){try{const s=await l.sendFriendRequest({uuid:i});(s==null?void 0:s.status)==200&&(v(),w.value=!1,location.reload())}catch{}}return(i,s)=>{const V=o("v-btn"),$=o("v-combobox"),y=o("v-col"),b=o("v-row"),n=o("v-card-text"),x=o("v-spacer"),k=o("v-card-actions"),_=o("v-card"),h=o("v-dialog");return f(),F(h,O({width:"800px",height:"auto"},w.value),{activator:t(({props:S})=>[e(V,O(S,{width:"75%",color:"yellow",onClick:s[0]||(s[0]=R=>v())}),{default:t(()=>[u("Ajouter")]),_:2},1040)]),default:t(({isActive:S})=>[e(_,{title:"Ajouter des amis"},{default:t(()=>[e($,{ref:"searchBar",class:"ma-5 mb-1",outlined:"",dense:"","hide-no-data":"",placeholder:"Rechecher un ami","onUpdate:search":s[1]||(s[1]=R=>g(R)),rounded:"",variant:"solo","prepend-icon":"mdi-magnify"},null,512),e(b,null,{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[fe]),_:1}),e(y,{cols:"3"},{default:t(()=>[pe]),_:1}),e(y,{cols:"2"})]),_:1}),we,e(n,null,{default:t(()=>[(f(!0),A(N,null,z(a.value,R=>(f(),F(b,{class:"text-center"},{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[e(K,{user:R,onClick:s[2]||(s[2]=I=>w.value=!1)},null,8,["user"])]),_:2},1024),e(y,{cols:"3"},{default:t(()=>[u(G(R.displayname),1)]),_:2},1024),e(y,{cols:"3",class:"text-end"},{default:t(()=>[e(V,{color:"green",onClick:I=>r(R.uuid_user)},{default:t(()=>[u("Ajouter")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(k,null,{default:t(()=>[e(x),e(V,{text:"Fermer",onClick:R=>S.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},16)}}}),ye={key:0},be={key:1},ge={key:2},xe=M({__name:"changeUserProfilePicture",setup(p){const a=d(),l=new E,m=d(!1),w=d(!1),g=d(!1);async function v(){if(a.value)try{const r=await l.changeProfilPicture(a.value);(r==null?void 0:r.status)==200&&(m.value=!0,w.value=!1,g.value=!1,location.reload())}catch{w.value=!0,m.value=!1,g.value=!1}else g.value=!0,w.value=!1,m.value=!1}return(r,i)=>{const s=o("v-icon"),V=o("v-file-input"),$=o("v-col"),y=o("v-btn"),b=o("v-spacer"),n=o("v-card-actions"),x=o("v-row"),k=o("v-card"),_=o("v-dialog");return f(),F(_,{width:"25%"},{activator:t(({props:h})=>[e(s,O(h,{class:"mt-13"}),{default:t(()=>[u("mdi-camera")]),_:2},1040)]),default:t(({isActive:h})=>[e(k,{class:"pa-5"},{default:t(()=>[e(x,null,{default:t(()=>[e($,{cols:"12",class:"text-center"},{default:t(()=>[e(V,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=S=>a.value=S),color:"deep-purple-accent-4",counter:"",label:"Fichier",placeholder:"Selectionner votre avatar","prepend-icon":"mdi-camera",variant:"outlined","show-size":1e3,accept:"image/png, image/jpeg"},null,8,["modelValue"]),m.value?(f(),A("p",ye,[e(s,{color:"green"},{default:t(()=>[u("mdi-check")]),_:1}),u(" Photo mise a jour ")])):T("",!0),w.value?(f(),A("p",be,[e(s,{color:"red"},{default:t(()=>[u("mdi-cancel")]),_:1}),u(" Veuiller réessayer ")])):T("",!0),g.value?(f(),A("p",ge,[e(s,{color:"red"},{default:t(()=>[u("mdi-cancel")]),_:1}),u(" Veuiller sélectionner un fichier ")])):T("",!0)]),_:1}),e($,{cols:"8"},{default:t(()=>[e(y,{width:"50%",onClick:i[1]||(i[1]=S=>v())},{default:t(()=>[u("Changer")]),_:1})]),_:1}),e(n,null,{default:t(()=>[e(b),e(y,{text:"Fermer",onClick:S=>h.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1})}}}),ke=C("hr",null,null,-1),Ce=C("p",null,"Toute les récompense disponnible",-1),$e=M({__name:"showAllAward",setup(p){const a=d(),l=new ie;return q(async()=>{a.value=await l.retrieveAll()}),(m,w)=>{const g=o("v-col"),v=o("v-row");return f(),F(v,{class:"ma-10"},{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[ke,Ce]),_:1}),(f(!0),A(N,null,z(a.value,(r,i)=>(f(),F(Q,{class:"ma-1",key:i,award:r},null,8,["award"]))),128))]),_:1})}}}),j=p=>(le("data-v-241dd87c"),p=p(),ne(),p),Re=j(()=>C("h4",null,"Information",-1)),Ve=j(()=>C("hr",null,null,-1)),Se=j(()=>C("p",null,"Mes récompense",-1)),Ae=j(()=>C("p",null,"Paramètres",-1)),Fe=j(()=>C("h2",null,"Méthode de correction",-1)),Pe={style:{"font-weight":"14",color:"black"}},Ie=M({__name:"ProfilPage",setup(p){const a=new E,l=d(),m=d(null),w=d(),g=d(!1),v=d(["Rétroaction du nombre de mauvaise réponse","Rétroaction du nombre de bonne réponse","Rétroaction des explications de mes mauvaises réponses"]),r=d(!1),i=d(),s=d();q(async()=>{var b,n,x,k;if(l.value=await a.retrieveOne(),w.value=await a.retrieveAllAwards((b=l.value)==null?void 0:b.awards_href),(n=l.value)!=null&&n.uuid_user&&localStorage.getItem((x=l.value)==null?void 0:x.uuid_user)){const _=parseInt(localStorage.getItem((k=l.value)==null?void 0:k.uuid_user)||"");$.value.value=v.value[_-1]}});const{handleSubmit:V}=_e({validationSchema:{selectCorrection(b){return b?(g.value=!0,!0):(g.value=!1,"Choisir une option.")}}}),$=de("selectCorrection"),y=V(b=>{var x;const n=d(1);switch(b.selectCorrection){case"Rétroaction du nombre de mauvaise réponse":n.value=1;break;case"Rétroaction du nombre de bonne réponse":n.value=2;break;case"Rétroaction des explications de mes mauvaises réponses":n.value=3;break}localStorage.setItem(((x=l.value)==null?void 0:x.uuid_user)||"",String(n.value)),i.value="Action réussie.",s.value="green",r.value=!0});return(b,n)=>{const x=o("v-img"),k=o("v-avatar"),_=o("v-col"),h=o("v-row"),S=o("v-icon"),R=o("v-btn"),I=o("v-card"),D=o("v-tab"),W=o("v-tabs"),L=o("v-window-item"),X=o("v-select"),Y=o("v-window"),Z=o("v-snackbar");return f(),A(N,null,[e(ce,null,{default:t(()=>[e(I,{class:"ma-5 pa-5 elevation-5",height:"85%"},{default:t(()=>[e(h,{height:"30%"},{default:t(()=>[e(_,{cols:"4",class:"ma-auto"},{default:t(()=>[e(k,{size:"200px"},{default:t(()=>{var c;return[e(x,{src:(c=l.value)==null?void 0:c.avatar_href,class:"pa-16"},{default:t(()=>[e(xe)]),_:1},8,["src"])]}),_:1})]),_:1}),e(_,{cols:"8"},{default:t(()=>[e(I,{color:"grey-darken-3",class:"ma-2 elevation-7"},{default:t(()=>[Re,e(h,null,{default:t(()=>[e(_,{cols:"6"},{default:t(()=>{var c,P,H;return[e(B,{information:(c=l.value)==null?void 0:c.firstname,label:"Prenom"},null,8,["information"]),e(B,{information:(P=l.value)==null?void 0:P.birthday,label:"Date de naissance"},null,8,["information"]),e(B,{information:(H=l.value)==null?void 0:H.email,label:"Adresse courriel"},null,8,["information"])]}),_:1}),e(_,{cols:"6"},{default:t(()=>{var c,P;return[e(B,{information:(c=l.value)==null?void 0:c.lastname,label:"Nom "},null,8,["information"]),e(B,{information:(P=l.value)==null?void 0:P.displayname,label:"Nom d'utilisateur"},null,8,["information"])]}),_:1})]),_:1}),e(h,null,{default:t(()=>[e(R,{class:"align-start-in-row ml-10 mb-5",color:"light-blue-accent-3"},{default:t(()=>[e(S,null,{default:t(()=>[u("mdi-pencil")]),_:1}),u("Mofifier")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(h,{class:"ma-auto"},{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(I,{class:"elevation-5 pa-4"},{default:t(()=>[C("div",null,[e(h,null,{default:t(()=>[e(_,{cols:"2"},{default:t(()=>[e(W,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=c=>m.value=c),direction:"vertical",color:"primary"},{default:t(()=>[e(D,{value:"award"},{default:t(()=>[u("Récompense")]),_:1}),e(D,{value:"friends"},{default:t(()=>[u("Amis(e)s")]),_:1}),e(D,{value:"notification"},{default:t(()=>[u("Notification")]),_:1}),e(D,{value:"setting"},{default:t(()=>[u("Paramètre")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(_,{cols:"10"},{default:t(()=>[e(Y,{modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=c=>m.value=c)},{default:t(()=>[e(L,{value:"award"},{default:t(()=>[e(I,{flat:""},{default:t(()=>[e(h,{class:"ml-8 mt-5 mr-8"},{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[Ve,Se]),_:1}),(f(!0),A(N,null,z(w.value,(c,P)=>(f(),F(Q,{key:P,award:c},null,8,["award"]))),128))]),_:1}),e(h,null,{default:t(()=>[e($e)]),_:1})]),_:1})]),_:1}),e(L,{value:"friends",class:"ma-5"},{default:t(()=>[e(h,null,{default:t(()=>[e(_,{cols:"10"},{default:t(()=>[e(ve)]),_:1}),e(_,null,{default:t(()=>[e(he)]),_:1})]),_:1})]),_:1}),e(L,{value:"notification",class:"ma-5"},{default:t(()=>[e(re)]),_:1}),e(L,{value:"setting",class:"ma-5"},{default:t(()=>[Ae,Fe,C("form",{onSubmit:n[2]||(n[2]=ae((...c)=>U(y)&&U(y)(...c),["prevent"]))},[e(X,{modelValue:U($).value.value,"onUpdate:modelValue":n[1]||(n[1]=c=>U($).value.value=c),items:v.value,transition:"slide-x-transition","error-messages":U($).errorMessage.value,label:"Méthode de correction ..."},null,8,["modelValue","items","error-messages"]),e(R,{type:"submit"},{default:t(()=>[u("Confirmer")]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=c=>r.value=c),color:s.value,"multi-line":""},{actions:t(()=>[e(R,{color:"red",variant:"text",onClick:n[4]||(n[4]=c=>r.value=!1)},{default:t(()=>[u(" Close ")]),_:1})]),default:t(()=>[C("span",Pe,G(i.value),1)]),_:1},8,["modelValue","color"])],64)}}});const Le=se(Ie,[["__scopeId","data-v-241dd87c"]]);export{Le as default};
