import{d as R,b as n,c as p,l as h,w as t,g as e,m as j,f as w,t as C,_ as G,r as b,o as z,h as v,e as O,F as T,s as E,q as J,i as H,j as oe,a as ae,ai as le,aj as se,u as P,ak as ce,p as _e,k as ie}from"./index-3512041f.js";import{U as M}from"./UserRepository-6a763eae.js";const re={class:"text-center font-weight-black"},de=R({__name:"awardModal",props:["award"],setup(s){return(o,m)=>{const c=n("v-img"),a=n("v-card"),f=n("v-card-text"),r=n("v-spacer"),_=n("v-btn"),x=n("v-card-actions"),l=n("v-dialog"),i=n("v-col");return p(),h(i,{cols:"2"},{default:t(()=>[e(l,{width:"500"},{activator:t(({props:d})=>[e(a,{color:s.award.color,elevation:"3",class:"mt-2 pa-2",width:"90px",height:"80px"},{default:t(()=>[e(c,j(d,{src:s.award.href_img}),null,16,["src"])]),_:2},1032,["color"])]),default:t(({isActive:d})=>[e(a,{title:s.award.chapter.chapterTitle,color:s.award.color},{default:t(()=>[e(f,null,{default:t(()=>[e(c,{src:s.award.href_img},null,8,["src"]),w("p",re,C(s.award.chapter.chapterTitle),1)]),_:1}),e(x,null,{default:t(()=>[e(r),e(_,{text:"Fermer",onClick:u=>d.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title","color"])]),_:1})]),_:1})}}}),ue=R({__name:"userInformationBox",props:["information","label"],setup(s){return(o,m)=>{const c=n("v-col"),a=n("v-row");return p(),h(a,{class:"d-flex userInformationBox ma-1 align-start-in-row",style:{"font-size":"16px"}},{default:t(()=>[e(c,{cols:"6"},{default:t(()=>[w("p",null,C(s.label)+": ",1)]),_:1}),e(c,{cols:"6"},{default:t(()=>[w("p",null,C(s.information),1)]),_:1})]),_:1})}}});const L=G(ue,[["__scopeId","data-v-742da507"]]),ve=w("p",null,"Récompense du joueur",-1),pe=R({__name:"showUserProfil",props:["user"],setup(s){const o=s,m=new M,c=b(null),a=b(null);return z(async()=>{a.value=await m.retrieveAllAwards(o.user.awards_href)}),(f,r)=>{const _=n("v-img"),x=n("v-avatar"),l=n("v-tab"),i=n("v-tabs"),d=n("v-col"),u=n("v-row"),k=n("v-window-item"),V=n("v-card-title"),$=n("v-card"),F=n("v-window"),q=n("v-spacer"),I=n("v-btn"),B=n("v-card-actions"),U=n("v-dialog");return p(),h(U,{width:"75%"},{activator:t(({props:A})=>[e(x,{width:"50px"},{default:t(()=>[e(_,j(A,{src:o==null?void 0:o.user.avatar_href}),null,16,["src"])]),_:2},1024)]),default:t(({isActive:A})=>[e($,null,{default:t(()=>[e(u,null,{default:t(()=>[e(d,{cols:"8",offset:"2"},{default:t(()=>[e(i,{modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=g=>c.value=g),color:"primary","align-tabs":"end"},{default:t(()=>[e(l,{value:"information"},{default:t(()=>[v("Information")]),_:1}),e(l,{value:"award"},{default:t(()=>[v("Récompense")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(F,{modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=g=>c.value=g)},{default:t(()=>[e(k,{value:"information"},{default:t(()=>[e(u,null,{default:t(()=>[e(d,{cols:"4"},{default:t(()=>[e(x,{size:"75%"},{default:t(()=>[e(_,{src:o==null?void 0:o.user.avatar_href},null,8,["src"])]),_:1})]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(L,{information:o==null?void 0:o.user.displayname,label:"Nom d'utilisateur"},null,8,["information"]),e(L,{information:o==null?void 0:o.user.birthday,label:"Date de naissance"},null,8,["information"])]),_:1})]),_:1})]),_:1}),e(k,{value:"award"},{default:t(()=>[e(u,null,{default:t(()=>[e(d,{cols:"10",offset:"1"},{default:t(()=>[e($,{flat:"",class:"w-100"},{default:t(()=>[e(V,null,{default:t(()=>[e(u,{class:"align-center-in-row"},{default:t(()=>[e(d,{cols:"12",class:"pb-9"},{default:t(()=>[ve]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[(p(!0),O(T,null,E(a.value,(g,D)=>(p(),h(de,{class:"ma-2",key:D,award:g},null,8,["award"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(q),e(I,{text:"Fermer",onClick:g=>A.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}}});const me=R({__name:"notification",setup(s){const o=new M,m=b();z(async()=>{c()});async function c(){m.value=await o.getFriendRequests()}async function a(r){try{const _=await o.acceptFriendRequest(r.idFriendRequest);(_==null?void 0:_.status)==200&&(c(),location.reload())}catch(_){console.log(_)}}async function f(r){try{const _=await o.deniedFriendRequest(r.idFriendRequest);(_==null?void 0:_.status)==200&&(c(),location.reload())}catch(_){console.log(_)}}return(r,_)=>{const x=n("v-avatar"),l=n("v-col"),i=n("v-btn"),d=n("v-row");return p(!0),O(T,null,E(m.value,u=>(p(),h(d,null,{default:t(()=>[e(l,{cols:"3"},{default:t(()=>[e(x,{size:"30"},{default:t(()=>[e(pe,{user:u.requestUser},null,8,["user"])]),_:2},1024)]),_:2},1024),e(l,{cols:"3"},{default:t(()=>[v(C(u.requestUser.displayname),1)]),_:2},1024),e(l,{cols:"6"},{default:t(()=>[e(i,{onClick:k=>a(u),class:"w-25",color:"green",style:{"font-size":"8px"}},{default:t(()=>[v("Accepter")]),_:2},1032,["onClick"]),e(i,{onClick:k=>f(u),class:"w-25 ml-1",color:"red",style:{"font-size":"8px"}},{default:t(()=>[v("Refuser")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256)}}}),N=R({__name:"AppMenu",props:{isAllowed:Boolean},setup(s){async function o(){H.push({name:"login"})}return(m,c)=>{const a=n("v-list-item"),f=n("v-divider"),r=n("v-list");return p(),h(r,{density:"compact"},{default:t(()=>[e(a,{"prepend-icon":"mdi-home",title:"Accueil",class:"nav-link",to:{name:"home"}}),e(a,{"prepend-icon":"mdi-account",title:"Profil",class:"nav-link",to:{name:"profil"}}),e(a,{"prepend-icon":"mdi-folder",title:"Documentation",class:"nav-link",disabled:"",to:{name:"documentation"}}),e(a,{"prepend-icon":"mdi-text-box",title:"Groupes",class:"nav-link",to:{name:"groupe"}}),e(a,{"prepend-icon":"mdi-account-multiple",title:"Classe",disabled:"",class:"nav-link",to:{name:"classe"}}),e(a,{"prepend-icon":"mdi-code-braces-box",title:"MiniCodeur",class:"nav-link",to:{name:"minicodeur"}}),s.isAllowed?(p(),h(a,{key:0,"prepend-icon":"mdi-anvil",title:"Administration",class:"nav-link",to:{name:"admin"}})):J("",!0),e(f,{class:"my-5"}),e(a,{"prepend-icon":"mdi-logout",title:"Déconnexion",color:"red",class:"nav-link",onClick:o})]),_:1})}}}),K=s=>(_e("data-v-33dac1cb"),s=s(),ie(),s),fe=K(()=>w("span",{style:{color:"yellow"}},"M",-1)),we=K(()=>w("span",{style:{color:"yellow"}},"C",-1)),he={class:"ma-4"},xe={class:"text-center"},ge=R({__name:"DefaultLayout",setup(s){const o=b(),m=b(!0),c=b(!1),a=b(!1),f=new M;let r=b(0);oe(async()=>{try{ae.defaults.headers.common={Authorization:`bearer ${localStorage.getItem("token")}`};const l=await f.retrieveOne();l&&(await f.adminCheck()&&(c.value=!0),o.value=l,localStorage.setItem("user",JSON.stringify(l)))}catch{}}),z(async()=>{try{_(),m.value=!1}catch{}});async function _(){const l=await f.getFriendRequests(),i=l==null?void 0:l.data;i==null||i.forEach(()=>{r.value++})}function x(){H.push({name:"profil"})}return(l,i)=>{const d=n("v-app-bar-nav-icon"),u=n("v-app-bar-title"),k=n("v-spacer"),V=n("v-icon"),$=n("v-avatar"),F=n("v-btn"),q=n("v-list-item-title"),I=n("v-list-item"),B=n("v-list"),U=n("v-menu"),A=n("v-img"),g=n("v-chip"),D=n("v-app-bar"),Q=n("v-card-title"),W=n("v-card-text"),X=n("v-card-actions"),Y=n("v-card"),Z=n("v-dialog"),ee=n("v-navigation-drawer"),te=n("v-main"),ne=n("v-app");return p(),h(ne,{id:"inspire"},{default:t(()=>[e(D,{"elevation-10":"",class:"d-flex mx-auto"},{prepend:t(()=>[e(d,{class:"d-lg-none",onClick:i[0]||(i[0]=y=>a.value=!a.value)}),e(u,{class:"ml-5 text-h4"},{default:t(()=>[fe,v("ini"),we,v("odeur")]),_:1})]),append:t(()=>[w("div",he,[e(g,{class:"pa-5",onClick:x,rounded:"xl"},{default:t(()=>{var y;return[e($,{start:""},{default:t(()=>{var S;return[e(A,{src:(S=o.value)==null?void 0:S.avatar_href},null,8,["src"])]}),_:1}),v(" "+C((y=o.value)==null?void 0:y.displayname),1)]}),_:1})])]),default:t(()=>[e(k),e(U,{"open-on-hover":""},{activator:t(({props:y})=>[e(F,le(se(y)),{default:t(()=>[e(V,null,{default:t(()=>[v("mdi-bell")]),_:1}),P(r)>=1?(p(),h($,{key:0,color:"red",class:"mb-5",size:"16",textContent:C(P(r))},null,8,["textContent"])):J("",!0)]),_:2},1040)]),default:t(()=>[e(B,null,{default:t(()=>[e(I,{width:"400px"},{default:t(()=>[e(q,{class:"text-h6 mb-2"},{default:t(()=>[v("Demande d'amis")]),_:1}),e(me)]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,{class:"d-none d-lg-flex",rail:"","expand-on-hover":""},{default:t(()=>[e(N,{isAllowed:c.value},null,8,["isAllowed"]),w("template",null,[w("div",xe,[e(Z,{modelValue:a.value,"onUpdate:modelValue":i[2]||(i[2]=y=>a.value=y),width:"auto","min-width":"50vh"},{default:t(()=>[e(Y,null,{default:t(()=>[e(Q,{class:"text-center text-h4"},{default:t(()=>[v("Menu")]),_:1}),e(W,null,{default:t(()=>[e(N,{isAllowed:c.value},null,8,["isAllowed"])]),_:1}),e(X,null,{default:t(()=>[e(F,{color:"primary",block:"",onClick:i[1]||(i[1]=y=>a.value=!1)},{default:t(()=>[v("Fermer menu")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),e(te,{class:"full-width-main"},{default:t(()=>[ce(l.$slots,"default",{isLoading:m.value},void 0,!0)]),_:3})]),_:3})}}});const ke=G(ge,[["__scopeId","data-v-33dac1cb"]]);export{ke as D,pe as _,de as a,me as b,L as u};
