import{d as R,b as n,c as p,l as h,w as t,g as e,m as O,f as w,t as k,e as z,q as S,_ as E,r as b,o as M,h as v,F as J,s as T,i as Z,j as oe,a as ae,aJ as le,as as se,u as N,aZ as ce,p as ie,k as _e}from"./index-0979e10b.js";import{U as P}from"./UserRepository-f7559e71.js";const re={class:"text-center font-weight-black"},de={key:0,class:"text-center font-weight-black"},ue=R({__name:"awardModal",props:["award"],setup(l){return(a,m)=>{const s=n("v-img"),o=n("v-card"),f=n("v-card-text"),_=n("v-spacer"),c=n("v-btn"),x=n("v-card-actions"),r=n("v-dialog"),i=n("v-col");return p(),h(i,{cols:"2"},{default:t(()=>[e(r,{width:"500"},{activator:t(({props:d})=>[e(o,{color:l.award.color,elevation:"3",class:"mt-2 pa-2",width:"90px",height:"80px"},{default:t(()=>[e(s,O(d,{src:l.award.href_img}),null,16,["src"])]),_:2},1032,["color"])]),default:t(({isActive:d})=>[e(o,{color:l.award.color},{default:t(()=>[e(f,null,{default:t(()=>[e(s,{src:l.award.href_img},null,8,["src"]),w("p",re,k(l.award.chapter.chapterTitle),1),l.award.note?(p(),z("p",de,"Vous avez obtenu: "+k(l.award.note)+" %",1)):S("",!0)]),_:1}),e(x,null,{default:t(()=>[e(_),e(c,{text:"Fermer",onClick:u=>d.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["color"])]),_:1})]),_:1})}}}),ve=R({__name:"userInformationBox",props:["information","label"],setup(l){return(a,m)=>{const s=n("v-col"),o=n("v-row");return p(),h(o,{class:"d-flex userInformationBox ma-1 align-start-in-row",style:{"font-size":"16px"}},{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[w("p",null,k(l.label)+": ",1)]),_:1}),e(s,{cols:"6"},{default:t(()=>[w("p",null,k(l.information),1)]),_:1})]),_:1})}}});const j=E(ve,[["__scopeId","data-v-742da507"]]),pe=w("p",null,"Récompense du joueur",-1),me=R({__name:"showUserProfil",props:["user"],setup(l){const a=l,m=new P,s=b(null),o=b(null);return M(async()=>{o.value=await m.retrieveAllAwards(a.user.awards_href)}),(f,_)=>{const c=n("v-img"),x=n("v-avatar"),r=n("v-tab"),i=n("v-tabs"),d=n("v-col"),u=n("v-row"),C=n("v-window-item"),A=n("v-card-title"),q=n("v-card"),$=n("v-window"),V=n("v-spacer"),I=n("v-btn"),B=n("v-card-actions"),D=n("v-dialog");return p(),h(D,{width:"75%"},{activator:t(({props:F})=>[e(x,{width:"50px"},{default:t(()=>[e(c,O(F,{src:a==null?void 0:a.user.avatar_href}),null,16,["src"])]),_:2},1024)]),default:t(({isActive:F})=>[e(q,null,{default:t(()=>[e(u,null,{default:t(()=>[e(d,{cols:"8",offset:"2"},{default:t(()=>[e(i,{modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=g=>s.value=g),color:"primary","align-tabs":"end"},{default:t(()=>[e(r,{value:"information"},{default:t(()=>[v("Information")]),_:1}),e(r,{value:"award"},{default:t(()=>[v("Récompense")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e($,{modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=g=>s.value=g)},{default:t(()=>[e(C,{value:"information"},{default:t(()=>[e(u,null,{default:t(()=>[e(d,{cols:"4"},{default:t(()=>[e(x,{size:"75%"},{default:t(()=>[e(c,{src:a==null?void 0:a.user.avatar_href},null,8,["src"])]),_:1})]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(j,{information:a==null?void 0:a.user.displayname,label:"Nom d'utilisateur"},null,8,["information"]),e(j,{information:a==null?void 0:a.user.birthday,label:"Date de naissance"},null,8,["information"])]),_:1})]),_:1})]),_:1}),e(C,{value:"award"},{default:t(()=>[e(u,null,{default:t(()=>[e(d,{cols:"10",offset:"1"},{default:t(()=>[e(q,{flat:"",class:"w-100"},{default:t(()=>[e(A,null,{default:t(()=>[e(u,{class:"align-center-in-row"},{default:t(()=>[e(d,{cols:"12",class:"pb-9"},{default:t(()=>[pe]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[(p(!0),z(J,null,T(o.value,(g,U)=>(p(),h(ue,{class:"ma-2",key:U,award:g},null,8,["award"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(V),e(I,{text:"Fermer",onClick:g=>F.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}}});const fe=R({__name:"notification",setup(l){const a=new P,m=b();M(async()=>{s()});async function s(){m.value=await a.getFriendRequests()}async function o(_){try{const c=await a.acceptFriendRequest(_.idFriendRequest);(c==null?void 0:c.status)==200&&(s(),location.reload())}catch(c){console.log(c)}}async function f(_){try{const c=await a.deniedFriendRequest(_.idFriendRequest);(c==null?void 0:c.status)==200&&(s(),location.reload())}catch(c){console.log(c)}}return(_,c)=>{const x=n("v-avatar"),r=n("v-col"),i=n("v-btn"),d=n("v-row");return p(!0),z(J,null,T(m.value,u=>(p(),h(d,null,{default:t(()=>[e(r,{cols:"3"},{default:t(()=>[e(x,{size:"30"},{default:t(()=>[e(me,{user:u.requestUser},null,8,["user"])]),_:2},1024)]),_:2},1024),e(r,{cols:"3"},{default:t(()=>[v(k(u.requestUser.displayname),1)]),_:2},1024),e(r,{cols:"6"},{default:t(()=>[e(i,{onClick:C=>o(u),class:"w-25",color:"green",style:{"font-size":"8px"}},{default:t(()=>[v("Accepter")]),_:2},1032,["onClick"]),e(i,{onClick:C=>f(u),class:"w-25 ml-1",color:"red",style:{"font-size":"8px"}},{default:t(()=>[v("Refuser")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256)}}}),G=R({__name:"AppMenu",props:{isAllowed:Boolean},setup(l){async function a(){Z.push({name:"login"})}return(m,s)=>{const o=n("v-list-item"),f=n("v-divider"),_=n("v-list");return p(),h(_,{density:"compact"},{default:t(()=>[e(o,{"prepend-icon":"mdi-home",title:"Accueil",class:"nav-link",to:{name:"home"}}),e(o,{"prepend-icon":"mdi-account",title:"Profil",class:"nav-link",to:{name:"profil"}}),e(o,{"prepend-icon":"mdi-chart-bar",title:"Statistiques",class:"nav-link",to:{name:"statistiques"}}),e(o,{"prepend-icon":"mdi-folder",title:"Documentation",class:"nav-link",to:{name:"documentation"}}),e(o,{"prepend-icon":"mdi-text-box",title:"Groupes",class:"nav-link",to:{name:"groupe"}}),e(o,{"prepend-icon":"mdi-account-multiple",title:"Classe",disabled:"",class:"nav-link",to:{name:"classe"}}),e(o,{"prepend-icon":"mdi-application-brackets",title:"Défi",class:"nav-link",to:{name:"challenge"}}),e(o,{"prepend-icon":"mdi-code-braces-box",title:"MiniCodeur",class:"nav-link",to:{name:"minicodeur"}}),l.isAllowed?(p(),h(o,{key:0,"prepend-icon":"mdi-anvil",title:"Administration",class:"nav-link",to:{name:"admin"}})):S("",!0),e(f,{class:"my-5"}),e(o,{"prepend-icon":"mdi-logout",title:"Déconnexion",color:"red",class:"nav-link",onClick:a})]),_:1})}}}),H=l=>(ie("data-v-26e34305"),l=l(),_e(),l),we=H(()=>w("span",{style:{color:"yellow"}},"M",-1)),he=H(()=>w("span",{style:{color:"yellow"}},"C",-1)),xe={class:"ma-4"},ge={class:"text-center"},ye=R({__name:"DefaultLayout",setup(l){const a=b(),m=b(!0),s=b(!1),o=b(!1),f=new P;let _=b(0);oe(async()=>{try{ae.defaults.headers.common={Authorization:`bearer ${localStorage.getItem("token")}`};const r=await f.retrieveOne();r&&(await f.adminCheck()&&(s.value=!0),a.value=r,localStorage.setItem("user",JSON.stringify(r)))}catch{}}),M(async()=>{try{c(),m.value=!1}catch{}});async function c(){const i=await f.getFriendRequests();i==null||i.forEach(()=>{_.value++})}function x(){Z.push({name:"profil"})}return(r,i)=>{const d=n("v-app-bar-nav-icon"),u=n("v-app-bar-title"),C=n("v-spacer"),A=n("v-icon"),q=n("v-avatar"),$=n("v-btn"),V=n("v-list-item-title"),I=n("v-list-item"),B=n("v-list"),D=n("v-menu"),F=n("v-img"),g=n("v-chip"),U=n("v-app-bar"),K=n("v-card-title"),Q=n("v-card-text"),W=n("v-card-actions"),X=n("v-card"),Y=n("v-dialog"),ee=n("v-navigation-drawer"),te=n("v-main"),ne=n("v-app");return p(),h(ne,{id:"inspire"},{default:t(()=>[e(U,{"elevation-10":"",class:"d-flex mx-auto"},{prepend:t(()=>[e(d,{class:"d-lg-none",onClick:i[0]||(i[0]=y=>o.value=!o.value)}),e(u,{class:"ml-5 text-h4"},{default:t(()=>[we,v("ini"),he,v("odeur")]),_:1})]),append:t(()=>[w("div",xe,[e(g,{class:"pa-5",onClick:x,rounded:"xl"},{default:t(()=>{var y;return[e(q,{start:""},{default:t(()=>{var L;return[e(F,{src:(L=a.value)==null?void 0:L.avatar_href},null,8,["src"])]}),_:1}),v(" "+k((y=a.value)==null?void 0:y.displayname),1)]}),_:1})])]),default:t(()=>[e(C),e(D,{"open-on-hover":""},{activator:t(({props:y})=>[e($,le(se(y)),{default:t(()=>[e(A,null,{default:t(()=>[v("mdi-bell")]),_:1}),N(_)>=1?(p(),h(q,{key:0,color:"red",class:"mb-5",size:"16",textContent:k(N(_))},null,8,["textContent"])):S("",!0)]),_:2},1040)]),default:t(()=>[e(B,null,{default:t(()=>[e(I,{width:"400px"},{default:t(()=>[e(V,{class:"text-h6 mb-2"},{default:t(()=>[v("Demande d'amis")]),_:1}),e(fe)]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,{class:"d-none d-lg-flex",rail:"","expand-on-hover":""},{default:t(()=>[e(G,{isAllowed:s.value},null,8,["isAllowed"]),w("template",null,[w("div",ge,[e(Y,{modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=y=>o.value=y),width:"auto","min-width":"50vh"},{default:t(()=>[e(X,null,{default:t(()=>[e(K,{class:"text-center text-h4"},{default:t(()=>[v("Menu")]),_:1}),e(Q,null,{default:t(()=>[e(G,{isAllowed:s.value},null,8,["isAllowed"])]),_:1}),e(W,null,{default:t(()=>[e($,{color:"primary",block:"",onClick:i[1]||(i[1]=y=>o.value=!1)},{default:t(()=>[v("Fermer menu")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),e(te,{class:"full-width-main"},{default:t(()=>[ce(r.$slots,"default",{isLoading:m.value},void 0,!0)]),_:3})]),_:3})}}});const Ce=E(ye,[["__scopeId","data-v-26e34305"]]);export{Ce as D,me as _,ue as a,fe as b,j as u};
