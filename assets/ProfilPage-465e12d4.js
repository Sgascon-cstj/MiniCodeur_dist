var ee=Object.defineProperty;var te=(p,a,l)=>a in p?ee(p,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[a]=l;var J=(p,a,l)=>(te(p,typeof a!="symbol"?a+"":a,l),l);import{d as M,r as _,o as q,b as o,c as f,l as F,w as t,g as e,e as A,s as z,F as N,t as G,h as u,x as oe,m as O,f as k,q as T,y as ae,u as U,p as le,k as ne,_ as se}from"./index-0979e10b.js";import{_ as K,a as Q,u as B,b as re,D as ce}from"./DefaultLayout-9faf5610.js";import{U as E,S as ue}from"./UserRepository-f7559e71.js";import{A as ie}from"./AwardRepository-6ba27a1a.js";import{u as _e,a as de}from"./vee-validate.esm-eda5c4dd.js";const ve=M({__name:"friendList",setup(p){const a=new E,l=_(),w=_();q(async()=>{h()});async function h(){var d;l.value=await a.retrieveOne(),w.value=await a.retrieveFriends((d=l.value)==null?void 0:d.uuid_user)}async function x(d){try{const r=await a.deleteFriend(d.idFriendShip);(r==null?void 0:r.status)==200&&(h(),location.reload)}catch(r){console.log(r)}}return(d,r)=>{const i=o("v-col"),s=o("v-list-item-title"),V=o("v-btn"),C=o("v-row"),y=o("v-list-item"),b=o("v-list"),n=o("v-card");return f(),F(n,{class:"border border-opacity-50 elevation-4",height:"320px"},{default:t(()=>[e(b,{height:"300px",style:{"overflow-y":"auto"}},{default:t(()=>[(f(!0),A(N,null,z(w.value,(m,R)=>(f(),F(y,{key:R,value:m,color:"primary"},{default:t(()=>[e(C,null,{default:t(()=>[e(i,{cols:"2"},{default:t(()=>[e(K,{user:m.profil},null,8,["user"])]),_:2},1024),e(i,{cols:"6"},{default:t(()=>[e(s,{textContent:G(m.profil.displayname)},null,8,["textContent"])]),_:2},1024),e(i,{cols:"4"},{default:t(()=>[e(V,{onClick:v=>x(m),style:{"font-size":"8px"},color:"red"},{default:t(()=>[u("Supprimer")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})}}});class me{constructor(){J(this,"axios",oe("axios"))}async retrieveAll(){try{const a=await this.axios.get(`${ue}/api/users`);if(a.status===200)return a.data}catch(a){throw a}}}const fe=k("p",{class:"text-center"},"Avatar",-1),pe=k("p",{class:"text-center"},"Nom d'utilisateur",-1),we=k("hr",{class:"ma-5"},null,-1),he=M({__name:"addFriendList",setup(p){const a=_([]),l=new E,w=new me,h=_(!1);q(async()=>{await d()});async function x(i){await d(),a.value=a.value.filter(s=>s.displayname.includes(i))}async function d(){a.value=await w.retrieveAll()}async function r(i){try{const s=await l.sendFriendRequest({uuid:i});(s==null?void 0:s.status)==200&&(d(),h.value=!1,location.reload())}catch{}}return(i,s)=>{const V=o("v-btn"),C=o("v-combobox"),y=o("v-col"),b=o("v-row"),n=o("v-card-text"),m=o("v-spacer"),R=o("v-card-actions"),v=o("v-card"),g=o("v-dialog");return f(),F(g,O({width:"800px",height:"auto"},h.value),{activator:t(({props:S})=>[e(V,O(S,{width:"75%",color:"yellow",onClick:s[0]||(s[0]=$=>d())}),{default:t(()=>[u("Ajouter")]),_:2},1040)]),default:t(({isActive:S})=>[e(v,{title:"Ajouter des amis"},{default:t(()=>[e(C,{ref:"searchBar",class:"ma-5 mb-1",outlined:"",dense:"","hide-no-data":"",placeholder:"Rechecher un ami","onUpdate:search":s[1]||(s[1]=$=>x($)),rounded:"",variant:"solo","prepend-icon":"mdi-magnify"},null,512),e(b,null,{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[fe]),_:1}),e(y,{cols:"3"},{default:t(()=>[pe]),_:1}),e(y,{cols:"2"})]),_:1}),we,e(n,null,{default:t(()=>[(f(!0),A(N,null,z(a.value,$=>(f(),F(b,{class:"text-center"},{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[e(K,{user:$,onClick:s[2]||(s[2]=I=>h.value=!1)},null,8,["user"])]),_:2},1024),e(y,{cols:"3"},{default:t(()=>[u(G($.displayname),1)]),_:2},1024),e(y,{cols:"3",class:"text-end"},{default:t(()=>[e(V,{color:"green",onClick:I=>r($.uuid_user)},{default:t(()=>[u("Ajouter")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(R,null,{default:t(()=>[e(m),e(V,{text:"Fermer",onClick:$=>S.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},16)}}}),ye={key:0},be={key:1},ge={key:2},xe=M({__name:"changeUserProfilePicture",setup(p){const a=_(),l=new E,w=_(!1),h=_(!1),x=_(!1);async function d(){if(a.value)try{const r=await l.changeProfilPicture(a.value);(r==null?void 0:r.status)==200&&(w.value=!0,h.value=!1,x.value=!1,location.reload())}catch{h.value=!0,w.value=!1,x.value=!1}else x.value=!0,h.value=!1,w.value=!1}return(r,i)=>{const s=o("v-icon"),V=o("v-file-input"),C=o("v-col"),y=o("v-btn"),b=o("v-spacer"),n=o("v-card-actions"),m=o("v-row"),R=o("v-card"),v=o("v-dialog");return f(),F(v,{width:"25%"},{activator:t(({props:g})=>[e(s,O(g,{class:"mt-13"}),{default:t(()=>[u("mdi-camera")]),_:2},1040)]),default:t(({isActive:g})=>[e(R,{class:"pa-5"},{default:t(()=>[e(m,null,{default:t(()=>[e(C,{cols:"12",class:"text-center"},{default:t(()=>[e(V,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=S=>a.value=S),color:"deep-purple-accent-4",counter:"",label:"Fichier",placeholder:"Selectionner votre avatar","prepend-icon":"mdi-camera",variant:"outlined","show-size":1e3,accept:"image/png, image/jpeg"},null,8,["modelValue"]),w.value?(f(),A("p",ye,[e(s,{color:"green"},{default:t(()=>[u("mdi-check")]),_:1}),u(" Photo mise a jour ")])):T("",!0),h.value?(f(),A("p",be,[e(s,{color:"red"},{default:t(()=>[u("mdi-cancel")]),_:1}),u(" Veuiller réessayer ")])):T("",!0),x.value?(f(),A("p",ge,[e(s,{color:"red"},{default:t(()=>[u("mdi-cancel")]),_:1}),u(" Veuiller sélectionner un fichier ")])):T("",!0)]),_:1}),e(C,{cols:"8"},{default:t(()=>[e(y,{width:"50%",onClick:i[1]||(i[1]=S=>d())},{default:t(()=>[u("Changer")]),_:1})]),_:1}),e(n,null,{default:t(()=>[e(b),e(y,{text:"Fermer",onClick:S=>g.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1})}}}),ke=k("hr",null,null,-1),Ce=k("p",null,"Toute les récompense disponnible",-1),$e=M({__name:"showAllAward",setup(p){const a=_(),l=new ie;return q(async()=>{a.value=await l.retrieveAll()}),(w,h)=>{const x=o("v-col"),d=o("v-row");return f(),F(d,{class:"ma-10"},{default:t(()=>[e(x,{cols:"12"},{default:t(()=>[ke,Ce]),_:1}),(f(!0),A(N,null,z(a.value,(r,i)=>(f(),F(Q,{class:"ma-1",key:i,award:r},null,8,["award"]))),128))]),_:1})}}}),j=p=>(le("data-v-241dd87c"),p=p(),ne(),p),Re=j(()=>k("h4",null,"Information",-1)),Ve=j(()=>k("hr",null,null,-1)),Se=j(()=>k("p",null,"Mes récompense",-1)),Ae=j(()=>k("p",null,"Paramètres",-1)),Fe=j(()=>k("h2",null,"Méthode de correction",-1)),Pe={style:{"font-weight":"14",color:"black"}},Ie=M({__name:"ProfilPage",setup(p){const a=new E,l=_(),w=_(null),h=_(),x=_(!1),d=_(["Rétroaction du nombre de mauvaise réponse","Rétroaction du nombre de bonne réponse","Rétroaction des explications de mes mauvaises réponses"]),r=_(!1),i=_(),s=_();q(async()=>{var b,n,m,R;if(l.value=await a.retrieveOne(),h.value=await a.retrieveAllAwards((b=l.value)==null?void 0:b.awards_href),(n=l.value)!=null&&n.uuid_user&&localStorage.getItem((m=l.value)==null?void 0:m.uuid_user)){const v=parseInt(localStorage.getItem((R=l.value)==null?void 0:R.uuid_user)||"");C.value.value=d.value[v-1]}});const{handleSubmit:V}=_e({validationSchema:{selectCorrection(b){return b?(x.value=!0,!0):(x.value=!1,"Choisir une option.")}}}),C=de("selectCorrection"),y=V(b=>{var m;const n=_(1);switch(b.selectCorrection){case"Rétroaction du nombre de mauvaise réponse":n.value=1;break;case"Rétroaction du nombre de bonne réponse":n.value=2;break;case"Rétroaction des explications de mes mauvaises réponses":n.value=3;break}localStorage.setItem(((m=l.value)==null?void 0:m.uuid_user)||"",String(n.value)),i.value="Action réussie.",s.value="green",r.value=!0});return(b,n)=>{const m=o("v-img"),R=o("v-avatar"),v=o("v-col"),g=o("v-row"),S=o("v-icon"),$=o("v-btn"),I=o("v-card"),D=o("v-tab"),W=o("v-tabs"),L=o("v-window-item"),X=o("v-select"),Y=o("v-window"),Z=o("v-snackbar");return f(),A(N,null,[e(ce,null,{default:t(()=>[e(I,{class:"ma-5 pa-5 elevation-5",height:"85%"},{default:t(()=>[e(g,{height:"30%"},{default:t(()=>[e(v,{cols:"4",class:"ma-auto"},{default:t(()=>[e(R,{size:"200px"},{default:t(()=>{var c;return[e(m,{src:(c=l.value)==null?void 0:c.avatar_href,class:"pa-16"},{default:t(()=>[e(xe)]),_:1},8,["src"])]}),_:1})]),_:1}),e(v,{cols:"8"},{default:t(()=>[e(I,{color:"grey-darken-3",class:"ma-2 elevation-7"},{default:t(()=>[Re,e(g,null,{default:t(()=>[e(v,{cols:"6"},{default:t(()=>{var c,P,H;return[e(B,{information:(c=l.value)==null?void 0:c.firstname,label:"Prenom"},null,8,["information"]),e(B,{information:(P=l.value)==null?void 0:P.birthday,label:"Date de naissance"},null,8,["information"]),e(B,{information:(H=l.value)==null?void 0:H.email,label:"Adresse courriel"},null,8,["information"])]}),_:1}),e(v,{cols:"6"},{default:t(()=>{var c,P;return[e(B,{information:(c=l.value)==null?void 0:c.lastname,label:"Nom "},null,8,["information"]),e(B,{information:(P=l.value)==null?void 0:P.displayname,label:"Nom d'utilisateur"},null,8,["information"])]}),_:1})]),_:1}),e(g,null,{default:t(()=>[e($,{class:"align-start-in-row ml-10 mb-5",color:"light-blue-accent-3"},{default:t(()=>[e(S,null,{default:t(()=>[u("mdi-pencil")]),_:1}),u("Mofifier")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{class:"ma-auto"},{default:t(()=>[e(v,{cols:"12"},{default:t(()=>[e(I,{class:"elevation-5 pa-4"},{default:t(()=>[k("div",null,[e(g,null,{default:t(()=>[e(v,{cols:"2"},{default:t(()=>[e(W,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=c=>w.value=c),direction:"vertical",color:"primary"},{default:t(()=>[e(D,{value:"award"},{default:t(()=>[u("Récompense")]),_:1}),e(D,{value:"friends"},{default:t(()=>[u("Amis(e)s")]),_:1}),e(D,{value:"notification"},{default:t(()=>[u("Notification")]),_:1}),e(D,{value:"setting"},{default:t(()=>[u("Paramètre")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(v,{cols:"10"},{default:t(()=>[e(Y,{modelValue:w.value,"onUpdate:modelValue":n[3]||(n[3]=c=>w.value=c)},{default:t(()=>[e(L,{value:"award"},{default:t(()=>[e(I,{flat:""},{default:t(()=>[e(g,{class:"ml-8 mt-5 mr-8"},{default:t(()=>[e(v,{cols:"12"},{default:t(()=>[Ve,Se]),_:1}),(f(!0),A(N,null,z(h.value,(c,P)=>(f(),F(Q,{key:P,award:c},null,8,["award"]))),128))]),_:1}),e(g,null,{default:t(()=>[e($e)]),_:1})]),_:1})]),_:1}),e(L,{value:"friends",class:"ma-5"},{default:t(()=>[e(g,null,{default:t(()=>[e(v,{cols:"10"},{default:t(()=>[e(ve)]),_:1}),e(v,null,{default:t(()=>[e(he)]),_:1})]),_:1})]),_:1}),e(L,{value:"notification",class:"ma-5"},{default:t(()=>[e(re)]),_:1}),e(L,{value:"setting",class:"ma-5"},{default:t(()=>[Ae,Fe,k("form",{onSubmit:n[2]||(n[2]=ae((...c)=>U(y)&&U(y)(...c),["prevent"]))},[e(X,{modelValue:U(C).value.value,"onUpdate:modelValue":n[1]||(n[1]=c=>U(C).value.value=c),items:d.value,transition:"slide-x-transition","error-messages":U(C).errorMessage.value,label:"Méthode de correction ..."},null,8,["modelValue","items","error-messages"]),e($,{type:"submit"},{default:t(()=>[u("Confirmer")]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=c=>r.value=c),color:s.value,"multi-line":""},{actions:t(()=>[e($,{color:"red",variant:"text",onClick:n[4]||(n[4]=c=>r.value=!1)},{default:t(()=>[u(" Close ")]),_:1})]),default:t(()=>[k("span",Pe,G(i.value),1)]),_:1},8,["modelValue","color"])],64)}}});const Le=se(Ie,[["__scopeId","data-v-241dd87c"]]);export{Le as default};
