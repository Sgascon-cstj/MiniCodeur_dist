import{D as pb}from"./DefaultLayout-bfd4b0b8.js";import{d as Hg,z as jh,x as gb,A as Ob,o as Vg,B as Lr,C as mb,D as vb,E as yb,r as Al,b as Hn,c as qh,l as Fd,w as Kt,f as gr,h as Ml,g as oi,u as bb,e as Sb,s as xb,F as wb,t as kb}from"./index-3512041f.js";import"./UserRepository-6a763eae.js";class Ze{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Fi.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Fi.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new go(this),l=new go(e);for(let a=t,u=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(u+=s.value.length,s.done||u>=i)return!0}}iter(e=1){return new go(this,e)}iterRange(e,t=this.length){return new Kg(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Jg(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ze.empty:e.length<=32?new rt(e):Fi.from(rt.split(e,[]))}}class rt extends Ze{constructor(e,t=Qb(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let l=0;;l++){let a=this.text[l],u=s+a.length;if((t?i:u)>=e)return new Cb(s,u,i,a);s=u+1,i++}}decompose(e,t,i,s){let l=e<=0&&t>=this.length?this:new rt(Hd(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=i.pop(),u=ta(l.text,a.text.slice(),0,l.length);if(u.length<=32)i.push(new rt(u,a.length+l.length));else{let d=u.length>>1;i.push(new rt(u.slice(0,d)),new rt(u.slice(d)))}}else i.push(l)}replace(e,t,i){if(!(i instanceof rt))return super.replace(e,t,i);let s=ta(this.text,ta(i.text,Hd(this.text,0,e)),t),l=this.length+i.length-(t-e);return s.length<=32?new rt(s,l):Fi.from(rt.split(s,[]),l)}sliceString(e,t=this.length,i=`
`){let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let u=this.text[a],d=l+u.length;l>e&&a&&(s+=i),e<d&&t>l&&(s+=u.slice(Math.max(0,e-l),t-l)),l=d+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let l of e)i.push(l),s+=l.length+1,i.length==32&&(t.push(new rt(i,s)),i=[],s=-1);return s>-1&&t.push(new rt(i,s)),t}}class Fi extends Ze{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let l=0;;l++){let a=this.children[l],u=s+a.length,d=i+a.lines-1;if((t?d:u)>=e)return a.lineInner(e,t,i,s);s=u+1,i=d+1}}decompose(e,t,i,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let u=this.children[l],d=a+u.length;if(e<=d&&t>=a){let g=s&((a<=e?1:0)|(d>=t?2:0));a>=e&&d<=t&&!g?i.push(u):u.decompose(e-a,t-a,i,g)}a=d+1}}replace(e,t,i){if(i.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],u=l+a.length;if(e>=l&&t<=u){let d=a.replace(e-l,t-l,i),g=this.lines-a.lines+d.lines;if(d.lines<g>>5-1&&d.lines>g>>5+1){let O=this.children.slice();return O[s]=d,new Fi(O,this.length-(t-e)+i.length)}return super.replace(l,u,d)}l=u+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let u=this.children[l],d=a+u.length;a>e&&l&&(s+=i),e<d&&t>a&&(s+=u.sliceString(e-a,t-a,i)),a=d+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Fi))return 0;let i=0,[s,l,a,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==u)return i;let d=this.children[s],g=e.children[l];if(d!=g)return i+d.scanIdentical(g,t);i+=d.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let k of e)i+=k.lines;if(i<32){let k=[];for(let C of e)C.flatten(k);return new rt(k,t)}let s=Math.max(32,i>>5),l=s<<1,a=s>>1,u=[],d=0,g=-1,O=[];function v(k){let C;if(k.lines>l&&k instanceof Fi)for(let R of k.children)v(R);else k.lines>a&&(d>a||!d)?(x(),u.push(k)):k instanceof rt&&d&&(C=O[O.length-1])instanceof rt&&k.lines+C.lines<=32?(d+=k.lines,g+=k.length+1,O[O.length-1]=new rt(C.text.concat(k.text),C.length+1+k.length)):(d+k.lines>s&&x(),d+=k.lines,g+=k.length+1,O.push(k))}function x(){d!=0&&(u.push(O.length==1?O[0]:Fi.from(O,g)),g=-1,d=O.length=0)}for(let k of e)v(k);return x(),u.length==1?u[0]:new Fi(u,t)}}Ze.empty=new rt([""],0);function Qb(n){let e=-1;for(let t of n)e+=t.length+1;return e}function ta(n,e,t=0,i=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=i;l++){let u=n[l],d=s+u.length;d>=t&&(d>i&&(u=u.slice(0,i-s)),s<t&&(u=u.slice(t-s)),a?(e[e.length-1]+=u,a=!1):e.push(u)),s=d+1}return e}function Hd(n,e,t){return ta(n,[""],e,t)}class go{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof rt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],l=this.offsets[i],a=l>>1,u=s instanceof rt?s.text.length:s.children.length;if(a==(t>0?u:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof rt){let d=s.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,d.length>Math.max(0,e))return this.value=e==0?d:t>0?d.slice(e):d.slice(0,d.length-e),this;e-=d.length}else{let d=s.children[a+(t<0?-1:0)];e>d.length?(e-=d.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(d),this.offsets.push(t>0?1:(d instanceof rt?d.text.length:d.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Kg{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new go(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Jg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=function(){return this.iter()},go.prototype[Symbol.iterator]=Kg.prototype[Symbol.iterator]=Jg.prototype[Symbol.iterator]=function(){return this});class Cb{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}let ns="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<ns.length;n++)ns[n]+=ns[n-1];function $b(n){for(let e=1;e<ns.length;e+=2)if(ns[e]>n)return ns[e-1]<=n;return!1}function Vd(n){return n>=127462&&n<=127487}const Kd=8205;function Dt(n,e,t=!0,i=!0){return(t?eO:Pb)(n,e,i)}function eO(n,e,t){if(e==n.length)return e;e&&tO(n.charCodeAt(e))&&iO(n.charCodeAt(e-1))&&e--;let i=Ct(n,e);for(e+=yi(i);e<n.length;){let s=Ct(n,e);if(i==Kd||s==Kd||t&&$b(s))e+=yi(s),i=s;else if(Vd(s)){let l=0,a=e-2;for(;a>=0&&Vd(Ct(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function Pb(n,e,t){for(;e>0;){let i=eO(n,e-2,t);if(i<e)return i;e--}return 0}function tO(n){return n>=56320&&n<57344}function iO(n){return n>=55296&&n<56320}function Ct(n,e){let t=n.charCodeAt(e);if(!iO(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return tO(i)?(t-55296<<10)+(i-56320)+65536:t}function vu(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function yi(n){return n<65536?1:2}const wf=/\r\n?|\n/;var Pt=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Pt||(Pt={}));class er{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(i,s,l),s+=l):s+=a,i+=l}}iterChangedRanges(e,t=!1){kf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new er(e)}composeDesc(e){return this.empty?e:e.empty?this:rO(this,e)}mapDesc(e,t=!1){return e.empty?this:Qf(this,e,t)}mapPos(e,t=-1,i=Pt.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let u=this.sections[a++],d=this.sections[a++],g=s+u;if(d<0){if(g>e)return l+(e-s);l+=u}else{if(i!=Pt.Simple&&g>=e&&(i==Pt.TrackDel&&s<e&&g>e||i==Pt.TrackBefore&&s<e||i==Pt.TrackAfter&&g>e))return null;if(g>e||g==e&&t<0&&!u)return e==s||t<0?l:l+d;l+=d}s=g}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let l=this.sections[i++],a=this.sections[i++],u=s+l;if(a>=0&&s<=t&&u>=e)return s<e&&u>t?"cover":!0;s=u}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new er(e)}static create(e){return new er(e)}}class pt extends er{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kf(this,(t,i,s,l,a)=>e=e.replace(s,s+(i-t),a),!1),e}mapDesc(e,t=!1){return Qf(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],u=t[s+1];if(u>=0){t[s]=u,t[s+1]=a;let d=s>>1;for(;i.length<d;)i.push(Ze.empty);i.push(a?e.slice(l,l+a):Ze.empty)}l+=a}return new pt(t,i)}compose(e){return this.empty?e:e.empty?this:rO(this,e,!0)}map(e,t=!1){return e.empty?this:Qf(this,e,t,!0)}iterChanges(e,t=!1){kf(this,e,t)}get desc(){return er.create(this.sections)}filter(e){let t=[],i=[],s=[],l=new yo(this);e:for(let a=0,u=0;;){let d=a==e.length?1e9:e[a++];for(;u<d||u==d&&l.len==0;){if(l.done)break e;let O=Math.min(l.len,d-u);Yt(s,O,-1);let v=l.ins==-1?-1:l.off==0?l.ins:0;Yt(t,O,v),v>0&&Er(i,t,l.text),l.forward(O),u+=O}let g=e[a++];for(;u<g;){if(l.done)break e;let O=Math.min(l.len,g-u);Yt(t,O,-1),Yt(s,O,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(O),u+=O}}return{changes:new pt(t,i),filtered:er.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],l=[],a=0,u=null;function d(O=!1){if(!O&&!s.length)return;a<t&&Yt(s,t-a,-1);let v=new pt(s,l);u=u?u.compose(v.map(u)):v,s=[],l=[],a=0}function g(O){if(Array.isArray(O))for(let v of O)g(v);else if(O instanceof pt){if(O.length!=t)throw new RangeError(`Mismatched change set length (got ${O.length}, expected ${t})`);d(),u=u?u.compose(O.map(u)):O}else{let{from:v,to:x=v,insert:k}=O;if(v>x||v<0||x>t)throw new RangeError(`Invalid change range ${v} to ${x} (in doc of length ${t})`);let C=k?typeof k=="string"?Ze.of(k.split(i||wf)):k:Ze.empty,R=C.length;if(v==x&&R==0)return;v<a&&d(),v>a&&Yt(s,v-a,-1),Yt(s,x-v,R),Er(l,s,C),a=x}}return g(e),d(!u),u}static empty(e){return new pt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,u)=>u&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;i.length<s;)i.push(Ze.empty);i[s]=Ze.of(l.slice(1)),t.push(l[0],i[s].length)}}}return new pt(t,i)}static createSet(e,t){return new pt(e,t)}}function Yt(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function Er(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Ze.empty);n.push(t)}}function kf(n,e,t){let i=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let u=n.sections[a++],d=n.sections[a++];if(d<0)s+=u,l+=u;else{let g=s,O=l,v=Ze.empty;for(;g+=u,O+=d,d&&i&&(v=v.append(i[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)u=n.sections[a++],d=n.sections[a++];e(s,g,l,O,v),s=g,l=O}}}function Qf(n,e,t,i=!1){let s=[],l=i?[]:null,a=new yo(n),u=new yo(e);for(let d=-1;;)if(a.ins==-1&&u.ins==-1){let g=Math.min(a.len,u.len);Yt(s,g,-1),a.forward(g),u.forward(g)}else if(u.ins>=0&&(a.ins<0||d==a.i||a.off==0&&(u.len<a.len||u.len==a.len&&!t))){let g=u.len;for(Yt(s,u.ins,-1);g;){let O=Math.min(a.len,g);a.ins>=0&&d<a.i&&a.len<=O&&(Yt(s,0,a.ins),l&&Er(l,s,a.text),d=a.i),a.forward(O),g-=O}u.next()}else if(a.ins>=0){let g=0,O=a.len;for(;O;)if(u.ins==-1){let v=Math.min(O,u.len);g+=v,O-=v,u.forward(v)}else if(u.ins==0&&u.len<O)O-=u.len,u.next();else break;Yt(s,g,d<a.i?a.ins:0),l&&d<a.i&&Er(l,s,a.text),d=a.i,a.forward(a.len-O)}else{if(a.done&&u.done)return l?pt.createSet(s,l):er.create(s);throw new Error("Mismatched change set lengths")}}function rO(n,e,t=!1){let i=[],s=t?[]:null,l=new yo(n),a=new yo(e);for(let u=!1;;){if(l.done&&a.done)return s?pt.createSet(i,s):er.create(i);if(l.ins==0)Yt(i,l.len,0,u),l.next();else if(a.len==0&&!a.done)Yt(i,0,a.ins,u),s&&Er(s,i,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let d=Math.min(l.len2,a.len),g=i.length;if(l.ins==-1){let O=a.ins==-1?-1:a.off?0:a.ins;Yt(i,d,O,u),s&&O&&Er(s,i,a.text)}else a.ins==-1?(Yt(i,l.off?0:l.len,d,u),s&&Er(s,i,l.textBit(d))):(Yt(i,l.off?0:l.len,a.off?0:a.ins,u),s&&!a.off&&Er(s,i,a.text));u=(l.ins>d||a.ins>=0&&a.len>d)&&(u||i.length>g),l.forward2(d),a.forward(d)}}}}class yo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ze.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ze.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class gn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new gn(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return B.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return B.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return B.range(e.anchor,e.head)}static create(e,t,i){return new gn(e,t,i)}}class B{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:B.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new B([this.main],0)}addRange(e,t=!0){return B.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,B.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new B(e.ranges.map(t=>gn.fromJSON(t)),e.main)}static single(e,t=e){return new B([B.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=i:l.from<i)return B.normalized(e.slice(),t);i=l.to}return new B(e,t)}static cursor(e,t=0,i,s){return gn.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let l=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?gn.create(t,e,48|l):gn.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let i=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let u=a.from,d=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?B.range(d,u):B.range(u,d))}}return new B(e,t)}}function nO(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let yu=0;class re{constructor(e,t,i,s,l){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=yu++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new re(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:bu),!!e.static,e.enables)}of(e){return new ia([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ia(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ia(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function bu(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class ia{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=yu++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,u=this.type==2,d=!1,g=!1,O=[];for(let v of this.dependencies)v=="doc"?d=!0:v=="selection"?g=!0:((t=e[v.id])!==null&&t!==void 0?t:1)&1||O.push(e[v.id]);return{create(v){return v.values[a]=i(v),1},update(v,x){if(d&&x.docChanged||g&&(x.docChanged||x.selection)||Cf(v,O)){let k=i(v);if(u?!Jd(k,v.values[a],s):!s(k,v.values[a]))return v.values[a]=k,1}return 0},reconfigure:(v,x)=>{let k,C=x.config.address[l];if(C!=null){let R=da(x,C);if(this.dependencies.every(M=>M instanceof re?x.facet(M)===v.facet(M):M instanceof yt?x.field(M,!1)==v.field(M,!1):!0)||(u?Jd(k=i(v),R,s):s(k=i(v),R)))return v.values[a]=R,0}else k=i(v);return v.values[a]=k,1}}}}function Jd(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function Cf(n,e){let t=!1;for(let i of e)Oo(n,i)&1&&(t=!0);return t}function Tb(n,e,t){let i=t.map(d=>n[d.id]),s=t.map(d=>d.type),l=i.filter(d=>!(d&1)),a=n[e.id]>>1;function u(d){let g=[];for(let O=0;O<i.length;O++){let v=da(d,i[O]);if(s[O]==2)for(let x of v)g.push(x);else g.push(v)}return e.combine(g)}return{create(d){for(let g of i)Oo(d,g);return d.values[a]=u(d),1},update(d,g){if(!Cf(d,l))return 0;let O=u(d);return e.compare(O,d.values[a])?0:(d.values[a]=O,1)},reconfigure(d,g){let O=Cf(d,i),v=g.config.facets[e.id],x=g.facet(e);if(v&&!O&&bu(t,v))return d.values[a]=x,0;let k=u(d);return e.compare(k,x)?(d.values[a]=x,0):(d.values[a]=k,1)}}}const ep=re.define({static:!0});class yt{constructor(e,t,i,s,l){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new yt(yu++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ep).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let l=i.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(i.values[t]=a,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,ep.of({field:this,create:e})]}get extension(){return this}}const cn={lowest:4,low:3,default:2,high:1,highest:0};function to(n){return e=>new sO(e,n)}const xn={highest:to(cn.highest),high:to(cn.high),default:to(cn.default),low:to(cn.low),lowest:to(cn.lowest)};class sO{constructor(e,t){this.inner=e,this.prec=t}}class Ro{of(e){return new $f(this,e)}reconfigure(e){return Ro.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class $f{constructor(e,t){this.compartment=e,this.inner=t}}class ca{constructor(e,t,i,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],l=Object.create(null),a=new Map;for(let x of Zb(e,t,a))x instanceof yt?s.push(x):(l[x.facet.id]||(l[x.facet.id]=[])).push(x);let u=Object.create(null),d=[],g=[];for(let x of s)u[x.id]=g.length<<1,g.push(k=>x.slot(k));let O=i==null?void 0:i.config.facets;for(let x in l){let k=l[x],C=k[0].facet,R=O&&O[x]||[];if(k.every(M=>M.type==0))if(u[C.id]=d.length<<1|1,bu(R,k))d.push(i.facet(C));else{let M=C.combine(k.map(D=>D.value));d.push(i&&C.compare(M,i.facet(C))?i.facet(C):M)}else{for(let M of k)M.type==0?(u[M.id]=d.length<<1|1,d.push(M.value)):(u[M.id]=g.length<<1,g.push(D=>M.dynamicSlot(D)));u[C.id]=g.length<<1,g.push(M=>Tb(M,C,k))}}let v=g.map(x=>x(u));return new ca(e,a,v,u,d,l)}}function Zb(n,e,t){let i=[[],[],[],[],[]],s=new Map;function l(a,u){let d=s.get(a);if(d!=null){if(d<=u)return;let g=i[d].indexOf(a);g>-1&&i[d].splice(g,1),a instanceof $f&&t.delete(a.compartment)}if(s.set(a,u),Array.isArray(a))for(let g of a)l(g,u);else if(a instanceof $f){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let g=e.get(a.compartment)||a.inner;t.set(a.compartment,g),l(g,u)}else if(a instanceof sO)l(a.inner,a.prec);else if(a instanceof yt)i[u].push(a),a.provides&&l(a.provides,u);else if(a instanceof ia)i[u].push(a),a.facet.extensions&&l(a.facet.extensions,cn.default);else{let g=a.extension;if(!g)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(g,u)}}return l(n,cn.default),i.reduce((a,u)=>a.concat(u))}function Oo(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function da(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const oO=re.define(),lO=re.define({combine:n=>n.some(e=>e),static:!0}),aO=re.define({combine:n=>n.length?n[0]:void 0,static:!0}),hO=re.define(),fO=re.define(),uO=re.define(),cO=re.define({combine:n=>n.length?n[0]:!1});class br{constructor(e,t){this.type=e,this.value=t}static define(){return new Ab}}class Ab{of(e){return new br(this,e)}}class Mb{constructor(e){this.map=e}of(e){return new Oe(this,e)}}class Oe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Oe(this.type,t)}is(e){return this.type==e}static define(e={}){return new Mb(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let l=s.map(t);l&&i.push(l)}return i}}Oe.reconfigure=Oe.define();Oe.appendConfig=Oe.define();class Ot{constructor(e,t,i,s,l,a){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,i&&nO(i,t.newLength),l.some(u=>u.type==Ot.time)||(this.annotations=l.concat(Ot.time.of(Date.now())))}static create(e,t,i,s,l,a){return new Ot(e,t,i,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ot.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ot.time=br.define();Ot.userEvent=br.define();Ot.addToHistory=br.define();Ot.remote=br.define();function Yb(n,e){let t=[];for(let i=0,s=0;;){let l,a;if(i<n.length&&(s==e.length||e[s]>=n[i]))l=n[i++],a=n[i++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function dO(n,e,t){var i;let s,l,a;return t?(s=e.changes,l=pt.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:Oe.mapEffects(n.effects,s).concat(Oe.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Pf(n,e,t){let i=e.selection,s=ss(e.annotations);return e.userEvent&&(s=s.concat(Ot.userEvent.of(e.userEvent))),{changes:e.changes instanceof pt?e.changes:pt.of(e.changes||[],t,n.facet(aO)),selection:i&&(i instanceof B?i:B.single(i.anchor,i.head)),effects:ss(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function pO(n,e,t){let i=Pf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;i=dO(i,Pf(n,e[l],a?i.changes.newLength:n.doc.length),a)}let s=Ot.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Lb(t?Rb(s):s)}function Rb(n){let e=n.startState,t=!0;for(let s of e.facet(hO)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:Yb(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=pt.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=Ot.create(e,s,n.selection&&n.selection.map(l),Oe.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let i=e.facet(fO);for(let s=i.length-1;s>=0;s--){let l=i[s](n);l instanceof Ot?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Ot?n=l[0]:n=pO(e,ss(l),!1)}return n}function Lb(n){let e=n.startState,t=e.facet(uO),i=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(i=dO(i,Pf(e,l,n.changes.newLength),!0))}return i==n?n:Ot.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const Db=[];function ss(n){return n==null?Db:Array.isArray(n)?n:[n]}var Ge=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Ge||(Ge={}));const Wb=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Tf;try{Tf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Xb(n){if(Tf)return Tf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Wb.test(t)))return!0}return!1}function Eb(n){return e=>{if(!/\S/.test(e))return Ge.Space;if(Xb(e))return Ge.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ge.Word;return Ge.Other}}class we{constructor(e,t,i,s,l,a){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)Oo(this,u<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Oo(this,i),da(this,i)}update(...e){return pO(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let a of e.effects)a.is(Ro.reconfigure)?(t&&(s=new Map,t.compartments.forEach((u,d)=>s.set(d,u)),t=null),s.set(a.value.compartment,a.value.extension)):a.is(Oe.reconfigure)?(t=null,i=a.value):a.is(Oe.appendConfig)&&(t=null,i=ss(i).concat(a.value));let l;t?l=e.startState.values.slice():(t=ca.resolve(i,s,this),l=new we(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(u,d)=>d.reconfigure(u,this),null).values),new we(t,e.newDoc,e.newSelection,l,(a,u)=>u.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:B.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),l=[i.range],a=ss(i.effects);for(let u=1;u<t.ranges.length;u++){let d=e(t.ranges[u]),g=this.changes(d.changes),O=g.map(s);for(let x=0;x<u;x++)l[x]=l[x].map(O);let v=s.mapDesc(g,!0);l.push(d.range.map(v)),s=s.compose(O),a=Oe.mapEffects(a,O).concat(Oe.mapEffects(ss(d.effects),v))}return{changes:s,selection:B.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof pt?e:pt.of(e,this.doc.length,this.facet(we.lineSeparator))}toText(e){return Ze.of(e.split(this.facet(we.lineSeparator)||wf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Oo(this,t),da(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof yt&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let l in i)if(Object.prototype.hasOwnProperty.call(e,l)){let a=i[l],u=e[l];s.push(a.init(d=>a.spec.fromJSON(u,d)))}}return we.create({doc:e.doc,selection:B.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=ca.resolve(e.extensions||[],new Map),i=e.doc instanceof Ze?e.doc:Ze.of((e.doc||"").split(t.staticFacet(we.lineSeparator)||wf)),s=e.selection?e.selection instanceof B?e.selection:B.single(e.selection.anchor,e.selection.head):B.single(0);return nO(s,i.length),t.staticFacet(lO)||(s=s.asSingle()),new we(t,i,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(we.tabSize)}get lineBreak(){return this.facet(we.lineSeparator)||`
`}get readOnly(){return this.facet(cO)}phrase(e,...t){for(let i of this.facet(we.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?i:t[l-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let l of this.facet(oO))for(let a of l(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return Eb(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-i,u=e-i;for(;a>0;){let d=Dt(t,a,!1);if(l(t.slice(d,a))!=Ge.Word)break;a=d}for(;u<s;){let d=Dt(t,u);if(l(t.slice(u,d))!=Ge.Word)break;u=d}return a==u?null:B.range(a+i,u+i)}}we.allowMultipleSelections=lO;we.tabSize=re.define({combine:n=>n.length?n[0]:4});we.lineSeparator=aO;we.readOnly=cO;we.phrases=re.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});we.languageData=oO;we.changeFilter=hO;we.transactionFilter=fO;we.transactionExtender=uO;Ro.reconfigure=Oe.define();function tr(n,e,t={}){let i={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],u=i[l];if(u===void 0)i[l]=a;else if(!(u===a||a===void 0))if(Object.hasOwnProperty.call(t,l))i[l]=t[l](u,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class yn{eq(e){return this==e}range(e,t=e){return Zf.create(e,t,this)}}yn.prototype.startSide=yn.prototype.endSide=0;yn.prototype.point=!1;yn.prototype.mapMode=Pt.TrackDel;let Zf=class gO{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new gO(e,t,i)}};function Af(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Su{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let l=i?this.to:this.from;for(let a=s,u=l.length;;){if(a==u)return a;let d=a+u>>1,g=l[d]-e||(i?this.value[d].endSide:this.value[d].startSide)-t;if(d==a)return g>=0?a:u;g>=0?u=d:a=d+1}}between(e,t,i,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let i=[],s=[],l=[],a=-1,u=-1;for(let d=0;d<this.value.length;d++){let g=this.value[d],O=this.from[d]+e,v=this.to[d]+e,x,k;if(O==v){let C=t.mapPos(O,g.startSide,g.mapMode);if(C==null||(x=k=C,g.startSide!=g.endSide&&(k=t.mapPos(O,g.endSide),k<x)))continue}else if(x=t.mapPos(O,g.startSide),k=t.mapPos(v,g.endSide),x>k||x==k&&g.startSide>0&&g.endSide<=0)continue;(k-x||g.endSide-g.startSide)<0||(a<0&&(a=x),g.point&&(u=Math.max(u,k-x)),i.push(g),s.push(x-a),l.push(k-a))}return{mapped:i.length?new Su(s,l,i,u):null,pos:a}}}class Ye{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Ye(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(Af)),this.isEmpty)return t.length?Ye.of(t):this;let u=new OO(this,null,-1).goto(0),d=0,g=[],O=new _r;for(;u.value||d<t.length;)if(d<t.length&&(u.from-t[d].from||u.startSide-t[d].value.startSide)>=0){let v=t[d++];O.addInner(v.from,v.to,v.value)||g.push(v)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(d==t.length||this.chunkEnd(u.chunkIndex)<t[d].from)&&(!a||s>this.chunkEnd(u.chunkIndex)||l<this.chunkPos[u.chunkIndex])&&O.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!a||s>u.to||l<u.from||a(u.from,u.to,u.value))&&(O.addInner(u.from,u.to,u.value)||g.push(Zf.create(u.from,u.to,u.value))),u.next());return O.finishInner(this.nextLayer.isEmpty&&!g.length?Ye.empty:this.nextLayer.update({add:g,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let a=0;a<this.chunk.length;a++){let u=this.chunkPos[a],d=this.chunk[a],g=e.touchesRange(u,u+d.length);if(g===!1)s=Math.max(s,d.maxPoint),t.push(d),i.push(e.mapPos(u));else if(g===!0){let{mapped:O,pos:v}=d.map(u,e);O&&(s=Math.max(s,O.maxPoint),t.push(O),i.push(v))}}let l=this.nextLayer.map(e);return t.length==0?l:new Ye(i,t,l||Ye.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return bo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return bo.from(e).goto(t)}static compare(e,t,i,s,l=-1){let a=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=l),u=t.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=l),d=tp(a,u,i),g=new io(a,d,l),O=new io(u,d,l);i.iterGaps((v,x,k)=>ip(g,v,O,x,k,s)),i.empty&&i.length==0&&ip(g,0,O,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=1e9-1);let l=e.filter(O=>!O.isEmpty&&t.indexOf(O)<0),a=t.filter(O=>!O.isEmpty&&e.indexOf(O)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let u=tp(l,a),d=new io(l,u,0).goto(i),g=new io(a,u,0).goto(i);for(;;){if(d.to!=g.to||!Mf(d.active,g.active)||d.point&&(!g.point||!d.point.eq(g.point)))return!1;if(d.to>s)return!0;d.next(),g.next()}}static spans(e,t,i,s,l=-1){let a=new io(e,null,l).goto(t),u=t,d=a.openStart;for(;;){let g=Math.min(a.to,i);if(a.point){let O=a.activeForPoint(a.to),v=a.pointFrom<t?O.length+1:Math.min(O.length,d);s.point(u,g,a.point,O,v,a.pointRank),d=Math.min(a.openEnd(g),O.length)}else g>u&&(s.span(u,g,a.active,d),d=a.openEnd(g));if(a.to>i)return d+(a.point&&a.to>i?1:0);u=a.to,a.next()}}static of(e,t=!1){let i=new _r;for(let s of e instanceof Zf?[e]:t?Ib(e):e)i.add(s.from,s.to,s.value);return i.finish()}}Ye.empty=new Ye([],[],null,-1);function Ib(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Af(e,i)>0)return n.slice().sort(Af);e=i}return n}Ye.empty.nextLayer=Ye.empty;class _r{finishChunk(e){this.chunks.push(new Su(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new _r)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ye.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ye.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function tp(n,e,t){let i=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&i.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let u=i.get(l.chunk[a]);u!=null&&(t?t.mapPos(u):u)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(u,u+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class OO{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class bo{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&s.push(new OO(a,t,i,l));return s.length==1?s[0]:new bo(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Gh(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Gh(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Gh(this.heap,0)}}}function Gh(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class io{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=bo.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Yl(this.active,e),Yl(this.activeTo,e),Yl(this.activeRank,e),this.minActive=rp(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=l;)t++;Rl(this.active,t,i),Rl(this.activeTo,t,s),Rl(this.activeRank,t,l),e&&Rl(e,t,this.cursor.from),this.minActive=rp(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Yl(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function ip(n,e,t,i,s,l){n.goto(e),t.goto(i);let a=i+s,u=i,d=i-e;for(;;){let g=n.to+d-t.to||n.endSide-t.endSide,O=g<0?n.to+d:t.to,v=Math.min(O,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Mf(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(u,v,n.point,t.point):v>u&&!Mf(n.active,t.active)&&l.compareRange(u,v,n.active,t.active),O>a)break;u=O,g<=0&&n.next(),g>=0&&t.next()}}function Mf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Yl(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function Rl(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function rp(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function Os(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Dt(n,s));return i}function Yf(n,e,t,i){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=Dt(n,s)}return i===!0?-1:n.length}const Rf="ͼ",np=typeof Symbol>"u"?"__"+Rf:Symbol.for(Rf),Lf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class jr{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,u,d,g){let O=[],v=/^@(\w+)\b/.exec(a[0]),x=v&&v[1]=="keyframes";if(v&&u==null)return d.push(a[0]+";");for(let k in u){let C=u[k];if(/&/.test(k))l(k.split(/,\s*/).map(R=>a.map(M=>R.replace(/&/,M))).reduce((R,M)=>R.concat(M)),C,d);else if(C&&typeof C=="object"){if(!v)throw new RangeError("The value of a property ("+k+") should be a primitive value.");l(s(k),C,O,x)}else C!=null&&O.push(k.replace(/_.*/,"").replace(/[A-Z]/g,R=>"-"+R.toLowerCase())+": "+C+";")}(O.length||x)&&d.push((i&&!v&&!g?a.map(i):a).join(", ")+" {"+O.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=sp[np]||1;return sp[np]=e+1,Rf+e.toString(36)}static mount(e,t,i){let s=e[Lf],l=i&&i.nonce;s?l&&s.setNonce(l):s=new Nb(e,l),s.mount(Array.isArray(t)?t:[t])}}let op=new Map;class Nb{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=op.get(i);if(l)return e.adoptedStyleSheets=[l.sheet,...e.adoptedStyleSheets],e[Lf]=l;this.sheet=new s.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],op.set(i,this)}else{this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let l=e.head||e;l.insertBefore(this.styleTag,l.firstChild)}this.modules=[],e[Lf]=this}mount(e){let t=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let a=e[l],u=this.modules.indexOf(a);if(u<s&&u>-1&&(this.modules.splice(u,1),s--,u=-1),u==-1){if(this.modules.splice(s++,0,a),t)for(let d=0;d<a.rules.length;d++)t.insertRule(a.rules[d],i++)}else{for(;s<u;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(!t){let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var qr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},So={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Bb=typeof navigator<"u"&&/Mac/.test(navigator.platform),Ub=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $t=0;$t<10;$t++)qr[48+$t]=qr[96+$t]=String($t);for(var $t=1;$t<=24;$t++)qr[$t+111]="F"+$t;for(var $t=65;$t<=90;$t++)qr[$t]=String.fromCharCode($t+32),So[$t]=String.fromCharCode($t);for(var Fh in qr)So.hasOwnProperty(Fh)||(So[Fh]=qr[Fh]);function zb(n){var e=Bb&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Ub&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?So:qr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function pa(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Df(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function _b(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function ra(n,e){if(!e.anchorNode)return!1;try{return Df(n,e.anchorNode)}catch{return!1}}function us(n){return n.nodeType==3?bn(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function ga(n,e,t,i){return t?lp(n,e,t,i,-1)||lp(n,e,t,i,1):!1}function xo(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function lp(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Or(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=xo(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Or(n):0}else return!1}}function Or(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Xa(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function jb(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function qb(n,e,t,i,s,l,a,u){let d=n.ownerDocument,g=d.defaultView||window;for(let O=n,v=!1;O&&!v;)if(O.nodeType==1){let x,k=O==d.body,C=1,R=1;if(k)x=jb(g);else{if(/^(fixed|sticky)$/.test(getComputedStyle(O).position)&&(v=!0),O.scrollHeight<=O.clientHeight&&O.scrollWidth<=O.clientWidth){O=O.assignedSlot||O.parentNode;continue}let E=O.getBoundingClientRect();C=E.width/O.offsetWidth,R=E.height/O.offsetHeight,x={left:E.left,right:E.left+O.clientWidth*C,top:E.top,bottom:E.top+O.clientHeight*R}}let M=0,D=0;if(s=="nearest")e.top<x.top?(D=-(x.top-e.top+a),t>0&&e.bottom>x.bottom+D&&(D=e.bottom-x.bottom+D+a)):e.bottom>x.bottom&&(D=e.bottom-x.bottom+a,t<0&&e.top-D<x.top&&(D=-(x.top+D-e.top+a)));else{let E=e.bottom-e.top,F=x.bottom-x.top;D=(s=="center"&&E<=F?e.top+E/2-F/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-F+a)-x.top}if(i=="nearest"?e.left<x.left?(M=-(x.left-e.left+l),t>0&&e.right>x.right+M&&(M=e.right-x.right+M+l)):e.right>x.right&&(M=e.right-x.right+l,t<0&&e.left<x.left+M&&(M=-(x.left+M-e.left+l))):M=(i=="center"?e.left+(e.right-e.left)/2-(x.right-x.left)/2:i=="start"==u?e.left-l:e.right-(x.right-x.left)+l)-x.left,M||D)if(k)g.scrollBy(M,D);else{let E=0,F=0;if(D){let z=O.scrollTop;O.scrollTop+=D/R,F=(O.scrollTop-z)*R}if(M){let z=O.scrollLeft;O.scrollLeft+=M/C,E=(O.scrollLeft-z)*C}e={left:e.left-E,top:e.top-F,right:e.right-E,bottom:e.bottom-F},E&&Math.abs(E-M)<1&&(i="nearest"),F&&Math.abs(F-D)<1&&(s="nearest")}if(k)break;O=O.assignedSlot||O.parentNode}else if(O.nodeType==11)O=O.host;else break}function Gb(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class Fb{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Or(t):0),i,Math.min(e.focusOffset,i?Or(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let Vn=null;function mO(n){if(n.setActive)return n.setActive();if(Vn)return n.focus(Vn);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Vn==null?{get preventScroll(){return Vn={preventScroll:!0},!0}}:void 0),!Vn){Vn=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],l=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=l&&(i.scrollLeft=l)}}}let ap;function bn(n,e,t=e){let i=ap||(ap=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function os(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,n.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Hb(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function vO(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function Vb(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Or(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=Or(t))}else{if(t==n)return!0;i=xo(t),t=t.parentNode}}function yO(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}class Rt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Rt(e.parentNode,xo(e),t)}static after(e,t){return new Rt(e.parentNode,xo(e)+1,t)}}const xu=[];class ze{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,s=null,l;for(let a of this.children){if(a.flags&7){if(!a.dom&&(l=s?s.nextSibling:i.firstChild)){let u=ze.get(l);(!u||!u.parent&&u.canReuseDOM(a))&&a.reuseDOM(l)}a.sync(e,t),a.flags&=-8}if(l=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&l!=a.dom&&(t.written=!0),a.dom.parentNode==i)for(;l&&l!=a.dom;)l=hp(l);else i.insertBefore(a.dom,l);s=a.dom}for(l=s?s.nextSibling:i.firstChild,l&&t&&t.node==i&&(t.written=!0);l;)l=hp(l)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=Or(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ze.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,l=0;;s++){let a=this.children[s];if(a.dom==i)return l;l+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,l=-1,a=-1,u=-1;for(let d=0,g=i,O=i;d<this.children.length;d++){let v=this.children[d],x=g+v.length;if(g<e&&x>t)return v.domBoundsAround(e,t,g);if(x>=e&&s==-1&&(s=d,l=g),g>t&&v.dom.parentNode==this.dom){a=d,u=O;break}O=x,g=x+v.breakAfter}return{from:l,to:u<0?i+this.length:u,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=xu){this.markDirty();for(let s=e;s<t;s++){let l=this.children[s];l.parent==this&&l.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new bO(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,s,l,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}ze.prototype.breakAfter=0;function hp(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class bO{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function SO(n,e,t,i,s,l,a,u,d){let{children:g}=n,O=g.length?g[e]:null,v=l.length?l[l.length-1]:null,x=v?v.breakAfter:a;if(!(e==i&&O&&!a&&!x&&l.length<2&&O.merge(t,s,l.length?v:null,t==0,u,d))){if(i<g.length){let k=g[i];k&&(s<k.length||k.breakAfter&&(v!=null&&v.breakAfter))?(e==i&&(k=k.split(s),s=0),!x&&v&&k.merge(0,s,v,!0,0,d)?l[l.length-1]=k:((s||k.children.length&&!k.children[0].length)&&k.merge(0,s,null,!1,0,d),l.push(k))):k!=null&&k.breakAfter&&(v?v.breakAfter=1:a=1),i++}for(O&&(O.breakAfter=a,t>0&&(!a&&l.length&&O.merge(t,O.length,l[0],!1,u,0)?O.breakAfter=l.shift().breakAfter:(t<O.length||O.children.length&&O.children[O.children.length-1].length==0)&&O.merge(t,O.length,null,!1,u,0),e++));e<i&&l.length;)if(g[i-1].become(l[l.length-1]))i--,l.pop(),d=l.length?0:u;else if(g[e].become(l[0]))e++,l.shift(),u=l.length?0:d;else break;!l.length&&e&&i<g.length&&!g[e-1].breakAfter&&g[i].merge(0,0,g[e-1],!1,u,d)&&e--,(e<i||l.length)&&n.replaceChildren(e,i,l)}}function xO(n,e,t,i,s,l){let a=n.childCursor(),{i:u,off:d}=a.findPos(t,1),{i:g,off:O}=a.findPos(e,-1),v=e-t;for(let x of i)v+=x.length;n.length+=v,SO(n,g,O,u,d,i,0,s,l)}let ui=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Wf=typeof document<"u"?document:{documentElement:{style:{}}};const Xf=/Edge\/(\d+)/.exec(ui.userAgent),wO=/MSIE \d/.test(ui.userAgent),Ef=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ui.userAgent),Ea=!!(wO||Ef||Xf),fp=!Ea&&/gecko\/(\d+)/i.test(ui.userAgent),Hh=!Ea&&/Chrome\/(\d+)/.exec(ui.userAgent),up="webkitFontSmoothing"in Wf.documentElement.style,kO=!Ea&&/Apple Computer/.test(ui.vendor),cp=kO&&(/Mobile\/\w+/.test(ui.userAgent)||ui.maxTouchPoints>2);var ne={mac:cp||/Mac/.test(ui.platform),windows:/Win/.test(ui.platform),linux:/Linux|X11/.test(ui.platform),ie:Ea,ie_version:wO?Wf.documentMode||6:Ef?+Ef[1]:Xf?+Xf[1]:0,gecko:fp,gecko_version:fp?+(/Firefox\/(\d+)/.exec(ui.userAgent)||[0,0])[1]:0,chrome:!!Hh,chrome_version:Hh?+Hh[1]:0,ios:cp,android:/Android\b/.test(ui.userAgent),webkit:up,safari:kO,webkit_version:up?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Wf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Kb=256;class mr extends ze{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof mr)||this.length-(t-e)+i.length>Kb||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new mr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Rt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Jb(this.dom,e,t)}}class vr extends ze{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(vO(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,l,a){return i&&(!(i instanceof vr&&i.mark.eq(this.mark))||e&&l<=0||t<this.length&&a<=0)?!1:(xO(this,e,t,i?i.children:[],l-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,l=0;for(let u of this.children){let d=i+u.length;d>e&&t.push(i<e?u.split(e-i):u),s<0&&i>=e&&(s=l),i=d,l++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new vr(this.mark,t,a)}domAtPos(e){return QO(this,e)}coordsAt(e,t){return $O(this,e,t)}}function Jb(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,l=e,a=0;e==0&&t<0||e==i&&t>=0?ne.chrome||ne.gecko||(e?(s--,a=1):l<i&&(l++,a=-1)):t<0?s--:l<i&&l++;let u=bn(n,s,l).getClientRects();if(!u.length)return null;let d=u[(a?a<0:t>=0)?0:u.length-1];return ne.safari&&!a&&d.width==0&&(d=Array.prototype.find.call(u,g=>g.width)||d),a?Xa(d,a<0):d||null}class Ir extends ze{static create(e,t,i){return new Ir(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Ir.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,s,l,a){return i&&(!(i instanceof Ir)||!this.widget.compare(i.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Ir&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ze.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Ze.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Rt.before(this.dom):Rt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let u=a?s.length-1:0;l=s[u],!(e>0?u==0:u==s.length-1||l.top<l.bottom);u+=a?-1:1);return Xa(l,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class cs extends ze{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof cs&&e.side==this.side}split(){return new cs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Rt.before(this.dom):Rt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ze.empty}get isHidden(){return!0}}mr.prototype.children=Ir.prototype.children=cs.prototype.children=xu;function QO(n,e){let t=n.dom,{children:i}=n,s=0;for(let l=0;s<i.length;s++){let a=i[s],u=l+a.length;if(!(u==l&&a.getSide()<=0)){if(e>l&&e<u&&a.dom.parentNode==t)return a.domAtPos(e-l);if(e<=l)break;l=u}}for(let l=s;l>0;l--){let a=i[l-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let l=s;l<i.length;l++){let a=i[l];if(a.dom.parentNode==t)return a.domAtPos(0)}return new Rt(t,0)}function CO(n,e,t){let i,{children:s}=n;t>0&&e instanceof vr&&s.length&&(i=s[s.length-1])instanceof vr&&i.mark.eq(e.mark)?CO(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function $O(n,e,t){let i=null,s=-1,l=null,a=-1;function u(g,O){for(let v=0,x=0;v<g.children.length&&x<=O;v++){let k=g.children[v],C=x+k.length;C>=O&&(k.children.length?u(k,O-x):(!l||l.isHidden&&t>0)&&(C>O||x==C&&k.getSide()>0)?(l=k,a=O-x):(x<O||x==C&&k.getSide()<0&&!k.isHidden)&&(i=k,s=O-x)),x=C}}u(n,e);let d=(t<0?i:l)||i||l;return d?d.coordsAt(Math.max(0,d==i?s:a),t):eS(n)}function eS(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=us(e);return t[t.length-1]||null}function If(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const dp=Object.create(null);function wu(n,e,t){if(n==e)return!0;n||(n=dp),e||(e=dp);let i=Object.keys(n),s=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let l of i)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function Nf(n,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return i}function tS(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class dt extends ze{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,l,a){if(i){if(!(i instanceof dt))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),xO(this,e,t,i?i.children:[],l,a),!0}split(e){let t=new dt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let l=i;l<this.children.length;l++)t.append(this.children[l],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){wu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){CO(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=If(t,this.attrs||{})),i&&(this.attrs=If({class:i},this.attrs||{}))}domAtPos(e){return QO(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(vO(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Nf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&ze.get(s)instanceof vr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=ze.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!ne.ios||!this.children.some(l=>l instanceof mr))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof mr)||/[^ -~]/.test(i.text))return null;let s=us(i.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=$O(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=i.bottom-i.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let a=(l-s.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(e){return!1}covers(){return!0}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let l=e.children[i],a=s+l.length;if(a>=t){if(l instanceof dt)return l;if(a>t)break}s=a+l.breakAfter}return null}}class Br extends ze{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,l,a){return i&&(!(i instanceof Br)||!this.widget.compare(i.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Rt.before(this.dom):Rt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Br(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return xu}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ze.empty}domBoundsAround(){return null}become(e){return e instanceof Br&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class ir{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}destroy(e){}}var jt=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(jt||(jt={}));class he extends yn{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Lo(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Gr(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:l,end:a}=PO(e,t);i=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new Gr(e,i,s,t,e.widget||null,!0)}static line(e){return new Do(e)}static set(e,t=!1){return Ye.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}he.none=Ye.empty;class Lo extends he{constructor(e){let{start:t,end:i}=PO(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Lo&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&wu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Lo.prototype.point=!1;class Do extends he{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Do&&this.spec.class==e.spec.class&&wu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Do.prototype.mapMode=Pt.TrackBefore;Do.prototype.point=!0;class Gr extends he{constructor(e,t,i,s,l,a){super(t,i,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?Pt.TrackBefore:Pt.TrackAfter:Pt.TrackDel}get type(){return this.startSide!=this.endSide?jt.WidgetRange:this.startSide<=0?jt.WidgetBefore:jt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Gr&&iS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Gr.prototype.point=!0;function PO(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function iS(n,e){return n==e||!!(n&&e&&n.compare(e))}function Bf(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class mo{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Br&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new dt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ll(new cs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Br)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:a,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Ll(new mr(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,l,a){if(this.disallowBlockEffectsFor[a]&&i instanceof Gr){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=t-e;if(i instanceof Gr)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Br(i.widget||new pp("div"),u,i));else{let d=Ir.create(i.widget||new pp("span"),u,u?0:i.startSide),g=this.atCursorPos&&!d.isEditable&&l<=s.length&&(e<t||i.startSide>0),O=!d.isEditable&&(e<t||l>s.length||i.startSide<=0),v=this.getLine();this.pendingBuffer==2&&!g&&!d.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),g&&(v.append(Ll(new cs(1),s),l),l=s.length+Math.max(0,l-s.length)),v.append(Ll(d,s),l),this.atCursorPos=O,this.pendingBuffer=O?e<t||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,i,s,l){let a=new mo(e,t,i,l);return a.openEnd=Ye.spans(s,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Ll(n,e){for(let t of e)n=new vr(t,[n],n.length);return n}class pp extends ir{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const TO=re.define(),ZO=re.define(),AO=re.define(),MO=re.define(),Uf=re.define(),YO=re.define(),RO=re.define(),LO=re.define({combine:n=>n.some(e=>e)}),DO=re.define({combine:n=>n.some(e=>e)});class ls{constructor(e,t="nearest",i="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new ls(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ls(B.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Dl=Oe.define({map:(n,e)=>n.map(e)});function Si(n,e,t){let i=n.facet(MO);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ia=re.define({combine:n=>n.length?n[0]:!0});let rS=0;const ao=re.define();class nt{constructor(e,t,i,s,l){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.extension=l(this)}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:l,decorations:a}=t||{};return new nt(rS++,e,i,s,u=>{let d=[ao.of(u)];return a&&d.push(wo.of(g=>{let O=g.plugin(u);return O?a(O):he.none})),l&&d.push(l(u)),d})}static fromClass(e,t){return nt.define(i=>new e(i),t)}}class Vh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Si(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Si(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Si(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const WO=re.define(),ku=re.define(),wo=re.define(),Qu=re.define(),XO=re.define();function gp(n,e,t){let i=n.state.facet(XO);if(!i.length)return i;let s=i.map(a=>a instanceof Function?a(n):a),l=[];return Ye.spans(s,e,t,{point(){},span(a,u,d,g){let O=l;for(let v=d.length-1;v>=0;v--,g--){let x=d[v].spec.bidiIsolate,k;if(x!=null)if(g>0&&O.length&&(k=O[O.length-1]).to==a&&k.direction==x)k.to=u,O=k.inner;else{let C={from:a,to:u,direction:x,inner:[]};O.push(C),O=C.inner}}}}),l}const EO=re.define();function IO(n){let e=0,t=0,i=0,s=0;for(let l of n.state.facet(EO)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:i,bottom:s}}const ho=re.define();class xi{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new xi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,l=0,a=0,u=0;;s++){let d=s==e.length?null:e[s],g=a-u,O=d?d.fromB:1e9;for(;l<t.length&&t[l]<O;){let v=t[l],x=t[l+1],k=Math.max(u,v),C=Math.min(O,x);if(k<=C&&new xi(k+g,C+g,k,C).addToSet(i),x>O)break;l+=2}if(!d)return i;new xi(d.fromA,d.toA,d.fromB,d.toB).addToSet(i),a=d.toA,u=d.toB}}}class Oa{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=pt.empty(this.startState.doc.length);for(let l of i)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,u,d)=>s.push(new xi(l,a,u,d))),this.changedRanges=s}static create(e,t,i){return new Oa(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Je=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Je||(Je={}));const ko=Je.LTR,NO=Je.RTL;function BO(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const nS=BO("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),sS=BO("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zf=Object.create(null),zi=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);zf[e]=t,zf[t]=-e}function oS(n){return n<=247?nS[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?sS[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const lS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Nr{get dir(){return this.level%2?NO:ko}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,s){let l=-1;for(let a=0;a<e.length;a++){let u=e[a];if(u.from<=t&&u.to>=t){if(u.level==i)return a;(l<0||(s!=0?s<0?u.from<t:u.to>t:e[l].level>u.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function UO(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!UO(i.inner,s.inner))return!1}return!0}const Xe=[];function aS(n,e,t,i,s){for(let l=0;l<=i.length;l++){let a=l?i[l-1].to:e,u=l<i.length?i[l].from:t,d=l?256:s;for(let g=a,O=d,v=d;g<u;g++){let x=oS(n.charCodeAt(g));x==512?x=O:x==8&&v==4&&(x=16),Xe[g]=x==4?2:x,x&7&&(v=x),O=x}for(let g=a,O=d,v=d;g<u;g++){let x=Xe[g];if(x==128)g<u-1&&O==Xe[g+1]&&O&24?x=Xe[g]=O:Xe[g]=256;else if(x==64){let k=g+1;for(;k<u&&Xe[k]==64;)k++;let C=g&&O==8||k<t&&Xe[k]==8?v==1?1:8:256;for(let R=g;R<k;R++)Xe[R]=C;g=k-1}else x==8&&v==1&&(Xe[g]=1);O=x,x&7&&(v=x)}}}function hS(n,e,t,i,s){let l=s==1?2:1;for(let a=0,u=0,d=0;a<=i.length;a++){let g=a?i[a-1].to:e,O=a<i.length?i[a].from:t;for(let v=g,x,k,C;v<O;v++)if(k=zf[x=n.charCodeAt(v)])if(k<0){for(let R=u-3;R>=0;R-=3)if(zi[R+1]==-k){let M=zi[R+2],D=M&2?s:M&4?M&1?l:s:0;D&&(Xe[v]=Xe[zi[R]]=D),u=R;break}}else{if(zi.length==189)break;zi[u++]=v,zi[u++]=x,zi[u++]=d}else if((C=Xe[v])==2||C==1){let R=C==s;d=R?0:1;for(let M=u-3;M>=0;M-=3){let D=zi[M+2];if(D&2)break;if(R)zi[M+2]|=2;else{if(D&4)break;zi[M+2]|=4}}}}}function fS(n,e,t,i){for(let s=0,l=i;s<=t.length;s++){let a=s?t[s-1].to:n,u=s<t.length?t[s].from:e;for(let d=a;d<u;){let g=Xe[d];if(g==256){let O=d+1;for(;;)if(O==u){if(s==t.length)break;O=t[s++].to,u=s<t.length?t[s].from:e}else if(Xe[O]==256)O++;else break;let v=l==1,x=(O<e?Xe[O]:i)==1,k=v==x?v?1:2:i;for(let C=O,R=s,M=R?t[R-1].to:n;C>d;)C==M&&(C=t[--R].from,M=R?t[R-1].to:n),Xe[--C]=k;d=O}else l=g,d++}}}function _f(n,e,t,i,s,l,a){let u=i%2?2:1;if(i%2==s%2)for(let d=e,g=0;d<t;){let O=!0,v=!1;if(g==l.length||d<l[g].from){let R=Xe[d];R!=u&&(O=!1,v=R==16)}let x=!O&&u==1?[]:null,k=O?i:i+1,C=d;e:for(;;)if(g<l.length&&C==l[g].from){if(v)break e;let R=l[g];if(!O)for(let M=R.to,D=g+1;;){if(M==t)break e;if(D<l.length&&l[D].from==M)M=l[D++].to;else{if(Xe[M]==u)break e;break}}if(g++,x)x.push(R);else{R.from>d&&a.push(new Nr(d,R.from,k));let M=R.direction==ko!=!(k%2);jf(n,M?i+1:i,s,R.inner,R.from,R.to,a),d=R.to}C=R.to}else{if(C==t||(O?Xe[C]!=u:Xe[C]==u))break;C++}x?_f(n,d,C,i+1,s,x,a):d<C&&a.push(new Nr(d,C,k)),d=C}else for(let d=t,g=l.length;d>e;){let O=!0,v=!1;if(!g||d>l[g-1].to){let R=Xe[d-1];R!=u&&(O=!1,v=R==16)}let x=!O&&u==1?[]:null,k=O?i:i+1,C=d;e:for(;;)if(g&&C==l[g-1].to){if(v)break e;let R=l[--g];if(!O)for(let M=R.from,D=g;;){if(M==e)break e;if(D&&l[D-1].to==M)M=l[--D].from;else{if(Xe[M-1]==u)break e;break}}if(x)x.push(R);else{R.to<d&&a.push(new Nr(R.to,d,k));let M=R.direction==ko!=!(k%2);jf(n,M?i+1:i,s,R.inner,R.from,R.to,a),d=R.from}C=R.from}else{if(C==e||(O?Xe[C-1]!=u:Xe[C-1]==u))break;C--}x?_f(n,C,d,i+1,s,x,a):C<d&&a.push(new Nr(C,d,k)),d=C}}function jf(n,e,t,i,s,l,a){let u=e%2?2:1;aS(n,s,l,i,u),hS(n,s,l,i,u),fS(s,l,i,u),_f(n,s,l,e,t,i,a)}function uS(n,e,t){if(!n)return[new Nr(0,0,e==NO?1:0)];if(e==ko&&!t.length&&!lS.test(n))return zO(n.length);if(t.length)for(;n.length>Xe.length;)Xe[Xe.length]=256;let i=[],s=e==ko?0:1;return jf(n,s,s,t,0,n.length,i),i}function zO(n){return[new Nr(0,n,0)]}let _O="";function cS(n,e,t,i,s){var l;let a=i.head-n.from,u=-1;if(a==0){if(!s||!n.length)return null;e[0].level!=t&&(a=e[0].side(!1,t),u=0)}else if(a==n.length){if(s)return null;let x=e[e.length-1];x.level!=t&&(a=x.side(!0,t),u=e.length-1)}u<0&&(u=Nr.find(e,a,(l=i.bidiLevel)!==null&&l!==void 0?l:-1,i.assoc));let d=e[u];a==d.side(s,t)&&(d=e[u+=s?1:-1],a=d.side(!s,t));let g=s==(d.dir==t),O=Dt(n.text,a,g);if(_O=n.text.slice(Math.min(a,O),Math.max(a,O)),O!=d.side(s,t))return B.cursor(O+n.from,g?-1:1,d.level);let v=u==(s?e.length-1:0)?null:e[u+(s?1:-1)];return!v&&d.level!=t?B.cursor(s?n.to:n.from,s?-1:1,t):v&&v.level<d.level?B.cursor(v.side(!s,t)+n.from,s?1:-1,v.level):B.cursor(O+n.from,s?-1:1,d.level)}class Op extends ze{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new dt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xi(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:g,toA:O})=>O<this.minWidthFrom||g>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let s=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!yS(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?pS(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:g,to:O}=this.hasComposition;i=new xi(g,O,e.changes.mapPos(g,-1),e.changes.mapPos(O,1)).addToSet(i.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(ne.ie||ne.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,u=this.updateDeco(),d=mS(a,u,e.changes);return i=xi.extendWithRanges(i,d),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=ne.chrome||ne.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Br&&a.widget instanceof mp&&l.push(a.dom);s.updateGaps(l)}updateChildren(e,t,i){let s=i?i.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let a=s.length-1;;a--){let u=a>=0?s[a]:null;if(!u)break;let{fromA:d,toA:g,fromB:O,toB:v}=u,x,k,C,R;if(i&&i.range.fromB<v&&i.range.toB>O){let z=mo.build(this.view.state.doc,O,i.range.fromB,this.decorations,this.dynamicDecorationMap),U=mo.build(this.view.state.doc,i.range.toB,v,this.decorations,this.dynamicDecorationMap);k=z.breakAtStart,C=z.openStart,R=U.openEnd;let j=this.compositionView(i);U.breakAtStart?j.breakAfter=1:U.content.length&&j.merge(j.length,j.length,U.content[0],!1,U.openStart,0)&&(j.breakAfter=U.content[0].breakAfter,U.content.shift()),z.content.length&&j.merge(0,0,z.content[z.content.length-1],!0,0,z.openEnd)&&z.content.pop(),x=z.content.concat(j).concat(U.content)}else({content:x,breakAtStart:k,openStart:C,openEnd:R}=mo.build(this.view.state.doc,O,v,this.decorations,this.dynamicDecorationMap));let{i:M,off:D}=l.findPos(g,1),{i:E,off:F}=l.findPos(d,-1);SO(this,E,F,M,D,x,k,C,R)}i&&this.fixCompositionDOM(i)}compositionView(e){let t=new mr(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new vr(s,[t],t.length);let i=new dt;return i.append(t,0),i}fixCompositionDOM(e){let t=(l,a)=>{a.flags|=8|(a.children.some(d=>d.flags&7)?1:0),this.markedForComposition.add(a);let u=ze.get(l);u&&u!=a&&(u.dom=null),a.setDOM(l)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];t(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)i=s.childPos(i.off,1),s=s.children[i.i],t(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,l=!s&&ra(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||t||l))return;let a=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,d=this.moveToLine(this.domAtPos(u.anchor)),g=u.empty?d:this.moveToLine(this.domAtPos(u.head));if(ne.gecko&&u.empty&&!this.hasComposition&&dS(d)){let v=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(v,d.node.childNodes[d.offset]||null)),d=g=new Rt(v,0),a=!0}let O=this.view.observer.selectionRange;(a||!O.focusNode||!ga(d.node,d.offset,O.anchorNode,O.anchorOffset)||!ga(g.node,g.offset,O.focusNode,O.focusOffset))&&(this.view.observer.ignore(()=>{ne.android&&ne.chrome&&this.dom.contains(O.focusNode)&&vS(O.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let v=pa(this.view.root);if(v)if(u.empty){if(ne.gecko){let x=gS(d.node,d.offset);if(x&&x!=3){let k=qO(d.node,d.offset,x==1?1:-1);k&&(d=new Rt(k.node,k.offset))}}v.collapse(d.node,d.offset),u.bidiLevel!=null&&v.caretBidiLevel!==void 0&&(v.caretBidiLevel=u.bidiLevel)}else if(v.extend){v.collapse(d.node,d.offset);try{v.extend(g.node,g.offset)}catch{}}else{let x=document.createRange();u.anchor>u.head&&([d,g]=[g,d]),x.setEnd(g.node,g.offset),x.setStart(d.node,d.offset),v.removeAllRanges(),v.addRange(x)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(d,g)),this.impreciseAnchor=d.precise?null:new Rt(O.anchorNode,O.anchorOffset),this.impreciseHead=g.precise?null:new Rt(O.focusNode,O.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=pa(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let a=dt.find(this,t.head);if(!a)return;let u=a.posAtStart;if(t.head==u||t.head==u+a.length)return;let d=this.coordsAt(t.head,-1),g=this.coordsAt(t.head,1);if(!d||!g||d.bottom>g.top)return;let O=this.domAtPos(t.head+t.assoc);i.collapse(O.node,O.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let v=e.observer.selectionRange;e.docView.posFromDOM(v.anchorNode,v.anchorOffset)!=t.from&&i.collapse(s,l)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let s=e.offset;!i&&s<t.childNodes.length;s++){let l=ze.get(t.childNodes[s]);l instanceof dt&&(i=l.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let l=ze.get(t.childNodes[s]);l instanceof dt&&(i=l.domAtPos(l.length))}return i?new Rt(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ze.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof dt)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,s=0;for(let l=this.length,a=this.children.length-1;a>=0;a--){let u=this.children[a],d=l-u.breakAfter,g=d-u.length;if(d<e)break;g<=e&&(g<e||u.covers(-1))&&(d>e||u.covers(1))&&(!i||u instanceof dt&&!(i instanceof dt&&t>=0))&&(i=u,s=g),l=g}return i?i.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),s=this.children[t];if(!(s instanceof dt))return null;for(;s.children.length;){let{i:u,off:d}=s.childPos(i,1);for(;;u++){if(u==s.children.length)return null;if((s=s.children[u]).length)break}i=d}if(!(s instanceof mr))return null;let l=Dt(s.text,i);if(l==i)return null;let a=bn(s.dom,i,l).getClientRects();for(let u=0;u<a.length;u++){let d=a[u];if(u==a.length-1||d.top<d.bottom&&d.left<d.right)return d}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,d=this.view.textDirection==Je.LTR;for(let g=0,O=0;O<this.children.length;O++){let v=this.children[O],x=g+v.length;if(x>s)break;if(g>=i){let k=v.dom.getBoundingClientRect();if(t.push(k.height),a){let C=v.dom.lastChild,R=C?us(C):[];if(R.length){let M=R[R.length-1],D=d?M.right-k.left:k.right-M.left;D>u&&(u=D,this.minWidth=l,this.minWidthFrom=g,this.minWidthTo=x)}}}g=x+v.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Je.RTL:Je.LTR}measureTextSize(){for(let l of this.children)if(l instanceof dt){let a=l.measureTextSize();if(a)return a}let e=document.createElement("div"),t,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=us(e.firstChild)[0];t=e.getBoundingClientRect().height,i=l?l.width/27:7,s=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new bO(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.length;if(a>i){let u=(t.lineBlockAt(a).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(he.replace({widget:new mp(u),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!l)break;i=l.to+1}return he.set(e)}updateDeco(){let e=this.view.state.facet(wo).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let g=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=g.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let l=IO(this.view),a={left:i.left-l.left,top:i.top-l.top,right:i.right+l.right,bottom:i.bottom+l.bottom},{offsetWidth:u,offsetHeight:d}=this.view.scrollDOM;qb(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,u),-u),Math.max(Math.min(e.yMargin,d),-d),this.view.textDirection==Je.LTR)}}function dS(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class mp extends ir{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function jO(n,e){let t=n.observer.selectionRange,i=t.focusNode&&qO(t.focusNode,t.focusOffset,0);if(!i)return null;let s=e-i.offset;return{from:s,to:s+i.node.nodeValue.length,node:i.node}}function pS(n,e,t){let i=jO(n,t);if(!i)return null;let{node:s,from:l,to:a}=i,u=s.nodeValue;if(/[\n\r]/.test(u)||n.state.doc.sliceString(i.from,i.to)!=u)return null;let d=e.invertedDesc,g=new xi(d.mapPos(l),d.mapPos(a),l,a),O=[];for(let v=s.parentNode;;v=v.parentNode){let x=ze.get(v);if(x instanceof vr)O.push({node:v,deco:x.mark});else{if(x instanceof dt||v.nodeName=="DIV"&&v.parentNode==n.contentDOM)return{range:g,text:s,marks:O,line:v};if(v!=n.contentDOM)O.push({node:v,deco:new Lo({inclusive:!0,attributes:tS(v),tagName:v.tagName.toLowerCase()})});else return null}}}function qO(n,e,t){if(t<=0)for(let i=n,s=e;;){if(i.nodeType==3)return{node:i,offset:s};if(i.nodeType==1&&s>0)i=i.childNodes[s-1],s=Or(i);else break}if(t>=0)for(let i=n,s=e;;){if(i.nodeType==3)return{node:i,offset:s};if(i.nodeType==1&&s<i.childNodes.length&&t>=0)i=i.childNodes[s],s=0;else break}return null}function gS(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let OS=class{constructor(){this.changes=[]}compareRange(e,t){Bf(e,t,this.changes)}comparePoint(e,t){Bf(e,t,this.changes)}};function mS(n,e,t){let i=new OS;return Ye.compare(n,e,t,i),i.changes}function vS(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function yS(n,e){let t=!1;return e&&n.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}function bS(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return B.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,u=l;t<0?a=Dt(s.text,l,!1):u=Dt(s.text,l);let d=i(s.text.slice(a,u));for(;a>0;){let g=Dt(s.text,a,!1);if(i(s.text.slice(g,a))!=d)break;a=g}for(;u<s.length;){let g=Dt(s.text,u);if(i(s.text.slice(u,g))!=d)break;u=g}return B.range(a+s.from,u+s.from)}function SS(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function xS(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Kh(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function vp(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function yp(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function qf(n,e,t){let i,s,l,a,u=!1,d,g,O,v;for(let C=n.firstChild;C;C=C.nextSibling){let R=us(C);for(let M=0;M<R.length;M++){let D=R[M];s&&Kh(s,D)&&(D=vp(yp(D,s.bottom),s.top));let E=SS(e,D),F=xS(t,D);if(E==0&&F==0)return C.nodeType==3?bp(C,e,t):qf(C,e,t);if(!i||a>F||a==F&&l>E){i=C,s=D,l=E,a=F;let z=F?t<D.top?-1:1:E?e<D.left?-1:1:0;u=!z||(z>0?M<R.length-1:M>0)}E==0?t>D.bottom&&(!O||O.bottom<D.bottom)?(d=C,O=D):t<D.top&&(!v||v.top>D.top)&&(g=C,v=D):O&&Kh(O,D)?O=yp(O,D.bottom):v&&Kh(v,D)&&(v=vp(v,D.top))}}if(O&&O.bottom>=t?(i=d,s=O):v&&v.top<=t&&(i=g,s=v),!i)return{node:n,offset:0};let x=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return bp(i,x,t);if(u&&i.contentEditable!="false")return qf(i,x,t);let k=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:k}}function bp(n,e,t){let i=n.nodeValue.length,s=-1,l=1e9,a=0;for(let u=0;u<i;u++){let d=bn(n,u,u+1).getClientRects();for(let g=0;g<d.length;g++){let O=d[g];if(O.top==O.bottom)continue;a||(a=e-O.left);let v=(O.top>t?O.top-t:t-O.bottom)-1;if(O.left-1<=e&&O.right+1>=e&&v<l){let x=e>=(O.left+O.right)/2,k=x;if((ne.chrome||ne.gecko)&&bn(n,u).getBoundingClientRect().left==O.right&&(k=!x),v<=0)return{node:n,offset:u+(k?1:0)};s=u+(k?1:0),l=v}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function GO(n,e,t,i=-1){var s,l;let a=n.contentDOM.getBoundingClientRect(),u=a.top+n.viewState.paddingTop,d,{docHeight:g}=n.viewState,{x:O,y:v}=e,x=v-u;if(x<0)return 0;if(x>g)return n.state.doc.length;for(let z=n.viewState.heightOracle.textHeight/2,U=!1;d=n.elementAtHeight(x),d.type!=jt.Text;)for(;x=i>0?d.bottom+z:d.top-z,!(x>=0&&x<=g);){if(U)return t?null:0;U=!0,i=-i}v=u+x;let k=d.from;if(k<n.viewport.from)return n.viewport.from==0?0:t?null:Sp(n,a,d,O,v);if(k>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Sp(n,a,d,O,v);let C=n.dom.ownerDocument,R=n.root.elementFromPoint?n.root:C,M=R.elementFromPoint(O,v);M&&!n.contentDOM.contains(M)&&(M=null),M||(O=Math.max(a.left+1,Math.min(a.right-1,O)),M=R.elementFromPoint(O,v),M&&!n.contentDOM.contains(M)&&(M=null));let D,E=-1;if(M&&((s=n.docView.nearest(M))===null||s===void 0?void 0:s.isEditable)!=!1){if(C.caretPositionFromPoint){let z=C.caretPositionFromPoint(O,v);z&&({offsetNode:D,offset:E}=z)}else if(C.caretRangeFromPoint){let z=C.caretRangeFromPoint(O,v);z&&({startContainer:D,startOffset:E}=z,(!n.contentDOM.contains(D)||ne.safari&&wS(D,E,O)||ne.chrome&&kS(D,E,O))&&(D=void 0))}}if(!D||!n.docView.dom.contains(D)){let z=dt.find(n.docView,k);if(!z)return x>d.top+d.height/2?d.to:d.from;({node:D,offset:E}=qf(z.dom,O,v))}let F=n.docView.nearest(D);if(!F)return null;if(F.isWidget&&((l=F.dom)===null||l===void 0?void 0:l.nodeType)==1){let z=F.dom.getBoundingClientRect();return e.y<z.top||e.y<=z.bottom&&e.x<=(z.left+z.right)/2?F.posAtStart:F.posAtEnd}else return F.localPosFromDOM(D,E)+F.posAtStart}function Sp(n,e,t,i,s){let l=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let u=n.viewState.heightOracle.textHeight,d=Math.floor((s-t.top-(n.defaultLineHeight-u)*.5)/u);l+=d*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+Yf(a,l,n.state.tabSize)}function wS(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return bn(n,i-1,i).getBoundingClientRect().left>t}function kS(n,e,t){if(e!=0)return!1;for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let i=n.nodeType==1?n.getBoundingClientRect():bn(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Gf(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==jt.Text))return i}return t}function QS(n,e,t,i){let s=Gf(n,e.head),l=!i||s.type!=jt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),u=n.textDirectionAt(s.from),d=n.posAtCoords({x:t==(u==Je.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(d!=null)return B.cursor(d,t?-1:1)}return B.cursor(t?s.to:s.from,t?-1:1)}function xp(n,e,t,i){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let u=e,d=null;;){let g=cS(s,l,a,u,t),O=_O;if(!g){if(s.number==(t?n.state.doc.lines:1))return u;O=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),g=B.cursor(t?s.from:s.to)}if(d){if(!d(O))return u}else{if(!i)return g;d=i(O)}u=g}}function CS(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return l=>{let a=i(l);return s==Ge.Space&&(s=a),s==a}}function $S(n,e,t,i){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return B.cursor(s,e.assoc);let a=e.goalColumn,u,d=n.contentDOM.getBoundingClientRect(),g=n.coordsAtPos(s,e.assoc||-1),O=n.documentTop;if(g)a==null&&(a=g.left-d.left),u=l<0?g.top:g.bottom;else{let k=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(d.right-d.left,n.defaultCharacterWidth*(s-k.from))),u=(l<0?k.top:k.bottom)+O}let v=d.left+a,x=i??n.viewState.heightOracle.textHeight>>1;for(let k=0;;k+=10){let C=u+(x+k)*l,R=GO(n,{x:v,y:C},!1,l);if(C<d.top||C>d.bottom||(l<0?R<s:R>s)){let M=n.docView.coordsForChar(R),D=!M||C<M.top?-1:1;return B.cursor(R,D,void 0,a)}}}function na(n,e,t){for(;;){let i=0;for(let s of n)s.between(e-1,e+1,(l,a,u)=>{if(e>l&&e<a){let d=i||t||(e-l<a-e?-1:1);e=d<0?l:a,i=d}});if(!i)return e}}function Jh(n,e,t){let i=na(n.state.facet(Qu).map(s=>s(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:B.cursor(i,i<t.from?1:-1)}class PS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ne.safari&&e.contentDOM.addEventListener("input",()=>null),ne.gecko&&zS(e.contentDOM.ownerDocument)}handleEvent(e){!DS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=TS(e),i=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,u=i[l];u&&a!=!u.handlers.length&&(s.removeEventListener(l,this.handleEvent),u=null),u||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in i)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&HO.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),ne.android&&ne.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ne.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=FO.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||ZS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,os(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ne.safari&&!ne.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function wp(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(s){Si(t.state,s)}}}function TS(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec;if(s&&s.domEventHandlers)for(let l in s.domEventHandlers){let a=s.domEventHandlers[l];a&&t(l).handlers.push(wp(i.value,a))}if(s&&s.domEventObservers)for(let l in s.domEventObservers){let a=s.domEventObservers[l];a&&t(l).observers.push(wp(i.value,a))}}for(let i in Zi)t(i).handlers.push(Zi[i]);for(let i in Ai)t(i).observers.push(Ai[i]);return e}const FO=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ZS="dthko",HO=[16,17,18,20,91,92,224,225],Wl=6;function Xl(n){return Math.max(0,n)*.7+8}function AS(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class MS{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=Gb(e.contentDOM),this.atoms=e.state.facet(Qu).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(we.allowMultipleSelections)&&YS(e,t),this.dragging=LS(e,t)&&em(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&AS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,s=0,l=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},a=IO(this.view);e.clientX-a.left<=l.left+Wl?i=-Xl(l.left-e.clientX):e.clientX+a.right>=l.right-Wl&&(i=Xl(e.clientX-l.right)),e.clientY-a.top<=l.top+Wl?s=-Xl(l.top-e.clientY):e.clientY+a.bottom>=l.bottom-Wl&&(s=Xl(e.clientY-l.bottom)),this.setScrollSpeed(i,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],l=null;if(s.empty){let a=na(this.atoms,s.from,0);a!=s.from&&(l=B.cursor(a,-1))}else{let a=na(this.atoms,s.from,-1),u=na(this.atoms,s.to,1);(a!=s.from||u!=s.to)&&(l=B.range(s.from==s.anchor?a:u,s.from==s.head?a:u))}l&&(t||(t=e.ranges.slice()),t[i]=l)}return t?B.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection)||i.main.assoc!=t.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function YS(n,e){let t=n.state.facet(TO);return t.length?t[0](e):ne.mac?e.metaKey:e.ctrlKey}function RS(n,e){let t=n.state.facet(ZO);return t.length?t[0](e):ne.mac?!e.altKey:!e.ctrlKey}function LS(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=pa(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function DS(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ze.get(t))&&i.ignoreEvent(e))return!1;return!0}const Zi=Object.create(null),Ai=Object.create(null),VO=ne.ie&&ne.ie_version<15||ne.ios&&ne.webkit_version<604;function WS(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),KO(n,t.value)},50)}function KO(n,e){let{state:t}=n,i,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(Ff!=null&&t.selection.ranges.every(d=>d.empty)&&Ff==l.toString()){let d=-1;i=t.changeByRange(g=>{let O=t.doc.lineAt(g.from);if(O.from==d)return{range:g};d=O.from;let v=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:O.from,insert:v},range:B.cursor(g.from+v.length)}})}else a?i=t.changeByRange(d=>{let g=l.line(s++);return{changes:{from:d.from,to:d.to,insert:g.text},range:B.cursor(d.from+g.length)}}):i=t.replaceSelection(l);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ai.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Zi.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&(n.inputState.lastEscPress=Date.now()),!1);Ai.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Ai.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Zi.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(AO))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=IS(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new MS(n,e,t,i)),i&&n.observer.ignore(()=>mO(n.contentDOM));let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function kp(n,e,t,i){if(i==1)return B.cursor(e,t);if(i==2)return bS(n.state,e,t);{let s=dt.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,u=s?s.posAtEnd:l.to;return u<n.state.doc.length&&u==l.to&&u++,B.range(a,u)}}let JO=(n,e)=>n>=e.top&&n<=e.bottom,Qp=(n,e,t)=>JO(e,t)&&n>=t.left&&n<=t.right;function XS(n,e,t,i){let s=dt.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let a=s.coordsAt(l,-1);if(a&&Qp(t,i,a))return-1;let u=s.coordsAt(l,1);return u&&Qp(t,i,u)?1:a&&JO(i,a)?-1:1}function Cp(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:XS(n,t,e.clientX,e.clientY)}}const ES=ne.ie&&ne.ie_version<=11;let $p=null,Pp=0,Tp=0;function em(n){if(!ES)return n.detail;let e=$p,t=Tp;return $p=n,Tp=Date.now(),Pp=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Pp+1)%3:1}function IS(n,e){let t=Cp(n,e),i=em(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,u){let d=Cp(n,l),g,O=kp(n,d.pos,d.bias,i);if(t.pos!=d.pos&&!a){let v=kp(n,t.pos,t.bias,i),x=Math.min(v.from,O.from),k=Math.max(v.to,O.to);O=x<O.from?B.range(x,k):B.range(k,x)}return a?s.replaceRange(s.main.extend(O.from,O.to)):u&&i==1&&s.ranges.length>1&&(g=NS(s,d.pos))?g:u?s.addRange(O):B.create([O])}}}function NS(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:s}=n.ranges[t];if(i<=e&&s>=e)return B.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Zi.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=B.range(l,a))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};Zi.dragend=n=>(n.inputState.draggedContent=null,!1);function Zp(n,e,t,i){if(!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=i&&l&&RS(n,e)?{from:l.from,to:l.to}:null,u={from:s,insert:t},d=n.state.changes(a?[a,u]:u);n.focus(),n.dispatch({changes:d,selection:{anchor:d.mapPos(s,-1),head:d.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Zi.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,l=()=>{++s==t.length&&Zp(n,e,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let u=new FileReader;u.onerror=l,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(i[a]=u.result),l()},u.readAsText(t[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Zp(n,e,i,!0),!0}return!1};Zi.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=VO?null:e.clipboardData;return t?(KO(n,t.getData("text/plain")||t.getData("text/uri-text")),!0):(WS(n),!1)};function BS(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function US(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let Ff=null;Zi.copy=Zi.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=US(n.state);if(!t&&!s)return!1;Ff=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let l=VO?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(BS(n,t),!1)};const tm=br.define();function im(n,e){let t=[];for(let i of n.facet(RO)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:tm.of(!0)}):null}function rm(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=im(n.state,e);t?n.dispatch(t):n.update([])}},10)}Ai.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),rm(n)};Ai.blur=n=>{n.observer.clearSelectionRange(),rm(n)};Ai.compositionstart=Ai.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};Ai.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ne.chrome&&ne.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50)};Ai.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Zi.beforeinput=(n,e)=>{var t;let i;if(ne.chrome&&ne.android&&(i=FO.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return!1};const Ap=new Set;function zS(n){Ap.has(n)||(Ap.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Mp=["pre-wrap","normal","pre-line","break-spaces"];class _S{constructor(e){this.lineWrapping=e,this.doc=Ze.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Mp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,l,a){let u=Mp.indexOf(e)>-1,d=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=l,d){this.heightSamples={};for(let g=0;g<a.length;g++){let O=a[g];O<0?g++:this.heightSamples[Math.floor(O*10)]=!0}}return d}}class jS{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Hi{constructor(e,t,i,s,l){this.from=e,this.length=t,this.top=i,this.height=s,this._content=l}get type(){return typeof this._content=="number"?jt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Gr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Hi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ue=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Ue||(Ue={}));const sa=.001;class qt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>sa&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return qt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let l=this,a=i.doc;for(let u=s.length-1;u>=0;u--){let{fromA:d,toA:g,fromB:O,toB:v}=s[u],x=l.lineAt(d,Ue.ByPosNoHeight,i.setDoc(t),0,0),k=x.to>=g?x:l.lineAt(g,Ue.ByPosNoHeight,i,0,0);for(v+=k.to-g,g=k.to;u>0&&x.from<=s[u-1].toA;)d=s[u-1].fromA,O=s[u-1].fromB,u--,d<x.from&&(x=l.lineAt(d,Ue.ByPosNoHeight,i,0,0));O+=x.from-d,d=x.from;let C=Cu.build(i.setDoc(a),e,O,v);l=l.replace(d,g,C)}return l.updateHeight(i,0)}static empty(){return new hi(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,l=0;for(;;)if(t==i)if(s>l*2){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),i+=1+u.break,s-=u.size}else if(l>s*2){let u=e[i];u.break?e.splice(i,1,u.left,null,u.right):e.splice(i,1,u.left,u.right),i+=2+u.break,l-=u.size}else break;else if(s<l){let u=e[t++];u&&(s+=u.size)}else{let u=e[--i];u&&(l+=u.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new qS(qt.of(e.slice(0,t)),a,qt.of(e.slice(i)))}}qt.prototype.size=1;class nm extends qt{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,s){return new Hi(s,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,s,l){return this.blockAt(0,i,s,l)}forEachLine(e,t,i,s,l,a){e<=l+this.length&&t>=l&&a(this.blockAt(0,i,s,l))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class hi extends nm{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,s){return new Hi(s,this.length,i,this.height,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof hi||s instanceof Qt&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Qt?s=new hi(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):qt.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Qt extends qt{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-i+1,a,u=0;if(e.lineWrapping){let d=Math.min(this.height,e.lineHeight*l);a=d/l,this.length>l+1&&(u=(this.height-d)/(this.length-l-1))}else a=this.height/l;return{firstLine:i,lastLine:s,perLine:a,perChar:u}}blockAt(e,t,i,s){let{firstLine:l,lastLine:a,perLine:u,perChar:d}=this.heightMetrics(t,s);if(t.lineWrapping){let g=s+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),O=t.doc.lineAt(g),v=u+O.length*d,x=Math.max(i,e-v/2);return new Hi(O.from,O.length,x,v,0)}else{let g=Math.max(0,Math.min(a-l,Math.floor((e-i)/u))),{from:O,length:v}=t.doc.line(l+g);return new Hi(O,v,i+u*g,u,0)}}lineAt(e,t,i,s,l){if(t==Ue.ByHeight)return this.blockAt(e,i,s,l);if(t==Ue.ByPosNoHeight){let{from:k,to:C}=i.doc.lineAt(e);return new Hi(k,C-k,0,0,0)}let{firstLine:a,perLine:u,perChar:d}=this.heightMetrics(i,l),g=i.doc.lineAt(e),O=u+g.length*d,v=g.number-a,x=s+u*v+d*(g.from-l-v);return new Hi(g.from,g.length,Math.max(s,Math.min(x,s+this.height-O)),O,0)}forEachLine(e,t,i,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:u,perLine:d,perChar:g}=this.heightMetrics(i,l);for(let O=e,v=s;O<=t;){let x=i.doc.lineAt(O);if(O==e){let C=x.number-u;v+=d*C+g*(e-l-C)}let k=d+g*x.length;a(new Hi(x.from,x.length,v,k,0)),v+=k,O=x.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let l=i[i.length-1];l instanceof Qt?i[i.length-1]=new Qt(l.length+s):i.push(null,new Qt(s-1))}if(e>0){let l=i[0];l instanceof Qt?i[0]=new Qt(e+l.length):i.unshift(new Qt(e-1),null)}return qt.of(i)}decomposeLeft(e,t){t.push(new Qt(e-1),null)}decomposeRight(e,t){t.push(null,new Qt(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],u=Math.max(t,s.from),d=-1;for(s.from>t&&a.push(new Qt(s.from-t-1).updateHeight(e,t));u<=l&&s.more;){let O=e.doc.lineAt(u).length;a.length&&a.push(null);let v=s.heights[s.index++];d==-1?d=v:Math.abs(v-d)>=sa&&(d=-2);let x=new hi(O,v);x.outdated=!1,a.push(x),u+=O+1}u<=l&&a.push(null,new Qt(l-u).updateHeight(e,u));let g=qt.of(a);return(d<0||Math.abs(g.height-this.height)>=sa||Math.abs(d-this.heightMetrics(e,t).perLine)>=sa)&&(e.heightChanged=!0),g}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class qS extends qt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let l=i+this.left.height;return e<l?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,i,s,l){let a=s+this.left.height,u=l+this.left.length+this.break,d=t==Ue.ByHeight?e<a:e<u,g=d?this.left.lineAt(e,t,i,s,l):this.right.lineAt(e,t,i,a,u);if(this.break||(d?g.to<u:g.from>u))return g;let O=t==Ue.ByPosNoHeight?Ue.ByPosNoHeight:Ue.ByPos;return d?g.join(this.right.lineAt(u,O,i,a,u)):this.left.lineAt(u,O,i,s,l).join(g)}forEachLine(e,t,i,s,l,a){let u=s+this.left.height,d=l+this.left.length+this.break;if(this.break)e<d&&this.left.forEachLine(e,t,i,s,l,a),t>=d&&this.right.forEachLine(e,t,i,u,d,a);else{let g=this.lineAt(d,Ue.ByPos,i,s,l);e<g.from&&this.left.forEachLine(e,g.from-1,i,s,l,a),g.to>=e&&g.from<=t&&a(g),t>g.to&&this.right.forEachLine(g.to+1,t,i,u,d,a)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let u of i)l.push(u);if(e>0&&Yp(l,a-1),t<this.length){let u=l.length;this.decomposeRight(t,l),Yp(l,u)}return qt.of(l)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?qt.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:l,right:a}=this,u=t+l.length+this.break,d=null;return s&&s.from<=t+l.length&&s.more?d=l=l.updateHeight(e,t,i,s):l.updateHeight(e,t,i),s&&s.from<=u+a.length&&s.more?d=a=a.updateHeight(e,u,i,s):a.updateHeight(e,u,i),d?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Yp(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Qt&&(i=n[e+1])instanceof Qt&&n.splice(e-1,3,new Qt(t.length+1+i.length))}const GS=5;class Cu{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof hi?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new hi(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,l=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;i.block?this.addBlock(new nm(a,s,i)):(a||l||s>=GS)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new hi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Qt(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof hi)return e;let t=new hi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof hi)&&!this.isCovered?this.nodes.push(new hi(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof hi&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let l=new Cu(i,e);return Ye.spans(t,i,s,l,0),l.finish(i)}}function FS(n,e,t){let i=new HS;return Ye.compare(n,e,t,i,0),i.changes}class HS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Bf(e,t,this.changes,5)}}function VS(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),u=Math.max(0,t.top),d=Math.min(s.innerHeight,t.bottom);for(let g=n.parentNode;g&&g!=i.body;)if(g.nodeType==1){let O=g,v=window.getComputedStyle(O);if((O.scrollHeight>O.clientHeight||O.scrollWidth>O.clientWidth)&&v.overflow!="visible"){let x=O.getBoundingClientRect();l=Math.max(l,x.left),a=Math.min(a,x.right),u=Math.max(u,x.top),d=g==n.parentNode?x.bottom:Math.min(d,x.bottom)}g=v.position=="absolute"||v.position=="fixed"?O.offsetParent:O.parentNode}else if(g.nodeType==11)g=g.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:u-(t.top+e),bottom:Math.max(u,d)-(t.top+e)}}function KS(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class ef{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],l=t[i];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return he.replace({widget:new JS(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class JS extends ir{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Rp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Lp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Je.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(ku).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new _S(t),this.stateDeco=e.facet(wo).filter(i=>typeof i!="function"),this.heightMap=qt.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle.setDoc(e.doc),[new xi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=he.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new El(l,a))}}this.viewports=e.sort((i,s)=>i.from-s.from),this.scaler=this.heightMap.height<=7e6?Lp:new i1(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:fo(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(wo).filter(O=>typeof O!="function");let s=e.changedRanges,l=xi.extendWithRanges(s,FS(i,this.stateDeco,e?e.changes:pt.empty(this.state.doc.length))),a=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),this.heightMap.height!=a&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let d=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<d.from||t.range.head>d.to)||!this.viewportIsAppropriate(d))&&(d=this.getViewport(0,t));let g=!e.changes.empty||e.flags&2||d.from!=this.viewport.from||d.to!=this.viewport.to;this.viewport=d,this.updateForViewport(),g&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(DO)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,l=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Je.RTL:Je.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),u=t.getBoundingClientRect(),d=a||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let g=0,O=0;if(u.width&&u.height){let z=u.width/t.offsetWidth,U=u.height/t.offsetHeight;(z>.995&&z<1.005||!isFinite(z)||Math.abs(u.width-t.offsetWidth)<1)&&(z=1),(U>.995&&U<1.005||!isFinite(U)||Math.abs(u.height-t.offsetHeight)<1)&&(U=1),(this.scaleX!=z||this.scaleY!=U)&&(this.scaleX=z,this.scaleY=U,g|=8,a=d=!0)}let v=(parseInt(i.paddingTop)||0)*this.scaleY,x=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=v||this.paddingBottom!=x)&&(this.paddingTop=v,this.paddingBottom=x,g|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(d=!0),this.editorWidth=e.scrollDOM.clientWidth,g|=8);let k=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=k&&(this.scrollAnchorHeight=-1,this.scrollTop=k),this.scrolledToBottom=yO(e.scrollDOM);let C=(this.printing?KS:VS)(t,this.paddingTop),R=C.top-this.pixelViewport.top,M=C.bottom-this.pixelViewport.bottom;this.pixelViewport=C;let D=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(D!=this.inView&&(this.inView=D,D&&(d=!0)),!this.inView&&!this.scrollTarget)return 0;let E=u.width;if((this.contentDOMWidth!=E||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,g|=8),d){let z=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(z)&&(a=!0),a||s.lineWrapping&&Math.abs(E-this.contentDOMWidth)>s.charWidth){let{lineHeight:U,charWidth:j,textHeight:oe}=e.docView.measureTextSize();a=U>0&&s.refresh(l,U,j,oe,E/j,z),a&&(e.docView.minWidth=0,g|=8)}R>0&&M>0?O=Math.max(R,M):R<0&&M<0&&(O=Math.min(R,M)),s.heightChanged=!1;for(let U of this.viewports){let j=U.from==this.viewport.from?z:e.docView.measureVisibleLineHeights(U);this.heightMap=(a?qt.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle,[new xi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new jS(U.from,j))}s.heightChanged&&(g|=2)}let F=!this.viewportIsAppropriate(this.viewport,O)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return F&&(this.viewport=this.getViewport(O,this.scrollTarget)),this.updateForViewport(),(g&2||F)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),g|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),g}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:u}=this,d=new El(s.lineAt(a-i*1e3,Ue.ByHeight,l,0,0).from,s.lineAt(u+(1-i)*1e3,Ue.ByHeight,l,0,0).to);if(t){let{head:g}=t.range;if(g<d.from||g>d.to){let O=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=s.lineAt(g,Ue.ByPos,l,0,0),x;t.y=="center"?x=(v.top+v.bottom)/2-O/2:t.y=="start"||t.y=="nearest"&&g<d.from?x=v.top:x=v.bottom-O,d=new El(s.lineAt(x-1e3/2,Ue.ByHeight,l,0,0).from,s.lineAt(x+O+1e3/2,Ue.ByHeight,l,0,0).to)}}return d}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new El(this.heightMap.lineAt(i,Ue.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Ue.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Ue.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,Ue.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:u}=this;return(e==0||s<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||l>=u+Math.max(10,Math.min(i,250)))&&s>a-2*1e3&&l<u+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new ef(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=Je.LTR&&!i)return[];let u=[],d=(g,O,v,x)=>{if(O-g<l)return;let k=this.state.selection.main,C=[k.from];k.empty||C.push(k.to);for(let M of C)if(M>g&&M<O){d(g,M-10,v,x),d(M+10,O,v,x);return}let R=t1(e,M=>M.from>=v.from&&M.to<=v.to&&Math.abs(M.from-g)<l&&Math.abs(M.to-O)<l&&!C.some(D=>M.from<D&&M.to>D));if(!R){if(O<v.to&&t&&i&&t.visibleRanges.some(M=>M.from<=O&&M.to>=O)){let M=t.moveToLineBoundary(B.cursor(O),!1,!0).head;M>g&&(O=M)}R=new ef(g,O,this.gapSize(v,g,O,x))}u.push(R)};for(let g of this.viewportLines){if(g.length<a)continue;let O=e1(g.from,g.to,this.stateDeco);if(O.total<a)continue;let v=this.scrollTarget?this.scrollTarget.range.head:null,x,k;if(i){let C=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,R,M;if(v!=null){let D=Nl(O,v),E=((this.visibleBottom-this.visibleTop)/2+C)/g.height;R=D-E,M=D+E}else R=(this.visibleTop-g.top-C)/g.height,M=(this.visibleBottom-g.top+C)/g.height;x=Il(O,R),k=Il(O,M)}else{let C=O.total*this.heightOracle.charWidth,R=s*this.heightOracle.charWidth,M,D;if(v!=null){let E=Nl(O,v),F=((this.pixelViewport.right-this.pixelViewport.left)/2+R)/C;M=E-F,D=E+F}else M=(this.pixelViewport.left-R)/C,D=(this.pixelViewport.right+R)/C;x=Il(O,M),k=Il(O,D)}x>g.from&&d(g.from,x,g,O),k<g.to&&d(k,g.to,g,O)}return u}gapSize(e,t,i,s){let l=Nl(s,i)-Nl(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){ef.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=he.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ye.spans(e,this.viewport.from,this.viewport.to,{span(s,l){t.push({from:s,to:l})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,l)=>s.from!=t[l].from||s.to!=t[l].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||fo(this.heightMap.lineAt(e,Ue.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return fo(this.heightMap.lineAt(this.scaler.fromDOM(e),Ue.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return fo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class El{constructor(e,t){this.from=e,this.to=t}}function e1(n,e,t){let i=[],s=n,l=0;return Ye.spans(t,n,e,{span(){},point(a,u){a>s&&(i.push({from:s,to:a}),l+=a-s),s=u}},20),s<e&&(i.push({from:s,to:e}),l+=e-s),{total:l,ranges:i}}function Il({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],u=a-l;if(i<=u)return l+i;i-=u}}function Nl(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function t1(n,e){for(let t of n)if(e(t))return t}const Lp={toDOM(n){return n},fromDOM(n){return n},scale:1};class i1{constructor(e,t,i){let s=0,l=0,a=0;this.viewports=i.map(({from:u,to:d})=>{let g=t.lineAt(u,Ue.ByPos,e,0,0).top,O=t.lineAt(d,Ue.ByPos,e,0,0).bottom;return s+=O-g,{from:u,to:d,top:g,bottom:O,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let u of this.viewports)u.domTop=a+(u.top-l)*this.scale,a=u.domBottom=u.domTop+(u.bottom-u.top),l=u.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-i)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);i=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return i+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);i=l.bottom,s=l.domBottom}}}function fo(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Hi(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(s=>fo(s,e)):n._content)}const Bl=re.define({combine:n=>n.join(" ")}),Hf=re.define({combine:n=>n.indexOf(!0)>-1}),Vf=jr.newName(),sm=jr.newName(),om=jr.newName(),lm={"&light":"."+sm,"&dark":"."+om};function Kf(n,e,t){return new jr(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const r1=Kf("."+Vf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lm),uo="￿";class n1{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(we.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=uo}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let l=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let u=ze.get(s),d=ze.get(a);(u&&d?u.breakAfter:(u?u.breakAfter:Dp(s))||Dp(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&this.lineBreak(),s=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,u;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(u=s.exec(t))&&(l=u.index,a=u[0].length),this.append(t.slice(i,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let d of this.points)d.node==e&&d.pos>this.text.length&&(d.pos-=a-1);i=l+a}}readNode(e){if(e.cmIgnore)return;let t=ze.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(s1(e,i.node,i.offset)?t:0))}}function s1(n,e,t){for(;;){if(!e||t<Or(e))return!1;if(e==n)return!0;t=xo(e)+1,e=e.parentNode}}function Dp(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class Wp{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class o1{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let u=l||a?[]:h1(e),d=new n1(u,e.state);d.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=d.text,this.newSel=f1(u,this.bounds.from)}else{let u=e.observer.selectionRange,d=l&&l.node==u.focusNode&&l.offset==u.focusOffset||!Df(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),g=a&&a.node==u.anchorNode&&a.offset==u.anchorOffset||!Df(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset);this.newSel=B.single(g,d)}}}function am(n,e){let t,{newSel:i}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:u}=e.bounds,d=s.from,g=null;(l===8||ne.android&&e.text.length<u-a)&&(d=s.to,g="end");let O=a1(n.state.doc.sliceString(a,u,uo),e.text,d-a,g);O&&(ne.chrome&&l==13&&O.toB==O.from+2&&e.text.slice(O.from,O.toB)==uo+uo&&O.toB--,t={from:a+O.from,to:a+O.toA,insert:Ze.of(e.text.slice(O.from,O.toB).split(uo))})}else i&&(!n.hasFocus&&n.state.facet(Ia)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(ne.mac||ne.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Ze.of([" "])}):ne.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Ze.of([" "])}),t){if(ne.ios&&n.inputState.flushIOSKey()||ne.android&&(t.from==s.from&&t.to==s.to&&t.insert.length==1&&t.insert.lines==2&&os(n.contentDOM,"Enter",13)||(t.from==s.from-1&&t.to==s.to&&t.insert.length==0||l==8&&t.insert.length<t.to-t.from&&t.to>s.head)&&os(n.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&t.insert.length==0&&os(n.contentDOM,"Delete",46)))return!0;let a=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let u,d=()=>u||(u=l1(n,t,i));return n.state.facet(YO).some(g=>g(n,t.from,t.to,a,d))||n.dispatch(d()),!0}else if(i&&!i.main.eq(s)){let a=!1,u="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),u=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:a,userEvent:u}),!0}else return!1}function l1(n,e,t){let i,s=n.state,l=s.selection.main;if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let u=l.from<e.from?s.sliceDoc(l.from,e.from):"",d=l.to>e.to?s.sliceDoc(e.to,l.to):"";i=s.replaceSelection(n.state.toText(u+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let u=s.changes(e),d=t&&t.main.to<=u.newLength?t.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=l.to&&e.to>=l.to-10){let g=n.state.sliceDoc(e.from,e.to),O,v=t&&jO(n,t.main.head);if(v){let C=e.insert.length-(e.to-e.from);O={from:v.from,to:v.to-C}}else O=n.state.doc.lineAt(l.head);let x=l.to-e.to,k=l.to-l.from;i=s.changeByRange(C=>{if(C.from==l.from&&C.to==l.to)return{changes:u,range:d||C.map(u)};let R=C.to-x,M=R-g.length;if(C.to-C.from!=k||n.state.sliceDoc(M,R)!=g||C.to>=O.from&&C.from<=O.to)return{range:C};let D=s.changes({from:M,to:R,insert:e.insert}),E=C.to-l.to;return{changes:D,range:d?B.range(Math.max(0,d.anchor+E),Math.max(0,d.head+E)):C.map(D)}})}else i={changes:u,selection:d&&s.selection.replaceRange(d)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:a,scrollIntoView:!0})}function a1(n,e,t,i){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,u=e.length;for(;a>0&&u>0&&n.charCodeAt(a-1)==e.charCodeAt(u-1);)a--,u--;if(i=="end"){let d=Math.max(0,l-Math.min(a,u));t-=a+d-l}if(a<l&&n.length<e.length){let d=t<=l&&t>=a?l-t:0;l-=d,u=l+(u-a),a=l}else if(u<l){let d=t<=l&&t>=u?l-t:0;l-=d,a=l+(a-u),u=l}return{from:l,toA:a,toB:u}}function h1(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new Wp(t,i)),(s!=t||l!=i)&&e.push(new Wp(s,l))),e}function f1(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?B.single(t+e,i+e):null}const u1={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},tf=ne.ie&&ne.ie_version<=11;class c1{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Fb,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(ne.ie&&ne.ie_version<=11||ne.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),tf&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(Ia)?i.root.activeElement!=this.dom:!ra(i.dom,s))return;let l=s.anchorNode&&i.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ne.ie&&ne.ie_version<=11||ne.android&&ne.chrome)&&!i.state.selection.main.empty&&s.focusNode&&ga(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ne.safari&&e.root.nodeType==11&&_b(this.dom.ownerDocument)==this.dom&&d1(this.view)||pa(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=ra(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Vb(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,u1),tf&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),tf&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&os(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&ra(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new o1(this.view,e,t,i);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=am(this.view,t);return this.view.state==i&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Xp(t,e.previousSibling||e.target.previousSibling,-1),s=Xp(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Xp(n,e,t){for(;e;){let i=ze.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function d1(n){let e=null;function t(d){d.preventDefault(),d.stopImmediatePropagation(),e=d.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,s=e.startOffset,l=e.endContainer,a=e.endOffset,u=n.docView.domAtPos(n.state.selection.main.anchor);return ga(u.node,u.offset,l,a)&&([i,s,l,a]=[l,a,i,s]),{anchorNode:i,anchorOffset:s,focusNode:l,focusOffset:a}}class te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(i=>i.forEach(s=>t(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Hb(e.parent)||document,this.viewState=new Rp(e.state||we.create(e)),e.scrollTo&&e.scrollTo.is(Dl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ao).map(i=>new Vh(i));for(let i of this.plugins)i.update(this);this.observer=new c1(this),this.inputState=new PS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Op(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let t=e.length==1&&e[0]instanceof Ot?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,l=this.state;for(let x of e){if(x.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=x.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,u=0,d=null;e.some(x=>x.annotation(tm))?(this.inputState.notifiedFocused=a,u=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,d=im(l,a),d||(u=1));let g=this.observer.delayedAndroidKey,O=null;if(g?(this.observer.clearDelayedAndroidKey(),O=this.observer.readChange(),(O&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(O=null)):this.observer.clear(),l.facet(we.phrases)!=this.state.facet(we.phrases))return this.setState(l);s=Oa.create(this,l,e),s.flags|=u;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let x of e){if(v&&(v=v.map(x.changes)),x.scrollIntoView){let{main:k}=x.state.selection;v=new ls(k.empty?k:B.cursor(k.head,k.head>k.anchor?-1:1))}for(let k of x.effects)k.is(Dl)&&(v=k.value.clip(this.state))}this.viewState.update(s,v),this.bidiCache=ma.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(ho)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(x=>x.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Bl)!=s.state.facet(Bl)&&(this.viewState.mustMeasureContent=!0),(t||i||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let x of this.state.facet(Uf))try{x(s)}catch(k){Si(this.state,k,"update listener")}(d||O)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),O&&!am(this,O)&&g.force&&os(this.contentDOM,g.key,g.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Rp(e),this.plugins=e.facet(ao).map(i=>new Vh(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Op(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ao),i=e.state.facet(ao);if(t!=i){let s=[];for(let l of i){let a=t.indexOf(l);if(a<0)s.push(new Vh(l));else{let u=this.plugins[a];u.mustUpdate=e,s.push(u)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(a<0)if(yO(i))l=-1,a=this.viewState.heightMap.height;else{let k=this.viewState.scrollAnchorAt(s);l=k.from,a=k.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let g=[];d&4||([this.measureRequests,g]=[g,this.measureRequests]);let O=g.map(k=>{try{return k.read(this)}catch(C){return Si(this.state,C),Ep}}),v=Oa.create(this,this.state,[]),x=!1;v.flags|=d,t?t.flags|=d:t=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),x=this.docView.update(v));for(let k=0;k<g.length;k++)if(O[k]!=Ep)try{let C=g[k];C.write&&C.write(O[k],this)}catch(C){Si(this.state,C)}if(x&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let C=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(C>1||C<-1){s=s+C,i.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let u of this.state.facet(Uf))u(t)}get themeClasses(){return Vf+" "+(this.state.facet(Hf)?om:sm)+" "+this.state.facet(Bl)}updateAttrs(){let e=Ip(this,WO,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ia)?"true":"false",class:"cm-content",style:`${ne.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Ip(this,ku,t);let i=this.observer.ignore(()=>{let s=Nf(this.contentDOM,this.contentAttrs,t),l=Nf(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(te.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(ho);let e=this.state.facet(te.cspNonce);jr.mount(this.root,this.styleModules.concat(r1).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Jh(this,e,xp(this,e,t,i))}moveByGroup(e,t){return Jh(this,e,xp(this,e,t,i=>CS(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return QS(this,e,t,i)}moveVertically(e,t,i){return Jh(this,e,$S(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),GO(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[Nr.find(l,e-s.from,-1,t)];return Xa(i,a.dir==Je.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(LO)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>p1)return zO(e.length);let t=this.textDirectionAt(e.from),i;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||UO(l.isolates,i=gp(this,e.from,e.to))))return l.order;i||(i=gp(this,e.from,e.to));let s=uS(e.text,t,i);return this.bidiCache.push(new ma(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ne.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{mO(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Dl.of(new ls(typeof e=="number"?B.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Dl.of(new ls(B.cursor(i.from),"start","start",i.top-e,t,!0))}static domEventHandlers(e){return nt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return nt.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=jr.newName(),s=[Bl.of(i),ho.of(Kf(`.${i}`,e))];return t&&t.dark&&s.push(Hf.of(!0)),s}static baseTheme(e){return xn.lowest(ho.of(Kf("."+Vf,e,lm)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&ze.get(i)||ze.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}te.styleModule=ho;te.inputHandler=YO;te.focusChangeEffect=RO;te.perLineTextDirection=LO;te.exceptionSink=MO;te.updateListener=Uf;te.editable=Ia;te.mouseSelectionStyle=AO;te.dragMovesSelection=ZO;te.clickAddsSelectionRange=TO;te.decorations=wo;te.atomicRanges=Qu;te.bidiIsolatedRanges=XO;te.scrollMargins=EO;te.darkTheme=Hf;te.cspNonce=re.define({combine:n=>n.length?n[0]:""});te.contentAttributes=ku;te.editorAttributes=WO;te.lineWrapping=te.contentAttributes.of({class:"cm-lineWrapping"});te.announce=Oe.define();const p1=4096,Ep={};class ma{constructor(e,t,i,s,l,a){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:Je.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&i.push(new ma(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function Ip(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let l=i[s],a=typeof l=="function"?l(n):l;a&&If(a,t)}return t}const g1=ne.mac?"mac":ne.windows?"win":ne.linux?"linux":"key";function O1(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,l,a,u;for(let d=0;d<t.length-1;++d){const g=t[d];if(/^(cmd|meta|m)$/i.test(g))u=!0;else if(/^a(lt)?$/i.test(g))s=!0;else if(/^(c|ctrl|control)$/i.test(g))l=!0;else if(/^s(hift)?$/i.test(g))a=!0;else if(/^mod$/i.test(g))e=="mac"?u=!0:l=!0;else throw new Error("Unrecognized modifier name: "+g)}return s&&(i="Alt-"+i),l&&(i="Ctrl-"+i),u&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function Ul(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const m1=xn.default(te.domEventHandlers({keydown(n,e){return fm(hm(e.state),n,e,"editor")}})),Wo=re.define({enables:m1}),Np=new WeakMap;function hm(n){let e=n.facet(Wo),t=Np.get(e);return t||Np.set(e,t=b1(e.reduce((i,s)=>i.concat(s),[]))),t}function v1(n,e,t){return fm(hm(n.state),e,n,t)}let Xr=null;const y1=4e3;function b1(n,e=g1){let t=Object.create(null),i=Object.create(null),s=(a,u)=>{let d=i[a];if(d==null)i[a]=u;else if(d!=u)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,u,d,g,O)=>{var v,x;let k=t[a]||(t[a]=Object.create(null)),C=u.split(/ (?!$)/).map(D=>O1(D,e));for(let D=1;D<C.length;D++){let E=C.slice(0,D).join(" ");s(E,!0),k[E]||(k[E]={preventDefault:!0,stopPropagation:!1,run:[F=>{let z=Xr={view:F,prefix:E,scope:a};return setTimeout(()=>{Xr==z&&(Xr=null)},y1),!0}]})}let R=C.join(" ");s(R,!1);let M=k[R]||(k[R]={preventDefault:!1,stopPropagation:!1,run:((x=(v=k._any)===null||v===void 0?void 0:v.run)===null||x===void 0?void 0:x.slice())||[]});d&&M.run.push(d),g&&(M.preventDefault=!0),O&&(M.stopPropagation=!0)};for(let a of n){let u=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let g of u){let O=t[g]||(t[g]=Object.create(null));O._any||(O._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let v in O)O[v].run.push(a.any)}let d=a[e]||a.key;if(d)for(let g of u)l(g,d,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(g,"Shift-"+d,a.shift,a.preventDefault,a.stopPropagation)}return t}function fm(n,e,t,i){let s=zb(e),l=Ct(s,0),a=yi(l)==s.length&&s!=" ",u="",d=!1,g=!1,O=!1;Xr&&Xr.view==t&&Xr.scope==i&&(u=Xr.prefix+" ",HO.indexOf(e.keyCode)<0&&(g=!0,Xr=null));let v=new Set,x=M=>{if(M){for(let D of M.run)if(!v.has(D)&&(v.add(D),D(t,e)))return M.stopPropagation&&(O=!0),!0;M.preventDefault&&(M.stopPropagation&&(O=!0),g=!0)}return!1},k=n[i],C,R;return k&&(x(k[u+Ul(s,e,!a)])?d=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ne.windows&&e.ctrlKey&&e.altKey)&&(C=qr[e.keyCode])&&C!=s?(x(k[u+Ul(C,e,!0)])||e.shiftKey&&(R=So[e.keyCode])!=s&&R!=C&&x(k[u+Ul(R,e,!1)]))&&(d=!0):a&&e.shiftKey&&x(k[u+Ul(s,e,!0)])&&(d=!0),!d&&x(k._any)&&(d=!0)),g&&(d=!0),d&&O&&e.stopPropagation(),d}class Xo{constructor(e,t,i,s,l){this.className=e,this.left=t,this.top=i,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let l=um(e);return[new Xo(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return S1(e,t,i)}}function um(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Je.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function Bp(n,e,t){let i=B.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:jt.Text}}function S1(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==Je.LTR,a=n.contentDOM,u=a.getBoundingClientRect(),d=um(n),g=a.querySelector(".cm-line"),O=g&&window.getComputedStyle(g),v=u.left+(O?parseInt(O.paddingLeft)+Math.min(0,parseInt(O.textIndent)):0),x=u.right-(O?parseInt(O.paddingRight):0),k=Gf(n,i),C=Gf(n,s),R=k.type==jt.Text?k:null,M=C.type==jt.Text?C:null;if(R&&(n.lineWrapping||k.widgetLineBreaks)&&(R=Bp(n,i,R)),M&&(n.lineWrapping||C.widgetLineBreaks)&&(M=Bp(n,s,M)),R&&M&&R.from==M.from)return E(F(t.from,t.to,R));{let U=R?F(t.from,null,R):z(k,!1),j=M?F(null,t.to,M):z(C,!0),oe=[];return(R||k).to<(M||C).from-(R&&M?1:0)||k.widgetLineBreaks>1&&U.bottom+n.defaultLineHeight/2<j.top?oe.push(D(v,U.bottom,x,j.top)):U.bottom<j.top&&n.elementAtHeight((U.bottom+j.top)/2).type==jt.Text&&(U.bottom=j.top=(U.bottom+j.top)/2),E(U).concat(oe).concat(E(j))}function D(U,j,oe,de){return new Xo(e,U-d.left,j-d.top-.01,oe-U,de-j+.01)}function E({top:U,bottom:j,horizontal:oe}){let de=[];for(let ge=0;ge<oe.length;ge+=2)de.push(D(oe[ge],U,oe[ge+1],j));return de}function F(U,j,oe){let de=1e9,ge=-1e9,pe=[];function Qe(J,T,De,Ne,Ee){let ye=n.coordsAtPos(J,J==oe.to?-2:2),Ce=n.coordsAtPos(De,De==oe.from?2:-2);!ye||!Ce||(de=Math.min(ye.top,Ce.top,de),ge=Math.max(ye.bottom,Ce.bottom,ge),Ee==Je.LTR?pe.push(l&&T?v:ye.left,l&&Ne?x:Ce.right):pe.push(!l&&Ne?v:Ce.left,!l&&T?x:ye.right))}let Ae=U??oe.from,I=j??oe.to;for(let J of n.visibleRanges)if(J.to>Ae&&J.from<I)for(let T=Math.max(J.from,Ae),De=Math.min(J.to,I);;){let Ne=n.state.doc.lineAt(T);for(let Ee of n.bidiSpans(Ne)){let ye=Ee.from+Ne.from,Ce=Ee.to+Ne.from;if(ye>=De)break;Ce>T&&Qe(Math.max(ye,T),U==null&&ye<=Ae,Math.min(Ce,De),j==null&&Ce>=I,Ee.dir)}if(T=Ne.to+1,T>=De)break}return pe.length==0&&Qe(Ae,U==null,I,j==null,n.textDirection),{top:de,bottom:ge,horizontal:pe}}function z(U,j){let oe=u.top+(j?U.top:U.bottom);return{top:oe,bottom:oe,horizontal:[]}}}function x1(n,e){return n.constructor==e.constructor&&n.eq(e)}class w1{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(oa)!=e.state.facet(oa)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let t=0,i=e.facet(oa);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!x1(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const oa=re.define();function cm(n){return[nt.define(e=>new w1(e,n)),oa.of(n)]}const dm=!ne.ios,Qo=re.define({combine(n){return tr(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function k1(n={}){return[Qo.of(n),Q1,C1,$1,DO.of(!0)]}function pm(n){return n.startState.facet(Qo)!=n.state.facet(Qo)}const Q1=cm({above:!0,markers(n){let{state:e}=n,t=e.facet(Qo),i=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty?!l||dm:t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=s.empty?s:B.cursor(s.head,s.head>s.anchor?-1:1);for(let d of Xo.forRange(n,a,u))i.push(d)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=pm(n);return t&&Up(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){Up(e.state,n)},class:"cm-cursorLayer"});function Up(n,e){e.style.animationDuration=n.facet(Qo).cursorBlinkRate+"ms"}const C1=cm({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Xo.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||pm(n)},class:"cm-selectionLayer"}),gm={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};dm&&(gm[".cm-line"].caretColor="transparent !important");const $1=xn.highest(te.theme(gm)),Om=Oe.define({map(n,e){return n==null?null:e.mapPos(n)}}),co=yt.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Om)?i.value:t,n)}}),P1=nt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(co);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(co)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(co),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(co)!=n&&this.view.dispatch({effects:Om.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function T1(){return[co,P1]}function zp(n,e,t,i,s){e.lastIndex=0;for(let l=n.iterRange(t,i),a=t,u;!l.next().done;a+=l.value.length)if(!l.lineBreak)for(;u=e.exec(l.value);)s(a+u.index,u)}function Z1(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:l}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),l=Math.min(n.state.doc.lineAt(l).to,l+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=l:i.push({from:s,to:l});return i}class A1{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:l,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(u,d,g,O)=>s(O,g,g+u[0].length,u,d);else if(typeof i=="function")this.addMatch=(u,d,g,O)=>{let v=i(u,d,g);v&&O(g,g+u[0].length,v)};else if(i)this.addMatch=(u,d,g,O)=>O(g,g+u[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=a}createDeco(e){let t=new _r,i=t.add.bind(t);for(let{from:s,to:l}of Z1(e,this.maxLength))zp(e.state.doc,this.regexp,s,l,(a,u)=>this.addMatch(u,e,a,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((l,a,u,d)=>{d>e.view.viewport.from&&u<e.view.viewport.to&&(i=Math.min(u,i),s=Math.max(d,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let l of e.visibleRanges){let a=Math.max(l.from,i),u=Math.min(l.to,s);if(u>a){let d=e.state.doc.lineAt(a),g=d.to<u?e.state.doc.lineAt(u):d,O=Math.max(l.from,d.from),v=Math.min(l.to,g.to);if(this.boundary){for(;a>d.from;a--)if(this.boundary.test(d.text[a-1-d.from])){O=a;break}for(;u<g.to;u++)if(this.boundary.test(g.text[u-g.from])){v=u;break}}let x=[],k,C=(R,M,D)=>x.push(D.range(R,M));if(d==g)for(this.regexp.lastIndex=O-d.from;(k=this.regexp.exec(d.text))&&k.index<v-d.from;)this.addMatch(k,e,k.index+d.from,C);else zp(e.state.doc,this.regexp,O,v,(R,M)=>this.addMatch(M,e,R,C));t=t.update({filterFrom:O,filterTo:v,filter:(R,M)=>R<O||M>v,add:x})}}return t}}const Jf=/x/.unicode!=null?"gu":"g",M1=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,Jf),Y1={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let rf=null;function R1(){var n;if(rf==null&&typeof document<"u"&&document.body){let e=document.body.style;rf=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return rf||!1}const la=re.define({combine(n){let e=tr(n,{render:null,specialChars:M1,addSpecialChars:null});return(e.replaceTabs=!R1())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Jf)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Jf)),e}});function L1(n={}){return[la.of(n),D1()]}let _p=null;function D1(){return _p||(_p=nt.fromClass(class{constructor(n){this.view=n,this.decorations=he.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(la)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new A1({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,l=Ct(e[0],0);if(l==9){let a=s.lineAt(i),u=t.state.tabSize,d=Os(a.text,u,i-a.from);return he.replace({widget:new I1((u-d%u)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=he.replace({widget:new E1(n,l)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(la);n.startState.facet(la)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const W1="•";function X1(n){return n>=32?W1:n==10?"␤":String.fromCharCode(9216+n)}class E1 extends ir{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=X1(this.code),i=e.state.phrase("Control character")+" "+(Y1[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let l=document.createElement("span");return l.textContent=t,l.title=i,l.setAttribute("aria-label",i),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class I1 extends ir{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function N1(){return U1}const B1=he.line({class:"cm-activeLine"}),U1=nt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(B1.range(s.from)),e=s.from)}return he.set(t)}},{decorations:n=>n.decorations});class z1 extends ir{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?us(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),s=Xa(t[0],i.direction!="rtl"),l=parseInt(i.lineHeight);return s.bottom-s.top>l*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+l}:s}ignoreEvent(){return!1}}function _1(n){return nt.fromClass(class{constructor(e){this.view=e,this.placeholder=n?he.set([he.widget({widget:new z1(n),side:1}).range(0)]):he.none}get decorations(){return this.view.state.doc.length?he.none:this.placeholder}},{decorations:e=>e.decorations})}const eu=2e3;function j1(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),l=[];if(e.off>eu||t.off>eu||e.col<0||t.col<0){let a=Math.min(e.off,t.off),u=Math.max(e.off,t.off);for(let d=i;d<=s;d++){let g=n.doc.line(d);g.length<=u&&l.push(B.range(g.from+a,g.to+u))}}else{let a=Math.min(e.col,t.col),u=Math.max(e.col,t.col);for(let d=i;d<=s;d++){let g=n.doc.line(d),O=Yf(g.text,a,n.tabSize,!0);if(O<0)l.push(B.cursor(g.to));else{let v=Yf(g.text,u,n.tabSize);l.push(B.range(g.from+O,g.from+v))}}}return l}function q1(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function jp(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,l=s>eu?-1:s==i.length?q1(n,e.clientX):Os(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:l,off:s}}function G1(n,e){let t=jp(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let l=s.changes.mapPos(s.startState.doc.line(t.line).from),a=s.state.doc.lineAt(l);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(s.changes)}},get(s,l,a){let u=jp(n,s);if(!u)return i;let d=j1(n.state,t,u);return d.length?a?B.create(d.concat(i.ranges)):B.create(d):i}}:null}function F1(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return te.mouseSelectionStyle.of((t,i)=>e(i)?G1(t,i):null)}const H1={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},V1={style:"cursor: crosshair"};function K1(n={}){let[e,t]=H1[n.key||"Alt"],i=nt.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,te.contentAttributes.of(s=>{var l;return!((l=s.plugin(i))===null||l===void 0)&&l.isDown?V1:null})]}const ro="-10000px";class mm{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(i)}update(e,t){var i;let s=e.state.facet(this.facet),l=s.filter(d=>d);if(s===this.input){for(let d of this.tooltipViews)d.update&&d.update(e);return!1}let a=[],u=t?[]:null;for(let d=0;d<l.length;d++){let g=l[d],O=-1;if(g){for(let v=0;v<this.tooltips.length;v++){let x=this.tooltips[v];x&&x.create==g.create&&(O=v)}if(O<0)a[d]=this.createTooltipView(g),u&&(u[d]=!!g.above);else{let v=a[d]=this.tooltipViews[O];u&&(u[d]=t[O]),v.update&&v.update(e)}}}for(let d of this.tooltipViews)a.indexOf(d)<0&&(d.dom.remove(),(i=d.destroy)===null||i===void 0||i.call(d));return t&&(u.forEach((d,g)=>t[g]=d),t.length=u.length),this.input=s,this.tooltips=l,this.tooltipViews=a,!0}}function J1(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const nf=re.define({combine:n=>{var e,t,i;return{position:ne.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||J1}}}),qp=new WeakMap,vm=nt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(nf);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new mm(n,$u,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(nf);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=ro,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(ne.gecko)i=s.offsetParent!=this.container.ownerDocument.body;else if(this.view.scaleX!=1||this.view.scaleY!=1)i=!0;else if(s.style.top==ro&&s.style.left=="0px"){let l=s.getBoundingClientRect();i=Math.abs(l.top+1e4)>1||Math.abs(l.left)>1}}if(i||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((s,l)=>{let a=this.manager.tooltipViews[l];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(nf).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let u of this.manager.tooltipViews)u.dom.style.position="absolute"}let{editor:t,space:i,scaleX:s,scaleY:l}=n,a=[];for(let u=0;u<this.manager.tooltips.length;u++){let d=this.manager.tooltips[u],g=this.manager.tooltipViews[u],{dom:O}=g,v=n.pos[u],x=n.size[u];if(!v||v.bottom<=Math.max(t.top,i.top)||v.top>=Math.min(t.bottom,i.bottom)||v.right<Math.max(t.left,i.left)-.1||v.left>Math.min(t.right,i.right)+.1){O.style.top=ro;continue}let k=d.arrow?g.dom.querySelector(".cm-tooltip-arrow"):null,C=k?7:0,R=x.right-x.left,M=(e=qp.get(g))!==null&&e!==void 0?e:x.bottom-x.top,D=g.offset||tx,E=this.view.textDirection==Je.LTR,F=x.width>i.right-i.left?E?i.left:i.right-x.width:E?Math.min(v.left-(k?14:0)+D.x,i.right-R):Math.max(i.left,v.left-R+(k?14:0)-D.x),z=this.above[u];!d.strictSide&&(z?v.top-(x.bottom-x.top)-D.y<i.top:v.bottom+(x.bottom-x.top)+D.y>i.bottom)&&z==i.bottom-v.bottom>v.top-i.top&&(z=this.above[u]=!z);let U=(z?v.top-i.top:i.bottom-v.bottom)-C;if(U<M&&g.resize!==!1){if(U<this.view.defaultLineHeight){O.style.top=ro;continue}qp.set(g,M),O.style.height=(M=U)/l+"px"}else O.style.height&&(O.style.height="");let j=z?v.top-M-C-D.y:v.bottom+C+D.y,oe=F+R;if(g.overlap!==!0)for(let de of a)de.left<oe&&de.right>F&&de.top<j+M&&de.bottom>j&&(j=z?de.top-M-2-C:de.bottom+C+2);if(this.position=="absolute"?(O.style.top=(j-n.parent.top)/l+"px",O.style.left=(F-n.parent.left)/s+"px"):(O.style.top=j/l+"px",O.style.left=F/s+"px"),k){let de=v.left+(E?D.x:-D.x)-(F+14-7);k.style.left=de/s+"px"}g.overlap!==!0&&a.push({left:F,top:j,right:oe,bottom:j+M}),O.classList.toggle("cm-tooltip-above",z),O.classList.toggle("cm-tooltip-below",!z),g.positioned&&g.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=ro}},{eventObservers:{scroll(){this.maybeMeasure()}}}),ex=te.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),tx={x:0,y:0},$u=re.define({enables:[vm,ex]}),va=re.define();class Pu{static create(e){return new Pu(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new mm(e,va,t=>this.createHostedView(t))}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const ix=$u.compute([va],n=>{let e=n.facet(va).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:Pu.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class rx{constructor(e,t,i,s,l){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=l,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let s,l=1;if(i instanceof Ir)s=i.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let u=e.coordsAtPos(s);if(!u||t.y<u.top||t.y>u.bottom||t.x<u.left-e.defaultCharacterWidth||t.x>u.right+e.defaultCharacterWidth)return;let d=e.bidiSpans(e.state.doc.lineAt(s)).find(O=>O.from<=s&&O.to>=s),g=d&&d.dir==Je.RTL?-1:1;l=t.x<u.left?-g:g}let a=this.source(e,s,l);if(a!=null&&a.then){let u=this.pending={pos:s};a.then(d=>{this.pending==u&&(this.pending=null,d&&e.dispatch({effects:this.setHover.of(d)}))},d=>Si(e.state,d,"hover tooltip"))}else a&&e.dispatch({effects:this.setHover.of(a)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!Gp(this.lastMove.target)||this.pending){let{pos:s}=i||this.pending,l=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:s;(s==l?this.view.posAtCoords(this.lastMove)!=s:!nx(this.view,s,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Gp(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Gp(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function nx(n,e,t,i,s,l){let a=n.scrollDOM.getBoundingClientRect(),u=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>i||a.right<i||a.top>s||Math.min(a.bottom,u)<s)return!1;let d=n.posAtCoords({x:i,y:s},!1);return d>=e&&d<=t}function sx(n,e={}){let t=Oe.define(),i=yt.define({create(){return null},update(s,l){if(s&&(e.hideOnChange&&(l.docChanged||l.selection)||e.hideOn&&e.hideOn(l,s)))return null;if(s&&l.docChanged){let a=l.changes.mapPos(s.pos,-1,Pt.TrackDel);if(a==null)return null;let u=Object.assign(Object.create(null),s);u.pos=a,s.end!=null&&(u.end=l.changes.mapPos(s.end)),s=u}for(let a of l.effects)a.is(t)&&(s=a.value),a.is(ox)&&(s=null);return s},provide:s=>va.from(s)});return[i,nt.define(s=>new rx(s,n,i,t,e.hoverTime||300)),ix]}function ym(n,e){let t=n.plugin(vm);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const ox=Oe.define(),Fp=re.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Co(n,e){let t=n.plugin(bm),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const bm=nt.fromClass(class{constructor(n){this.input=n.state.facet($o),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Fp);this.top=new zl(n,!0,e.topContainer),this.bottom=new zl(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Fp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new zl(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new zl(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet($o);if(t!=this.input){let i=t.filter(d=>d),s=[],l=[],a=[],u=[];for(let d of i){let g=this.specs.indexOf(d),O;g<0?(O=d(n.view),u.push(O)):(O=this.panels[g],O.update&&O.update(n)),s.push(O),(O.top?l:a).push(O)}this.specs=i,this.panels=s,this.top.sync(l),this.bottom.sync(a);for(let d of u)d.dom.classList.add("cm-panel"),d.mount&&d.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>te.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class zl{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Hp(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Hp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Hp(n){let e=n.nextSibling;return n.remove(),e}const $o=re.define({enables:bm});class yr extends yn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}yr.prototype.elementClass="";yr.prototype.toDOM=void 0;yr.prototype.mapMode=Pt.TrackBefore;yr.prototype.startSide=yr.prototype.endSide=-1;yr.prototype.point=!0;const aa=re.define(),lx={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ye.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},vo=re.define();function ax(n){return[Sm(),vo.of(Object.assign(Object.assign({},lx),n))]}const tu=re.define({combine:n=>n.some(e=>e)});function Sm(n){let e=[hx];return n&&n.fixed===!1&&e.push(tu.of(!0)),e}const hx=nt.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(vo).map(e=>new Kp(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(tu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(tu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Ye.iter(this.view.state.facet(aa),this.view.viewport.from),i=[],s=this.gutters.map(l=>new fx(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(l.type)){let a=!0;for(let u of l.type)if(u.type==jt.Text&&a){iu(t,i,u.from);for(let d of s)d.line(this.view,u,i);a=!1}else if(u.widget)for(let d of s)d.widget(this.view,u)}else if(l.type==jt.Text){iu(t,i,l.from);for(let a of s)a.line(this.view,l,i)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(vo),t=n.state.facet(vo),i=n.docChanged||n.heightChanged||n.viewportChanged||!Ye.eq(n.startState.facet(aa),n.state.facet(aa),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new Kp(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)this.dom.appendChild(l.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>te.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Je.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Vp(n){return Array.isArray(n)?n:[n]}function iu(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class fx{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ye.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let u=new xm(e,a,l,i);s.elements.push(u),s.dom.appendChild(u.dom)}else s.elements[this.i].update(e,a,l,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];iu(this.cursor,s,t.from),i.length&&(s=s.concat(i));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t);i&&this.addElement(e,t,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Kp{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let d=l.getBoundingClientRect();a=(d.top+d.bottom)/2}else a=s.clientY;let u=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,u,s)&&s.preventDefault()});this.markers=Vp(t.markers(e)),t.initialSpacer&&(this.spacer=new xm(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Vp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Ye.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class xm{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),ux(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let u=a,d=l<t.length?t[l++]:null,g=!1;if(d){let O=d.elementClass;O&&(i+=" "+O);for(let v=a;v<this.markers.length;v++)if(this.markers[v].compare(d)){u=v,g=!0;break}}else u=this.markers.length;for(;a<u;){let O=this.markers[a++];if(O.toDOM){O.destroy(s);let v=s.nextSibling;s.remove(),s=v}}if(!d)break;d.toDOM&&(g?s=s.nextSibling:this.dom.insertBefore(d.toDOM(e),s)),g&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function ux(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const cx=re.define(),ts=re.define({combine(n){return tr(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let l=i[s],a=t[s];i[s]=l?(u,d,g)=>l(u,d,g)||a(u,d,g):a}return i}})}});class sf extends yr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function of(n,e){return n.state.facet(ts).formatNumber(e,n.state)}const dx=vo.compute([ts],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(cx)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new sf(of(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(ts)!=e.state.facet(ts),initialSpacer(e){return new sf(of(e,Jp(e.state.doc.lines)))},updateSpacer(e,t){let i=of(t.view,Jp(t.view.state.doc.lines));return i==e.number?e:new sf(i)},domEventHandlers:n.facet(ts).domEventHandlers}));function px(n={}){return[ts.of(n),Sm(),dx]}function Jp(n){let e=9;for(;e<n;)e=e*10+9;return e}const gx=new class extends yr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ox=aa.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(gx.range(s)))}return Ye.of(e)});function mx(){return Ox}const wm=1024;let vx=0;class lf{constructor(e,t){this.from=e,this.to=t}}class ke{constructor(e={}){this.id=vx++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ri.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ke.closedBy=new ke({deserialize:n=>n.split(" ")});ke.openedBy=new ke({deserialize:n=>n.split(" ")});ke.group=new ke({deserialize:n=>n.split(" ")});ke.contextHash=new ke({perNode:!0});ke.lookAhead=new ke({perNode:!0});ke.mounted=new ke({perNode:!0});class ya{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ke.mounted.id]}}const yx=Object.create(null);class ri{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):yx,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new ri(e.name||"",t,e.id,i);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ke.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(ke.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?i.name:s[l]];if(a)return a}}}}ri.none=new ri("",Object.create(null),0,8);class Tu{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let l of e){let a=l(i);a&&(s||(s=Object.assign({},i.props)),s[a[0].id]=a[1])}t.push(s?new ri(i.name,s,i.id,i.flags):i)}return new Tu(t)}}const _l=new WeakMap,eg=new WeakMap;var gt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(gt||(gt={}));class lt{constructor(e,t,i,s,l){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,u]of l)this.props[typeof a=="number"?a:a.id]=u}}toString(){let e=ya.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new nu(this.topNode,e)}cursorAt(e,t=0,i=0){let s=_l.get(this)||this.topNode,l=new nu(s);return l.moveTo(e,t),_l.set(this,l._tree),l}get topNode(){return new ii(this,0,0,null)}resolve(e,t=0){let i=Po(_l.get(this)||this.topNode,e,t,!1);return _l.set(this,i),i}resolveInner(e,t=0){let i=Po(eg.get(this)||this.topNode,e,t,!0);return eg.set(this,i),i}resolveStack(e,t=0){return xx(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:l=this.length}=e,a=e.mode||0,u=(a&gt.IncludeAnonymous)>0;for(let d=this.cursor(a|gt.IncludeAnonymous);;){let g=!1;if(d.from<=l&&d.to>=s&&(!u&&d.type.isAnonymous||t(d)!==!1)){if(d.firstChild())continue;g=!0}for(;g&&i&&(u||!d.type.isAnonymous)&&i(d),!d.nextSibling();){if(!d.parent())return;g=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Mu(ri.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new lt(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new lt(ri.none,t,i,s)))}static build(e){return wx(e)}}lt.empty=new lt(ri.none,[],[],0);class Zu{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Zu(this.buffer,this.index)}}class wn{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return ri.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,i==e)return l;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,i,s,l){let{buffer:a}=this,u=-1;for(let d=e;d!=t&&!(km(l,s,a[d+1],a[d+2])&&(u=d,i>0));d=a[d+3]);return u}slice(e,t,i){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let u=e,d=0;u<t;){l[d++]=s[u++],l[d++]=s[u++]-i;let g=l[d++]=s[u++]-i;l[d++]=s[u++]-e,a=Math.max(a,g)}return new wn(l,a,this.set)}}function km(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Po(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!i&&n instanceof ii&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=i?0:gt.IgnoreOverlays;if(i)for(let a=n,u=a.parent;u;a=u,u=a.parent)a instanceof ii&&a.index<0&&((s=u.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=u);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class Qm{cursor(e=0){return new nu(this,e)}getChild(e,t=null,i=null){let s=tg(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return tg(this,e,t,i)}resolve(e,t=0){return Po(this,e,t,!1)}resolveInner(e,t=0){return Po(this,e,t,!0)}matchContext(e){return ru(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class ii extends Qm{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,l=0){for(let a=this;;){for(let{children:u,positions:d}=a._tree,g=t>0?u.length:-1;e!=g;e+=t){let O=u[e],v=d[e]+a.from;if(km(s,i,v,v+O.length)){if(O instanceof wn){if(l&gt.ExcludeBuffers)continue;let x=O.findChild(0,O.buffer.length,t,i-v,s);if(x>-1)return new Vi(new bx(a,O,e,v),null,x)}else if(l&gt.IncludeAnonymous||!O.type.isAnonymous||Au(O)){let x;if(!(l&gt.IgnoreMounts)&&(x=ya.get(O))&&!x.overlay)return new ii(x.tree,v,e,a);let k=new ii(O,v,e,a);return l&gt.IncludeAnonymous||!k.type.isAnonymous?k:k.nextChild(t<0?O.children.length-1:0,t,i,s)}}}if(l&gt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&gt.IgnoreOverlays)&&(s=ya.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:a,to:u}of s.overlay)if((t>0?a<=l:a<l)&&(t<0?u>=l:u>l))return new ii(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function tg(n,e,t,i){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(;!s.type.is(t);)if(!s.nextSibling())return l}for(;;){if(i!=null&&s.type.is(i))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return i==null?l:[]}}function ru(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class bx{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class Vi extends Qm{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return l<0?null:new Vi(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&gt.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new Vi(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Vi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Vi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,l=i.buffer[this.index+3];if(l>s){let a=i.buffer[this.index+1];e.push(i.slice(s,l,a)),t.push(0)}return new lt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Cm(n){if(!n.length)return null;if(n.length==1)return n[0];let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let i=t instanceof ii&&t.index<0?null:t.parent,s=n.slice();return i?s[e]=i:s.splice(e,1),new Sx(s,t)}class Sx{constructor(e,t){this.heads=e,this.node=t}get next(){return Cm(this.heads)}}function xx(n,e,t){let i=n.resolveInner(e,t),s=null;for(let l=i instanceof ii?i:i.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[i])).push(a.resolve(e,t)),l=a}else{let a=ya.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let u=new ii(a.tree,a.overlay[0].from+l.from,0,null);(s||(s=[i])).push(Po(u,e,t,!1))}}return s?Cm(s):i}class nu{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ii)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof ii?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&gt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&gt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&gt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let l=t+e,a=e<0?-1:i._tree.children.length;l!=a;l+=e){let u=i._tree.children[l];if(this.mode&gt.IncludeAnonymous||u instanceof wn||!u.type.isAnonymous||Au(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,i=l+1;break e}s=this.stack[--l]}for(let s=i;s<this.stack.length;s++)t=new Vi(this.buffer,t,this.stack[s]);return this.bufferNode=new Vi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return ru(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return ru(this.node,e,s);let a=i[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Au(n){return n.children.some(e=>e instanceof wn||!e.type.isAnonymous||Au(e))}function wx(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=wm,reused:l=[],minRepeatType:a=i.types.length}=n,u=Array.isArray(t)?new Zu(t,t.length):t,d=i.types,g=0,O=0;function v(z,U,j,oe,de){let{id:ge,start:pe,end:Qe,size:Ae}=u,I=O;for(;Ae<0;)if(u.next(),Ae==-1){let Ee=l[ge];j.push(Ee),oe.push(pe-z);return}else if(Ae==-3){g=ge;return}else if(Ae==-4){O=ge;return}else throw new RangeError(`Unrecognized record size: ${Ae}`);let J=d[ge],T,De,Ne=pe-z;if(Qe-pe<=s&&(De=R(u.pos-U,de))){let Ee=new Uint16Array(De.size-De.skip),ye=u.pos-De.size,Ce=Ee.length;for(;u.pos>ye;)Ce=M(De.start,Ee,Ce);T=new wn(Ee,Qe-De.start,i),Ne=De.start-z}else{let Ee=u.pos-Ae;u.next();let ye=[],Ce=[],bt=ge>=a?ge:-1,Gt=0,_e=Qe;for(;u.pos>Ee;)bt>=0&&u.id==bt&&u.size>=0?(u.end<=_e-s&&(k(ye,Ce,pe,Gt,u.end,_e,bt,I),Gt=ye.length,_e=u.end),u.next()):v(pe,Ee,ye,Ce,bt);if(bt>=0&&Gt>0&&Gt<ye.length&&k(ye,Ce,pe,Gt,pe,_e,bt,I),ye.reverse(),Ce.reverse(),bt>-1&&Gt>0){let di=x(J);T=Mu(J,ye,Ce,0,ye.length,0,Qe-pe,di,di)}else T=C(J,ye,Ce,Qe-pe,I-Qe)}j.push(T),oe.push(Ne)}function x(z){return(U,j,oe)=>{let de=0,ge=U.length-1,pe,Qe;if(ge>=0&&(pe=U[ge])instanceof lt){if(!ge&&pe.type==z&&pe.length==oe)return pe;(Qe=pe.prop(ke.lookAhead))&&(de=j[ge]+pe.length+Qe)}return C(z,U,j,oe,de)}}function k(z,U,j,oe,de,ge,pe,Qe){let Ae=[],I=[];for(;z.length>oe;)Ae.push(z.pop()),I.push(U.pop()+j-de);z.push(C(i.types[pe],Ae,I,ge-de,Qe-ge)),U.push(de-j)}function C(z,U,j,oe,de=0,ge){if(g){let pe=[ke.contextHash,g];ge=ge?[pe].concat(ge):[pe]}if(de>25){let pe=[ke.lookAhead,de];ge=ge?[pe].concat(ge):[pe]}return new lt(z,U,j,oe,ge)}function R(z,U){let j=u.fork(),oe=0,de=0,ge=0,pe=j.end-s,Qe={size:0,start:0,skip:0};e:for(let Ae=j.pos-z;j.pos>Ae;){let I=j.size;if(j.id==U&&I>=0){Qe.size=oe,Qe.start=de,Qe.skip=ge,ge+=4,oe+=4,j.next();continue}let J=j.pos-I;if(I<0||J<Ae||j.start<pe)break;let T=j.id>=a?4:0,De=j.start;for(j.next();j.pos>J;){if(j.size<0)if(j.size==-3)T+=4;else break e;else j.id>=a&&(T+=4);j.next()}de=De,oe+=I,ge+=T}return(U<0||oe==z)&&(Qe.size=oe,Qe.start=de,Qe.skip=ge),Qe.size>4?Qe:void 0}function M(z,U,j){let{id:oe,start:de,end:ge,size:pe}=u;if(u.next(),pe>=0&&oe<a){let Qe=j;if(pe>4){let Ae=u.pos-(pe-4);for(;u.pos>Ae;)j=M(z,U,j)}U[--j]=Qe,U[--j]=ge-z,U[--j]=de-z,U[--j]=oe}else pe==-3?g=oe:pe==-4&&(O=oe);return j}let D=[],E=[];for(;u.pos>0;)v(n.start||0,n.bufferStart||0,D,E,-1);let F=(e=n.length)!==null&&e!==void 0?e:D.length?E[0]+D[0].length:0;return new lt(d[n.topID],D.reverse(),E.reverse(),F)}const ig=new WeakMap;function ha(n,e){if(!n.isAnonymous||e instanceof wn||e.type!=n)return 1;let t=ig.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof lt)){t=1;break}t+=ha(n,i)}ig.set(e,t)}return t}function Mu(n,e,t,i,s,l,a,u,d){let g=0;for(let C=i;C<s;C++)g+=ha(n,e[C]);let O=Math.ceil(g*1.5/8),v=[],x=[];function k(C,R,M,D,E){for(let F=M;F<D;){let z=F,U=R[F],j=ha(n,C[F]);for(F++;F<D;F++){let oe=ha(n,C[F]);if(j+oe>=O)break;j+=oe}if(F==z+1){if(j>O){let oe=C[z];k(oe.children,oe.positions,0,oe.children.length,R[z]+E);continue}v.push(C[z])}else{let oe=R[F-1]+C[F-1].length-U;v.push(Mu(n,C,R,z,F,U,oe,null,d))}x.push(U+E-l)}}return k(e,t,i,s,0),(u||d)(v,x,a)}class kx{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof Vi?this.setBuffer(e.context.buffer,e.index,t):e instanceof ii&&this.map.set(e.tree,t)}get(e){return e instanceof Vi?this.getBuffer(e.context.buffer,e.index):e instanceof ii?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class mn{constructor(e,t,i,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new mn(0,e.length,e,0,!1,i)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let u=0,d=0,g=0;;u++){let O=u<t.length?t[u]:null,v=O?O.fromA:1e9;if(v-d>=i)for(;a&&a.from<v;){let x=a;if(d>=x.from||v<=x.to||g){let k=Math.max(x.from,d)-g,C=Math.min(x.to,v)-g;x=k>=C?null:new mn(k,C,x.tree,x.offset+g,u>0,!!O)}if(x&&s.push(x),a.to>v)break;a=l<e.length?e[l++]:null}if(!O)break;d=O.toA,g=O.toA-O.toB}return s}}class $m{startParse(e,t,i){return typeof e=="string"&&(e=new Qx(e)),i=i?i.length?i.map(s=>new lf(s.from,s.to)):[new lf(0,0)]:[new lf(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let l=s.advance();if(l)return l}}}class Qx{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ke({perNode:!0});let Cx=0;class Gi{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Cx++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Gi([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new ba;return t=>t.modified.indexOf(e)>-1?t:ba.get(t.base||t,t.modified.concat(e).sort((i,s)=>i.id-s.id))}}let $x=0;class ba{constructor(){this.instances=[],this.id=$x++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(u=>u.base==e&&Px(t,u.modified));if(i)return i;let s=[],l=new Gi(s,e,t);for(let u of t)u.instances.push(l);let a=Tx(t);for(let u of e.set)if(!u.modified.length)for(let d of a)s.push(ba.get(u,d));return l}}function Px(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function Tx(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function Pm(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let l=[],a=2,u=s;for(let v=0;;){if(u=="..."&&v>0&&v+3==s.length){a=1;break}let x=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!x)throw new RangeError("Invalid path: "+s);if(l.push(x[0]=="*"?"":x[0][0]=='"'?JSON.parse(x[0]):x[0]),v+=x[0].length,v==s.length)break;let k=s[v++];if(v==s.length&&k=="!"){a=0;break}if(k!="/")throw new RangeError("Invalid path: "+s);u=s.slice(v)}let d=l.length-1,g=l[d];if(!g)throw new RangeError("Invalid path: "+s);let O=new Sa(i,a,d>0?l.slice(0,d):null);e[g]=O.sort(e[g])}}return Tm.add(e)}const Tm=new ke;class Sa{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Sa.empty=new Sa([],2,null);function Zm(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:i,all:s=null}=e||{};return{style:l=>{let a=s;for(let u of l)for(let d of u.set){let g=t[d.id];if(g){a=a?a+" "+g:g;break}}return a},scope:i}}function Zx(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function Ax(n,e,t,i=0,s=n.length){let l=new Mx(i,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),i,s,"",l.highlighters),l.flush(s)}class Mx{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,l){let{type:a,from:u,to:d}=e;if(u>=i||d<=t)return;a.isTop&&(l=this.highlighters.filter(k=>!k.scope||k.scope(a)));let g=s,O=Yx(e)||Sa.empty,v=Zx(l,O.tags);if(v&&(g&&(g+=" "),g+=v,O.mode==1&&(s+=(s?" ":"")+v)),this.startSpan(Math.max(t,u),g),O.opaque)return;let x=e.tree&&e.tree.prop(ke.mounted);if(x&&x.overlay){let k=e.node.enter(x.overlay[0].from+u,1),C=this.highlighters.filter(M=>!M.scope||M.scope(x.tree.type)),R=e.firstChild();for(let M=0,D=u;;M++){let E=M<x.overlay.length?x.overlay[M]:null,F=E?E.from+u:d,z=Math.max(t,D),U=Math.min(i,F);if(z<U&&R)for(;e.from<U&&(this.highlightRange(e,z,U,s,l),this.startSpan(Math.min(U,e.to),g),!(e.to>=F||!e.nextSibling())););if(!E||F>i)break;D=E.to+u,D>t&&(this.highlightRange(k.cursor(),Math.max(t,E.from+u),Math.min(i,D),"",C),this.startSpan(Math.min(i,D),g))}R&&e.parent()}else if(e.firstChild()){x&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,l),this.startSpan(Math.min(i,e.to),g)}while(e.nextSibling());e.parent()}}}function Yx(n){let e=n.type.prop(Tm);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const K=Gi.define,jl=K(),Dr=K(),rg=K(Dr),ng=K(Dr),Wr=K(),ql=K(Wr),af=K(Wr),qi=K(),un=K(qi),_i=K(),ji=K(),su=K(),no=K(su),Gl=K(),Y={comment:jl,lineComment:K(jl),blockComment:K(jl),docComment:K(jl),name:Dr,variableName:K(Dr),typeName:rg,tagName:K(rg),propertyName:ng,attributeName:K(ng),className:K(Dr),labelName:K(Dr),namespace:K(Dr),macroName:K(Dr),literal:Wr,string:ql,docString:K(ql),character:K(ql),attributeValue:K(ql),number:af,integer:K(af),float:K(af),bool:K(Wr),regexp:K(Wr),escape:K(Wr),color:K(Wr),url:K(Wr),keyword:_i,self:K(_i),null:K(_i),atom:K(_i),unit:K(_i),modifier:K(_i),operatorKeyword:K(_i),controlKeyword:K(_i),definitionKeyword:K(_i),moduleKeyword:K(_i),operator:ji,derefOperator:K(ji),arithmeticOperator:K(ji),logicOperator:K(ji),bitwiseOperator:K(ji),compareOperator:K(ji),updateOperator:K(ji),definitionOperator:K(ji),typeOperator:K(ji),controlOperator:K(ji),punctuation:su,separator:K(su),bracket:no,angleBracket:K(no),squareBracket:K(no),paren:K(no),brace:K(no),content:qi,heading:un,heading1:K(un),heading2:K(un),heading3:K(un),heading4:K(un),heading5:K(un),heading6:K(un),contentSeparator:K(qi),list:K(qi),quote:K(qi),emphasis:K(qi),strong:K(qi),link:K(qi),monospace:K(qi),strikethrough:K(qi),inserted:K(),deleted:K(),changed:K(),invalid:K(),meta:Gl,documentMeta:K(Gl),annotation:K(Gl),processingInstruction:K(Gl),definition:Gi.defineModifier(),constant:Gi.defineModifier(),function:Gi.defineModifier(),standard:Gi.defineModifier(),local:Gi.defineModifier(),special:Gi.defineModifier()};Zm([{tag:Y.link,class:"tok-link"},{tag:Y.heading,class:"tok-heading"},{tag:Y.emphasis,class:"tok-emphasis"},{tag:Y.strong,class:"tok-strong"},{tag:Y.keyword,class:"tok-keyword"},{tag:Y.atom,class:"tok-atom"},{tag:Y.bool,class:"tok-bool"},{tag:Y.url,class:"tok-url"},{tag:Y.labelName,class:"tok-labelName"},{tag:Y.inserted,class:"tok-inserted"},{tag:Y.deleted,class:"tok-deleted"},{tag:Y.literal,class:"tok-literal"},{tag:Y.string,class:"tok-string"},{tag:Y.number,class:"tok-number"},{tag:[Y.regexp,Y.escape,Y.special(Y.string)],class:"tok-string2"},{tag:Y.variableName,class:"tok-variableName"},{tag:Y.local(Y.variableName),class:"tok-variableName tok-local"},{tag:Y.definition(Y.variableName),class:"tok-variableName tok-definition"},{tag:Y.special(Y.variableName),class:"tok-variableName2"},{tag:Y.definition(Y.propertyName),class:"tok-propertyName tok-definition"},{tag:Y.typeName,class:"tok-typeName"},{tag:Y.namespace,class:"tok-namespace"},{tag:Y.className,class:"tok-className"},{tag:Y.macroName,class:"tok-macroName"},{tag:Y.propertyName,class:"tok-propertyName"},{tag:Y.operator,class:"tok-operator"},{tag:Y.comment,class:"tok-comment"},{tag:Y.meta,class:"tok-meta"},{tag:Y.invalid,class:"tok-invalid"},{tag:Y.punctuation,class:"tok-punctuation"}]);var hf;const is=new ke;function Am(n){return re.define({combine:n?e=>e.concat(n):void 0})}const Yu=new ke;class Ti{constructor(e,t,i=[],s=""){this.data=e,this.name=s,we.prototype.hasOwnProperty("tree")||Object.defineProperty(we.prototype,"tree",{get(){return mt(this)}}),this.parser=t,this.extension=[Fr.of(this),we.languageData.of((l,a,u)=>{let d=sg(l,a,u),g=d.type.prop(is);if(!g)return[];let O=l.facet(g),v=d.type.prop(Yu);if(v){let x=d.resolve(a-d.from,u);for(let k of v)if(k.test(x,l)){let C=l.facet(k.facet);return k.type=="replace"?C:C.concat(O)}}return O})].concat(i)}isActiveAt(e,t,i=-1){return sg(e,t,i).type.prop(is)==this.data}findRegions(e){let t=e.facet(Fr);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(l,a)=>{if(l.prop(is)==this.data){i.push({from:a,to:a+l.length});return}let u=l.prop(ke.mounted);if(u){if(u.tree.prop(is)==this.data){if(u.overlay)for(let d of u.overlay)i.push({from:d.from+a,to:d.to+a});else i.push({from:a,to:a+l.length});return}else if(u.overlay){let d=i.length;if(s(u.tree,u.overlay[0].from+a),i.length>d)return}}for(let d=0;d<l.children.length;d++){let g=l.children[d];g instanceof lt&&s(g,l.positions[d]+a)}};return s(mt(e),0),i}get allowsNesting(){return!0}}Ti.setState=Oe.define();function sg(n,e,t){let i=n.facet(Fr),s=mt(n).topNode;if(!i||i.allowsNesting)for(let l=s;l;l=l.enter(e,t,gt.ExcludeBuffers))l.type.isTop&&(s=l);return s}class xa extends Ti{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=Am(e.languageData);return new xa(t,e.parser.configure({props:[is.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new xa(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function mt(n){let e=n.field(Ti.state,!1);return e?e.tree:lt.empty}class Rx{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let so=null;class wa{constructor(e,t,i=[],s,l,a,u,d){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=u,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new wa(e,t,[],lt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Rx(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=lt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(mn.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(mn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=so;so=this;try{return e()}finally{so=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=og(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:l,viewport:a,skipped:u}=this;if(this.takeTree(),!e.empty){let d=[];if(e.iterChangedRanges((g,O,v,x)=>d.push({fromA:g,toA:O,fromB:v,toB:x})),i=mn.applyChanges(i,d),s=lt.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){u=[];for(let g of this.skipped){let O=e.mapPos(g.from,1),v=e.mapPos(g.to,-1);O<v&&u.push({from:O,to:v})}}}return new wa(this.parser,t,i,s,l,a,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:l}=this.skipped[i];s<e.to&&l>e.from&&(this.fragments=og(this.fragments,s,l),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends $m{createParse(t,i,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let d=so;if(d){for(let g of s)d.tempSkipped.push(g);e&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,e]):e)}return this.parsedPos=a,new lt(ri.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return so}}function og(n,e,t){return mn.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class ds{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new ds(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=wa.create(e.facet(Fr).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new ds(i)}}Ti.state=yt.define({create:ds.init,update(n,e){for(let t of e.effects)if(t.is(Ti.setState))return t.value;return e.startState.facet(Fr)!=e.state.facet(Fr)?ds.init(e.state):n.apply(e)}});let Mm=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Mm=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const ff=typeof navigator<"u"&&(!((hf=navigator.scheduling)===null||hf===void 0)&&hf.isInputPending)?()=>navigator.scheduling.isInputPending():null,Lx=nt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ti.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ti.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Mm(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,l=i.field(Ti.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!ff?Math.max(25,e.timeRemaining()-5):1e9),u=l.context.treeLen<s&&i.doc.length>s+1e3,d=l.context.work(()=>ff&&ff()||Date.now()>a,s+(u?0:1e5));this.chunkBudget-=Date.now()-t,(d||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Ti.setState.of(new ds(l.context))})),this.chunkBudget>0&&!(d&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Si(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Fr=re.define({combine(n){return n.length?n[0]:null},enables:n=>[Ti.state,Lx,te.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class Dx{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Wx=re.define(),Eo=re.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function ka(n){let e=n.facet(Eo);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function To(n,e){let t="",i=n.tabSize,s=n.facet(Eo)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let l=0;l<e;l++)t+=s;return t}function Ru(n,e){n instanceof we&&(n=new Na(n));for(let i of n.state.facet(Wx)){let s=i(n,e);if(s!==void 0)return s}let t=mt(n.state);return t.length>=e?Xx(n,t,e):null}class Na{constructor(e,t={}){this.state=e,this.options=t,this.unit=ka(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=i.from&&s<=i.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),l=this.countColumn(i,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(i,i.search(/\S|$/))),l}countColumn(e,t=e.length){return Os(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Ym=new ke;function Xx(n,e,t){let i=e.resolveStack(t),s=i.node.enterUnfinishedNodesBefore(t);if(s!=i.node){let l=[];for(let a=s;a!=i.node;a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)i={node:l[a],next:i}}return Rm(i,n,t)}function Rm(n,e,t){for(let i=n;i;i=i.next){let s=Ix(i.node);if(s)return s(Lu.create(e,t,i))}return 0}function Ex(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Ix(n){let e=n.type.prop(Ym);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(ke.closedBy))){let s=n.lastChild,l=s&&i.indexOf(s.name)>-1;return a=>Lm(a,!0,1,void 0,l&&!Ex(a)?s.from:void 0)}return n.parent==null?Nx:null}function Nx(){return 0}class Lu extends Na{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Lu(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Bx(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Rm(this.context.next,this.base,this.pos)}}function Bx(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function Ux(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let u=t.to;;){let d=e.childAfter(u);if(!d||d==i)return null;if(!d.type.isSkipped)return d.from<a?t:null;u=d.to}}function zx({closing:n,align:e=!0,units:t=1}){return i=>Lm(i,e,t,n)}function Lm(n,e,t,i,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,u=i&&l.slice(a,a+i.length)==i||s==n.pos+a,d=e?Ux(n):null;return d?u?n.column(d.from):n.column(d.to):n.baseIndent+(u?0:n.unit*t)}const _x=n=>n.baseIndent;function uf({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const jx=200;function qx(){return we.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+jx)return n;let l=t.sliceString(s.from,i);if(!e.some(g=>g.test(l)))return n;let{state:a}=n,u=-1,d=[];for(let{head:g}of a.selection.ranges){let O=a.doc.lineAt(g);if(O.from==u)continue;u=O.from;let v=Ru(a,O.from);if(v==null)continue;let x=/^\s*/.exec(O.text)[0],k=To(a,v);x!=k&&d.push({from:O.from,to:O.from+x.length,insert:k})}return d.length?[n,{changes:d,sequential:!0}]:n})}const Gx=re.define(),Dm=new ke;function Fx(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function Hx(n,e,t){let i=mt(n);if(i.length<t)return null;let s=i.resolveStack(t,1),l=null;for(let a=s;a;a=a.next){let u=a.node;if(u.to<=t||u.from>t)continue;if(l&&u.from<e)break;let d=u.type.prop(Dm);if(d&&(u.to<i.length-50||i.length==n.doc.length||!Vx(u))){let g=d(u,n);g&&g.from<=t&&g.from>=e&&g.to>t&&(l=g)}}return l}function Vx(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Qa(n,e,t){for(let i of n.facet(Gx)){let s=i(n,e,t);if(s)return s}return Hx(n,e,t)}function Wm(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Ba=Oe.define({map:Wm}),Io=Oe.define({map:Wm});function Xm(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Sn=yt.define({create(){return he.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Ba)&&!Kx(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Du),s=i?he.replace({widget:new sw(i(e.state,t.value))}):lg;n=n.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(Io)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,l)=>{s<i&&l>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,l)=>l<=i||s>=i}))}return n},provide:n=>te.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(lg.range(i,s))}return he.set(e,!0)}});function Ca(n,e,t){var i;let s=null;return(i=n.field(Sn,!1))===null||i===void 0||i.between(e,t,(l,a)=>{(!s||s.from>l)&&(s={from:l,to:a})}),s}function Kx(n,e,t){let i=!1;return n.between(e,e,(s,l)=>{s==e&&l==t&&(i=!0)}),i}function Em(n,e){return n.field(Sn,!1)?e:e.concat(Oe.appendConfig.of(Nm()))}const Jx=n=>{for(let e of Xm(n)){let t=Qa(n.state,e.from,e.to);if(t)return n.dispatch({effects:Em(n.state,[Ba.of(t),Im(n,t)])}),!0}return!1},ew=n=>{if(!n.state.field(Sn,!1))return!1;let e=[];for(let t of Xm(n)){let i=Ca(n.state,t.from,t.to);i&&e.push(Io.of(i),Im(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Im(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return te.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const tw=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),l=Qa(e,s.from,s.to);l&&t.push(Ba.of(l)),i=(l?n.lineBlockAt(l.to):s).to+1}return t.length&&n.dispatch({effects:Em(n.state,t)}),!!t.length},iw=n=>{let e=n.state.field(Sn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(Io.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},rw=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Jx},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ew},{key:"Ctrl-Alt-[",run:tw},{key:"Ctrl-Alt-]",run:iw}],nw={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Du=re.define({combine(n){return tr(n,nw)}});function Nm(n){let e=[Sn,aw];return n&&e.push(Du.of(n)),e}function Bm(n,e){let{state:t}=n,i=t.facet(Du),s=a=>{let u=n.lineBlockAt(n.posAtDOM(a.target)),d=Ca(n.state,u.from,u.to);d&&n.dispatch({effects:Io.of(d)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,s,e);let l=document.createElement("span");return l.textContent=i.placeholderText,l.setAttribute("aria-label",t.phrase("folded code")),l.title=t.phrase("unfold"),l.className="cm-foldPlaceholder",l.onclick=s,l}const lg=he.replace({widget:new class extends ir{toDOM(n){return Bm(n,null)}}});class sw extends ir{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Bm(e,this.value)}}const ow={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class cf extends yr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function lw(n={}){let e=Object.assign(Object.assign({},ow),n),t=new cf(e,!0),i=new cf(e,!1),s=nt.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Fr)!=a.state.facet(Fr)||a.startState.field(Sn,!1)!=a.state.field(Sn,!1)||mt(a.startState)!=mt(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let u=new _r;for(let d of a.viewportLineBlocks){let g=Ca(a.state,d.from,d.to)?i:Qa(a.state,d.from,d.to)?t:null;g&&u.add(d.from,d.from,g)}return u.finish()}}),{domEventHandlers:l}=e;return[s,ax({class:"cm-foldGutter",markers(a){var u;return((u=a.plugin(s))===null||u===void 0?void 0:u.markers)||Ye.empty},initialSpacer(){return new cf(e,!1)},domEventHandlers:Object.assign(Object.assign({},l),{click:(a,u,d)=>{if(l.click&&l.click(a,u,d))return!0;let g=Ca(a.state,u.from,u.to);if(g)return a.dispatch({effects:Io.of(g)}),!0;let O=Qa(a.state,u.from,u.to);return O?(a.dispatch({effects:Ba.of(O)}),!0):!1}})}),Nm()]}const aw=te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class No{constructor(e,t){this.specs=e;let i;function s(u){let d=jr.newName();return(i||(i=Object.create(null)))["."+d]=u,d}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof Ti?u=>u.prop(is)==a.data:a?u=>u==a:void 0,this.style=Zm(e.map(u=>({tag:u.tag,class:u.class||s(Object.assign({},u,{tag:null}))})),{all:l}).style,this.module=i?new jr(i):null,this.themeType=t.themeType}static define(e,t){return new No(e,t||{})}}const ou=re.define(),Um=re.define({combine(n){return n.length?[n[0]]:null}});function df(n){let e=n.facet(ou);return e.length?e:n.facet(Um)}function zm(n,e){let t=[fw],i;return n instanceof No&&(n.module&&t.push(te.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(Um.of(n)):i?t.push(ou.computeN([te.darkTheme],s=>s.facet(te.darkTheme)==(i=="dark")?[n]:[])):t.push(ou.of(n)),t}class hw{constructor(e){this.markCache=Object.create(null),this.tree=mt(e.state),this.decorations=this.buildDeco(e,df(e.state))}update(e){let t=mt(e.state),i=df(e.state),s=i!=df(e.startState);t.length<e.view.viewport.to&&!s&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return he.none;let i=new _r;for(let{from:s,to:l}of e.visibleRanges)Ax(this.tree,t,(a,u,d)=>{i.add(a,u,this.markCache[d]||(this.markCache[d]=he.mark({class:d})))},s,l);return i.finish()}}const fw=xn.high(nt.fromClass(hw,{decorations:n=>n.decorations})),uw=No.define([{tag:Y.meta,color:"#404740"},{tag:Y.link,textDecoration:"underline"},{tag:Y.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Y.emphasis,fontStyle:"italic"},{tag:Y.strong,fontWeight:"bold"},{tag:Y.strikethrough,textDecoration:"line-through"},{tag:Y.keyword,color:"#708"},{tag:[Y.atom,Y.bool,Y.url,Y.contentSeparator,Y.labelName],color:"#219"},{tag:[Y.literal,Y.inserted],color:"#164"},{tag:[Y.string,Y.deleted],color:"#a11"},{tag:[Y.regexp,Y.escape,Y.special(Y.string)],color:"#e40"},{tag:Y.definition(Y.variableName),color:"#00f"},{tag:Y.local(Y.variableName),color:"#30a"},{tag:[Y.typeName,Y.namespace],color:"#085"},{tag:Y.className,color:"#167"},{tag:[Y.special(Y.variableName),Y.macroName],color:"#256"},{tag:Y.definition(Y.propertyName),color:"#00c"},{tag:Y.comment,color:"#940"},{tag:Y.invalid,color:"#f00"}]),cw=te.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_m=1e4,jm="()[]{}",qm=re.define({combine(n){return tr(n,{afterCursor:!0,brackets:jm,maxScanDistance:_m,renderMatch:gw})}}),dw=he.mark({class:"cm-matchingBracket"}),pw=he.mark({class:"cm-nonmatchingBracket"});function gw(n){let e=[],t=n.matched?dw:pw;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const Ow=yt.define({create(){return he.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(qm);for(let s of e.state.selection.ranges){if(!s.empty)continue;let l=Ki(e.state,s.head,-1,i)||s.head>0&&Ki(e.state,s.head-1,1,i)||i.afterCursor&&(Ki(e.state,s.head,1,i)||s.head<e.state.doc.length&&Ki(e.state,s.head+1,-1,i));l&&(t=t.concat(i.renderMatch(l,e.state)))}return he.set(t,!0)},provide:n=>te.decorations.from(n)}),mw=[Ow,cw];function vw(n={}){return[qm.of(n),mw]}const yw=new ke;function lu(n,e,t){let i=n.prop(e<0?ke.openedBy:ke.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function au(n){let e=n.type.prop(yw);return e?e(n.node):n}function Ki(n,e,t,i={}){let s=i.maxScanDistance||_m,l=i.brackets||jm,a=mt(n),u=a.resolveInner(e,t);for(let d=u;d;d=d.parent){let g=lu(d.type,t,l);if(g&&d.from<d.to){let O=au(d);if(O&&(t>0?e>=O.from&&e<O.to:e>O.from&&e<=O.to))return bw(n,e,t,d,O,g,l)}}return Sw(n,e,t,a,u.type,s,l)}function bw(n,e,t,i,s,l,a){let u=i.parent,d={from:s.from,to:s.to},g=0,O=u==null?void 0:u.cursor();if(O&&(t<0?O.childBefore(i.from):O.childAfter(i.to)))do if(t<0?O.to<=i.from:O.from>=i.to){if(g==0&&l.indexOf(O.type.name)>-1&&O.from<O.to){let v=au(O);return{start:d,end:v?{from:v.from,to:v.to}:void 0,matched:!0}}else if(lu(O.type,t,a))g++;else if(lu(O.type,-t,a)){if(g==0){let v=au(O);return{start:d,end:v&&v.from<v.to?{from:v.from,to:v.to}:void 0,matched:!1}}g--}}while(t<0?O.prevSibling():O.nextSibling());return{start:d,matched:!1}}function Sw(n,e,t,i,s,l,a){let u=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),d=a.indexOf(u);if(d<0||d%2==0!=t>0)return null;let g={from:t<0?e-1:e,to:t>0?e+1:e},O=n.doc.iterRange(e,t>0?n.doc.length:0),v=0;for(let x=0;!O.next().done&&x<=l;){let k=O.value;t<0&&(x+=k.length);let C=e+x*t;for(let R=t>0?0:k.length-1,M=t>0?k.length:-1;R!=M;R+=t){let D=a.indexOf(k[R]);if(!(D<0||i.resolveInner(C+R,1).type!=s))if(D%2==0==t>0)v++;else{if(v==1)return{start:g,end:{from:C+R,to:C+R+1},matched:D>>1==d>>1};v--}}t>0&&(x+=k.length)}return O.done?{start:g,matched:!1}:null}const xw=Object.create(null),ag=[ri.none],hg=[],ww=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ww[n]=kw(xw,e);function pf(n,e){hg.indexOf(n)>-1||(hg.push(n),console.warn(e))}function kw(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let d=n[u]||Y[u];d?typeof d=="function"?a.length?a=a.map(d):pf(u,`Modifier ${u} used at start of tag`):a.length?pf(u,`Tag ${u} used as modifier`):a=Array.isArray(d)?d:[d]:pf(u,`Unknown highlighting tag ${u}`)}for(let u of a)t.push(u)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=ri.define({id:ag.length,name:i,props:[Pm({[i]:t})]});return ag.push(s),s.id}const Qw=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=Xu(n.state,t.from);return i.line?Cw(n):i.block?Pw(n):!1};function Wu(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const Cw=Wu(Aw,0),$w=Wu(Gm,0),Pw=Wu((n,e)=>Gm(n,e,Zw(e)),0);function Xu(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const oo=50;function Tw(n,{open:e,close:t},i,s){let l=n.sliceDoc(i-oo,i),a=n.sliceDoc(s,s+oo),u=/\s*$/.exec(l)[0].length,d=/^\s*/.exec(a)[0].length,g=l.length-u;if(l.slice(g-e.length,g)==e&&a.slice(d,d+t.length)==t)return{open:{pos:i-u,margin:u&&1},close:{pos:s+d,margin:d&&1}};let O,v;s-i<=2*oo?O=v=n.sliceDoc(i,s):(O=n.sliceDoc(i,i+oo),v=n.sliceDoc(s-oo,s));let x=/^\s*/.exec(O)[0].length,k=/\s*$/.exec(v)[0].length,C=v.length-k-t.length;return O.slice(x,x+e.length)==e&&v.slice(C,C+t.length)==t?{open:{pos:i+x+e.length,margin:/\s/.test(O.charAt(x+e.length))?1:0},close:{pos:s-k-t.length,margin:/\s/.test(v.charAt(C-1))?1:0}}:null}function Zw(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to),l=e.length-1;l>=0&&e[l].to>i.from?e[l].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function Gm(n,e,t=e.selection.ranges){let i=t.map(l=>Xu(e,l.from).block);if(!i.every(l=>l))return null;let s=t.map((l,a)=>Tw(e,i[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:i[a].open+" "},{from:l.to,insert:" "+i[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,u;a<s.length;a++)if(u=s[a]){let d=i[a],{open:g,close:O}=u;l.push({from:g.pos-d.open.length,to:g.pos+g.margin},{from:O.pos-O.margin,to:O.pos+d.close.length})}return{changes:l}}return null}function Aw(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:l,to:a}of t){let u=i.length,d=1e9,g=Xu(e,l).line;if(g){for(let O=l;O<=a;){let v=e.doc.lineAt(O);if(v.from>s&&(l==a||a>v.from)){s=v.from;let x=/^\s*/.exec(v.text)[0].length,k=x==v.length,C=v.text.slice(x,x+g.length)==g?x:-1;x<v.text.length&&x<d&&(d=x),i.push({line:v,comment:C,token:g,indent:x,empty:k,single:!1})}O=v.to+1}if(d<1e9)for(let O=u;O<i.length;O++)i[O].indent<i[O].line.text.length&&(i[O].indent=d);i.length==u+1&&(i[u].single=!0)}}if(n!=2&&i.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:u,token:d,indent:g,empty:O,single:v}of i)(v||!O)&&l.push({from:u.from+g,insert:d+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&i.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:u,token:d}of i)if(u>=0){let g=a.from+u,O=g+d.length;a.text[O-a.from]==" "&&O++,l.push({from:g,to:O})}return{changes:l}}return null}const hu=br.define(),Mw=br.define(),Yw=re.define(),Fm=re.define({combine(n){return tr(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}});function Rw(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const Hm=yt.define({create(){return Ji.empty},update(n,e){let t=e.state.facet(Fm),i=e.annotation(hu);if(i){let d=e.docChanged?B.single(Rw(e.changes)):void 0,g=ti.fromTransaction(e,d),O=i.side,v=O==0?n.undone:n.done;return g?v=$a(v,v.length,t.minDepth,g):v=Jm(v,e.startState.selection),new Ji(O==0?i.rest:v,O==0?v:i.rest)}let s=e.annotation(Mw);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Ot.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let l=ti.fromTransaction(e),a=e.annotation(Ot.time),u=e.annotation(Ot.userEvent);return l?n=n.addChanges(l,a,u,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,u,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Ji(n.done.map(ti.fromJSON),n.undone.map(ti.fromJSON))}});function Lw(n={}){return[Hm,Fm.of(n),te.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Vm:e.inputType=="historyRedo"?fu:null;return i?(e.preventDefault(),i(t)):!1}})]}function Ua(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(Hm,!1);if(!s)return!1;let l=s.pop(n,t,e);return l?(i(l),!0):!1}}const Vm=Ua(0,!1),fu=Ua(1,!1),Dw=Ua(0,!0),Ww=Ua(1,!0);class ti{constructor(e,t,i,s,l){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=l}setSelAfter(e){return new ti(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new ti(e.changes&&pt.fromJSON(e.changes),[],e.mapped&&er.fromJSON(e.mapped),e.startSelection&&B.fromJSON(e.startSelection),e.selectionsAfter.map(B.fromJSON))}static fromTransaction(e,t){let i=bi;for(let s of e.startState.facet(Yw)){let l=s(e);l.length&&(i=i.concat(l))}return!i.length&&e.changes.empty?null:new ti(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,bi)}static selection(e){return new ti(void 0,bi,void 0,void 0,e)}}function $a(n,e,t,i){let s=e+1>t+20?e-t-1:0,l=n.slice(s,e);return l.push(i),l}function Xw(n,e){let t=[],i=!1;return n.iterChangedRanges((s,l)=>t.push(s,l)),e.iterChangedRanges((s,l,a,u)=>{for(let d=0;d<t.length;){let g=t[d++],O=t[d++];u>=g&&a<=O&&(i=!0)}}),i}function Ew(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Km(n,e){return n.length?e.length?n.concat(e):n:e}const bi=[],Iw=200;function Jm(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Iw));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),$a(n,n.length-1,1e9,t.setSelAfter(i)))}else return[ti.selection([e])]}function Nw(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function gf(n,e){if(!n.length)return n;let t=n.length,i=bi;for(;t;){let s=Bw(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let l=n.slice(0,t);return l[t-1]=s,l}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[ti.selection(i)]:bi}function Bw(n,e,t){let i=Km(n.selectionsAfter.length?n.selectionsAfter.map(u=>u.map(e)):bi,t);if(!n.changes)return ti.selection(i);let s=n.changes.map(e),l=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(l):l;return new ti(s,Oe.mapEffects(n.effects,e),a,n.startSelection.map(l),i)}const Uw=/^(input\.type|delete)($|\.)/;class Ji{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Ji(this.done,this.undone):this}addChanges(e,t,i,s,l){let a=this.done,u=a[a.length-1];return u&&u.changes&&!u.changes.empty&&e.changes&&(!i||Uw.test(i))&&(!u.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(l,Xw(u.changes,e.changes))||i=="input.type.compose")?a=$a(a,a.length-1,s.minDepth,new ti(e.changes.compose(u.changes),Km(e.effects,u.effects),u.mapped,u.startSelection,bi)):a=$a(a,a.length,s.minDepth,e),new Ji(a,bi,t,i)}addSelection(e,t,i,s){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:bi;return l.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Ew(l[l.length-1],e)?this:new Ji(Jm(this.done,e),this.undone,t,i)}addMapping(e){return new Ji(gf(this.done,e),gf(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let l=s[s.length-1];if(i&&l.selectionsAfter.length)return t.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:hu.of({side:e,rest:Nw(s)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let a=s.length==1?bi:s.slice(0,s.length-1);return l.mapped&&(a=gf(a,l.mapped)),t.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:hu.of({side:e,rest:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ji.empty=new Ji(bi,bi);const zw=[{key:"Mod-z",run:Vm,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fu,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fu,preventDefault:!0},{key:"Mod-u",run:Dw,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ww,preventDefault:!0}];function ms(n,e){return B.create(n.ranges.map(e),n.mainIndex)}function rr(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Mi({state:n,dispatch:e},t){let i=ms(n.selection,t);return i.eq(n.selection)?!1:(e(rr(n,i)),!0)}function za(n,e){return B.cursor(e?n.to:n.from)}function e0(n,e){return Mi(n,t=>t.empty?n.moveByChar(t,e):za(t,e))}function Wt(n){return n.textDirectionAt(n.state.selection.main.head)==Je.LTR}const t0=n=>e0(n,!Wt(n)),i0=n=>e0(n,Wt(n));function r0(n,e){return Mi(n,t=>t.empty?n.moveByGroup(t,e):za(t,e))}const _w=n=>r0(n,!Wt(n)),jw=n=>r0(n,Wt(n));function qw(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function _a(n,e,t){let i=mt(n).resolveInner(e.head),s=t?ke.closedBy:ke.openedBy;for(let d=e.head;;){let g=t?i.childAfter(d):i.childBefore(d);if(!g)break;qw(n,g,s)?i=g:d=t?g.to:g.from}let l=i.type.prop(s),a,u;return l&&(a=t?Ki(n,i.from,1):Ki(n,i.to,-1))&&a.matched?u=t?a.end.to:a.end.from:u=t?i.to:i.from,B.cursor(u,t?-1:1)}const Gw=n=>Mi(n,e=>_a(n.state,e,!Wt(n))),Fw=n=>Mi(n,e=>_a(n.state,e,Wt(n)));function n0(n,e){return Mi(n,t=>{if(!t.empty)return za(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const s0=n=>n0(n,!1),o0=n=>n0(n,!0);function l0(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let l of n.state.facet(te.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(i=Math.max(a==null?void 0:a.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function a0(n,e){let t=l0(n),{state:i}=n,s=ms(i.selection,a=>a.empty?n.moveVertically(a,e,t.height):za(a,e));if(s.eq(i.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(i.selection.main.head),u=n.scrollDOM.getBoundingClientRect(),d=u.top+t.marginTop,g=u.bottom-t.marginBottom;a&&a.top>d&&a.bottom<g&&(l=te.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-d}))}return n.dispatch(rr(i,s),{effects:l}),!0}const fg=n=>a0(n,!1),uu=n=>a0(n,!0);function Hr(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let l=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;l&&e.head!=i.from+l&&(s=B.cursor(i.from+l))}return s}const Hw=n=>Mi(n,e=>Hr(n,e,!0)),Vw=n=>Mi(n,e=>Hr(n,e,!1)),Kw=n=>Mi(n,e=>Hr(n,e,!Wt(n))),Jw=n=>Mi(n,e=>Hr(n,e,Wt(n))),ek=n=>Mi(n,e=>B.cursor(n.lineBlockAt(e.head).from,1)),tk=n=>Mi(n,e=>B.cursor(n.lineBlockAt(e.head).to,-1));function ik(n,e,t){let i=!1,s=ms(n.selection,l=>{let a=Ki(n,l.head,-1)||Ki(n,l.head,1)||l.head>0&&Ki(n,l.head-1,1)||l.head<n.doc.length&&Ki(n,l.head+1,-1);if(!a||!a.end)return l;i=!0;let u=a.start.from==l.head?a.end.to:a.end.from;return t?B.range(l.anchor,u):B.cursor(u)});return i?(e(rr(n,s)),!0):!1}const rk=({state:n,dispatch:e})=>ik(n,e,!1);function wi(n,e){let t=ms(n.state.selection,i=>{let s=e(i);return B.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(rr(n.state,t)),!0)}function h0(n,e){return wi(n,t=>n.moveByChar(t,e))}const f0=n=>h0(n,!Wt(n)),u0=n=>h0(n,Wt(n));function c0(n,e){return wi(n,t=>n.moveByGroup(t,e))}const nk=n=>c0(n,!Wt(n)),sk=n=>c0(n,Wt(n)),ok=n=>wi(n,e=>_a(n.state,e,!Wt(n))),lk=n=>wi(n,e=>_a(n.state,e,Wt(n)));function d0(n,e){return wi(n,t=>n.moveVertically(t,e))}const p0=n=>d0(n,!1),g0=n=>d0(n,!0);function O0(n,e){return wi(n,t=>n.moveVertically(t,e,l0(n).height))}const ug=n=>O0(n,!1),cg=n=>O0(n,!0),ak=n=>wi(n,e=>Hr(n,e,!0)),hk=n=>wi(n,e=>Hr(n,e,!1)),fk=n=>wi(n,e=>Hr(n,e,!Wt(n))),uk=n=>wi(n,e=>Hr(n,e,Wt(n))),ck=n=>wi(n,e=>B.cursor(n.lineBlockAt(e.head).from)),dk=n=>wi(n,e=>B.cursor(n.lineBlockAt(e.head).to)),dg=({state:n,dispatch:e})=>(e(rr(n,{anchor:0})),!0),pg=({state:n,dispatch:e})=>(e(rr(n,{anchor:n.doc.length})),!0),gg=({state:n,dispatch:e})=>(e(rr(n,{anchor:n.selection.main.anchor,head:0})),!0),Og=({state:n,dispatch:e})=>(e(rr(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),pk=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),gk=({state:n,dispatch:e})=>{let t=ja(n).map(({from:i,to:s})=>B.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:B.create(t),userEvent:"select"})),!0},Ok=({state:n,dispatch:e})=>{let t=ms(n.selection,i=>{var s;let l=mt(n).resolveStack(i.from,1);for(let a=l;a;a=a.next){let{node:u}=a;if((u.from<i.from&&u.to>=i.to||u.to>i.to&&u.from<=i.from)&&(!((s=u.parent)===null||s===void 0)&&s.parent))return B.range(u.to,u.from)}return i});return e(rr(n,t)),!0},mk=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=B.create([t.main]):t.main.empty||(i=B.create([B.cursor(t.main.head)])),i?(e(rr(n,i)),!0):!1};function Bo(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(l=>{let{from:a,to:u}=l;if(a==u){let d=e(l);d<a?(t="delete.backward",d=Fl(n,d,!1)):d>a&&(t="delete.forward",d=Fl(n,d,!0)),a=Math.min(a,d),u=Math.max(u,d)}else a=Fl(n,a,!1),u=Fl(n,u,!0);return a==u?{range:l}:{changes:{from:a,to:u},range:B.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?te.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Fl(n,e,t){if(n instanceof te)for(let i of n.state.facet(te.atomicRanges).map(s=>s(n)))i.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const m0=(n,e)=>Bo(n,t=>{let i=t.from,{state:s}=n,l=s.doc.lineAt(i),a,u;if(!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(a=l.text.slice(0,i-l.from))){if(a[a.length-1]=="	")return i-1;let d=Os(a,s.tabSize),g=d%ka(s)||ka(s);for(let O=0;O<g&&a[a.length-1-O]==" ";O++)i--;u=i}else u=Dt(l.text,i-l.from,e,e)+l.from,u==i&&l.number!=(e?s.doc.lines:1)&&(u+=e?1:-1);return u}),cu=n=>m0(n,!1),v0=n=>m0(n,!0),y0=(n,e)=>Bo(n,t=>{let i=t.head,{state:s}=n,l=s.doc.lineAt(i),a=s.charCategorizer(i);for(let u=null;;){if(i==(e?l.to:l.from)){i==t.head&&l.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let d=Dt(l.text,i-l.from,e)+l.from,g=l.text.slice(Math.min(i,d)-l.from,Math.max(i,d)-l.from),O=a(g);if(u!=null&&O!=u)break;(g!=" "||i!=t.head)&&(u=O),i=d}return i}),b0=n=>y0(n,!1),vk=n=>y0(n,!0),yk=n=>Bo(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),bk=n=>Bo(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Sk=n=>Bo(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),xk=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ze.of(["",""])},range:B.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},wk=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,l=n.doc.lineAt(s),a=s==l.from?s-1:Dt(l.text,s-l.from,!1)+l.from,u=s==l.to?s+1:Dt(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:u,insert:n.doc.slice(s,u).append(n.doc.slice(a,s))},range:B.cursor(u)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ja(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),l=n.doc.lineAt(i.to);if(!i.empty&&i.to==l.from&&(l=n.doc.lineAt(i.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(i)}else e.push({from:s.from,to:l.to,ranges:[i]});t=l.number+1}return e}function S0(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let l of ja(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),u=a.length+1;if(t){i.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let d of l.ranges)s.push(B.range(Math.min(n.doc.length,d.anchor+u),Math.min(n.doc.length,d.head+u)))}else{i.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let d of l.ranges)s.push(B.range(d.anchor-u,d.head-u))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:B.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const kk=({state:n,dispatch:e})=>S0(n,e,!1),Qk=({state:n,dispatch:e})=>S0(n,e,!0);function x0(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of ja(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ck=({state:n,dispatch:e})=>x0(n,e,!1),$k=({state:n,dispatch:e})=>x0(n,e,!0),Pk=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(ja(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),i=ms(e.selection,s=>n.moveVertically(s,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Tk(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=mt(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),l;return i&&s&&i.to<=e&&s.from>=e&&(l=i.type.prop(ke.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const Zk=w0(!1),Ak=w0(!0);function w0(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:l,to:a}=s,u=e.doc.lineAt(l),d=!n&&l==a&&Tk(e,l);n&&(l=a=(a<=u.to?u:e.doc.lineAt(a)).to);let g=new Na(e,{simulateBreak:l,simulateDoubleBreak:!!d}),O=Ru(g,l);for(O==null&&(O=Os(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<u.to&&/\s/.test(u.text[a-u.from]);)a++;d?{from:l,to:a}=d:l>u.from&&l<u.from+100&&!/\S/.test(u.text.slice(0,l))&&(l=u.from);let v=["",To(e,O)];return d&&v.push(To(e,g.lineIndent(u.from,-1))),{changes:{from:l,to:a,insert:Ze.of(v)},range:B.cursor(l+1+v[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Eu(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let a=i.from;a<=i.to;){let u=n.doc.lineAt(a);u.number>t&&(i.empty||i.to>u.from)&&(e(u,s,i),t=u.number),a=u.to+1}let l=n.changes(s);return{changes:s,range:B.range(l.mapPos(i.anchor,1),l.mapPos(i.head,1))}})}const Mk=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Na(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=Eu(n,(l,a,u)=>{let d=Ru(i,l.from);if(d==null)return;/\S/.test(l.text)||(d=0);let g=/^\s*/.exec(l.text)[0],O=To(n,d);(g!=O||u.from<l.from+g.length)&&(t[l.from]=d,a.push({from:l.from,to:l.from+g.length,insert:O}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},k0=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Eu(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Eo)})}),{userEvent:"input.indent"})),!0),Q0=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Eu(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Os(s,n.tabSize),a=0,u=To(n,Math.max(0,l-ka(n)));for(;a<s.length&&a<u.length&&s.charCodeAt(a)==u.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+s.length,insert:u.slice(a)})}),{userEvent:"delete.dedent"})),!0),Yk=[{key:"Ctrl-b",run:t0,shift:f0,preventDefault:!0},{key:"Ctrl-f",run:i0,shift:u0},{key:"Ctrl-p",run:s0,shift:p0},{key:"Ctrl-n",run:o0,shift:g0},{key:"Ctrl-a",run:ek,shift:ck},{key:"Ctrl-e",run:tk,shift:dk},{key:"Ctrl-d",run:v0},{key:"Ctrl-h",run:cu},{key:"Ctrl-k",run:yk},{key:"Ctrl-Alt-h",run:b0},{key:"Ctrl-o",run:xk},{key:"Ctrl-t",run:wk},{key:"Ctrl-v",run:uu}],Rk=[{key:"ArrowLeft",run:t0,shift:f0,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:_w,shift:nk,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Kw,shift:fk,preventDefault:!0},{key:"ArrowRight",run:i0,shift:u0,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:jw,shift:sk,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Jw,shift:uk,preventDefault:!0},{key:"ArrowUp",run:s0,shift:p0,preventDefault:!0},{mac:"Cmd-ArrowUp",run:dg,shift:gg},{mac:"Ctrl-ArrowUp",run:fg,shift:ug},{key:"ArrowDown",run:o0,shift:g0,preventDefault:!0},{mac:"Cmd-ArrowDown",run:pg,shift:Og},{mac:"Ctrl-ArrowDown",run:uu,shift:cg},{key:"PageUp",run:fg,shift:ug},{key:"PageDown",run:uu,shift:cg},{key:"Home",run:Vw,shift:hk,preventDefault:!0},{key:"Mod-Home",run:dg,shift:gg},{key:"End",run:Hw,shift:ak,preventDefault:!0},{key:"Mod-End",run:pg,shift:Og},{key:"Enter",run:Zk},{key:"Mod-a",run:pk},{key:"Backspace",run:cu,shift:cu},{key:"Delete",run:v0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:b0},{key:"Mod-Delete",mac:"Alt-Delete",run:vk},{mac:"Mod-Backspace",run:bk},{mac:"Mod-Delete",run:Sk}].concat(Yk.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Lk=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Gw,shift:ok},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Fw,shift:lk},{key:"Alt-ArrowUp",run:kk},{key:"Shift-Alt-ArrowUp",run:Ck},{key:"Alt-ArrowDown",run:Qk},{key:"Shift-Alt-ArrowDown",run:$k},{key:"Escape",run:mk},{key:"Mod-Enter",run:Ak},{key:"Alt-l",mac:"Ctrl-l",run:gk},{key:"Mod-i",run:Ok,preventDefault:!0},{key:"Mod-[",run:Q0},{key:"Mod-]",run:k0},{key:"Mod-Alt-\\",run:Mk},{key:"Shift-Mod-k",run:Pk},{key:"Shift-Mod-\\",run:rk},{key:"Mod-/",run:Qw},{key:"Alt-A",run:$w}].concat(Rk),Dk={key:"Tab",run:k0,shift:Q0};function Ie(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)C0(n,arguments[e]);return n}function C0(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)C0(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const mg=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class ps{constructor(e,t,i=0,s=e.length,l,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=l?u=>l(mg(u)):mg,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ct(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=vu(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=yi(e);let s=this.normalize(t);for(let l=0,a=i;;l++){let u=s.charCodeAt(l),d=this.match(u,a);if(l==s.length-1){if(d)return this.value=d,this;break}a==i&&l<t.length&&t.charCodeAt(l)==u&&a++}}}match(e,t){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],a=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:t+1}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(ps.prototype[Symbol.iterator]=function(){return this});const $0={from:-1,to:-1,match:/.*/.exec("")},Iu="gm"+(/x/.unicode==null?"":"u");class P0{constructor(e,t,i,s=0,l=e.length){if(this.text=e,this.to=l,this.curLine="",this.done=!1,this.value=$0,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new T0(e,t,i,s,l);this.re=new RegExp(t,Iu+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=Pa(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Pa(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Of=new WeakMap;class as{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=Of.get(e);if(!s||s.from>=i||s.to<=t){let u=new as(t,e.sliceString(t,i));return Of.set(e,u),u}if(s.from==t&&s.to==i)return s;let{text:l,from:a}=s;return a>t&&(l=e.sliceString(t,a)+l,a=t),s.to<i&&(l+=e.sliceString(s.to,i)),Of.set(e,new as(a,l)),new as(t,l.slice(t-a,i-a))}}class T0{constructor(e,t,i,s,l){this.text=e,this.to=l,this.done=!1,this.value=$0,this.matchPos=Pa(e,s),this.re=new RegExp(t,Iu+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=as.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Pa(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=as.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(P0.prototype[Symbol.iterator]=T0.prototype[Symbol.iterator]=function(){return this});function Wk(n){try{return new RegExp(n,Iu),!0}catch{return!1}}function Pa(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function du(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Ie("input",{class:"cm-textfield",name:"line",value:e}),i=Ie("form",{class:"cm-gotoLine",onkeydown:l=>{l.keyCode==27?(l.preventDefault(),n.dispatch({effects:Ta.of(!1)}),n.focus()):l.keyCode==13&&(l.preventDefault(),s())},onsubmit:l=>{l.preventDefault(),s()}},Ie("label",n.state.phrase("Go to line"),": ",t)," ",Ie("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function s(){let l=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!l)return;let{state:a}=n,u=a.doc.lineAt(a.selection.main.head),[,d,g,O,v]=l,x=O?+O.slice(1):0,k=g?+g:u.number;if(g&&v){let M=k/100;d&&(M=M*(d=="-"?-1:1)+u.number/a.doc.lines),k=Math.round(a.doc.lines*M)}else g&&d&&(k=k*(d=="-"?-1:1)+u.number);let C=a.doc.line(Math.max(1,Math.min(a.doc.lines,k))),R=B.cursor(C.from+Math.max(0,Math.min(x,C.length)));n.dispatch({effects:[Ta.of(!1),te.scrollIntoView(R.from,{y:"center"})],selection:R}),n.focus()}return{dom:i}}const Ta=Oe.define(),vg=yt.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Ta)&&(n=t.value);return n},provide:n=>$o.from(n,e=>e?du:null)}),Xk=n=>{let e=Co(n,du);if(!e){let t=[Ta.of(!0)];n.state.field(vg,!1)==null&&t.push(Oe.appendConfig.of([vg,Ek])),n.dispatch({effects:t}),e=Co(n,du)}return e&&e.dom.querySelector("input").select(),!0},Ek=te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Ik={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Z0=re.define({combine(n){return tr(n,Ik,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Nk(n){let e=[jk,_k];return n&&e.push(Z0.of(n)),e}const Bk=he.mark({class:"cm-selectionMatch"}),Uk=he.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function yg(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Ge.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Ge.Word)}function zk(n,e,t,i){return n(e.sliceDoc(t,t+1))==Ge.Word&&n(e.sliceDoc(i-1,i))==Ge.Word}const _k=nt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(Z0),{state:t}=n,i=t.selection;if(i.ranges.length>1)return he.none;let s=i.main,l,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return he.none;let d=t.wordAt(s.head);if(!d)return he.none;a=t.charCategorizer(s.head),l=t.sliceDoc(d.from,d.to)}else{let d=s.to-s.from;if(d<e.minSelectionLength||d>200)return he.none;if(e.wholeWords){if(l=t.sliceDoc(s.from,s.to),a=t.charCategorizer(s.head),!(yg(a,t,s.from,s.to)&&zk(a,t,s.from,s.to)))return he.none}else if(l=t.sliceDoc(s.from,s.to).trim(),!l)return he.none}let u=[];for(let d of n.visibleRanges){let g=new ps(t.doc,l,d.from,d.to);for(;!g.next().done;){let{from:O,to:v}=g.value;if((!a||yg(a,t,O,v))&&(s.empty&&O<=s.from&&v>=s.to?u.push(Uk.range(O,v)):(O>=s.to||v<=s.from)&&u.push(Bk.range(O,v)),u.length>e.maxMatches))return he.none}}return he.set(u)}},{decorations:n=>n.decorations}),jk=te.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),qk=({state:n,dispatch:e})=>{let{selection:t}=n,i=B.create(t.ranges.map(s=>n.wordAt(s.head)||B.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function Gk(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),l=s&&s.from==t.from&&s.to==t.to;for(let a=!1,u=new ps(n.doc,e,i[i.length-1].to);;)if(u.next(),u.done){if(a)return null;u=new ps(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(d=>d.from==u.value.from))continue;if(l){let d=n.wordAt(u.value.from);if(!d||d.from!=u.value.from||d.to!=u.value.to)continue}return u.value}}const Fk=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(l=>l.from===l.to))return qk({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(l=>n.sliceDoc(l.from,l.to)!=i))return!1;let s=Gk(n,i);return s?(e(n.update({selection:n.selection.addRange(B.range(s.from,s.to),!1),effects:te.scrollIntoView(s.to)})),!0):!1},vs=re.define({combine(n){return tr(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new lQ(e),scrollToMatch:e=>te.scrollIntoView(e)})}});class A0{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Wk(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Jk(this):new Vk(this)}getCursor(e,t=0,i){let s=e.doc?e:we.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?Jn(this,s,t,i):Kn(this,s,t,i)}}class M0{constructor(e){this.spec=e}}function Kn(n,e,t,i){return new ps(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?Hk(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Hk(n,e){return(t,i,s,l)=>((l>t||l+s.length<i)&&(l=Math.max(0,t-2),s=n.sliceString(l,Math.min(n.length,i+2))),(e(Za(s,t-l))!=Ge.Word||e(Aa(s,t-l))!=Ge.Word)&&(e(Aa(s,i-l))!=Ge.Word||e(Za(s,i-l))!=Ge.Word))}class Vk extends M0{constructor(e){super(e)}nextMatch(e,t,i){let s=Kn(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=Kn(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let l=Math.max(t,s-1e4-this.spec.unquoted.length),a=Kn(this.spec,e,l,s),u=null;for(;!a.nextOverlapping().done;)u=a.value;if(u)return u;if(l==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Kn(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let l=Kn(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!l.next().done;)s(l.value.from,l.value.to)}}function Jn(n,e,t,i){return new P0(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Kk(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Za(n,e){return n.slice(Dt(n,e,!1),e)}function Aa(n,e){return n.slice(e,Dt(n,e))}function Kk(n){return(e,t,i)=>!i[0].length||(n(Za(i.input,i.index))!=Ge.Word||n(Aa(i.input,i.index))!=Ge.Word)&&(n(Aa(i.input,i.index+i[0].length))!=Ge.Word||n(Za(i.input,i.index+i[0].length))!=Ge.Word)}class Jk extends M0{nextMatch(e,t,i){let s=Jn(this.spec,e,i,e.doc.length).next();return s.done&&(s=Jn(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let l=Math.max(t,i-s*1e4),a=Jn(this.spec,e,l,i),u=null;for(;!a.next().done;)u=a.value;if(u&&(l==t||u.from>l+10))return u;if(l==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=Jn(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let l=Jn(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!l.next().done;)s(l.value.from,l.value.to)}}const Zo=Oe.define(),Nu=Oe.define(),Ur=yt.define({create(n){return new mf(pu(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Zo)?n=new mf(t.value.create(),n.panel):t.is(Nu)&&(n=new mf(n.query,t.value?Bu:null));return n},provide:n=>$o.from(n,e=>e.panel)});class mf{constructor(e,t){this.query=e,this.panel=t}}const eQ=he.mark({class:"cm-searchMatch"}),tQ=he.mark({class:"cm-searchMatch cm-searchMatch-selected"}),iQ=nt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Ur))}update(n){let e=n.state.field(Ur);(e!=n.startState.field(Ur)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return he.none;let{view:t}=this,i=new _r;for(let s=0,l=t.visibleRanges,a=l.length;s<a;s++){let{from:u,to:d}=l[s];for(;s<a-1&&d>l[s+1].from-2*250;)d=l[++s].to;n.highlight(t.state,u,d,(g,O)=>{let v=t.state.selection.ranges.some(x=>x.from==g&&x.to==O);i.add(g,O,v?tQ:eQ)})}return i.finish()}},{decorations:n=>n.decorations});function Uo(n){return e=>{let t=e.state.field(Ur,!1);return t&&t.query.spec.valid?n(e,t):L0(e)}}const Ma=Uo((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let s=B.single(i.from,i.to),l=n.state.facet(vs);return n.dispatch({selection:s,effects:[Uu(n,i),l.scrollToMatch(s.main,n)],userEvent:"select.search"}),R0(n),!0}),Ya=Uo((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);if(!s)return!1;let l=B.single(s.from,s.to),a=n.state.facet(vs);return n.dispatch({selection:l,effects:[Uu(n,s),a.scrollToMatch(l.main,n)],userEvent:"select.search"}),R0(n),!0}),rQ=Uo((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:B.create(t.map(i=>B.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),nQ=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,l=[],a=0;for(let u=new ps(n.doc,n.sliceDoc(i,s));!u.next().done;){if(l.length>1e3)return!1;u.value.from==i&&(a=l.length),l.push(B.range(u.value.from,u.value.to))}return e(n.update({selection:B.create(l,a),userEvent:"select.search.matches"})),!0},bg=Uo((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let l=e.nextMatch(t,i,i);if(!l)return!1;let a=[],u,d,g=[];if(l.from==i&&l.to==s&&(d=t.toText(e.getReplacement(l)),a.push({from:l.from,to:l.to,insert:d}),l=e.nextMatch(t,l.from,l.to),g.push(te.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),l){let O=a.length==0||a[0].from>=l.to?0:l.to-l.from-d.length;u=B.single(l.from-O,l.to-O),g.push(Uu(n,l)),g.push(t.facet(vs).scrollToMatch(u.main,n))}return n.dispatch({changes:a,selection:u,effects:g,userEvent:"input.replace"}),!0}),sQ=Uo((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:l,to:a}=s;return{from:l,to:a,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:te.announce.of(i),userEvent:"input.replace.all"}),!0});function Bu(n){return n.state.facet(vs).createPanel(n)}function pu(n,e){var t,i,s,l,a;let u=n.selection.main,d=u.empty||u.to>u.from+100?"":n.sliceDoc(u.from,u.to);if(e&&!d)return e;let g=n.facet(vs);return new A0({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:g.literal)?d:d.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:g.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:g.literal,regexp:(l=e==null?void 0:e.regexp)!==null&&l!==void 0?l:g.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:g.wholeWord})}function Y0(n){let e=Co(n,Bu);return e&&e.dom.querySelector("[main-field]")}function R0(n){let e=Y0(n);e&&e==n.root.activeElement&&e.select()}const L0=n=>{let e=n.state.field(Ur,!1);if(e&&e.panel){let t=Y0(n);if(t&&t!=n.root.activeElement){let i=pu(n.state,e.query.spec);i.valid&&n.dispatch({effects:Zo.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[Nu.of(!0),e?Zo.of(pu(n.state,e.query.spec)):Oe.appendConfig.of(hQ)]});return!0},D0=n=>{let e=n.state.field(Ur,!1);if(!e||!e.panel)return!1;let t=Co(n,Bu);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Nu.of(!1)}),!0},oQ=[{key:"Mod-f",run:L0,scope:"editor search-panel"},{key:"F3",run:Ma,shift:Ya,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ma,shift:Ya,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:D0,scope:"editor search-panel"},{key:"Mod-Shift-l",run:nQ},{key:"Alt-g",run:Xk},{key:"Mod-d",run:Fk,preventDefault:!0}];class lQ{constructor(e){this.view=e;let t=this.query=e.state.field(Ur).query.spec;this.commit=this.commit.bind(this),this.searchField=Ie("input",{value:t.search,placeholder:li(e,"Find"),"aria-label":li(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ie("input",{value:t.replace,placeholder:li(e,"Replace"),"aria-label":li(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ie("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ie("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ie("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,l,a){return Ie("button",{class:"cm-button",name:s,onclick:l,type:"button"},a)}this.dom=Ie("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Ma(e),[li(e,"next")]),i("prev",()=>Ya(e),[li(e,"previous")]),i("select",()=>rQ(e),[li(e,"all")]),Ie("label",null,[this.caseField,li(e,"match case")]),Ie("label",null,[this.reField,li(e,"regexp")]),Ie("label",null,[this.wordField,li(e,"by word")]),...e.state.readOnly?[]:[Ie("br"),this.replaceField,i("replace",()=>bg(e),[li(e,"replace")]),i("replaceAll",()=>sQ(e),[li(e,"replace all")])],Ie("button",{name:"close",onclick:()=>D0(e),"aria-label":li(e,"close"),type:"button"},["×"])])}commit(){let e=new A0({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Zo.of(e)}))}keydown(e){v1(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ya:Ma)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),bg(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Zo)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(vs).top}}function li(n,e){return n.state.phrase(e)}const Hl=30,Vl=/[\s\.,:;?!]/;function Uu(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,l=Math.max(i.from,e-Hl),a=Math.min(s,t+Hl),u=n.state.sliceDoc(l,a);if(l!=i.from){for(let d=0;d<Hl;d++)if(!Vl.test(u[d+1])&&Vl.test(u[d])){u=u.slice(d);break}}if(a!=s){for(let d=u.length-1;d>u.length-Hl;d--)if(!Vl.test(u[d-1])&&Vl.test(u[d])){u=u.slice(0,d);break}}return te.announce.of(`${n.state.phrase("current match")}. ${u} ${n.state.phrase("on line")} ${i.number}.`)}const aQ=te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),hQ=[Ur,xn.low(iQ),aQ];class W0{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=mt(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),l=s.search(E0(e,!1));return l<0?null:{from:i+l,to:this.pos,text:s.slice(l)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Sg(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function fQ(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let l=1;l<s.length;l++)t[s[l]]=!0}let i=Sg(e)+Sg(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function X0(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:fQ(e);return s=>{let l=s.matchBefore(i);return l||s.explicit?{from:l?l.from:s.pos,options:e,validFor:t}:null}}function uQ(n,e){return t=>{for(let i=mt(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class xg{constructor(e,t,i,s){this.completion=e,this.source=t,this.match=i,this.score=s}}function zr(n){return n.selection.main.from}function E0(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",l=i[i.length-1]!="$";return!s&&!l?n:new RegExp(`${s?"^":""}(?:${i})${l?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const I0=br.define();function cQ(n,e,t,i){let{main:s}=n.selection,l=t-s.from,a=i-s.from;return Object.assign(Object.assign({},n.changeByRange(u=>u!=s&&t!=i&&n.sliceDoc(u.from+l,u.from+a)!=n.sliceDoc(t,i)?{range:u}:{changes:{from:u.from+l,to:i==s.from?u.to:u.from+a,insert:e},range:B.cursor(u.from+l+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const wg=new WeakMap;function dQ(n){if(!Array.isArray(n))return n;let e=wg.get(n);return e||wg.set(n,e=X0(n)),e}const zu=Oe.define(),Ao=Oe.define();class pQ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Ct(e,t),s=yi(i);this.chars.push(i);let l=e.slice(t,t+s),a=l.toUpperCase();this.folded.push(Ct(a==l?l.toLowerCase():a,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:i,any:s,precise:l,byWord:a}=this;if(t.length==1){let E=Ct(e,0),F=yi(E),z=F==e.length?0:-100;if(E!=t[0])if(E==i[0])z+=-200;else return!1;return this.ret(z,[0,F])}let u=e.indexOf(this.pattern);if(u==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let d=t.length,g=0;if(u<0){for(let E=0,F=Math.min(e.length,200);E<F&&g<d;){let z=Ct(e,E);(z==t[g]||z==i[g])&&(s[g++]=E),E+=yi(z)}if(g<d)return!1}let O=0,v=0,x=!1,k=0,C=-1,R=-1,M=/[a-z]/.test(e),D=!0;for(let E=0,F=Math.min(e.length,200),z=0;E<F&&v<d;){let U=Ct(e,E);u<0&&(O<d&&U==t[O]&&(l[O++]=E),k<d&&(U==t[k]||U==i[k]?(k==0&&(C=E),R=E+1,k++):k=0));let j,oe=U<255?U>=48&&U<=57||U>=97&&U<=122?2:U>=65&&U<=90?1:0:(j=vu(U))!=j.toLowerCase()?1:j!=j.toUpperCase()?2:0;(!E||oe==1&&M||z==0&&oe!=0)&&(t[v]==U||i[v]==U&&(x=!0)?a[v++]=E:a.length&&(D=!1)),z=oe,E+=yi(U)}return v==d&&a[0]==0&&D?this.result(-100+(x?-200:0),a,e):k==d&&C==0?this.ret(-200-e.length+(R==e.length?0:-100),[0,R]):u>-1?this.ret(-700-e.length,[u,u+this.pattern.length]):k==d?this.ret(-200+-700-e.length,[C,R]):v==d?this.result(-100+(x?-200:0)+-700+(D?0:-1100),a,e):t.length==2?!1:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[],l=0;for(let a of t){let u=a+(this.astral?yi(Ct(i,a)):1);l&&s[l-1]==a?s[l-1]=u:(s[l++]=a,s[l++]=u)}return this.ret(e-i.length,s)}}const Lt=re.define({combine(n){return tr(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:gQ,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>kg(e(i),t(i)),optionClass:(e,t)=>i=>kg(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function kg(n,e){return n?e?n+" "+e:n:e}function gQ(n,e,t,i,s,l){let a=n.textDirection==Je.RTL,u=a,d=!1,g="top",O,v,x=e.left-s.left,k=s.right-e.right,C=i.right-i.left,R=i.bottom-i.top;if(u&&x<Math.min(C,k)?u=!1:!u&&k<Math.min(C,x)&&(u=!0),C<=(u?x:k))O=Math.max(s.top,Math.min(t.top,s.bottom-R))-e.top,v=Math.min(400,u?x:k);else{d=!0,v=Math.min(400,(a?e.right:s.right-e.left)-30);let E=s.bottom-e.bottom;E>=R||E>e.top?O=t.bottom-e.top:(g="bottom",O=e.bottom-t.top)}let M=(e.bottom-e.top)/l.offsetHeight,D=(e.right-e.left)/l.offsetWidth;return{style:`${g}: ${O/M}px; max-width: ${v/D}px`,class:"cm-completionInfo-"+(d?a?"left-narrow":"right-narrow":u?"left":"right")}}function OQ(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s){let l=document.createElement("span");l.className="cm-completionLabel";let a=t.displayLabel||t.label,u=0;for(let d=0;d<s.length;){let g=s[d++],O=s[d++];g>u&&l.appendChild(document.createTextNode(a.slice(u,g)));let v=l.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(a.slice(g,O))),v.className="cm-completionMatchedText",u=O}return u<a.length&&l.appendChild(document.createTextNode(a.slice(u))),l},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function vf(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class mQ{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:d=>this.placeInfo(d),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:l,selected:a}=s.open,u=e.state.facet(Lt);this.optionContent=OQ(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=vf(l.length,a,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",d=>{let{options:g}=e.state.field(t).open;for(let O=d.target,v;O&&O!=this.dom;O=O.parentNode)if(O.nodeName=="LI"&&(v=/-(\d+)$/.exec(O.id))&&+v[1]<g.length){this.applyCompletion(e,g[+v[1]]),d.preventDefault();return}}),this.dom.addEventListener("focusout",d=>{let g=e.state.field(this.stateField,!1);g&&g.tooltip&&e.state.facet(Lt).closeOnBlur&&d.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ao.of(null)})}),this.showOptions(l,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:l,selected:a,disabled:u}=i.open;(!s.open||s.open.options!=l)&&(this.range=vf(l.length,a,e.state.facet(Lt).maxRenderedOptions),this.showOptions(l,i.id)),this.updateSel(),u!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!u)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=vf(t.options.length,t.selected,this.view.state.facet(Lt).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let l=typeof s=="string"?document.createTextNode(s):s(i);if(!l)return;"then"in l?l.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Si(this.view.state,a,"completion info")):this.addInfoPane(l,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:l}=e;i.appendChild(s),this.infoDestroy=l||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&yQ(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),l=this.space;if(!l){let a=this.dom.ownerDocument.defaultView||window;l={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return s.top>Math.min(l.bottom,t.bottom)-10||s.bottom<Math.max(l.top,t.top)+10?null:this.view.state.facet(Lt).positionInfo(this.view,t,s,i,l,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let l=null;for(let a=i.from;a<i.to;a++){let{completion:u,match:d}=e[a],{section:g}=u;if(g){let x=typeof g=="string"?g:g.name;if(x!=l&&(a>i.from||i.from==0))if(l=x,typeof g!="string"&&g.header)s.appendChild(g.header(g));else{let k=s.appendChild(document.createElement("completion-section"));k.textContent=x}}const O=s.appendChild(document.createElement("li"));O.id=t+"-"+a,O.setAttribute("role","option");let v=this.optionClass(u);v&&(O.className=v);for(let x of this.optionContent){let k=x(u,this.view.state,d);k&&O.appendChild(k)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function vQ(n,e){return t=>new mQ(t,n,e)}function yQ(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/s:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/s)}function Qg(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function bQ(n,e){let t=[],i=null,s=d=>{t.push(d);let{section:g}=d.completion;if(g){i||(i=[]);let O=typeof g=="string"?g:g.name;i.some(v=>v.name==O)||i.push(typeof g=="string"?{name:O}:g)}};for(let d of n)if(d.hasResult()){let g=d.result.getMatch;if(d.result.filter===!1)for(let O of d.result.options)s(new xg(O,d.source,g?g(O):[],1e9-t.length));else{let O=new pQ(e.sliceDoc(d.from,d.to));for(let v of d.result.options)if(O.match(v.label)){let x=v.displayLabel?g?g(v,O.matched):[]:O.matched;s(new xg(v,d.source,x,O.score+(v.boost||0)))}}}if(i){let d=Object.create(null),g=0,O=(v,x)=>{var k,C;return((k=v.rank)!==null&&k!==void 0?k:1e9)-((C=x.rank)!==null&&C!==void 0?C:1e9)||(v.name<x.name?-1:1)};for(let v of i.sort(O))g-=1e5,d[v.name]=g;for(let v of t){let{section:x}=v.completion;x&&(v.score+=d[typeof x=="string"?x:x.name])}}let l=[],a=null,u=e.facet(Lt).compareCompletions;for(let d of t.sort((g,O)=>O.score-g.score||u(g.completion,O.completion))){let g=d.completion;!a||a.label!=g.label||a.detail!=g.detail||a.type!=null&&g.type!=null&&a.type!=g.type||a.apply!=g.apply||a.boost!=g.boost?l.push(d):Qg(d.completion)>Qg(a)&&(l[l.length-1]=d),a=d.completion}return l}class rs{constructor(e,t,i,s,l,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=l,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new rs(this.options,Cg(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,l){let a=bQ(e,t);if(!a.length)return s&&e.some(d=>d.state==1)?new rs(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let u=t.facet(Lt).selectOnOpen?0:-1;if(s&&s.selected!=u&&s.selected!=-1){let d=s.options[s.selected].completion;for(let g=0;g<a.length;g++)if(a[g].completion==d){u=g;break}}return new rs(a,Cg(i,u),{pos:e.reduce((d,g)=>g.hasResult()?Math.min(d,g.from):d,1e8),create:QQ,above:l.aboveCursor},s?s.timestamp:Date.now(),u,!1)}map(e){return new rs(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Ra{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Ra(wQ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Lt),l=(i.override||t.languageDataAt("autocomplete",zr(t)).map(dQ)).map(u=>(this.active.find(g=>g.source==u)||new ei(u,this.active.some(g=>g.state!=0)?1:0)).update(e,i));l.length==this.active.length&&l.every((u,d)=>u==this.active[d])&&(l=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||l.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!SQ(l,this.active)?a=rs.build(l,t,this.id,a,i):a&&a.disabled&&!l.some(u=>u.state==1)&&(a=null),!a&&l.every(u=>u.state!=1)&&l.some(u=>u.hasResult())&&(l=l.map(u=>u.hasResult()?new ei(u.source,0):u));for(let u of e.effects)u.is(B0)&&(a=a&&a.setSelected(u.value,this.id));return l==this.active&&a==this.open?this:new Ra(l,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:xQ}}function SQ(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==n.length,l=i==e.length;if(s||l)return s==l;if(n[t++].result!=e[i++].result)return!1}}const xQ={"aria-autocomplete":"list"};function Cg(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const wQ=[];function gu(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class ei{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=gu(e),s=this;i?s=s.handleUserEvent(e,i,t):e.docChanged?s=s.handleChange(e):e.selection&&s.state!=0&&(s=new ei(s.source,0));for(let l of e.effects)if(l.is(zu))s=new ei(s.source,1,l.value?zr(e.state):-1);else if(l.is(Ao))s=new ei(s.source,0);else if(l.is(N0))for(let a of l.value)a.source==s.source&&(s=a);return s}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new ei(this.source,1)}handleChange(e){return e.changes.touchesRange(zr(e.startState))?new ei(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ei(this.source,this.state,e.mapPos(this.explicitPos))}}class hs extends ei{constructor(e,t,i,s,l){super(e,2,t),this.result=i,this.from=s,this.to=l}hasResult(){return!0}handleUserEvent(e,t,i){var s;let l=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),u=zr(e.state);if((this.explicitPos<0?u<=l:u<this.from)||u>a||t=="delete"&&zr(e.startState)==this.from)return new ei(this.source,t=="input"&&i.activateOnTyping?1:0);let d=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),g;return kQ(this.result.validFor,e.state,l,a)?new hs(this.source,d,this.result,l,a):this.result.update&&(g=this.result.update(this.result,l,a,new W0(e.state,u,d>=0)))?new hs(this.source,d,g,g.from,(s=g.to)!==null&&s!==void 0?s:zr(e.state)):new ei(this.source,1,d)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ei(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new hs(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function kQ(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):E0(n,!0).test(s)}const N0=Oe.define({map(n,e){return n.map(t=>t.map(e))}}),B0=Oe.define(),fi=yt.define({create(){return Ra.start()},update(n,e){return n.update(e)},provide:n=>[$u.from(n,e=>e.tooltip),te.contentAttributes.from(n,e=>e.attrs)]});function U0(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(fi).active.find(s=>s.source==e.source);return i instanceof hs?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},cQ(n.state,t,i.from,i.to)),{annotations:I0.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const QQ=vQ(fi,U0);function Kl(n,e="option"){return t=>{let i=t.state.field(fi,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Lt).interactionDelay)return!1;let s=1,l;e=="page"&&(l=ym(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(l.dom.offsetHeight/l.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,u=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:a-1;return u<0?u=e=="page"?0:a-1:u>=a&&(u=e=="page"?a-1:0),t.dispatch({effects:B0.of(u)}),!0}}const CQ=n=>{let e=n.state.field(fi,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Lt).interactionDelay?!1:U0(n,e.open.options[e.open.selected])},$Q=n=>n.state.field(fi,!1)?(n.dispatch({effects:zu.of(!0)}),!0):!1,PQ=n=>{let e=n.state.field(fi,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Ao.of(null)}),!0)};class TQ{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const ZQ=50,AQ=1e3,MQ=nt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(fi).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(fi);if(!n.selectionSet&&!n.docChanged&&n.startState.field(fi)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!gu(i));for(let i=0;i<this.running.length;i++){let s=this.running[i];if(t||s.updates.length+n.transactions.length>ZQ&&Date.now()-s.time>AQ){for(let l of s.context.abortListeners)try{l()}catch(a){Si(this.view.state,a)}s.context.abortListeners=null,this.running.splice(i--,1)}else s.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(s=>s.active.source==i.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let i of n.transactions)gu(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(fi);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=zr(e),i=new W0(e,t,n.explicitPos==t),s=new TQ(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(l=>{s.context.aborted||(s.done=l||null,this.scheduleAccept())},l=>{this.view.dispatch({effects:Ao.of(null)}),Si(this.view.state,l)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Lt).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Lt);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=new hs(s.active.source,s.active.explicitPos,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:zr(s.updates.length?s.updates[0].startState:this.view.state));for(let u of s.updates)a=a.update(u,t);if(a.hasResult()){e.push(a);continue}}let l=this.view.state.field(fi).active.find(a=>a.source==s.active.source);if(l&&l.state==1)if(s.done==null){let a=new ei(s.active.source,0);for(let u of s.updates)a=a.update(u,t);a.state!=1&&e.push(a)}else this.startQuery(l)}e.length&&this.view.dispatch({effects:N0.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(fi,!1);if(e&&e.tooltip&&this.view.state.facet(Lt).closeOnBlur){let t=e.open&&ym(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&this.view.dispatch({effects:Ao.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:zu.of(!1)}),20),this.composing=0}}}),z0=te.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class YQ{constructor(e,t,i,s){this.field=e,this.line=t,this.from=i,this.to=s}}class _u{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,Pt.TrackDel),i=e.mapPos(this.to,1,Pt.TrackDel);return t==null||i==null?null:new _u(this.field,t,i)}}class ju{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],s=[t],l=e.doc.lineAt(t),a=/^\s*/.exec(l.text)[0];for(let d of this.lines){if(i.length){let g=a,O=/^\t*/.exec(d)[0].length;for(let v=0;v<O;v++)g+=e.facet(Eo);s.push(t+g.length-O),d=g+d.slice(O)}i.push(d),t+=d.length+1}let u=this.fieldPositions.map(d=>new _u(d.field,s[d.line]+d.from,s[d.line]+d.to));return{text:i,ranges:u}}static parse(e){let t=[],i=[],s=[],l;for(let a of e.split(/\r\n?|\n/)){for(;l=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(a);){let u=l[1]?+l[1]:null,d=l[2]||l[3]||"",g=-1;for(let O=0;O<t.length;O++)(u!=null?t[O].seq==u:d&&t[O].name==d)&&(g=O);if(g<0){let O=0;for(;O<t.length&&(u==null||t[O].seq!=null&&t[O].seq<u);)O++;t.splice(O,0,{seq:u,name:d}),g=O;for(let v of s)v.field>=g&&v.field++}s.push(new YQ(g,i.length,l.index,l.index+d.length)),a=a.slice(0,l.index)+d+a.slice(l.index+l[0].length)}for(let u;u=/\\([{}])/.exec(a);){a=a.slice(0,u.index)+u[1]+a.slice(u.index+u[0].length);for(let d of s)d.line==i.length&&d.from>u.index&&(d.from--,d.to--)}i.push(a)}return new ju(i,s)}}let RQ=he.widget({widget:new class extends ir{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),LQ=he.mark({class:"cm-snippetField"});class ys{constructor(e,t){this.ranges=e,this.active=t,this.deco=he.set(e.map(i=>(i.from==i.to?RQ:LQ).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let s=i.map(e);if(!s)return null;t.push(s)}return new ys(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const zo=Oe.define({map(n,e){return n&&n.map(e)}}),DQ=Oe.define(),Mo=yt.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(zo))return t.value;if(t.is(DQ)&&n)return new ys(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>te.decorations.from(n,e=>e?e.deco:he.none)});function qu(n,e){return B.create(n.filter(t=>t.field==e).map(t=>B.range(t.from,t.to)))}function WQ(n){let e=ju.parse(n);return(t,i,s,l)=>{let{text:a,ranges:u}=e.instantiate(t.state,s),d={changes:{from:s,to:l,insert:Ze.of(a)},scrollIntoView:!0,annotations:i?I0.of(i):void 0};if(u.length&&(d.selection=qu(u,0)),u.length>1){let g=new ys(u,0),O=d.effects=[zo.of(g)];t.state.field(Mo,!1)===void 0&&O.push(Oe.appendConfig.of([Mo,BQ,UQ,z0]))}t.dispatch(t.state.update(d))}}function _0(n){return({state:e,dispatch:t})=>{let i=e.field(Mo,!1);if(!i||n<0&&i.active==0)return!1;let s=i.active+n,l=n>0&&!i.ranges.some(a=>a.field==s+n);return t(e.update({selection:qu(i.ranges,s),effects:zo.of(l?null:new ys(i.ranges,s)),scrollIntoView:!0})),!0}}const XQ=({state:n,dispatch:e})=>n.field(Mo,!1)?(e(n.update({effects:zo.of(null)})),!0):!1,EQ=_0(1),IQ=_0(-1),NQ=[{key:"Tab",run:EQ,shift:IQ},{key:"Escape",run:XQ}],$g=re.define({combine(n){return n.length?n[0]:NQ}}),BQ=xn.highest(Wo.compute([$g],n=>n.facet($g)));function Jt(n,e){return Object.assign(Object.assign({},e),{apply:WQ(n)})}const UQ=te.domEventHandlers({mousedown(n,e){let t=e.state.field(Mo,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let s=t.ranges.find(l=>l.from<=i&&l.to>=i);return!s||s.field==t.active?!1:(e.dispatch({selection:qu(t.ranges,s.field),effects:zo.of(t.ranges.some(l=>l.field>s.field)?new ys(t.ranges,s.field):null),scrollIntoView:!0}),!0)}}),Yo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},On=Oe.define({map(n,e){let t=e.mapPos(n,-1,Pt.TrackAfter);return t??void 0}}),Gu=new class extends yn{};Gu.startSide=1;Gu.endSide=-1;const j0=yt.define({create(){return Ye.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=Ye.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(On)&&(n=n.update({add:[Gu.range(t.value,t.value+1)]}));return n}});function zQ(){return[jQ,j0]}const yf="()[]{}<>";function q0(n){for(let e=0;e<yf.length;e+=2)if(yf.charCodeAt(e)==n)return yf.charAt(e+1);return vu(n<128?n:n+1)}function G0(n,e){return n.languageDataAt("closeBrackets",e)[0]||Yo}const _Q=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),jQ=te.inputHandler.of((n,e,t,i)=>{if((_Q?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&yi(Ct(i,0))==1||e!=s.from||t!=s.to)return!1;let l=FQ(n.state,i);return l?(n.dispatch(l),!0):!1}),qQ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=G0(n,n.selection.main.head).brackets||Yo.brackets,s=null,l=n.changeByRange(a=>{if(a.empty){let u=HQ(n.doc,a.head);for(let d of i)if(d==u&&qa(n.doc,a.head)==q0(Ct(d,0)))return{changes:{from:a.head-d.length,to:a.head+d.length},range:B.cursor(a.head-d.length)}}return{range:s=a}});return s||e(n.update(l,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},GQ=[{key:"Backspace",run:qQ}];function FQ(n,e){let t=G0(n,n.selection.main.head),i=t.brackets||Yo.brackets;for(let s of i){let l=q0(Ct(s,0));if(e==s)return l==s?JQ(n,s,i.indexOf(s+s+s)>-1,t):VQ(n,s,l,t.before||Yo.before);if(e==l&&F0(n,n.selection.main.from))return KQ(n,s,l)}return null}function F0(n,e){let t=!1;return n.field(j0).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function qa(n,e){let t=n.sliceString(e,e+2);return t.slice(0,yi(Ct(t,0)))}function HQ(n,e){let t=n.sliceString(e-2,e);return yi(Ct(t,0))==t.length?t:t.slice(1)}function VQ(n,e,t,i){let s=null,l=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:On.of(a.to+e.length),range:B.range(a.anchor+e.length,a.head+e.length)};let u=qa(n.doc,a.head);return!u||/\s/.test(u)||i.indexOf(u)>-1?{changes:{insert:e+t,from:a.head},effects:On.of(a.head+e.length),range:B.cursor(a.head+e.length)}:{range:s=a}});return s?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function KQ(n,e,t){let i=null,s=n.changeByRange(l=>l.empty&&qa(n.doc,l.head)==t?{changes:{from:l.head,to:l.head+t.length,insert:t},range:B.cursor(l.head+t.length)}:i={range:l});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function JQ(n,e,t,i){let s=i.stringPrefixes||Yo.stringPrefixes,l=null,a=n.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:On.of(u.to+e.length),range:B.range(u.anchor+e.length,u.head+e.length)};let d=u.head,g=qa(n.doc,d),O;if(g==e){if(Pg(n,d))return{changes:{insert:e+e,from:d},effects:On.of(d+e.length),range:B.cursor(d+e.length)};if(F0(n,d)){let x=t&&n.sliceDoc(d,d+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:d,to:d+x.length,insert:x},range:B.cursor(d+x.length)}}}else{if(t&&n.sliceDoc(d-2*e.length,d)==e+e&&(O=Tg(n,d-2*e.length,s))>-1&&Pg(n,O))return{changes:{insert:e+e+e+e,from:d},effects:On.of(d+e.length),range:B.cursor(d+e.length)};if(n.charCategorizer(d)(g)!=Ge.Word&&Tg(n,d,s)>-1&&!eC(n,d,e,s))return{changes:{insert:e+e,from:d},effects:On.of(d+e.length),range:B.cursor(d+e.length)}}return{range:l=u}});return l?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Pg(n,e){let t=mt(n).resolveInner(e+1);return t.parent&&t.from==e}function eC(n,e,t,i){let s=mt(n).resolveInner(e,-1),l=i.reduce((a,u)=>Math.max(a,u.length),0);for(let a=0;a<5;a++){let u=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+l)),d=u.indexOf(t);if(!d||d>-1&&i.indexOf(u.slice(0,d))>-1){let O=s.firstChild;for(;O&&O.from==s.from&&O.to-O.from>t.length+d;){if(n.sliceDoc(O.to-t.length,O.to)==t)return!1;O=O.firstChild}return!0}let g=s.to==e&&s.parent;if(!g)break;s=g}return!1}function Tg(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Ge.Word)return e;for(let s of t){let l=e-s.length;if(n.sliceDoc(l,e)==s&&i(n.sliceDoc(l-1,l))!=Ge.Word)return l}return-1}function tC(n={}){return[fi,Lt.of(n),MQ,iC,z0]}const H0=[{key:"Ctrl-Space",run:$Q},{key:"Escape",run:PQ},{key:"ArrowDown",run:Kl(!0)},{key:"ArrowUp",run:Kl(!1)},{key:"PageDown",run:Kl(!0,"page")},{key:"PageUp",run:Kl(!1,"page")},{key:"Enter",run:CQ}],iC=xn.highest(Wo.computeN([Lt],n=>n.facet(Lt).defaultKeymap?[H0]:[]));class rC{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class dn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,l=i.facet(J0).markerFilter;l&&(s=l(s));let a=he.set(s.map(u=>u.from==u.to||u.from==u.to-1&&i.doc.lineAt(u.from).to==u.from?he.widget({widget:new cC(u),diagnostic:u}).range(u.from):he.mark({attributes:{class:"cm-lintRange cm-lintRange-"+u.severity+(u.markClass?" "+u.markClass:"")},diagnostic:u}).range(u.from,u.to)),!0);return new dn(a,t,gs(a))}}function gs(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,l,{spec:a})=>{if(!(e&&a.diagnostic!=e))return i=new rC(s,l,a.diagnostic),!1}),i}function nC(n,e){let t=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(i=>i.is(V0))||n.changes.touchesRange(t.from,t.to))}function sC(n,e){return n.field(ci,!1)?e:e.concat(Oe.appendConfig.of(gC))}const V0=Oe.define(),Fu=Oe.define(),K0=Oe.define(),ci=yt.define({create(){return new dn(he.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);i=gs(t,n.selected.diagnostic,s)||gs(t,null,s)}n=new dn(t,n.panel,i)}for(let t of e.effects)t.is(V0)?n=dn.init(t.value,n.panel,e.state):t.is(Fu)?n=new dn(n.diagnostics,t.value?Ga.open:null,n.selected):t.is(K0)&&(n=new dn(n.diagnostics,n.panel,t.value));return n},provide:n=>[$o.from(n,e=>e.panel),te.decorations.from(n,e=>e.diagnostics)]}),oC=he.mark({class:"cm-lintRange cm-lintRange-active"});function lC(n,e,t){let{diagnostics:i}=n.state.field(ci),s=[],l=2e8,a=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(d,g,{spec:O})=>{e>=d&&e<=g&&(d==g||(e>d||t>0)&&(e<g||t<0))&&(s.push(O.diagnostic),l=Math.min(d,l),a=Math.max(g,a))});let u=n.state.facet(J0).tooltipFilter;return u&&(s=u(s)),s.length?{pos:l,end:a,above:n.state.doc.lineAt(l).to<a,create(){return{dom:aC(n,s)}}}:null}function aC(n,e){return Ie("ul",{class:"cm-tooltip-lint"},e.map(t=>tv(n,t,!1)))}const hC=n=>{let e=n.state.field(ci,!1);(!e||!e.panel)&&n.dispatch({effects:sC(n.state,[Fu.of(!0)])});let t=Co(n,Ga.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Zg=n=>{let e=n.state.field(ci,!1);return!e||!e.panel?!1:(n.dispatch({effects:Fu.of(!1)}),!0)},fC=n=>{let e=n.state.field(ci,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},uC=[{key:"Mod-Shift-m",run:hC,preventDefault:!0},{key:"F8",run:fC}],J0=re.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},tr(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function ev(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(l=>l.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function tv(n,e,t){var i;let s=t?ev(e.actions):[];return Ie("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ie("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((l,a)=>{let u=!1,d=x=>{if(x.preventDefault(),u)return;u=!0;let k=gs(n.state.field(ci).diagnostics,e);k&&l.apply(n,k.from,k.to)},{name:g}=l,O=s[a]?g.indexOf(s[a]):-1,v=O<0?g:[g.slice(0,O),Ie("u",g.slice(O,O+1)),g.slice(O+1)];return Ie("button",{type:"button",class:"cm-diagnosticAction",onclick:d,onmousedown:d,"aria-label":` Action: ${g}${O<0?"":` (access key "${s[a]})"`}.`},v)}),e.source&&Ie("div",{class:"cm-diagnosticSource"},e.source))}class cC extends ir{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ie("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Ag{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=tv(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ga{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)Zg(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:l}=this.items[this.selectedIndex],a=ev(l.actions);for(let u=0;u<a.length;u++)if(a[u].toUpperCase().charCodeAt(0)==s.keyCode){let d=gs(this.view.state.field(ci).diagnostics,l);d&&l.actions[u].apply(e,d.from,d.to)}}else return;s.preventDefault()},i=s=>{for(let l=0;l<this.items.length;l++)this.items[l].dom.contains(s.target)&&this.moveSelection(l)};this.list=Ie("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ie("div",{class:"cm-panel-lint"},this.list,Ie("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Zg(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(ci).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ci),i=0,s=!1,l=null;for(e.between(0,this.view.state.doc.length,(a,u,{spec:d})=>{let g=-1,O;for(let v=i;v<this.items.length;v++)if(this.items[v].diagnostic==d.diagnostic){g=v;break}g<0?(O=new Ag(this.view,d.diagnostic),this.items.splice(i,0,O),s=!0):(O=this.items[g],g>i&&(this.items.splice(i,g-i),s=!0)),t&&O.diagnostic==t.diagnostic?O.dom.hasAttribute("aria-selected")||(O.dom.setAttribute("aria-selected","true"),l=O):O.dom.hasAttribute("aria-selected")&&O.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new Ag(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),l?(this.list.setAttribute("aria-activedescendant",l.id),this.view.requestMeasure({key:this,read:()=>({sel:l.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:u})=>{let d=u.height/this.list.offsetHeight;a.top<u.top?this.list.scrollTop-=(u.top-a.top)/d:a.bottom>u.bottom&&(this.list.scrollTop+=(a.bottom-u.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(ci),i=gs(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:K0.of(i)})}static open(e){return new Ga(e)}}function dC(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Jl(n){return dC(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pC=te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Jl("#d11")},".cm-lintRange-warning":{backgroundImage:Jl("orange")},".cm-lintRange-info":{backgroundImage:Jl("#999")},".cm-lintRange-hint":{backgroundImage:Jl("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),gC=[ci,te.decorations.compute([ci],n=>{let{selected:e,panel:t}=n.field(ci);return!e||!t||e.from==e.to?he.none:he.set([oC.range(e.from,e.to)])}),sx(lC,{hideOn:nC}),pC],OC=(()=>[px(),mx(),L1(),Lw(),lw(),k1(),T1(),we.allowMultipleSelections.of(!0),qx(),zm(uw,{fallback:!0}),vw(),zQ(),tC(),F1(),K1(),N1(),Nk(),Wo.of([...GQ,...Lk,...oQ,...zw,...rw,...H0,...uC])])();/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var mC=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[OC]}),vC=Symbol("vue-codemirror-global-config"),_t,yC=function(n){var e=n.onUpdate,t=n.onChange,i=n.onFocus,s=n.onBlur,l=function(a,u){var d={};for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&u.indexOf(g)<0&&(d[g]=a[g]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var O=0;for(g=Object.getOwnPropertySymbols(a);O<g.length;O++)u.indexOf(g[O])<0&&Object.prototype.propertyIsEnumerable.call(a,g[O])&&(d[g[O]]=a[g[O]])}return d}(n,["onUpdate","onChange","onFocus","onBlur"]);return we.create({doc:l.doc,selection:l.selection,extensions:(Array.isArray(l.extensions)?l.extensions:[l.extensions]).concat([te.updateListener.of(function(a){e(a),a.docChanged&&t(a.state.doc.toString(),a),a.focusChanged&&(a.view.hasFocus?i(a):s(a))})])})},es=function(n){var e=new Ro;return{compartment:e,run:function(t){e.get(n.state)?n.dispatch({effects:e.reconfigure(t)}):n.dispatch({effects:Oe.appendConfig.of(e.of(t))})}}},Mg=function(n,e){var t=es(n),i=t.compartment,s=t.run;return function(l){var a=i.get(n.state);s(l??a!==e?e:[])}},ea={type:Boolean,default:void 0},bC={autofocus:ea,disabled:ea,indentWithTab:ea,tabSize:Number,placeholder:String,style:Object,autoDestroy:ea,phrases:Object,root:Object,extensions:Array,selection:Object},SC={modelValue:{type:String,default:""}},xC=Object.assign(Object.assign({},bC),SC);(function(n){n.Change="change",n.Update="update",n.Focus="focus",n.Blur="blur",n.Ready="ready",n.ModelUpdate="update:modelValue"})(_t||(_t={}));var pn={};pn[_t.Change]=function(n,e){return!0},pn[_t.Update]=function(n){return!0},pn[_t.Focus]=function(n){return!0},pn[_t.Blur]=function(n){return!0},pn[_t.Ready]=function(n){return!0};var iv={};iv[_t.ModelUpdate]=pn[_t.Change];var wC=Object.assign(Object.assign({},pn),iv),kC=Hg({name:"VueCodemirror",props:Object.assign({},xC),emits:Object.assign({},wC),setup:function(n,e){var t=jh(),i=jh(),s=jh(),l=Object.assign(Object.assign({},mC),gb(vC,{})),a=Ob(function(){var u={};return Object.keys(yb(n)).forEach(function(d){var g;d!=="modelValue"&&(u[d]=(g=n[d])!==null&&g!==void 0?g:l[d])}),u});return Vg(function(){var u;i.value=yC({doc:n.modelValue,selection:a.value.selection,extensions:(u=l.extensions)!==null&&u!==void 0?u:[],onFocus:function(g){return e.emit(_t.Focus,g)},onBlur:function(g){return e.emit(_t.Blur,g)},onUpdate:function(g){return e.emit(_t.Update,g)},onChange:function(g,O){g!==n.modelValue&&(e.emit(_t.Change,g,O),e.emit(_t.ModelUpdate,g,O))}}),s.value=function(g){return new te(Object.assign({},g))}({state:i.value,parent:t.value,root:a.value.root});var d=function(g){var O=function(){return g.state.doc.toString()},v=es(g).run,x=Mg(g,[te.editable.of(!1),we.readOnly.of(!0)]),k=Mg(g,Wo.of([Dk])),C=es(g).run,R=es(g).run,M=es(g).run,D=es(g).run;return{focus:function(){return g.focus()},getDoc:O,setDoc:function(E){E!==O()&&g.dispatch({changes:{from:0,to:g.state.doc.length,insert:E}})},reExtensions:v,toggleDisabled:x,toggleIndentWithTab:k,setTabSize:function(E){C([we.tabSize.of(E),Eo.of(" ".repeat(E))])},setPhrases:function(E){R([we.phrases.of(E)])},setPlaceholder:function(E){M(_1(E))},setStyle:function(E){E===void 0&&(E={}),D(te.theme({"&":Object.assign({},E)}))}}}(s.value);Lr(function(){return n.modelValue},function(g){g!==d.getDoc()&&d.setDoc(g)}),Lr(function(){return n.extensions},function(g){return d.reExtensions(g||[])},{immediate:!0}),Lr(function(){return a.value.disabled},function(g){return d.toggleDisabled(g)},{immediate:!0}),Lr(function(){return a.value.indentWithTab},function(g){return d.toggleIndentWithTab(g)},{immediate:!0}),Lr(function(){return a.value.tabSize},function(g){return d.setTabSize(g)},{immediate:!0}),Lr(function(){return a.value.phrases},function(g){return d.setPhrases(g||{})},{immediate:!0}),Lr(function(){return a.value.placeholder},function(g){return d.setPlaceholder(g)},{immediate:!0}),Lr(function(){return a.value.style},function(g){return d.setStyle(g)},{immediate:!0}),a.value.autofocus&&d.focus(),e.emit(_t.Ready,{state:i.value,view:s.value,container:t.value})}),mb(function(){a.value.autoDestroy&&s.value&&function(u){u.destroy()}(s.value)}),function(){return vb("div",{class:"v-codemirror",style:{display:"contents"},ref:t})}}}),QC=kC;class La{constructor(e,t,i,s,l,a,u,d,g,O=0,v){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=l,this.score=a,this.buffer=u,this.bufferBase=d,this.curContext=g,this.lookAhead=O,this.parent=v}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new La(e,[],t,i,i,0,[],0,s?new Yg(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:l}=this.p,a=l.dynamicPrecedence(s);if(a&&(this.score+=a),i==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),this.reduceContext(s,this.reducePos);return}let u=this.stack.length-(i-1)*3-(e&262144?6:0),d=u?this.stack[u-2]:this.p.ranges[0].from,g=this.reducePos-d;g>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=g):this.p.lastBigReductionSize<g&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=g));let O=u?this.stack[u-1]:0,v=this.bufferBase+this.buffer.length-O;if(s<l.minRepeatTerm||e&131072){let x=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,x,v+4,!0)}if(e&262144)this.state=this.stack[u];else{let x=this.stack[u-3];this.state=l.getGoto(x,s,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(s,d)}storeNode(e,t,i,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,u=this.buffer.length;if(u==0&&a.parent&&(u=a.bufferBase-a.parent.bufferBase,a=a.parent),u>0&&a.buffer[u-4]==0&&a.buffer[u-1]>-1){if(t==i)return;if(a.buffer[u-2]>=t){a.buffer[u-2]=i;return}}}if(!l||this.pos==i)this.buffer.push(e,t,i,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4);else{let l=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(l,1)||(this.reducePos=s)),this.pushState(l,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,s,4)}}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new La(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new CC(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((u,d)=>d&1&&u==a)||s.push(t[l],a)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,l=this.stack.length-i*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let u=(a>>19)-l;if(u>1){let d=a&65535,g=this.stack.length-u*3;if(g>=0&&e.getGoto(this.stack[g],d,!1)>=0)return u<<19|65536|d}}else{let u=i(a,l+1);if(u!=null)return u}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Yg(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Yg{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class CC{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Da{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Da(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Da(this.stack,this.pos,this.index)}}function po(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let l=0;for(;;){let a=n.charCodeAt(i++),u=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let d=a-32;if(d>=46&&(d-=46,u=!0),l+=d,u)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class fa{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Rg=new fa;class $C{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Rg,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<i.from;){if(!s)return null;let a=this.ranges[--s];l-=i.from-a.to,i=a}for(;t<0?l>i.to:l>=i.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-i.to,i=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(i=l,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,u=this.range;for(;u.to<=i;)u=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Rg,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class fs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;rv(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}fs.prototype.contextual=fs.prototype.fallback=fs.prototype.extend=!1;class Ou{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data=typeof e=="string"?po(e):e}token(e,t){let i=e.pos,s=0;for(;;){let l=e.next<0,a=e.resolveOffset(1,1);if(rv(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(l||s++,a==null)break;e.reset(a,e.token)}s&&(e.reset(i,e.token),e.acceptToken(this.elseToken,s))}}Ou.prototype.contextual=fs.prototype.fallback=fs.prototype.extend=!1;class Hu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function rv(n,e,t,i,s,l){let a=0,u=1<<i,{dialect:d}=t.p.parser;e:for(;u&n[a];){let g=n[a+1];for(let k=a+3;k<g;k+=2)if((n[k+1]&u)>0){let C=n[k];if(d.allows(C)&&(e.token.value==-1||e.token.value==C||PC(C,e.token.value,s,l))){e.acceptToken(C);break}}let O=e.next,v=0,x=n[a+2];if(e.next<0&&x>v&&n[g+x*3-3]==65535){a=n[g+x*3-1];continue e}for(;v<x;){let k=v+x>>1,C=g+k+(k<<1),R=n[C],M=n[C+1]||65536;if(O<R)x=k;else if(O>=M)v=k+1;else{a=n[C+2],e.advance();continue e}}break}}function Lg(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function PC(n,e,t,i){let s=Lg(t,i,e);return s<0||Lg(t,i,n)<s}const ai=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let bf=null;function Dg(n,e,t){let i=n.cursor(gt.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class TC{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Dg(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Dg(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=i.children[s],a=this.start[t]+i.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof lt){if(a==e){if(a<this.safeFrom)return null;let u=a+l.length;if(u<=this.safeTo){let d=l.prop(ke.lookAhead);if(!d||u+d<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class ZC{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new fa)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),u=e.curContext?e.curContext.hash:0,d=0;for(let g=0;g<l.length;g++){if(!(1<<g&a))continue;let O=l[g],v=this.tokens[g];if(!(i&&!O.fallback)&&((O.contextual||v.start!=e.pos||v.mask!=a||v.context!=u)&&(this.updateCachedToken(v,O,e),v.mask=a,v.context=u),v.lookAhead>v.end+25&&(d=Math.max(v.lookAhead,d)),v.value!=0)){let x=t;if(v.extended>-1&&(t=this.addActions(e,v.extended,v.end,t)),t=this.addActions(e,v.value,v.end,t),!O.extend&&(i=v,t>x))break}}for(;this.actions.length>t;)this.actions.pop();return d&&e.setLookAhead(d),!i&&e.pos==this.stream.end&&(i=new fa,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new fa,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:l}=i.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let u=l.specializers[a](this.stream.read(e.start,e.end),i);if(u>=0&&i.p.parser.dialect.allows(u>>1)){u&1?e.extended=u>>1:e.value=u>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:l}=e,{parser:a}=e.p,{data:u}=a;for(let d=0;d<2;d++)for(let g=a.stateSlot(l,d?2:1);;g+=3){if(u[g]==65535)if(u[g+1]==1)g=pr(u,g+2);else{s==0&&u[g+1]==2&&(s=this.putAction(pr(u,g+2),t,i,s));break}u[g]==t&&(s=this.putAction(pr(u,g+1),t,i,s))}return s}}class AC{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new $C(t,s),this.tokens=new ZC(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[La.start(this,e.top[0],l)],this.fragments=i.length&&this.stream.end-l>e.bufferLength*4?new TC(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let u=e[a];for(;;){if(this.tokens.mainToken=null,u.pos>t)i.push(u);else{if(this.advanceStack(u,i,e))continue;{s||(s=[],l=[]),s.push(u);let d=this.tokens.getMainToken(u);l.push(d.value,d.end)}}break}}if(!i.length){let a=s&&RC(s);if(a)return ai&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw ai&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,i);if(a)return ai&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((u,d)=>d.score-u.score);i.length>a;)i.pop();i.some(u=>u.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let u=i[a];for(let d=a+1;d<i.length;d++){let g=i[d];if(u.sameState(g)||u.buffer.length>500&&g.buffer.length>500)if((u.score-g.score||u.buffer.length-g.buffer.length)>0)i.splice(d--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:l}=this,a=ai?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let g=e.curContext&&e.curContext.tracker.strict,O=g?e.curContext.hash:0;for(let v=this.fragments.nodeAt(s);v;){let x=this.parser.nodeSet.types[v.type.id]==v.type?l.getGoto(e.state,v.type.id):-1;if(x>-1&&v.length&&(!g||(v.prop(ke.contextHash)||0)==O))return e.useNode(v,x),ai&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(v.type.id)})`),!0;if(!(v instanceof lt)||v.children.length==0||v.positions[0]>0)break;let k=v.children[0];if(k instanceof lt&&v.positions[0]==0)v=k;else break}}let u=l.stateSlot(e.state,4);if(u>0)return e.reduce(u),ai&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(u&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let d=this.tokens.getActions(e);for(let g=0;g<d.length;){let O=d[g++],v=d[g++],x=d[g++],k=g==d.length||!i,C=k?e:e.split(),R=this.tokens.mainToken;if(C.apply(O,v,R?R.start:C.pos,x),ai&&console.log(a+this.stackID(C)+` (via ${O&65536?`reduce of ${l.getName(O&65535)}`:"shift"} for ${l.getName(v)} @ ${s}${C==e?"":", split"})`),k)return!0;C.pos>s?t.push(C):i.push(C)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Wg(e,t),!0}}runRecovery(e,t,i){let s=null,l=!1;for(let a=0;a<e.length;a++){let u=e[a],d=t[a<<1],g=t[(a<<1)+1],O=ai?this.stackID(u)+" -> ":"";if(u.deadEnd&&(l||(l=!0,u.restart(),ai&&console.log(O+this.stackID(u)+" (restarted)"),this.advanceFully(u,i))))continue;let v=u.split(),x=O;for(let k=0;v.forceReduce()&&k<10&&(ai&&console.log(x+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,i));k++)ai&&(x=this.stackID(v)+" -> ");for(let k of u.recoverByInsert(d))ai&&console.log(O+this.stackID(k)+" (via recover-insert)"),this.advanceFully(k,i);this.stream.end>u.pos?(g==u.pos&&(g++,d=0),u.recoverByDelete(d,g),ai&&console.log(O+this.stackID(u)+` (via recover-delete ${this.parser.getName(d)})`),Wg(u,i)):(!s||s.score<u.score)&&(s=u)}return s}stackToTree(e){return e.close(),lt.build({buffer:Da.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(bf||(bf=new WeakMap)).get(e);return t||bf.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Wg(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class MC{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Sf=n=>n;class YC{constructor(e){this.start=e.start,this.shift=e.shift||Sf,this.reduce=e.reduce||Sf,this.reuse=e.reuse||Sf,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Wa extends $m{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let u=0;u<e.repeatNodeCount;u++)t.push("");let i=Object.keys(e.topRules).map(u=>e.topRules[u][1]),s=[];for(let u=0;u<t.length;u++)s.push([]);function l(u,d,g){s[u].push([d,d.deserialize(String(g))])}if(e.nodeProps)for(let u of e.nodeProps){let d=u[0];typeof d=="string"&&(d=ke[d]);for(let g=1;g<u.length;){let O=u[g++];if(O>=0)l(O,d,u[g++]);else{let v=u[g+-O];for(let x=-O;x>0;x--)l(u[g++],d,v);g++}}}this.nodeSet=new Tu(t.map((u,d)=>ri.define({name:d>=this.minRepeatTerm?void 0:u,id:d,props:s[d],top:i.indexOf(d)>-1,error:d==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(d)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=wm;let a=po(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(Xg),this.states=po(e.states,Uint32Array),this.data=po(e.stateData),this.goto=po(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(u=>typeof u=="number"?new fs(a,u):u),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new AC(this,e,t,i);for(let l of this.wrappers)s=l(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],u=a&1,d=s[l++];if(u&&i)return d;for(let g=l+(a>>1);l<g;l++)if(s[l]==e)return d;if(u)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=i[l])==65535)if(i[l+1]==1)a=i[l=pr(i,l+2)];else{if(i[l+1]==2)return pr(i,l+2);break}if(a==t||a==0)return pr(i,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=pr(this.data,l+2);else break;s=t(pr(this.data,l+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=pr(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(Wa.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(l=>l.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let l=e.specializers.find(u=>u.from==i.external);if(!l)return i;let a=Object.assign(Object.assign({},i),{external:l.to});return t.specializers[s]=Xg(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(i[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!i[l])for(let a=this.dialects[t[l]],u;(u=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[u]=1;return new MC(e,i,s)}static deserialize(e){return new Wa(e)}}function pr(n,e){return n[e]|n[e+1]<<16}function RC(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Xg(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const LC=304,Eg=1,DC=2,WC=305,XC=307,EC=308,IC=3,NC=4,BC=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],nv=125,UC=59,Ig=47,zC=42,_C=43,jC=45,qC=new YC({start:!1,shift(n,e){return e==IC||e==NC||e==XC?n:e==EC},strict:!1}),GC=new Hu((n,e)=>{let{next:t}=n;(t==nv||t==-1||e.context)&&n.acceptToken(WC)},{contextual:!0,fallback:!0}),FC=new Hu((n,e)=>{let{next:t}=n,i;BC.indexOf(t)>-1||t==Ig&&((i=n.peek(1))==Ig||i==zC)||t!=nv&&t!=UC&&t!=-1&&!e.context&&n.acceptToken(LC)},{contextual:!0}),HC=new Hu((n,e)=>{let{next:t}=n;if((t==_C||t==jC)&&(n.advance(),t==n.next)){n.advance();let i=!e.context&&e.canShift(Eg);n.acceptToken(i?Eg:DC)}},{contextual:!0}),VC=Pm({"get set async static":Y.modifier,"for while do if else switch try catch finally return throw break continue default case":Y.controlKeyword,"in of await yield void typeof delete instanceof":Y.operatorKeyword,"let var const using function class extends":Y.definitionKeyword,"import export from":Y.moduleKeyword,"with debugger as new":Y.keyword,TemplateString:Y.special(Y.string),super:Y.atom,BooleanLiteral:Y.bool,this:Y.self,null:Y.null,Star:Y.modifier,VariableName:Y.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Y.function(Y.variableName),VariableDefinition:Y.definition(Y.variableName),Label:Y.labelName,PropertyName:Y.propertyName,PrivatePropertyName:Y.special(Y.propertyName),"CallExpression/MemberExpression/PropertyName":Y.function(Y.propertyName),"FunctionDeclaration/VariableDefinition":Y.function(Y.definition(Y.variableName)),"ClassDeclaration/VariableDefinition":Y.definition(Y.className),PropertyDefinition:Y.definition(Y.propertyName),PrivatePropertyDefinition:Y.definition(Y.special(Y.propertyName)),UpdateOp:Y.updateOperator,"LineComment Hashbang":Y.lineComment,BlockComment:Y.blockComment,Number:Y.number,String:Y.string,Escape:Y.escape,ArithOp:Y.arithmeticOperator,LogicOp:Y.logicOperator,BitOp:Y.bitwiseOperator,CompareOp:Y.compareOperator,RegExp:Y.regexp,Equals:Y.definitionOperator,Arrow:Y.function(Y.punctuation),": Spread":Y.punctuation,"( )":Y.paren,"[ ]":Y.squareBracket,"{ }":Y.brace,"InterpolationStart InterpolationEnd":Y.special(Y.brace),".":Y.derefOperator,", ;":Y.separator,"@":Y.meta,TypeName:Y.typeName,TypeDefinition:Y.definition(Y.typeName),"type enum interface implements namespace module declare":Y.definitionKeyword,"abstract global Privacy readonly override":Y.modifier,"is keyof unique infer":Y.operatorKeyword,JSXAttributeValue:Y.attributeValue,JSXText:Y.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Y.angleBracket,"JSXIdentifier JSXNameSpacedName":Y.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Y.attributeName,"JSXBuiltin/JSXIdentifier":Y.standard(Y.tagName)}),KC={__proto__:null,export:16,as:21,from:29,default:32,async:37,function:38,extends:48,this:52,true:60,false:60,null:72,void:76,typeof:80,super:98,new:132,delete:148,yield:157,await:161,class:166,public:223,private:223,protected:223,readonly:225,instanceof:244,satisfies:247,in:248,const:250,import:282,keyof:337,unique:341,infer:347,is:383,abstract:403,implements:405,type:407,let:410,var:412,using:415,interface:421,enum:425,namespace:431,module:433,declare:437,global:441,for:460,of:469,while:472,with:476,do:480,if:484,else:486,switch:490,case:496,try:502,catch:506,finally:510,return:514,throw:518,break:522,continue:526,debugger:530},JC={__proto__:null,async:119,get:121,set:123,declare:183,public:185,private:185,protected:185,static:187,abstract:189,override:191,readonly:197,accessor:199,new:387},e$={__proto__:null,"<":139},t$=Wa.deserialize({version:14,states:"$6zO%TQUOOO%[QUOOO'_QWOOP(lOSOOO*zQ(CjO'#CgO+ROpO'#ChO+aO!bO'#ChO+oO07`O'#D[O.QQUO'#DbO.bQUO'#DmO%[QUO'#DwO0fQUO'#EPOOQ(CY'#EX'#EXO1PQSO'#EUOOQO'#Ej'#EjOOQO'#Id'#IdO1XQSO'#GlO1dQSO'#EiO1iQSO'#EiO3kQ(CjO'#JeO6[Q(CjO'#JfO6xQSO'#FXO6}Q#tO'#FpOOQ(CY'#Fa'#FaO7YO&jO'#FaO7hQ,UO'#FwO9OQSO'#FvOOQ(CY'#Jf'#JfOOQ(CW'#Je'#JeO9TQSO'#GpOOQQ'#KQ'#KQO9`QSO'#IQO9eQ(C[O'#IROOQQ'#JR'#JROOQQ'#IV'#IVQ`QUOOO`QUOOO%[QUO'#DoO9mQUO'#D{O9tQUO'#D}O9ZQSO'#GlO9{Q,UO'#CmO:ZQSO'#EhO:fQSO'#EsO:kQ,UO'#F`O;YQSO'#GlOOQO'#KR'#KRO;_QSO'#KRO;mQSO'#GtO;mQSO'#GuO;mQSO'#GwO9ZQSO'#GzO<dQSO'#G}O={QSO'#CcO>]QSO'#HZO>eQSO'#HaO>eQSO'#HcO`QUO'#HeO>eQSO'#HgO>eQSO'#HjO>jQSO'#HpO>oQ(C]O'#HvO%[QUO'#HxO>zQ(C]O'#HzO?VQ(C]O'#H|O9eQ(C[O'#IOO?bQ(CjO'#CgO@dQWO'#DgQOQSOOO%[QUO'#D}O@zQSO'#EQO9{Q,UO'#EhOAVQSO'#EhOAbQ`O'#F`OOQQ'#Ce'#CeOOQ(CW'#Dl'#DlOOQ(CW'#Ji'#JiO%[QUO'#JiOOQO'#Jm'#JmOOQO'#Ia'#IaOBbQWO'#EaOOQ(CW'#E`'#E`OC^Q(C`O'#EaOChQWO'#ETOOQO'#Jl'#JlOC|QWO'#JmOEZQWO'#ETOChQWO'#EaPEhO?MpO'#C`POOO)CDp)CDpOOOO'#IW'#IWOEsOpO,59SOOQ(CY,59S,59SOOOO'#IX'#IXOFRO!bO,59SO%[QUO'#D^OOOO'#IZ'#IZOFaO07`O,59vOOQ(CY,59v,59vOFoQUO'#I[OGSQSO'#JgOIUQbO'#JgO+}QUO'#JgOI]QSO,59|OIsQSO'#EjOJQQSO'#JuOJ]QSO'#JtOJ]QSO'#JtOJeQSO,5;WOJjQSO'#JsOOQ(CY,5:X,5:XOJqQUO,5:XOLrQ(CjO,5:cOMcQSO,5:kOM|Q(C[O'#JrONTQSO'#JqO9TQSO'#JqONiQSO'#JqONqQSO,5;VONvQSO'#JqO!#OQbO'#JfOOQ(CY'#Cg'#CgO%[QUO'#EPO!#nQ`O,5:pOOQO'#Jn'#JnOOQO-E<b-E<bO9ZQSO,5=WO!$UQSO,5=WO!$ZQUO,5;TO!&^Q,UO'#EeO!'qQSO,5;TO!)ZQ,UO'#DqO!)bQUO'#DvO!)lQWO,5;^O!)tQWO,5;^O%[QUO,5;^OOQQ'#FP'#FPOOQQ'#FR'#FRO%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_OOQQ'#FV'#FVO!*SQUO,5;pOOQ(CY,5;u,5;uOOQ(CY,5;v,5;vO!,VQSO,5;vOOQ(CY,5;w,5;wO%[QUO'#IhO!,_Q(C[O,5<dO!&^Q,UO,5;_O!,|Q,UO,5;_O%[QUO,5;sO!-TQ#tO'#FfO!.QQ#tO'#JyO!-lQ#tO'#JyO!.XQ#tO'#JyOOQO'#Jy'#JyO!.mQ#tO,5<OOOOO,5<[,5<[O!/OQUO'#FrOOOO'#Ig'#IgO7YO&jO,5;{O!/VQ#tO'#FtOOQ(CY,5;{,5;{O!/vQ7[O'#CsOOQ(CY'#Cw'#CwO!0ZQSO'#CwO!0`O07`O'#C{O!0|Q,UO,5<aO!1TQSO,5<cO!2jQMhO'#GRO!2wQSO'#GSO!2|QSO'#GSO!3RQMhO'#GWO!4QQWO'#G[O!4sQ7[O'#J`OOQ(CY'#J`'#J`O!4}QSO'#J_O!5]QSO'#J^O!5eQSO'#CrOOQ(CY'#Cu'#CuOOQ(CY'#DP'#DPOOQ(CY'#DR'#DRO1SQSO'#DTO!'vQ,UO'#FyO!'vQ,UO'#F{O!5mQSO'#F}O!5rQSO'#GOO!2|QSO'#GUO!'vQ,UO'#GZO!5wQSO'#EkO!6fQSO,5<bOOQ(CW'#Cp'#CpO!6nQSO'#ElO!7hQWO'#EmOOQ(CW'#Js'#JsO!7oQ(C[O'#KSO9eQ(C[O,5=[O`QUO,5>lOOQQ'#JZ'#JZOOQQ,5>m,5>mOOQQ-E<T-E<TO!9qQ(CjO,5:ZO!<_Q(CjO,5:gO%[QUO,5:gO!>xQ(CjO,5:iOOQO,5@m,5@mO!?iQ,UO,5=WO!?wQ(C[O'#J[O9OQSO'#J[O!@YQ(C[O,59XO!@eQWO,59XO!@mQ,UO,59XO9{Q,UO,59XO!@xQSO,5;TO!AQQSO'#HYO!AfQSO'#KVO%[QUO,5;xO!7cQWO,5;zO!AnQSO,5=sO!AsQSO,5=sO!AxQSO,5=sO9eQ(C[O,5=sO;mQSO,5=cOOQO'#Cs'#CsO!BWQWO,5=`O!B`Q,UO,5=aO!BkQSO,5=cO!BpQ`O,5=fO!BxQSO'#KRO>jQSO'#HPO9ZQSO'#HRO!B}QSO'#HRO9{Q,UO'#HTO!CSQSO'#HTOOQQ,5=i,5=iO!CXQSO'#HUO!CjQSO'#CmO!CoQSO,58}O!CyQSO,58}O!FOQUO,58}OOQQ,58},58}O!F`Q(C[O,58}O%[QUO,58}O!HkQUO'#H]OOQQ'#H^'#H^OOQQ'#H_'#H_O`QUO,5=uO!IRQSO,5=uO`QUO,5={O`QUO,5=}O!IWQSO,5>PO`QUO,5>RO!I]QSO,5>UO!IbQUO,5>[OOQQ,5>b,5>bO%[QUO,5>bO9eQ(C[O,5>dOOQQ,5>f,5>fO!MlQSO,5>fOOQQ,5>h,5>hO!MlQSO,5>hOOQQ,5>j,5>jO!MqQWO'#DYO%[QUO'#JiO!N`QWO'#JiO!N}QWO'#DhO# `QWO'#DhO##qQUO'#DhO##xQSO'#JhO#$QQSO,5:RO#$VQSO'#EnO#$eQSO'#JvO#$mQSO,5;XO#$rQWO'#DhO#%PQWO'#ESOOQ(CY,5:l,5:lO%[QUO,5:lO#%WQSO,5:lO>jQSO,5;SO!@eQWO,5;SO!@mQ,UO,5;SO9{Q,UO,5;SO#%`QSO,5@TO#%eQ!LQO,5:pOOQO-E<_-E<_O#&kQ(C`O,5:{OChQWO,5:oO#&uQWO,5:oOChQWO,5:{O!@YQ(C[O,5:oOOQ(CW'#Ed'#EdOOQO,5:{,5:{O%[QUO,5:{O#'SQ(C[O,5:{O#'_Q(C[O,5:{O!@eQWO,5:oOOQO,5;R,5;RO#'mQ(C[O,5:{POOO'#IU'#IUP#(RO?MpO,58zPOOO,58z,58zOOOO-E<U-E<UOOQ(CY1G.n1G.nOOOO-E<V-E<VO#(^Q`O,59xOOOO-E<X-E<XOOQ(CY1G/b1G/bO#(cQbO,5>vO+}QUO,5>vOOQO,5>|,5>|O#(mQUO'#I[OOQO-E<Y-E<YO#(zQSO,5@RO#)SQbO,5@RO#)ZQSO,5@`OOQ(CY1G/h1G/hO%[QUO,5@aO#)cQSO'#IbOOQO-E<`-E<`O#)ZQSO,5@`OOQ(CW1G0r1G0rOOQ(CY1G/s1G/sOOQ(CY1G0V1G0VO%[QUO,5@^O#)wQ(C[O,5@^O#*YQ(C[O,5@^O#*aQSO,5@]O9TQSO,5@]O#*iQSO,5@]O#*wQSO'#IeO#*aQSO,5@]OOQ(CW1G0q1G0qO!)lQWO,5:rO!)wQWO,5:rOOQO,5:t,5:tO#+iQSO,5:tO#+qQ,UO1G2rO9ZQSO1G2rOOQ(CY1G0o1G0oO#,PQ(CjO1G0oO#-UQ(ChO,5;POOQ(CY'#GQ'#GQO#-rQ(CjO'#J`O!$ZQUO1G0oO#/zQ,UO'#JjO#0UQSO,5:]O#0ZQbO'#JkO%[QUO'#JkO#0eQSO,5:bOOQ(CY'#DY'#DYOOQ(CY1G0x1G0xO%[QUO1G0xOOQ(CY1G1b1G1bO#0jQSO1G0xO#3RQ(CjO1G0yO#3YQ(CjO1G0yO#5sQ(CjO1G0yO#5zQ(CjO1G0yO#8UQ(CjO1G0yO#8lQ(CjO1G0yO#;fQ(CjO1G0yO#;mQ(CjO1G0yO#>WQ(CjO1G0yO#>_Q(CjO1G0yO#@VQ(CjO1G0yO#CVQ$IUO'#CgO#ETQ$IUO1G1[O#E[Q$IUO'#JfO!,YQSO1G1bO#ElQ(CjO,5?SOOQ(CW-E<f-E<fO#F`Q(CjO1G0yOOQ(CY1G0y1G0yO#HkQ(CjO1G1_O#I_Q#tO,5<SO#IgQ#tO,5<TO#IoQ#tO'#FkO#JWQSO'#FjOOQO'#Jz'#JzOOQO'#If'#IfO#J]Q#tO1G1jOOQ(CY1G1j1G1jOOOO1G1u1G1uO#JnQ$IUO'#JeO#JxQSO,5<^O!*SQUO,5<^OOOO-E<e-E<eOOQ(CY1G1g1G1gO#J}QWO'#JyOOQ(CY,5<`,5<`O#KVQWO,5<`OOQ(CY,59c,59cO!&^Q,UO'#C}OOOO'#IY'#IYO#K[O07`O,59gOOQ(CY,59g,59gO%[QUO1G1{O!5rQSO'#IjO#KgQ,UO,5<tOOQ(CY,5<q,5<qOOQO'#Gg'#GgO!'vQ,UO,5=QOOQO'#Gi'#GiO!'vQ,UO,5=SO!&^Q,UO,5=UOOQO1G1}1G1}O#KnQ`O'#CpO#LRQ`O,5<mO#LYQSO'#J}O9ZQSO'#J}O#LhQSO,5<oO!'vQ,UO,5<nO#LmQSO'#GTO#LxQSO,5<nO#L}Q`O'#GQO#M[Q`O'#KOO#MfQSO'#KOO!&^Q,UO'#KOO#MkQSO,5<rO#MpQWO'#G]O!3{QWO'#G]O#NRQSO'#G_O#NWQSO'#GaO!2|QSO'#GdO#N]Q(C[O'#IlO#NhQWO,5<vOOQ(CY,5<v,5<vO#NoQWO'#G]O#N}QWO'#G^O$ VQWO'#G^OOQ(CY,5=V,5=VO!'vQ,UO,5?yO!'vQ,UO,5?yO$ [QSO'#ImO$ gQSO,5?xO$ oQSO,59^O$!`Q,UO,59oOOQ(CY,59o,59oO$#RQ,UO,5<eO$#tQ,UO,5<gO@[QSO,5<iOOQ(CY,5<j,5<jO$$OQSO,5<pO$$TQ,UO,5<uO$$eQSO'#JqO!$ZQUO1G1|O$$jQSO1G1|O9TQSO'#JtO9TQSO'#EnO%[QUO'#EnO9TQSO'#IoO$$oQ(C[O,5@nOOQQ1G2v1G2vOOQQ1G4W1G4WOOQ(CY1G/u1G/uO!,VQSO1G/uO$&tQ(CjO1G0ROOQQ1G2r1G2rO!&^Q,UO1G2rO%[QUO1G2rO$'eQSO1G2rO$'pQ,UO'#EeOOQ(CW,5?v,5?vO$'zQ(C[O,5?vOOQQ1G.s1G.sO!@YQ(C[O1G.sO!@eQWO1G.sO!@mQ,UO1G.sO$(]QSO1G0oO$(bQSO'#CgO$(mQSO'#KWO$(uQSO,5=tO$(zQSO'#KWO$)PQSO'#KWO$)_QSO'#IuO$)mQSO,5@qO$)uQbO1G1dOOQ(CY1G1f1G1fO9ZQSO1G3_O@[QSO1G3_O$)|QSO1G3_O$*RQSO1G3_OOQQ1G3_1G3_O!BkQSO1G2}O!&^Q,UO1G2zO$*WQSO1G2zOOQQ1G2{1G2{O!&^Q,UO1G2{O$*]QSO1G2{O$*eQWO'#GyOOQQ1G2}1G2}O!3{QWO'#IqO!BpQ`O1G3QOOQQ1G3Q1G3QOOQQ,5=k,5=kO$*mQ,UO,5=mO9ZQSO,5=mO#NWQSO,5=oO9OQSO,5=oO!@eQWO,5=oO!@mQ,UO,5=oO9{Q,UO,5=oO$*{QSO'#KUO$+WQSO,5=pOOQQ1G.i1G.iO$+]Q(C[O1G.iO@[QSO1G.iO$+hQSO1G.iO9eQ(C[O1G.iO$-mQbO,5@sO$-}QSO,5@sO9TQSO,5@sO$.YQUO,5=wO$.aQSO,5=wOOQQ1G3a1G3aO`QUO1G3aOOQQ1G3g1G3gOOQQ1G3i1G3iO>eQSO1G3kO$.fQUO1G3mO$2jQUO'#HlOOQQ1G3p1G3pO$2wQSO'#HrO>jQSO'#HtOOQQ1G3v1G3vO$3PQUO1G3vO9eQ(C[O1G3|OOQQ1G4O1G4OOOQ(CW'#GX'#GXO9eQ(C[O1G4QO9eQ(C[O1G4SO$7WQSO,5@TO!*SQUO,5;YO9TQSO,5;YO>jQSO,5:SO!*SQUO,5:SO!@eQWO,5:SO$7]Q$IUO,5:SOOQO,5;Y,5;YO$7gQWO'#I]O$7}QSO,5@SOOQ(CY1G/m1G/mO$8VQWO'#IcO$8aQSO,5@bOOQ(CW1G0s1G0sO# `QWO,5:SOOQO'#I`'#I`O$8iQWO,5:nOOQ(CY,5:n,5:nO#%ZQSO1G0WOOQ(CY1G0W1G0WO%[QUO1G0WOOQ(CY1G0n1G0nO>jQSO1G0nO!@eQWO1G0nO!@mQ,UO1G0nOOQ(CW1G5o1G5oO!@YQ(C[O1G0ZOOQO1G0g1G0gO%[QUO1G0gO$8pQ(C[O1G0gO$8{Q(C[O1G0gO!@eQWO1G0ZOChQWO1G0ZO$9ZQ(C[O1G0gOOQO1G0Z1G0ZO$9oQ(CjO1G0gPOOO-E<S-E<SPOOO1G.f1G.fOOOO1G/d1G/dO$9yQ`O,5<dO$:RQbO1G4bOOQO1G4h1G4hO%[QUO,5>vO$:]QSO1G5mO$:eQSO1G5zO$:mQbO1G5{O9TQSO,5>|O$:wQ(CjO1G5xO%[QUO1G5xO$;XQ(C[O1G5xO$;jQSO1G5wO$;jQSO1G5wO9TQSO1G5wO$;rQSO,5?PO9TQSO,5?POOQO,5?P,5?PO$<WQSO,5?PO$$eQSO,5?POOQO-E<c-E<cOOQO1G0^1G0^OOQO1G0`1G0`O!,YQSO1G0`OOQQ7+(^7+(^O!&^Q,UO7+(^O%[QUO7+(^O$<fQSO7+(^O$<qQ,UO7+(^O$=PQ(CjO,59oO$?XQ(CjO,5<eO$AdQ(CjO,5<gO$CoQ(CjO,5<uOOQ(CY7+&Z7+&ZO$FQQ(CjO7+&ZO$FtQ,UO'#I^O$GOQSO,5@UOOQ(CY1G/w1G/wO$GWQUO'#I_O$GeQSO,5@VO$GmQbO,5@VOOQ(CY1G/|1G/|O$GwQSO7+&dOOQ(CY7+&d7+&dO$G|Q$IUO,5:cO%[QUO7+&vO$HWQ$IUO,5:ZO$HeQ$IUO,5:gO$HoQ$IUO,5:iOOQ(CY7+&|7+&|OOQO1G1n1G1nOOQO1G1o1G1oO$HyQ#tO,5<VO!*SQUO,5<UOOQO-E<d-E<dOOQ(CY7+'U7+'UOOOO7+'a7+'aOOOO1G1x1G1xO$IUQSO1G1xOOQ(CY1G1z1G1zO$IZQ`O,59iOOOO-E<W-E<WOOQ(CY1G/R1G/RO$IbQ(CjO7+'gOOQ(CY,5?U,5?UO$JUQ`O,5?UOOQ(CY1G2`1G2`P!&^Q,UO'#IjPOQ(CY-E<h-E<hO$JtQ,UO1G2lO$KgQ,UO1G2nO$KqQ`O1G2pOOQ(CY1G2X1G2XO$KxQSO'#IiO$LWQSO,5@iO$LWQSO,5@iO$L`QSO,5@iO$LkQSO,5@iOOQO1G2Z1G2ZO$LyQ,UO1G2YO!'vQ,UO1G2YO$MZQMhO'#IkO$MkQSO,5@jO!&^Q,UO,5@jO$MsQ`O,5@jOOQ(CY1G2^1G2^OOQ(CW,5<w,5<wOOQ(CW,5<x,5<xO$$eQSO,5<xOCXQSO,5<xO!@eQWO,5<wOOQO'#G`'#G`O$M}QSO,5<yOOQ(CW,5<{,5<{O$$eQSO,5=OOOQO,5?W,5?WOOQO-E<j-E<jOOQ(CY1G2b1G2bO!3{QWO,5<wO$NVQSO,5<xO#NRQSO,5<yO!3{QWO,5<xO$NbQ,UO1G5eO$NlQ,UO1G5eOOQO,5?X,5?XOOQO-E<k-E<kOOQO1G.x1G.xO!7cQWO,59qO%[QUO,59qO$NyQSO1G2TO!'vQ,UO1G2[O% OQ(CjO7+'hOOQ(CY7+'h7+'hO!$ZQUO7+'hO% rQSO,5;YOOQ(CW,5?Z,5?ZOOQ(CW-E<m-E<mOOQ(CY7+%a7+%aO% wQ`O'#KPO#%ZQSO7+(^O%!RQbO7+(^O$<iQSO7+(^O%!YQ(ChO'#CgO%!mQ(ChO,5<|O%#_QSO,5<|OOQ(CW1G5b1G5bOOQQ7+$_7+$_O!@YQ(C[O7+$_O!@eQWO7+$_O!$ZQUO7+&ZO%#dQSO'#ItO%#{QSO,5@rOOQO1G3`1G3`O9ZQSO,5@rO%#{QSO,5@rO%$TQSO,5@rOOQO,5?a,5?aOOQO-E<s-E<sOOQ(CY7+'O7+'OO%$YQSO7+(yO9eQ(C[O7+(yO9ZQSO7+(yO@[QSO7+(yOOQQ7+(i7+(iO%$_Q(ChO7+(fO!&^Q,UO7+(fO%$iQ`O7+(gOOQQ7+(g7+(gO!&^Q,UO7+(gO%$pQSO'#KTO%${QSO,5=eOOQO,5?],5?]OOQO-E<o-E<oOOQQ7+(l7+(lO%&[QWO'#HSOOQQ1G3X1G3XO!&^Q,UO1G3XO%[QUO1G3XO%&cQSO1G3XO%&nQ,UO1G3XO9eQ(C[O1G3ZO#NWQSO1G3ZO9OQSO1G3ZO!@eQWO1G3ZO!@mQ,UO1G3ZO%&|QSO'#IsO%'bQSO,5@pO%'jQWO,5@pOOQ(CW1G3[1G3[OOQQ7+$T7+$TO@[QSO7+$TO9eQ(C[O7+$TO%'uQSO7+$TO%[QUO1G6_O%[QUO1G6`O%'zQ(C[O1G6_O%(UQUO1G3cO%(]QSO1G3cO%(bQUO1G3cOOQQ7+({7+({O9eQ(C[O7+)VO`QUO7+)XOOQQ'#KZ'#KZOOQQ'#Iv'#IvO%(iQUO,5>WOOQQ,5>W,5>WO%[QUO'#HmO%(vQSO'#HoOOQQ,5>^,5>^O9TQSO,5>^OOQQ,5>`,5>`OOQQ7+)b7+)bOOQQ7+)h7+)hOOQQ7+)l7+)lOOQQ7+)n7+)nO%({QWO1G5oO%)aQ$IUO1G0tO%)kQSO1G0tOOQO1G/n1G/nO%)vQ$IUO1G/nO>jQSO1G/nO!*SQUO'#DhOOQO,5>w,5>wOOQO-E<Z-E<ZOOQO,5>},5>}OOQO-E<a-E<aO!@eQWO1G/nOOQO-E<^-E<^OOQ(CY1G0Y1G0YOOQ(CY7+%r7+%rO#%ZQSO7+%rOOQ(CY7+&Y7+&YO>jQSO7+&YO!@eQWO7+&YOOQO7+%u7+%uO$9oQ(CjO7+&ROOQO7+&R7+&RO%[QUO7+&RO%*QQ(C[O7+&RO!@YQ(C[O7+%uO!@eQWO7+%uO%*]Q(C[O7+&RO%*kQ(CjO7++dO%[QUO7++dO%*{QSO7++cO%*{QSO7++cOOQO1G4k1G4kO9TQSO1G4kO%+TQSO1G4kOOQO7+%z7+%zO#%ZQSO<<KxO%!RQbO<<KxO%+cQSO<<KxOOQQ<<Kx<<KxO!&^Q,UO<<KxO%[QUO<<KxO%+kQSO<<KxO%+vQ(CjO1G2lO%.RQ(CjO1G2nO%0^Q(CjO1G2YO%2oQ,UO,5>xOOQO-E<[-E<[O%2yQbO,5>yO%[QUO,5>yOOQO-E<]-E<]O%3TQSO1G5qOOQ(CY<<JO<<JOO%3]Q$IUO1G0oO%5gQ$IUO1G0yO%5nQ$IUO1G0yO%7rQ$IUO1G0yO%7yQ$IUO1G0yO%9nQ$IUO1G0yO%:UQ$IUO1G0yO%<iQ$IUO1G0yO%<pQ$IUO1G0yO%>tQ$IUO1G0yO%>{Q$IUO1G0yO%@sQ$IUO1G0yO%AWQ(CjO<<JbO%B]Q$IUO1G0yO%DRQ$IUO'#J`O%FUQ$IUO1G1_O%FcQ$IUO1G0RO!*SQUO'#FmOOQO'#J{'#J{OOQO1G1q1G1qO%FmQSO1G1pO%FrQ$IUO,5?SOOOO7+'d7+'dOOOO1G/T1G/TOOQ(CY1G4p1G4pO!'vQ,UO7+([O%F|QSO,5?TO9ZQSO,5?TOOQO-E<g-E<gO%G[QSO1G6TO%G[QSO1G6TO%GdQSO1G6TO%GoQ,UO7+'tO%HPQ`O,5?VO%HZQSO,5?VO!&^Q,UO,5?VOOQO-E<i-E<iO%H`Q`O1G6UO%HjQSO1G6UOOQ(CW1G2d1G2dO$$eQSO1G2dOOQ(CW1G2c1G2cO%HrQSO1G2eO!&^Q,UO1G2eOOQ(CW1G2j1G2jO!@eQWO1G2cOCXQSO1G2dO%HwQSO1G2eO%IPQSO1G2dO!'vQ,UO7++POOQ(CY1G/]1G/]O%I[QSO1G/]OOQ(CY7+'o7+'oO%IaQ,UO7+'vO%IqQ(CjO<<KSOOQ(CY<<KS<<KSO%JeQSO1G0tO!&^Q,UO'#InO%JjQSO,5@kO!&^Q,UO1G2hOOQQ<<Gy<<GyO!@YQ(C[O<<GyO%JrQ(CjO<<IuOOQ(CY<<Iu<<IuOOQO,5?`,5?`O%KfQSO,5?`O%KkQSO,5?`OOQO-E<r-E<rO%KyQSO1G6^O%KyQSO1G6^O9ZQSO1G6^O@[QSO<<LeOOQQ<<Le<<LeO%LRQSO<<LeO9eQ(C[O<<LeOOQQ<<LQ<<LQO%$_Q(ChO<<LQOOQQ<<LR<<LRO%$iQ`O<<LRO%LWQWO'#IpO%LcQSO,5@oO!*SQUO,5@oOOQQ1G3P1G3PO%LkQUO'#JiOOQO'#Ir'#IrO9eQ(C[O'#IrO%LuQWO,5=nOOQQ,5=n,5=nO%L|QWO'#EaO%MbQSO7+(sO%MgQSO7+(sOOQQ7+(s7+(sO!&^Q,UO7+(sO%[QUO7+(sO%MoQSO7+(sOOQQ7+(u7+(uO9eQ(C[O7+(uO#NWQSO7+(uO9OQSO7+(uO!@eQWO7+(uO%MzQSO,5?_OOQO-E<q-E<qOOQO'#HV'#HVO%NVQSO1G6[O9eQ(C[O<<GoOOQQ<<Go<<GoO@[QSO<<GoO%N_QSO7++yO%NdQSO7++zO%[QUO7++yO%[QUO7++zOOQQ7+(}7+(}O%NiQSO7+(}O%NnQUO7+(}O%NuQSO7+(}OOQQ<<Lq<<LqOOQQ<<Ls<<LsOOQQ-E<t-E<tOOQQ1G3r1G3rO%NzQSO,5>XOOQQ,5>Z,5>ZO& PQSO1G3xO9TQSO7+&`O!*SQUO7+&`OOQO7+%Y7+%YO& UQ$IUO1G5{O>jQSO7+%YOOQ(CY<<I^<<I^OOQ(CY<<It<<ItO>jQSO<<ItOOQO<<Im<<ImO$9oQ(CjO<<ImO%[QUO<<ImOOQO<<Ia<<IaO!@YQ(C[O<<IaO& `Q(C[O<<ImO& kQ(CjO<= OO& {QSO<<N}OOQO7+*V7+*VO9TQSO7+*VOOQQANAdANAdO&!TQSOANAdO!&^Q,UOANAdO#%ZQSOANAdO%!RQbOANAdO%[QUOANAdO&!]Q(CjO7+'tO&$nQ(CjO7+'vO&'PQbO1G4eO&'ZQ$IUO7+&ZO&'hQ$IUO,59oO&)kQ$IUO,5<eO&+nQ$IUO,5<gO&-qQ$IUO,5<uO&/gQ$IUO7+'gO&/tQ$IUO7+'hO&0RQSO,5<XOOQO7+'[7+'[O&0WQ,UO<<KvOOQO1G4o1G4oO&0_QSO1G4oO&0jQSO1G4oO&0xQSO7++oO&0xQSO7++oO!&^Q,UO1G4qO&1QQ`O1G4qO&1[QSO7++pOOQ(CW7+(O7+(OO$$eQSO7+(PO&1dQ`O7+(POOQ(CW7+'}7+'}O$$eQSO7+(OO&1kQSO7+(PO!&^Q,UO7+(POCXQSO7+(OO&1pQ,UO<<NkOOQ(CY7+$w7+$wO&1zQ`O,5?YOOQO-E<l-E<lO&2UQ(ChO7+(SOOQQAN=eAN=eO9ZQSO1G4zOOQO1G4z1G4zO&2fQSO1G4zO&2kQSO7++xO&2kQSO7++xO9eQ(C[OANBPO@[QSOANBPOOQQANBPANBPOOQQANAlANAlOOQQANAmANAmO&2sQSO,5?[OOQO-E<n-E<nO&3OQ$IUO1G6ZO&5`QbO'#CgOOQO,5?^,5?^OOQO-E<p-E<pOOQQ1G3Y1G3YO%LkQUO,5<yOOQQ<<L_<<L_O!&^Q,UO<<L_O%MbQSO<<L_O&5jQSO<<L_O%[QUO<<L_OOQQ<<La<<LaO9eQ(C[O<<LaO#NWQSO<<LaO9OQSO<<LaO&5rQWO1G4yO&5}QSO7++vOOQQAN=ZAN=ZO9eQ(C[OAN=ZOOQQ<= e<= eOOQQ<= f<= fO&6VQSO<= eO&6[QSO<= fOOQQ<<Li<<LiO&6aQSO<<LiO&6fQUO<<LiOOQQ1G3s1G3sO>jQSO7+)dO&6mQSO<<IzO&6xQ$IUO<<IzOOQO<<Ht<<HtOOQ(CYAN?`AN?`OOQOAN?XAN?XO$9oQ(CjOAN?XOOQOAN>{AN>{O%[QUOAN?XOOQO<<Mq<<MqOOQQG27OG27OO!&^Q,UOG27OO#%ZQSOG27OO&7SQSOG27OO%!RQbOG27OO&7[Q$IUO<<JbO&7iQ$IUO1G2YO&9_Q$IUO1G2lO&;bQ$IUO1G2nO&=eQ$IUO<<KSO&=rQ$IUO<<IuOOQO1G1s1G1sO!'vQ,UOANAbOOQO7+*Z7+*ZO&>PQSO7+*ZO&>[QSO<= ZO&>dQ`O7+*]OOQ(CW<<Kk<<KkO$$eQSO<<KkOOQ(CW<<Kj<<KjO&>nQ`O<<KkO$$eQSO<<KjOOQO7+*f7+*fO9ZQSO7+*fO&>uQSO<= dOOQQG27kG27kO9eQ(C[OG27kO!*SQUO1G4vO&>}QSO7++uO%MbQSOANAyOOQQANAyANAyO!&^Q,UOANAyO&?VQSOANAyOOQQANA{ANA{O9eQ(C[OANA{O#NWQSOANA{OOQO'#HW'#HWOOQO7+*e7+*eOOQQG22uG22uOOQQANEPANEPOOQQANEQANEQOOQQANBTANBTO&?_QSOANBTOOQQ<<MO<<MOO!*SQUOAN?fOOQOG24sG24sO$9oQ(CjOG24sO#%ZQSOLD,jOOQQLD,jLD,jO!&^Q,UOLD,jO&?dQSOLD,jO&?lQ$IUO7+'tO&AbQ$IUO7+'vO&CWQ,UOG26|OOQO<<Mu<<MuOOQ(CWANAVANAVO$$eQSOANAVOOQ(CWANAUANAUOOQO<<NQ<<NQOOQQLD-VLD-VO&ChQ$IUO7+*bOOQQG27eG27eO%MbQSOG27eO!&^Q,UOG27eOOQQG27gG27gO9eQ(C[OG27gOOQQG27oG27oO&CrQ$IUOG25QOOQOLD*_LD*_OOQQ!$(!U!$(!UO#%ZQSO!$(!UO!&^Q,UO!$(!UO&C|Q(CjOG26|OOQ(CWG26qG26qOOQQLD-PLD-PO%MbQSOLD-POOQQLD-RLD-ROOQQ!)9Ep!)9EpO#%ZQSO!)9EpOOQQ!$(!k!$(!kOOQQ!.K;[!.K;[O&F_Q$IUOG26|O!*SQUO'#DwO1PQSO'#EUO&HTQbO'#JeO!*SQUO'#DoO&H[QUO'#D{O&HcQbO'#CgO&JyQbO'#CgO!*SQUO'#D}O&KZQUO,5;TO!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO'#IhO&M^QSO,5<dO&MfQ,UO,5;_O&NyQ,UO,5;_O!*SQUO,5;sO1SQSO'#DTO1SQSO'#DTO!&^Q,UO'#FyO&MfQ,UO'#FyO!&^Q,UO'#F{O&MfQ,UO'#F{O!&^Q,UO'#GZO&MfQ,UO'#GZO!*SQUO,5:gO!*SQUO,5@aO&KZQUO1G0oO' QQ$IUO'#CgO!*SQUO1G1{O!&^Q,UO,5=QO&MfQ,UO,5=QO!&^Q,UO,5=SO&MfQ,UO,5=SO!&^Q,UO,5<nO&MfQ,UO,5<nO&KZQUO1G1|O!*SQUO7+&vO!&^Q,UO1G2YO&MfQ,UO1G2YO!&^Q,UO1G2[O&MfQ,UO1G2[O&KZQUO7+'hO&KZQUO7+&ZO!&^Q,UOANAbO&MfQ,UOANAbO' [QSO'#EiO' aQSO'#EiO' iQSO'#FXO' nQSO'#EsO' sQSO'#JuO'!OQSO'#JsO'!ZQSO,5;TO'!`Q,UO,5<aO'!gQSO'#GSO'!lQSO'#GSO'!qQSO,5<bO'!yQSO,5;TO'#RQ$IUO1G1[O'#YQSO,5<nO'#_QSO,5<nO'#dQSO,5<pO'#iQSO,5<pO'#nQSO1G1|O'#sQSO1G0oO'#xQ,UO<<KvO'$PQ,UO<<KvO7hQ,UO'#FwO9OQSO'#FvOAVQSO'#EhO!*SQUO,5;pO!2|QSO'#GSO!2|QSO'#GSO!2|QSO'#GUO!2|QSO'#GUO!'vQ,UO7+([O!'vQ,UO7+([O$KqQ`O1G2pO$KqQ`O1G2pO!&^Q,UO,5=UO!&^Q,UO,5=U",stateData:"'%Y~O'oOS'pOSROS'qRQ~OPYOQYOW!VO_qObzOcyOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!YXO!duO!iZO!lYO!mYO!nYO!pvO!rwO!uxO!y]O#q!PO$R|O$VfO%a}O%c!QO%e!OO%f!OO%g!OO%j!RO%l!SO%o!TO%p!TO%r!UO&O!WO&U!XO&W!YO&Y!ZO&[![O&_!]O&e!^O&k!_O&m!`O&o!aO&q!bO&s!cO'vSO'xTO'{UO(TVO(c[O(piO~OUtO~P`OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'v!dO'xTO'{UO(TVO(c[O(piO~O_!vOm!nO}!oO!]!xO!^!uO!_!uO!y9rO!}!pO#O!pO#P!wO#Q!pO#R!pO#U!yO#V!yO'w!lO'xTO'{UO(W!mO(c!sO~O'q!zO~OPZXYZX_ZXlZXzZX{ZX}ZX!WZX!fZX!gZX!iZX!mZX#YZX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX'mZX(TZX(dZX(kZX(lZX~O!b${X~P(qO]!|O'x#OO'y!|O'z#OO~O]#PO'z#OO'{#OO'|#PO~Or#RO!P#SO(U#SO(V#UO~OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'v9vO'xTO'{UO(TVO(c[O(piO~O!V#YO!W#VO!T(ZP!T(hP~P+}O!X#bO~P`OPYOQYOb!jOc!iOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'xTO'{UO(TVO(c[O(piO~Oj#lO!V#hO!y]O#c#kO#d#hO'v9wO!h(eP~P.iO!i#nO'v#mO~O!u#rO!y]O%a#sO~O#e#tO~O!b#uO#e#tO~OP$]OY$dOl$QOz#yO{#zO}#{O!W$aO!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO#w$YO(TVO(d$ZO(k#|O(l#}O~O_(XX'm(XX'k(XX!h(XX!T(XX!Y(XX%b(XX!b(XX~P1qO#Y$eO#|$eOP(YXY(YXl(YXz(YX{(YX}(YX!W(YX!f(YX!i(YX!m(YX#h(YX#i(YX#j(YX#k(YX#l(YX#m(YX#n(YX#o(YX#p(YX#r(YX#t(YX#v(YX#w(YX(T(YX(d(YX(k(YX(l(YX!Y(YX%b(YX~O_(YX!g(YX'm(YX'k(YX!T(YX!h(YXp(YX!b(YX~P4XO#Y$eO~O$X$gO$Z$fO$b$lO~O!Y$mO$VfO$e$nO$g$pO~Oj%SOl$tOm$sOn$sOt%TOv%UOx%VO}${O!Y$|O!d%[O!i$xO#d%]O$R%YO$n%WO$p%XO$s%ZO'v$rO'xTO'{UO(P%RO(T$uOe(QP~O!i%^O~O}%aO!Y%bO'v%`O~O!b%fO~O_%gO'm%gO~O'w!lO~P%[O%g%nO~P%[O!i%^O'v%`O'w!lO(P%RO~Oc%uO!i%^O'v%`O~O#p$SO~Oz%zO!Y%wO!i%yO%c%}O'v%`O'w!lO'xTO'{UO^(yP~O!u#rO~O%l&PO}(uX!Y(uX'v(uX~O'v&QO~O!r&VO#q!PO%c!QO%e!OO%f!OO%g!OO%j!RO%l!SO%o!TO%p!TO~Ob&[Oc&ZO!u&XO%a&YO%t&WO~P;rOb&_OcyO!Y&^O!r&VO!uxO!y]O#q!PO%a}O%e!OO%f!OO%g!OO%j!RO%l!SO%o!TO%p!TO%r!UO~O`&bO#Y&eO%c&`O'w!lO~P<wO!i&fO!r&jO~O!i#nO~O!YXO~O_%gO'l&rO'm%gO~O_%gO'l&uO'm%gO~O_%gO'l&wO'm%gO~O'kZX!TZXpZX!hZX&SZX!YZX%bZX!bZX~P(qO!]'UO!^&}O!_&}O'w!lO'xTO'{UO~Om&{O}&zO!V'OO(W&yO!X([P!X(jP~P@OOh'XO!Y'VO'v%`O~Oc'^O!i%^O'v%`O~Oz%zO!i%yO~Om!nO}!oO!y9rO!}!pO#O!pO#Q!pO#R!pO'w!lO'xTO'{UO(W!mO(c!sO~O!]'dO!^'cO!_'cO#P!pO#U'eO#V'eO~PAjO_%gO!b#uO!i%^O'm%gO(P%RO(d'gO~O!m'kO#Y'iO~PBxOm!nO}!oO'xTO'{UO(W!mO(c!sO~O!YXOm(aX}(aX!](aX!^(aX!_(aX!y(aX!}(aX#O(aX#P(aX#Q(aX#R(aX#U(aX#V(aX'w(aX'x(aX'{(aX(W(aX(c(aX~O!^'cO!_'cO'w!lO~PChO'r'oO's'oO't'qO~O]!|O'x'sO'y!|O'z'sO~O]#PO'z'sO'{'sO'|#PO~Or#RO!P#SO(U#SO(V'wO~O!V'yO!T'OX!T'UX!W'OX!W'UX~P+}O!W'{O!T(ZX~OP$]OY$dOl$QOz#yO{#zO}#{O!W'{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO#w$YO(TVO(d$ZO(k#|O(l#}O~O!T(ZX~PG[O!T(QO~O!T(gX!W(gX!b(gX!h(gX(d(gX~O#Y(gX#e#^X!X(gX~PIbO#Y(RO!T(iX!W(iX~O!W(SO!T(hX~O!T(VO~O#Y$eO~PIbO!X(WO~P`Oz#yO{#zO}#{O!g#wO!i#xO(TVOP!kaY!kal!ka!W!ka!f!ka!m!ka#h!ka#i!ka#j!ka#k!ka#l!ka#m!ka#n!ka#o!ka#p!ka#r!ka#t!ka#v!ka#w!ka(d!ka(k!ka(l!ka~O_!ka'm!ka'k!ka!T!ka!h!kap!ka!Y!ka%b!ka!b!ka~PJxO!h(XO~O!b#uO#Y(YO(d'gO!W(fX_(fX'm(fX~O!h(fX~PMhO}%aO!Y%bO!y]O#c(_O#d(^O'v%`O~O!W(`O!h(eX~O!h(bO~O}%aO!Y%bO#d(^O'v%`O~OP(YXY(YXl(YXz(YX{(YX}(YX!W(YX!f(YX!g(YX!i(YX!m(YX#h(YX#i(YX#j(YX#k(YX#l(YX#m(YX#n(YX#o(YX#p(YX#r(YX#t(YX#v(YX#w(YX(T(YX(d(YX(k(YX(l(YX~O!b#uO!h(YX~P! UOz(cO{(dO!g#wO!i#xO!y!xa}!xa~O!u!xa%a!xa!Y!xa#c!xa#d!xa'v!xa~P!#YO!u(hO~OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!YXO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'v!dO'xTO'{UO(TVO(c[O(piO~Oj%SOl$tOm$sOn$sOt%TOv%UOx:[O}${O!Y$|O!d;fO!i$xO#d:bO$R%YO$n:^O$p:`O$s%ZO'v(lO'xTO'{UO(P%RO(T$uO~O#e(nO~Oj%SOl$tOm$sOn$sOt%TOv%UOx%VO}${O!Y$|O!d%[O!i$xO#d%]O$R%YO$n%WO$p%XO$s%ZO'v(lO'xTO'{UO(P%RO(T$uO~Oe(^P~P!'vO!V(rO!h(_P~P%[O(W(tO(c[O~O}(vO!i#xO(W(tO(c[O~OP9qOQ9qOb;bOc!iOjkOl9qOmkOnkOtkOv9qOx9qO}WO!RkO!SkO!Y!eO!d9tO!iZO!l9qO!m9qO!n9qO!p9uO!r9xO!u!hO$R!kO$VfO'v)UO'xTO'{UO(TVO(c[O(p;`O~O{)XO!i#xO~O!W$aO_$la'm$la'k$la!h$la!T$la!Y$la%b$la!b$la~O#q)]O~P!&^Oz)`O!b)_O!Y$YX$U$YX$X$YX$Z$YX$b$YX~O!b)_O!Y(mX$U(mX$X(mX$Z(mX$b(mX~Oz)`O~P!-lOz)`O!Y(mX$U(mX$X(mX$Z(mX$b(mX~O!Y)bO$U)fO$X)aO$Z)aO$b)gO~O!V)jO~P!*SO$X$gO$Z$fO$b)nO~Oh$tXz$tX}$tX!g$tX(k$tX(l$tX~OegXe$tXhgX!WgX#YgX~P!/bOm)pO~Or)qO(U)rO(V)tO~Oh)}Oz)vO})wO(k)yO(l){O~Oe)uO~P!0kOe*OO~Oj%SOl$tOm$sOn$sOt%TOv%UOx:[O}${O!Y$|O!d;fO!i$xO#d:bO$R%YO$n:^O$p:`O$s%ZO'xTO'{UO(P%RO(T$uO~O!V*SO'v*PO!h(qP~P!1YO#e*UO~O!i*VO~O!V*[O'v*XO!T(rP~P!1YOl*hO}*`O!]*fO!^*_O!_*_O!i*VO#U*gO%X*bO'w!lO(W!mO~O!X*eO~P!3`O!g#wOh(SXz(SX}(SX(k(SX(l(SX!W(SX#Y(SX~Oe(SX#z(SX~P!4XOh*kO#Y*jOe(RX!W(RX~O!W*lOe(QX~O'v&QOe(QP~O!i*sO~O'v(lO~Oj*wO}%aO!V#hO!Y%bO!y]O#c#kO#d#hO'v%`O!h(eP~O!b#uO#e*xO~O}%aO!V*zO!W(SO!Y%bO'v%`O!T(hP~Om'RO}*|O!V*{O'xTO'{UO(W(tO~O!X(jP~P!7SO!W*}O_(vX'm(vX~OP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO#w$YO(TVO(d$ZO(k#|O(l#}O~O_!ca!W!ca'm!ca'k!ca!T!ca!h!cap!ca!Y!ca%b!ca!b!ca~P!7zOz#yO{#zO}#{O!g#wO!i#xO(TVOP!oaY!oal!oa!W!oa!f!oa!m!oa#h!oa#i!oa#j!oa#k!oa#l!oa#m!oa#n!oa#o!oa#p!oa#r!oa#t!oa#v!oa#w!oa(d!oa(k!oa(l!oa~O_!oa'm!oa'k!oa!T!oa!h!oap!oa!Y!oa%b!oa!b!oa~P!:eOz#yO{#zO}#{O!g#wO!i#xO(TVOP!qaY!qal!qa!W!qa!f!qa!m!qa#h!qa#i!qa#j!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#r!qa#t!qa#v!qa#w!qa(d!qa(k!qa(l!qa~O_!qa'm!qa'k!qa!T!qa!h!qap!qa!Y!qa%b!qa!b!qa~P!=OOh+WO!Y'VO%b+VO(P%RO~O!b+YO_(OX!Y(OX'm(OX!W(OX~O_%gO!YXO'm%gO~O!i%^O(P%RO~O!i%^O'v%`O(P%RO~O!b#uO#e(nO~O`+eO%c+fO'v+bO'xTO'{UO!X(zP~O!W+gO^(yX~OY+kO~O^+lO~O!Y%wO'v%`O'w!lO^(yP~O#Y+qO(P%RO~Oh+tO!Y$|O(P%RO~O!Y+vO~Oz+xO!YXO~O%g%nO~O!u+}O~Oc,SO~O`,TO'v#mO'xTO'{UO!X(xP~Oc%uO~O%c!QO'v&QO~P<wOY,YO^,XO~OPYOQYObzOcyOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!duO!iZO!lYO!mYO!nYO!pvO!uxO!y]O$VfO%a}O'xTO'{UO(TVO(c[O(piO~O!Y!eO!r!gO$R!kO'v!dO~P!DRO^,XO_%gO'm%gO~OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!u!hO$R!kO$VfO'v!dO'xTO'{UO(TVO(c[O(piO~O_,_O!rwO#q!OO%e!OO%f!OO%g!OO~P!FkO!i&fO~O&U,eO~O!Y,gO~O&g,iO&i,jOP&daQ&daW&da_&dab&dac&daj&dal&dam&dan&dat&dav&dax&da}&da!R&da!S&da!Y&da!d&da!i&da!l&da!m&da!n&da!p&da!r&da!u&da!y&da#q&da$R&da$V&da%a&da%c&da%e&da%f&da%g&da%j&da%l&da%o&da%p&da%r&da&O&da&U&da&W&da&Y&da&[&da&_&da&e&da&k&da&m&da&o&da&q&da&s&da'k&da'v&da'x&da'{&da(T&da(c&da(p&da!X&da&]&da`&da&b&da~O'v,oO~O!W|X!W!`X!X|X!X!`X!b|X!b!`X!i!`X#Y|X(P!`X~O!b,tO#Y,sO!W#bX!W(]X!X#bX!X(]X!b(]X!i(]X(P(]X~O!b,vO!i%^O(P%RO!W![X!X![X~Om!nO}!oO'xTO'{UO(W!mO~OP9qOQ9qOb;bOc!iOjkOl9qOmkOnkOtkOv9qOx9qO}WO!RkO!SkO!Y!eO!d9tO!iZO!l9qO!m9qO!n9qO!p9uO!r9xO!u!hO$R!kO$VfO'xTO'{UO(TVO(c[O(p;`O~O'v:gO~P# qO!W,zO!X([X~O!X,|O~O!b,tO#Y,sO!W#bX!X#bX~O!W,}O!X(jX~O!X-PO~O!^-QO!_-QO'w!lO~P# `O!X-TO~P'_Oh-WO!Y'VO~O!T-]O~Om!xa!]!xa!^!xa!_!xa!}!xa#O!xa#P!xa#Q!xa#R!xa#U!xa#V!xa'w!xa'x!xa'{!xa(W!xa(c!xa~P!#YO!m-bO#Y-`O~PBxO!^-dO!_-dO'w!lO~PChO_%gO#Y-`O'm%gO~O_%gO!b#uO#Y-`O'm%gO~O_%gO!b#uO!m-bO#Y-`O'm%gO(d'gO~O'r'oO's'oO't-iO~Op-jO~O!T'Oa!W'Oa~P!7zO!V-nO!T'OX!W'OX~P%[O!W'{O!T(Za~O!T(Za~PG[O!W(SO!T(ha~O}%aO!V-rO!Y%bO'v%`O!T'UX!W'UX~O#Y-tO!W(fa!h(fa_(fa'm(fa~O!b#uO~P#)wO!W(`O!h(ea~O}%aO!Y%bO#d-xO'v%`O~Oj-}O}%aO!V-zO!Y%bO!y]O#c-|O#d-zO'v%`O!W'XX!h'XX~O{.RO!i#xO~Oh.UO!Y'VO%b.TO(P%RO~O_#]i!W#]i'm#]i'k#]i!T#]i!h#]ip#]i!Y#]i%b#]i!b#]i~P!7zOh;lOz)vO})wO(k)yO(l){O~O#e#Xa_#Xa#Y#Xa'm#Xa!W#Xa!h#Xa!Y#Xa!T#Xa~P#,sO#e(SXP(SXY(SX_(SXl(SX{(SX!f(SX!i(SX!m(SX#h(SX#i(SX#j(SX#k(SX#l(SX#m(SX#n(SX#o(SX#p(SX#r(SX#t(SX#v(SX#w(SX'm(SX(T(SX(d(SX!h(SX!T(SX'k(SXp(SX!Y(SX%b(SX!b(SX~P!4XO!W._Oe(^X~P!0kOe.aO~O!W.bO!h(_X~P!7zO!h.eO~O!T.gO~OP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O(TVOY#gi_#gil#gi!W#gi!f#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi'm#gi(d#gi(k#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~O#h#gi~P#0oO#h$OO~P#0oOP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO(TVOY#gi_#gi!W#gi!f#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi'm#gi(d#gi(k#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~Ol#gi~P#3aOl$QO~P#3aOP$]Ol$QOz#yO{#zO}#{O!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO(TVO_#gi!W#gi#r#gi#t#gi#v#gi#w#gi'm#gi(d#gi(k#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~OY#gi!f#gi#m#gi#n#gi#o#gi#p#gi~P#6ROY$dO!f$SO#m$SO#n$SO#o$cO#p$SO~P#6ROP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO(TVO_#gi!W#gi#t#gi#v#gi#w#gi'm#gi(d#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~O(k#gi~P#9SO(k#|O~P#9SOP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO(TVO(k#|O_#gi!W#gi#v#gi#w#gi'm#gi(d#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~O(l#gi~P#;tO(l#}O~P#;tOP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO(TVO(k#|O(l#}O~O_#gi!W#gi#w#gi'm#gi(d#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~P#>fOPZXYZXlZXzZX{ZX}ZX!fZX!gZX!iZX!mZX#YZX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX(TZX(dZX(kZX(lZX!WZX!XZX~O#zZX~P#APOP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO#t:RO#v:TO#w:UO(TVO(d$ZO(k#|O(l#}O~O#z.iO~P#C^O#Y:ZO#|:ZO#z(YX!X(YX~P! UO_'[a!W'[a'm'[a'k'[a!h'[a!T'[ap'[a!Y'[a%b'[a!b'[a~P!7zOP#giY#gi_#gil#gi{#gi!W#gi!f#gi!g#gi!i#gi!m#gi#h#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi'm#gi(T#gi(d#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~P#,sO_#{i!W#{i'm#{i'k#{i!T#{i!h#{ip#{i!Y#{i%b#{i!b#{i~P!7zO$X.nO$Z.nO~O$X.oO$Z.oO~O!b)_O#Y.pO!Y$_X$U$_X$X$_X$Z$_X$b$_X~O!V.qO~O!Y)bO$U.sO$X)aO$Z)aO$b.tO~O!W:VO!X(XX~P#C^O!X.uO~O!b)_O$b(mX~O$b.wO~Or)qO(U)rO(V.zO~O!T/OO~P!&^O!WdX!bdX!hdX!h$tX(ddX~P!/bO!h/UO~P#,sO!W/VO!b#uO(d'gO!h(qX~O!h/[O~O!V*SO'v%`O!h(qP~O#e/^O~O!T$tX!W$tX!b${X~P!/bO!W/_O!T(rX~P#,sO!b/aO~O!T/cO~Ol/gO!b#uO!i%^O(P%RO(d'gO~O'v/iO~O!b+YO~O_%gO!W/mO'm%gO~O!X/oO~P!3`O!^/pO!_/pO'w!lO(W!mO~O}/rO(W!mO~O#U/sO~O'v&QOe'aX!W'aX~O!W*lOe(Qa~Oe/xO~Oz/yO{/yO}/zOhwa(kwa(lwa!Wwa#Ywa~Oewa#zwa~P$ tOz)vO})wOh$ma(k$ma(l$ma!W$ma#Y$ma~Oe$ma#z$ma~P$!jOz)vO})wOh$oa(k$oa(l$oa!W$oa#Y$oa~Oe$oa#z$oa~P$#]O#e/|O~Oe$}a!W$}a#Y$}a#z$}a~P!0kO!b#uO~O#e0PO~O!W*}O_(va'm(va~Oz#yO{#zO}#{O!g#wO!i#xO(TVOP!oiY!oil!oi!W!oi!f!oi!m!oi#h!oi#i!oi#j!oi#k!oi#l!oi#m!oi#n!oi#o!oi#p!oi#r!oi#t!oi#v!oi#w!oi(d!oi(k!oi(l!oi~O_!oi'm!oi'k!oi!T!oi!h!oip!oi!Y!oi%b!oi!b!oi~P$$zOh.UO!Y'VO%b.TO~Oj0ZO'v0YO~P!1]O!b+YO_(Oa!Y(Oa'm(Oa!W(Oa~O#e0aO~OYZX!WdX!XdX~O!W0bO!X(zX~O!X0dO~OY0eO~O`0gO'v+bO'xTO'{UO~O!Y%wO'v%`O^'iX!W'iX~O!W+gO^(ya~O!h0jO~P!7zOY0mO~O^0nO~O#Y0qO~Oh0tO!Y$|O~O(W(tO!X(wP~Oh0}O!Y0zO%b0|O(P%RO~OY1XO!W1VO!X(xX~O!X1YO~O^1[O_%gO'm%gO~O'v#mO'xTO'{UO~O#Y$eO#|$eOP(YXY(YXl(YXz(YX{(YX}(YX!W(YX!f(YX!i(YX!m(YX#h(YX#i(YX#j(YX#k(YX#l(YX#m(YX#n(YX#o(YX#r(YX#t(YX#v(YX#w(YX(T(YX(d(YX(k(YX(l(YX~O#p1_O&S1`O_(YX!g(YX~P$+sO#Y$eO#p1_O&S1`O~O_1bO~P%[O_1dO~O&]1gOP&ZiQ&ZiW&Zi_&Zib&Zic&Zij&Zil&Zim&Zin&Zit&Ziv&Zix&Zi}&Zi!R&Zi!S&Zi!Y&Zi!d&Zi!i&Zi!l&Zi!m&Zi!n&Zi!p&Zi!r&Zi!u&Zi!y&Zi#q&Zi$R&Zi$V&Zi%a&Zi%c&Zi%e&Zi%f&Zi%g&Zi%j&Zi%l&Zi%o&Zi%p&Zi%r&Zi&O&Zi&U&Zi&W&Zi&Y&Zi&[&Zi&_&Zi&e&Zi&k&Zi&m&Zi&o&Zi&q&Zi&s&Zi'k&Zi'v&Zi'x&Zi'{&Zi(T&Zi(c&Zi(p&Zi!X&Zi`&Zi&b&Zi~O`1mO!X1kO&b1lO~P`O!YXO!i1oO~O&i,jOP&diQ&diW&di_&dib&dic&dij&dil&dim&din&dit&div&dix&di}&di!R&di!S&di!Y&di!d&di!i&di!l&di!m&di!n&di!p&di!r&di!u&di!y&di#q&di$R&di$V&di%a&di%c&di%e&di%f&di%g&di%j&di%l&di%o&di%p&di%r&di&O&di&U&di&W&di&Y&di&[&di&_&di&e&di&k&di&m&di&o&di&q&di&s&di'k&di'v&di'x&di'{&di(T&di(c&di(p&di!X&di&]&di`&di&b&di~O!T1uO~O!W![a!X![a~P#C^Om!nO}!oO!V1{O(W!mO!W'PX!X'PX~P@OO!W,zO!X([a~O!W'VX!X'VX~P!7SO!W,}O!X(ja~O!X2SO~P'_O_%gO#Y2]O'm%gO~O_%gO!b#uO#Y2]O'm%gO~O_%gO!b#uO!m2aO#Y2]O'm%gO(d'gO~O_%gO'm%gO~P!7zO!W$aOp$la~O!T'Oi!W'Oi~P!7zO!W'{O!T(Zi~O!W(SO!T(hi~O!T(ii!W(ii~P!7zO!W(fi!h(fi_(fi'm(fi~P!7zO#Y2cO!W(fi!h(fi_(fi'm(fi~O!W(`O!h(ei~O}%aO!Y%bO!y]O#c2hO#d2gO'v%`O~O}%aO!Y%bO#d2gO'v%`O~Oh2oO!Y'VO%b2nO~Oh2oO!Y'VO%b2nO(P%RO~O#ewaPwaYwa_walwa!fwa!gwa!iwa!mwa#hwa#iwa#jwa#kwa#lwa#mwa#nwa#owa#pwa#rwa#twa#vwa#wwa'mwa(Twa(dwa!hwa!Twa'kwapwa!Ywa%bwa!bwa~P$ tO#e$maP$maY$ma_$mal$ma{$ma!f$ma!g$ma!i$ma!m$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#o$ma#p$ma#r$ma#t$ma#v$ma#w$ma'm$ma(T$ma(d$ma!h$ma!T$ma'k$map$ma!Y$ma%b$ma!b$ma~P$!jO#e$oaP$oaY$oa_$oal$oa{$oa!f$oa!g$oa!i$oa!m$oa#h$oa#i$oa#j$oa#k$oa#l$oa#m$oa#n$oa#o$oa#p$oa#r$oa#t$oa#v$oa#w$oa'm$oa(T$oa(d$oa!h$oa!T$oa'k$oap$oa!Y$oa%b$oa!b$oa~P$#]O#e$}aP$}aY$}a_$}al$}a{$}a!W$}a!f$}a!g$}a!i$}a!m$}a#h$}a#i$}a#j$}a#k$}a#l$}a#m$}a#n$}a#o$}a#p$}a#r$}a#t$}a#v$}a#w$}a'm$}a(T$}a(d$}a!h$}a!T$}a'k$}a#Y$}ap$}a!Y$}a%b$}a!b$}a~P#,sO_#]q!W#]q'm#]q'k#]q!T#]q!h#]qp#]q!Y#]q%b#]q!b#]q~P!7zOe'QX!W'QX~P!'vO!W._Oe(^a~O!V2wO!W'RX!h'RX~P%[O!W.bO!h(_a~O!W.bO!h(_a~P!7zO!T2zO~O#z!ka!X!ka~PJxO#z!ca!W!ca!X!ca~P#C^O#z!oa!X!oa~P!:eO#z!qa!X!qa~P!=OO!Y3^O$VfO$`3_O~O!X3cO~Op3dO~P#,sO_$iq!W$iq'm$iq'k$iq!T$iq!h$iqp$iq!Y$iq%b$iq!b$iq~P!7zO!T3eO~P#,sOz)vO})wO(l){Oh%Yi(k%Yi!W%Yi#Y%Yi~Oe%Yi#z%Yi~P$J]Oz)vO})wOh%[i(k%[i(l%[i!W%[i#Y%[i~Oe%[i#z%[i~P$KOO(d$ZO~P#,sO!V3hO'v%`O!W']X!h']X~O!W/VO!h(qa~O!W/VO!b#uO!h(qa~O!W/VO!b#uO(d'gO!h(qa~Oe$vi!W$vi#Y$vi#z$vi~P!0kO!V3pO'v*XO!T'_X!W'_X~P!1YO!W/_O!T(ra~O!W/_O!T(ra~P#,sO!b#uO#p3xO~Ol3{O!b#uO(d'gO~Oe(Ri!W(Ri~P!0kO#Y4OOe(Ri!W(Ri~P!0kO!h4RO~O_$jq!W$jq'm$jq'k$jq!T$jq!h$jqp$jq!Y$jq%b$jq!b$jq~P!7zO!T4VO~O!W4WO!Y(sX~P#,sO!g#wO~P4XO_$tX!Y$tX%VZX'm$tX!W$tX~P!/bO%V4YO_iXhiXziX}iX!YiX'miX(kiX(liX!WiX~O%V4YO~O`4`O%c4aO'v+bO'xTO'{UO!W'hX!X'hX~O!W0bO!X(za~OY4eO~O^4fO~O_%gO'm%gO~P#,sO!Y$|O~P#,sO!W4nO#Y4pO!X(wX~O!X4qO~Om!nO}4rO!]!xO!^!uO!_!uO!y9rO!}!pO#O!pO#P!pO#Q!pO#R!pO#U4wO#V!yO'w!lO'xTO'{UO(W!mO(c!sO~O!X4vO~P%%QOh4|O!Y0zO%b4{O~Oh4|O!Y0zO%b4{O(P%RO~O`5TO'v#mO'xTO'{UO!W'gX!X'gX~O!W1VO!X(xa~O'xTO'{UO(W5VO~O^5ZO~O#p5^O&S5_O~PMhO!h5`O~P%[O_5bO~O_5bO~P%[O`1mO!X5gO&b1lO~P`O!b5iO~O!b5kO!W(]i!X(]i!b(]i!i(]i(P(]i~O!W#bi!X#bi~P#C^O#Y5lO!W#bi!X#bi~O!W![i!X![i~P#C^O_%gO#Y5uO'm%gO~O_%gO!b#uO#Y5uO'm%gO~O!W(fq!h(fq_(fq'm(fq~P!7zO!W(`O!h(eq~O}%aO!Y%bO#d5|O'v%`O~O!Y'VO%b6PO~Oh6SO!Y'VO%b6PO~O#e%YiP%YiY%Yi_%Yil%Yi{%Yi!f%Yi!g%Yi!i%Yi!m%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#o%Yi#p%Yi#r%Yi#t%Yi#v%Yi#w%Yi'm%Yi(T%Yi(d%Yi!h%Yi!T%Yi'k%Yip%Yi!Y%Yi%b%Yi!b%Yi~P$J]O#e%[iP%[iY%[i_%[il%[i{%[i!f%[i!g%[i!i%[i!m%[i#h%[i#i%[i#j%[i#k%[i#l%[i#m%[i#n%[i#o%[i#p%[i#r%[i#t%[i#v%[i#w%[i'm%[i(T%[i(d%[i!h%[i!T%[i'k%[ip%[i!Y%[i%b%[i!b%[i~P$KOO#e$viP$viY$vi_$vil$vi{$vi!W$vi!f$vi!g$vi!i$vi!m$vi#h$vi#i$vi#j$vi#k$vi#l$vi#m$vi#n$vi#o$vi#p$vi#r$vi#t$vi#v$vi#w$vi'm$vi(T$vi(d$vi!h$vi!T$vi'k$vi#Y$vip$vi!Y$vi%b$vi!b$vi~P#,sOe'Qa!W'Qa~P!0kO!W'Ra!h'Ra~P!7zO!W.bO!h(_i~O#z#]i!W#]i!X#]i~P#C^OP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O(TVOY#gil#gi!f#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi#z#gi(d#gi(k#gi(l#gi!W#gi!X#gi~O#h#gi~P%3jO#h9zO~P%3jOP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O(TVOY#gi!f#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi#z#gi(d#gi(k#gi(l#gi!W#gi!X#gi~Ol#gi~P%5uOl9|O~P%5uOP$]Ol9|Oz#yO{#zO}#{O!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O(TVO#r#gi#t#gi#v#gi#w#gi#z#gi(d#gi(k#gi(l#gi!W#gi!X#gi~OY#gi!f#gi#m#gi#n#gi#o#gi#p#gi~P%8QOY:YO!f:OO#m:OO#n:OO#o:XO#p:OO~P%8QOP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO(TVO#t#gi#v#gi#w#gi#z#gi(d#gi(l#gi!W#gi!X#gi~O(k#gi~P%:lO(k#|O~P%:lOP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO#t:RO(TVO(k#|O#v#gi#w#gi#z#gi(d#gi!W#gi!X#gi~O(l#gi~P%<wO(l#}O~P%<wOP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO#t:RO#v:TO(TVO(k#|O(l#}O~O#w#gi#z#gi(d#gi!W#gi!X#gi~P%?SO_#xy!W#xy'm#xy'k#xy!T#xy!h#xyp#xy!Y#xy%b#xy!b#xy~P!7zOh;mOz)vO})wO(k)yO(l){O~OP#giY#gil#gi{#gi!f#gi!g#gi!i#gi!m#gi#h#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi#z#gi(T#gi(d#gi!W#gi!X#gi~P%AzO!g#wOP(SXY(SXh(SXl(SXz(SX{(SX}(SX!f(SX!i(SX!m(SX#h(SX#i(SX#j(SX#k(SX#l(SX#m(SX#n(SX#o(SX#p(SX#r(SX#t(SX#v(SX#w(SX#z(SX(T(SX(d(SX(k(SX(l(SX!W(SX!X(SX~O#z#{i!W#{i!X#{i~P#C^O#z!oi!X!oi~P$$zO!X6`O~O!W'[a!X'[a~P#C^O!b#uO(d'gO!W']a!h']a~O!W/VO!h(qi~O!W/VO!b#uO!h(qi~Oe$vq!W$vq#Y$vq#z$vq~P!0kO!T'_a!W'_a~P#,sO!b6gO~O!W/_O!T(ri~P#,sO!W/_O!T(ri~O!T6kO~O!b#uO#p6pO~Ol6qO!b#uO(d'gO~O!T6sO~Oe$xq!W$xq#Y$xq#z$xq~P!0kO_$jy!W$jy'm$jy'k$jy!T$jy!h$jyp$jy!Y$jy%b$jy!b$jy~P!7zO!b5kO~O!W4WO!Y(sa~O_#]y!W#]y'm#]y'k#]y!T#]y!h#]yp#]y!Y#]y%b#]y!b#]y~P!7zOY6xO~O`6zO'v+bO'xTO'{UO~O!W0bO!X(zi~O^7OO~O(W(tO!W'dX!X'dX~O!W4nO!X(wa~OjkO'v7VO~P.iO!X7YO~P%%QOm!nO}7ZO'xTO'{UO(W!mO(c!sO~O!Y0zO~O!Y0zO%b7]O~Oh7`O!Y0zO%b7]O~OY7eO!W'ga!X'ga~O!W1VO!X(xi~O!h7iO~O!h7jO~O!h7mO~O!h7mO~P%[O_7oO~O!b7pO~O!h7qO~O!W(ii!X(ii~P#C^O_%gO#Y7yO'm%gO~O!W(fy!h(fy_(fy'm(fy~P!7zO!W(`O!h(ey~O!Y'VO%b7|O~O#e$vqP$vqY$vq_$vql$vq{$vq!W$vq!f$vq!g$vq!i$vq!m$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#o$vq#p$vq#r$vq#t$vq#v$vq#w$vq'm$vq(T$vq(d$vq!h$vq!T$vq'k$vq#Y$vqp$vq!Y$vq%b$vq!b$vq~P#,sO#e$xqP$xqY$xq_$xql$xq{$xq!W$xq!f$xq!g$xq!i$xq!m$xq#h$xq#i$xq#j$xq#k$xq#l$xq#m$xq#n$xq#o$xq#p$xq#r$xq#t$xq#v$xq#w$xq'm$xq(T$xq(d$xq!h$xq!T$xq'k$xq#Y$xqp$xq!Y$xq%b$xq!b$xq~P#,sO!W'Ri!h'Ri~P!7zO#z#]q!W#]q!X#]q~P#C^Oz/yO{/yO}/zOPwaYwahwalwa!fwa!gwa!iwa!mwa#hwa#iwa#jwa#kwa#lwa#mwa#nwa#owa#pwa#rwa#twa#vwa#wwa#zwa(Twa(dwa(kwa(lwa!Wwa!Xwa~Oz)vO})wOP$maY$mah$mal$ma{$ma!f$ma!g$ma!i$ma!m$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#o$ma#p$ma#r$ma#t$ma#v$ma#w$ma#z$ma(T$ma(d$ma(k$ma(l$ma!W$ma!X$ma~Oz)vO})wOP$oaY$oah$oal$oa{$oa!f$oa!g$oa!i$oa!m$oa#h$oa#i$oa#j$oa#k$oa#l$oa#m$oa#n$oa#o$oa#p$oa#r$oa#t$oa#v$oa#w$oa#z$oa(T$oa(d$oa(k$oa(l$oa!W$oa!X$oa~OP$}aY$}al$}a{$}a!f$}a!g$}a!i$}a!m$}a#h$}a#i$}a#j$}a#k$}a#l$}a#m$}a#n$}a#o$}a#p$}a#r$}a#t$}a#v$}a#w$}a#z$}a(T$}a(d$}a!W$}a!X$}a~P%AzO#z$iq!W$iq!X$iq~P#C^O#z$jq!W$jq!X$jq~P#C^O!X8WO~O#z8XO~P!0kO!b#uO!W']i!h']i~O!b#uO(d'gO!W']i!h']i~O!W/VO!h(qq~O!T'_i!W'_i~P#,sO!W/_O!T(rq~O!T8_O~P#,sO!T8_O~Oe(Ry!W(Ry~P!0kO!W'ba!Y'ba~P#,sO_%Uq!Y%Uq'm%Uq!W%Uq~P#,sOY8dO~O!W0bO!X(zq~O#Y8hO!W'da!X'da~O!W4nO!X(wi~P#C^OPZXYZXlZXzZX{ZX}ZX!TZX!WZX!fZX!gZX!iZX!mZX#YZX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX(TZX(dZX(kZX(lZX~O!b%SX#p%SX~P&3YO!Y0zO%b8lO~O'xTO'{UO(W8qO~O!W1VO!X(xq~O!h8tO~O!h8uO~O!h8vO~O!h8vO~P%[O#Y8yO!W#by!X#by~O!W#by!X#by~P#C^O!Y'VO%b9OO~O#z#xy!W#xy!X#xy~P#C^OP$viY$vil$vi{$vi!f$vi!g$vi!i$vi!m$vi#h$vi#i$vi#j$vi#k$vi#l$vi#m$vi#n$vi#o$vi#p$vi#r$vi#t$vi#v$vi#w$vi#z$vi(T$vi(d$vi!W$vi!X$vi~P%AzOz)vO})wO(l){OP%YiY%Yih%Yil%Yi{%Yi!f%Yi!g%Yi!i%Yi!m%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#o%Yi#p%Yi#r%Yi#t%Yi#v%Yi#w%Yi#z%Yi(T%Yi(d%Yi(k%Yi!W%Yi!X%Yi~Oz)vO})wOP%[iY%[ih%[il%[i{%[i!f%[i!g%[i!i%[i!m%[i#h%[i#i%[i#j%[i#k%[i#l%[i#m%[i#n%[i#o%[i#p%[i#r%[i#t%[i#v%[i#w%[i#z%[i(T%[i(d%[i(k%[i(l%[i!W%[i!X%[i~O#z$jy!W$jy!X$jy~P#C^O#z#]y!W#]y!X#]y~P#C^O!b#uO!W']q!h']q~O!W/VO!h(qy~O!T'_q!W'_q~P#,sO!T9VO~P#,sO!W0bO!X(zy~O!W4nO!X(wq~O!Y0zO%b9^O~O!h9aO~O!Y'VO%b9fO~OP$vqY$vql$vq{$vq!f$vq!g$vq!i$vq!m$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#o$vq#p$vq#r$vq#t$vq#v$vq#w$vq#z$vq(T$vq(d$vq!W$vq!X$vq~P%AzOP$xqY$xql$xq{$xq!f$xq!g$xq!i$xq!m$xq#h$xq#i$xq#j$xq#k$xq#l$xq#m$xq#n$xq#o$xq#p$xq#r$xq#t$xq#v$xq#w$xq#z$xq(T$xq(d$xq!W$xq!X$xq~P%AzOe%^!Z!W%^!Z#Y%^!Z#z%^!Z~P!0kO!W'dq!X'dq~P#C^O!W#b!Z!X#b!Z~P#C^O#e%^!ZP%^!ZY%^!Z_%^!Zl%^!Z{%^!Z!W%^!Z!f%^!Z!g%^!Z!i%^!Z!m%^!Z#h%^!Z#i%^!Z#j%^!Z#k%^!Z#l%^!Z#m%^!Z#n%^!Z#o%^!Z#p%^!Z#r%^!Z#t%^!Z#v%^!Z#w%^!Z'm%^!Z(T%^!Z(d%^!Z!h%^!Z!T%^!Z'k%^!Z#Y%^!Zp%^!Z!Y%^!Z%b%^!Z!b%^!Z~P#,sOP%^!ZY%^!Zl%^!Z{%^!Z!f%^!Z!g%^!Z!i%^!Z!m%^!Z#h%^!Z#i%^!Z#j%^!Z#k%^!Z#l%^!Z#m%^!Z#n%^!Z#o%^!Z#p%^!Z#r%^!Z#t%^!Z#v%^!Z#w%^!Z#z%^!Z(T%^!Z(d%^!Z!W%^!Z!X%^!Z~P%AzOp(XX~P1qO'w!lO~P!*SO!TdX!WdX#YdX~P&3YOPZXYZXlZXzZX{ZX}ZX!WZX!WdX!fZX!gZX!iZX!mZX#YZX#YdX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX(TZX(dZX(kZX(lZX~O!bdX!hZX!hdX(ddX~P&HpOP9qOQ9qOb;bOc!iOjkOl9qOmkOnkOtkOv9qOx9qO}WO!RkO!SkO!YXO!d9tO!iZO!l9qO!m9qO!n9qO!p9uO!r9xO!u!hO$R!kO$VfO'v)UO'xTO'{UO(TVO(c[O(p;`O~O!W:VO!X$la~Oj%SOl$tOm$sOn$sOt%TOv%UOx:]O}${O!Y$|O!d;gO!i$xO#d:cO$R%YO$n:_O$p:aO$s%ZO'v(lO'xTO'{UO(P%RO(T$uO~O#q)]O~P&MfO!XZX!XdX~P&HpO#e9yO~O!b#uO#e9yO~O#Y:ZO~O#p:OO~O#Y:eO!W(iX!X(iX~O#Y:ZO!W(gX!X(gX~O#e:fO~Oe:hO~P!0kO#e:mO~O#e:nO~O!b#uO#e:oO~O!b#uO#e:fO~O#z:pO~P#C^O#e:qO~O#e:rO~O#e:sO~O#e:tO~O#e:uO~O#e:vO~O#z:wO~P!0kO#z:xO~P!0kO$V~!g!}#O#Q#R#U#c#d#o(p$n$p$s%V%a%b%c%j%l%o%p%r%t~'qR$V(p#i!S'o'w#jm#h#klz'p(W'p'v$X$Z$X~",goto:"$'X)OPPPP)PPP)SP)eP*t.xPPPP5`PP5vP;r>yP?^P?^PPP?^PAOP?^P?^P?^PASPPAXPArPFjPPPFnPPPPFnIoPPPIuJpPFnPMOPPPP! ^FnPPPFnPFnP!#lFnP!'Q!(S!(]P!)P!)T!)PPPPPP!,`!(SPP!,|!-vP!0jFnFn!0o!3y!8`!8`!<UPPP!<]FnPPPPPPPPPPP!?jP!@{PPFn!BYPFnPFnFnFnFnPFn!ClPP!FtP!IxP!I|!JW!J[!J[P!FqP!J`!J`P!MdP!MhFnFn!Mn#!q?^P?^P?^?^P##|?^?^#%x?^#(X?^#)}?^?^#*l#,j#,j#,n#,v#,j#-OP#,jP?^#-h?^#.q?^?^5`PPP#/}PPP#0h#0hP#0hP#1O#0hPP#1UP#0{P#0{#1i#0{#2T#2Z5])S#2^)SP#2e#2e#2eP)SP)SP)SP)SPP)SP#2k#2nP#2n)SP#2rP#2uP)SP)SP)SP)SP)SP)S)SPP#2{#3R#3^#3d#3j#3p#3v#4U#4[#4b#4l#4r#4|#5]#5c#6T#6g#6m#6s#7R#7h#8y#9X#9_#9e#9k#9q#9{#:R#:X#:c#:u#:{PPPPPPPPPP#;RPPPPPPP#;v#>}P#@^#@e#@mPPPP#D{#Gr#NZ#N^#Na$ Y$ ]$ `$ g$ oPP$ u$ y$!q$#p$#t$$YPP$$^$$d$$hP$$k$$o$$r$%h$&P$&h$&l$&o$&r$&x$&{$'P$'TR!{RoqOXst!Z#c%f&i&k&l&n,b,g1g1jY!uQ'V-S0z4uQ%lvQ%tyQ%{|Q&a!VS&}!e,zQ']!iS'c!r!xS*_$|*dQ+`%uQ+m%}Q,R&ZQ-Q'UQ-['^Q-d'dQ/p*fQ1U,SR:d9u%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|,_,b,g-W-`-n-t.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2w4r4|5^5_5b5u7Z7`7o7yS#p]9r!r)W$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ*o%VQ+e%wQ,T&^Q,[&fQ.X:[Q0W+WQ0[+YQ0g+fQ1^,YQ2k.UQ4`0bQ5T1VQ6R2oQ6X:]Q6z4aR8P6S&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;ct!nQ!r!u!x!y&}'U'V'c'd'e,z-Q-S-d0z4u4w$^$si#u#w$c$d$x${%W%X%])q)w)z)|)}*U*[*j*k+V+Y+q+t.T._/P/^/_/a/|0q0t0|2n3f3p3x4O4W4Y4{6P6g6p7]7|8X8l9O9^9f:X:Y:^:_:`:a:b:c:i:j:k:l:m:n:q:r:s:t:w:x;`;h;i;l;mQ&O|Q&{!eS'R%b,}Q+e%wQ,T&^Q/{*sQ0g+fQ0l+lQ1],XQ1^,YQ4`0bQ4i0nQ5T1VQ5W1XQ5X1[Q6z4aQ6}4fQ7h5ZQ8g7OR8r7ernOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jR,V&b&v^OPXYstuvwz!Z!`!g!j!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'X'i'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;b;c[#[WZ#V#Y'O'y!S%cm#g#h#k%^%a(S(^(_(`*z*{*},^,t-r-x-y-z-|1o2g2h5k5|Q%oxQ%syS%x|%}Q&U!TQ'Y!hQ'[!iQ(g#rS*R$x*VS+_%t%uQ+c%wQ+|&XQ,Q&ZS-Z']'^Q.W(hQ/Z*SQ0`+`Q0f+fQ0h+gQ0k+kQ1P+}S1T,R,SQ2X-[Q3g/VQ4_0bQ4c0eQ4h0mQ5S1UQ6d3hQ6y4aQ6|4eQ8c6xR9X8dv$zi#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;i!S%qy!i!t%s%t%u&|'[']'^'b'l*^+_+`,w-Z-[-c/h0`2Q2X2`3zQ+X%oQ+r&RQ+u&SQ,P&ZQ.V(gQ1O+|U1S,Q,R,SQ2p.WQ4}1PS5R1T1UQ7d5S#O;d#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mg;e:X:Y:_:a:c:j:l:n:r:t:xW%Pi%R*l;`S&R!Q&`Q&S!RQ&T!SR+p&P$_%Oi#u#w$c$d$x${%W%X%])q)w)z)|)}*U*[*j*k+V+Y+q+t.T._/P/^/_/a/|0q0t0|2n3f3p3x4O4W4Y4{6P6g6p7]7|8X8l9O9^9f:X:Y:^:_:`:a:b:c:i:j:k:l:m:n:q:r:s:t:w:x;`;h;i;l;mT)r$u)sV*p%V:[:]U'R!e%b,}S(u#y#zQ+j%zS.P(c(dQ0u+vQ4P/yR7S4n&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;c$i$`c#X#d%j%k%m'x(O(j(q(y(z({(|(})O)P)Q)R)S)T)V)Y)^)h+T+i,x-g-l-q-s.^.d.h.j.k.l.{/}1v1y2Z2b2v2{2|2}3O3P3Q3R3S3T3U3V3W3X3[3]3b4T4]5n5t5y6V6W6]6^7U7s7w8Q8U8V8{9Z9b9s;VT#SV#T&}kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ'P!eR1|,zv!nQ!e!r!u!x!y&}'U'V'c'd'e,z-Q-S-d0z4u4wS*^$|*dS/h*_*fQ/q*gQ0w+xQ3z/pR3}/snqOXst!Z#c%f&i&k&l&n,b,g1g1jQ&p!^Q'm!wS(i#t9yQ+]%rQ+z&UQ+{&WQ-X'ZQ-f'fS.](n:fS0O*x:oQ0^+^Q0y+yQ1n,iQ1p,jQ1x,uQ2V-YQ2Y-^S4U0P:uQ4Z0_S4^0a:vQ5m1zQ5q2WQ5v2_Q6w4[Q7t5oQ7u5rQ7x5wR8x7q$d$_c#X#d%k%m'x(O(j(q(y(z({(|(})O)P)Q)R)S)T)V)Y)^)h+T+i,x-g-l-q-s.^.d.h.k.l.{/}1v1y2Z2b2v2{2|2}3O3P3Q3R3S3T3U3V3W3X3[3]3b4T4]5n5t5y6V6W6]6^7U7s7w8Q8U8V8{9Z9b9s;VS(f#o'`U*i$}(m3ZS+S%j.jQ2l0WQ6O2kQ8O6RR9P8P$d$^c#X#d%k%m'x(O(j(q(y(z({(|(})O)P)Q)R)S)T)V)Y)^)h+T+i,x-g-l-q-s.^.d.h.k.l.{/}1v1y2Z2b2v2{2|2}3O3P3Q3R3S3T3U3V3W3X3[3]3b4T4]5n5t5y6V6W6]6^7U7s7w8Q8U8V8{9Z9b9s;VS(e#o'`S(w#z$_S+R%j.jS.Q(d(fQ.m)XQ0T+SR2i.R&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cS#p]9rQ&k!XQ&l!YQ&n![Q&o!]R1f,eQ'W!hQ+U%oQ-V'YS.S(g+XQ2T-UW2m.V.W0V0XQ5p2UU5}2j2l2pS7{6O6QS8}7}8OS9d8|9PQ9l9eR9o9mU!vQ'V-ST4s0z4u!Q_OXZ`st!V!Z#c#g%^%f&`&b&i&k&l&n(`,b,g-y1g1j]!pQ!r'V-S0z4uT#p]9r%Y{OPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yS(u#y#zS.P(c(d!s:|$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cY!tQ'V-S0z4uQ'b!rS'l!u!xS'n!y4wS-c'c'dQ-e'eR2`-dQ'k!tS([#f1aS-b'b'nQ/Y*RQ/f*^Q2a-eQ3l/ZS3u/g/qQ6c3gS6n3{3}Q8Z6dR8b6qQ#vbQ'j!tS(Z#f1aS(]#l*wQ*y%_Q+Z%pQ+a%vU-a'b'k'nQ-u([Q/X*RQ/e*^Q/k*aQ0]+[Q1Q,OS2^-b-eQ2f-}S3k/Y/ZS3t/f/qQ3w/jQ3y/lQ5P1RQ5x2aQ6b3gQ6f3lS6j3u3}Q6o3|Q7b5QS8Y6c6dQ8^6kQ8`6nQ8o7cQ9T8ZQ9U8_Q9W8bQ9`8pQ9h9VQ;P:zQ;[;TR;];UV!vQ'V-S%YaOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yS#vz!j!r:y$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cR;P;b%YbOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yQ%_j!S%py!i!t%s%t%u&|'[']'^'b'l*^+_+`,w-Z-[-c/h0`2Q2X2`3zS%vz!jQ+[%qQ,O&ZW1R,P,Q,R,SU5Q1S1T1US7c5R5SQ8p7d!r:z$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ;T;aR;U;b$|eOPXYstuvw!Z!`!g!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&i&k&l&n&r&z'X'i'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yY#aWZ#V#Y'y!S%cm#g#h#k%^%a(S(^(_(`*z*{*},^,t-r-x-y-z-|1o2g2h5k5|Q,]&f!p:{$[$m)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cR;O'OS'S!e%bR2O,}%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|,_,b,g-W-`-n-t.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2w4r4|5^5_5b5u7Z7`7o7y!r)W$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ,[&fQ0W+WQ2k.UQ6R2oR8P6S!f$Uc#X%j'x(O(j(q)Q)R)S)T)Y)^+i-g-l-q-s.^.d.{/}2Z2b2v3X4T4]5t5y6V7w8{9s!T:Q)V)h,x.j1v1y2{3T3U3V3W3[3b5n6W6]6^7U7s8Q8U8V9Z9b;V!b$Wc#X%j'x(O(j(q)S)T)Y)^+i-g-l-q-s.^.d.{/}2Z2b2v3X4T4]5t5y6V7w8{9s!P:S)V)h,x.j1v1y2{3V3W3[3b5n6W6]6^7U7s8Q8U8V9Z9b;V!^$[c#X%j'x(O(j(q)Y)^+i-g-l-q-s.^.d.{/}2Z2b2v3X4T4]5t5y6V7w8{9sQ3f/Tz;c)V)h,x.j1v1y2{3[3b5n6W6]6^7U7s8Q8U8V9Z9b;VQ;h;jR;i;k&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cS$nh$oR3_.p'TgOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.p.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cT$jf$pQ$hfS)a$k)eR)m$pT$if$pT)c$k)e'ThOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.p.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cT$nh$oQ$qhR)l$o%YjOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7y!s;a$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;c#clOPXZst!Z!`!o#R#c#n#{$m%f&b&e&f&i&k&l&n&r&z'X(v)j*|+W,_,b,g-W.U.q/z0}1_1`1b1d1g1j1l2o3^4r4|5^5_5b6S7Z7`7ov$}i#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;i#O(m#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mQ*t%ZQ.|)vg3Z:X:Y:_:a:c:j:l:n:r:t:xv$yi#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;iQ*W$zS*a$|*dQ*u%[Q/l*b#O;R#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mf;S:X:Y:_:a:c:j:l:n:r:t:xQ;W;dQ;X;eQ;Y;fR;Z;gv$}i#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;i#O(m#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mg3Z:X:Y:_:a:c:j:l:n:r:t:xnoOXst!Z#c%f&i&k&l&n,b,g1g1jQ*Z${Q,p&uQ,q&wR3o/_$^%Oi#u#w$c$d$x${%W%X%])q)w)z)|)}*U*[*j*k+V+Y+q+t.T._/P/^/_/a/|0q0t0|2n3f3p3x4O4W4Y4{6P6g6p7]7|8X8l9O9^9f:X:Y:^:_:`:a:b:c:i:j:k:l:m:n:q:r:s:t:w:x;`;h;i;l;mQ+s&SQ0s+uQ4l0rR7R4mT*c$|*dS*c$|*dT4t0z4uS/j*`4rT3|/r7ZQ+Z%pQ/k*aQ0]+[Q1Q,OQ5P1RQ7b5QQ8o7cR9`8pn)z$v(o*v/]/t/u2t3m4S6a6r9S;Q;^;_!Y:i(k)[*Q*Y.[.x.}/T/b0U0p0r2s3n3r4k4m6T6U6h6l6t6v8]8a9g;j;k]:j3Y6[8R9Q9R9pp)|$v(o*v/R/]/t/u2t3m4S6a6r9S;Q;^;_![:k(k)[*Q*Y.[.x.}/T/b0U0p0r2q2s3n3r4k4m6T6U6h6l6t6v8]8a9g;j;k_:l3Y6[8R8S9Q9R9prnOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jQ&]!UR,_&frnOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jR&]!UQ+w&TR0o+psnOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jQ0{+|S4z1O1PU7[4x4y4}S8k7^7_S9[8j8mQ9i9]R9n9jQ&d!VR,W&`R5W1XS%x|%}R0h+gQ&i!WR,b&jR,h&oT1h,g1jR,l&pQ,k&pR1q,lQ'p!zR-h'pSsOtQ#cXT%is#cQ!}TR'r!}Q#QUR't#QQ)s$uR.y)sQ#TVR'v#TQ#WWU'|#W'}-oQ'}#XR-o(OQ,{'PR1},{Q.`(oR2u.`Q.c(qS2x.c2yR2y.dQ-S'VR2R-SY!rQ'V-S0z4uR'a!rS#^W%aU(T#^(U-pQ(U#_R-p(PQ-O'SR2P-Ot`OXst!V!Z#c%f&`&b&i&k&l&n,b,g1g1jS#gZ%^U#q`#g-yR-y(`Q(a#iQ-v(]W.O(a-v2d5zQ2d-wR5z2eQ)e$kR.r)eQ$ohR)k$oQ$bcU)Z$b-k:WQ-k9sR:W)hQ/W*RW3i/W3j6e8[U3j/X/Y/ZS6e3k3lR8[6f#o)x$v(k(o)[*Q*Y*q*r*v.Y.Z.[.x.}/R/S/T/]/b/t/u0U0p0r2q2r2s2t3Y3m3n3r4S4k4m6T6U6Y6Z6[6a6h6l6r6t6v8R8S8T8]8a9Q9R9S9g9p;Q;^;_;j;kQ/`*YU3q/`3s6iQ3s/bR6i3rQ*d$|R/n*dQ*m%QR/w*mQ4X0UR6u4XQ+O%dR0S+OQ4o0uS7T4o8iR8i7UQ+y&UR0x+yQ4u0zR7X4uQ1W,TS5U1W7fR7f5WQ0c+cW4b0c4d6{8eQ4d0fQ6{4cR8e6|Q+h%xR0i+hQ1j,gR5f1jYrOXst#cQ&m!ZQ+Q%fQ,a&iQ,c&kQ,d&lQ,f&nQ1e,bS1h,g1jR5e1gQ%hpQ&q!_Q&t!aQ&v!bQ&x!cQ'h!tQ+P%eQ+]%rQ+o&OQ,V&dQ,n&sW-_'b'j'k'nQ-f'fQ/m*cQ0^+^S1Z,W,ZQ1r,mQ1s,pQ1t,qQ2Y-^W2[-a-b-e-gQ4Z0_Q4g0lQ4j0pQ5O1QQ5Y1]Q5d1fU5s2Z2^2aQ5v2_Q6w4[Q7P4iQ7Q4kQ7W4tQ7a5PQ7g5XS7v5t5xQ7x5wQ8f6}Q8n7bQ8s7hQ8z7wQ9Y8gQ9_8oQ9c8{R9k9`Q%ryQ'Z!iQ'f!tU+^%s%t%uQ,u&|U-Y'[']'^S-^'b'lQ/d*^S0_+_+`Q1z,wS2W-Z-[Q2_-cQ3v/hQ4[0`Q5o2QQ5r2XQ5w2`R6m3zS$wi;`R*n%RU%Qi%R;`R/v*lQ$viS(k#u+YQ(o#wS)[$c$dQ*Q$xQ*Y${Q*q%WQ*r%XQ*v%]Q.Y:^Q.Z:`Q.[:bQ.x)qS.})w/PQ/R)zQ/S)|Q/T)}Q/]*UQ/b*[Q/t*jQ/u*kh0U+V.T0|2n4{6P7]7|8l9O9^9fQ0p+qQ0r+tQ2q:iQ2r:kQ2s:mQ2t._S3Y:X:YQ3m/^Q3n/_Q3r/aQ4S/|Q4k0qQ4m0tQ6T:qQ6U:sQ6Y:_Q6Z:aQ6[:cQ6a3fQ6h3pQ6l3xQ6r4OQ6t4WQ6v4YQ8R:nQ8S:jQ8T:lQ8]6gQ8a6pQ9Q:rQ9R:tQ9S8XQ9g:wQ9p:xQ;Q;`Q;^;hQ;_;iQ;j;lR;k;mnpOXst!Z#c%f&i&k&l&n,b,g1g1jQ!fPS#eZ#nQ&s!`U'_!o4r7ZQ'u#RQ(x#{Q)i$mS,Z&b&eQ,`&fQ,m&rQ,r&zQ-U'XQ.f(vQ.v)jQ0Q*|Q0X+WQ1c,_Q2U-WQ2l.UQ3a.qQ4Q/zQ4y0}Q5[1_Q5]1`Q5a1bQ5c1dQ5h1lQ6O2oQ6_3^Q7_4|Q7k5^Q7l5_Q7n5bQ8O6SQ8m7`R8w7o#WcOPXZst!Z!`!o#c#n#{%f&b&e&f&i&k&l&n&r&z'X(v*|+W,_,b,g-W.U/z0}1_1`1b1d1g1j1l2o4r4|5^5_5b6S7Z7`7oQ#XWQ#dYQ%juQ%kvS%mw!gS'x#V'{Q(O#YQ(j#tQ(q#xQ(y$OQ(z$PQ({$QQ(|$RQ(}$SQ)O$TQ)P$UQ)Q$VQ)R$WQ)S$XQ)T$YQ)V$[Q)Y$aQ)^$eW)h$m)j.q3^Q+T%lQ+i%yS,x'O1{Q-g'iS-l'y-nQ-q(RQ-s(YQ.^(nQ.d(rQ.h9qQ.j9tQ.k9uQ.l9xQ.{)uQ/}*xQ1v,sQ1y,vQ2Z-`Q2b-tQ2v.bQ2{9yQ2|9zQ2}9{Q3O9|Q3P9}Q3Q:OQ3R:PQ3S:QQ3T:RQ3U:SQ3V:TQ3W:UQ3X.iQ3[:ZQ3]:dQ3b:VQ4T0PQ4]0aQ5n:eQ5t2]Q5y2cQ6V2wQ6W:fQ6]:hQ6^:oQ7U4pQ7s5lQ7w5uQ8Q:pQ8U:uQ8V:vQ8{7yQ9Z8hQ9b8yQ9s#RR;V;cR#ZWR'Q!eY!tQ'V-S0z4uS&|!e,zQ'b!rS'l!u!xS'n!y4wS,w&}'US-c'c'dQ-e'eQ2Q-QR2`-dR(p#wR(s#xQ!fQT-R'V-S]!qQ!r'V-S0z4uQ#o]R'`9rT#jZ%^S#iZ%^S%dm,^U(]#g#h#kS-w(^(_Q-{(`Q0R*}Q2e-xU2f-y-z-|S5{2g2hR7z5|`#]W#V#Y%a'y(S*z-rr#fZm#g#h#k%^(^(_(`*}-x-y-z-|2g2h5|Q1a,^Q1w,tQ5j1oQ7r5kT:}'O*{T#`W%aS#_W%aS'z#V(SS(P#Y*zS,y'O*{T-m'y-rT'T!e%bQ$kfR)o$pT)d$k)eR3`.pT*T$x*VR*]${Q0V+VQ2j.TQ4x0|Q6Q2nQ7^4{Q7}6PQ8j7]Q8|7|Q9]8lQ9e9OQ9j9^R9m9fnqOXst!Z#c%f&i&k&l&n,b,g1g1jQ&c!VR,V&`tmOXst!U!V!Z#c%f&`&i&k&l&n,b,g1g1jR,^&fT%em,^R0v+vR,U&^Q%||R+n%}R+d%wT&g!W&jT&h!W&jT1i,g1j",nodeNames:"⚠ ArithOp ArithOp LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:367,context:qC,nodeProps:[["group",-26,7,15,17,63,200,204,208,209,211,214,217,227,229,235,237,239,241,244,250,256,258,260,262,264,266,267,"Statement",-32,11,12,26,29,30,36,46,49,50,52,57,65,73,77,79,81,82,104,105,114,115,132,135,137,138,139,140,142,143,163,164,166,"Expression",-23,25,27,31,35,37,39,167,169,171,172,174,175,176,178,179,180,182,183,184,194,196,198,199,"Type",-3,85,97,103,"ClassItem"],["openedBy",32,"InterpolationStart",51,"[",55,"{",70,"(",144,"JSXStartTag",156,"JSXStartTag JSXStartCloseTag"],["closedBy",34,"InterpolationEnd",45,"]",56,"}",71,")",145,"JSXSelfCloseEndTag JSXEndTag",161,"JSXEndTag"]],propSources:[VC],skippedNodes:[0,3,4,270],repeatNodeCount:33,tokenData:"$Fl(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#8g!R![#:v![!]#Gv!]!^#IS!^!_#J^!_!`#Nu!`!a$#a!a!b$(n!b!c$,m!c!}Er!}#O$-w#O#P$/R#P#Q$4j#Q#R$5t#R#SEr#S#T$7R#T#o$8]#o#p$<m#p#q$=c#q#r$>s#r#s$@P#s$f%Z$f$g+g$g#BYEr#BY#BZ$AZ#BZ$ISEr$IS$I_$AZ$I_$I|Er$I|$I}$Df$I}$JO$Df$JO$JTEr$JT$JU$AZ$JU$KVEr$KV$KW$AZ$KW&FUEr&FU&FV$AZ&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AZ?HUOEr(n%d_$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$e&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$e&j'|!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'|!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$e&j'ypOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'ypOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$e&j'yp'|!b'o(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'z#S$e&j'p(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$e&j'yp'|!b'p(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$e&j!m$Ip'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#r$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#r$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'x$(n$e&j'|!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$e&j'|!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$e&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$`#t$e&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$`#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$`#t$e&j'|!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'|!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$`#t'|!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hh$e&j'yp'|!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__US$e&j'yp'|!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]US$e&j'|!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXUS$e&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSUSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWUS'|!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]US$e&j'ypOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWUS'ypOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYUS'yp'|!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S#%|C}i$e&j(c!L^'yp'|!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr#%|EoP;=`<%lCr(CSFRk$e&j'yp'|!b(W!LY'v&;d$X#tOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$e&j'yp'|!b$X#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv(CSJPP;=`<%lEr%#SJ_`$e&j'yp'|!b#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SKl_$e&j#|$Id'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfLva(l%<v$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SNW`$e&j#v$Id'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b! c_'{$)`$e&j'ypOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b*Q!!i_$e&j'ypOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b)`!#mX$e&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h#t!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y#t!$oP;=`<%l!$Y)`!$uP;=`<%l!#h*Q!%R]$`#t$e&j'ypOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$f!&PZ'ypOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z$f!&yU$`#t'ypOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$f!'`P;=`<%l!%z*Q!'fP;=`<%l!!b(*Q!'t_!i(!b$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l!)O_!hM|$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!*[b$e&j'yp'|!b'w#)d#k$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!+o`$e&j'yp'|!b#h$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!,|`$e&j'yp'|!bl&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!.Z_!W&;l$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!/ec$e&j'yp'|!bz'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!0ya$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!2Z_!VMt$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!3eg$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!5Vg$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!6wc$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!8_c$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!9uf$e&j'yp'|!b#i$IdOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpxz!;Zz{#,f{!P!;Z!P!Q#-{!Q!^!;Z!^!_#'Z!_!`#5k!`!a#7Q!a!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(r!;fb$e&j'yp'|!b!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(Q!<w`$e&j'|!b!SSOY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eb!Q!^!<n!^!_!GY!_!}!<n!}#O!Ja#O#P!Dj#P#o!<n#o#p!GY#p;'S!<n;'S;=`!Kj<%lO!<n&n!>Q^$e&j!SSOY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@Y!_!}!=y!}#O!Bw#O#P!Dj#P#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!?Ta$e&j!SSO!^&c!_#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&cS!@_X!SSOY!@YZ!P!@Y!P!Q!@z!Q!}!@Y!}#O!Ac#O#P!Bb#P;'S!@Y;'S;=`!Bq<%lO!@YS!APU!SS#Z#[!@z#]#^!@z#a#b!@z#g#h!@z#i#j!@z#m#n!@zS!AfVOY!AcZ#O!Ac#O#P!A{#P#Q!@Y#Q;'S!Ac;'S;=`!B[<%lO!AcS!BOSOY!AcZ;'S!Ac;'S;=`!B[<%lO!AcS!B_P;=`<%l!AcS!BeSOY!@YZ;'S!@Y;'S;=`!Bq<%lO!@YS!BtP;=`<%l!@Y&n!B|[$e&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#O!Bw#O#P!Cr#P#Q!=y#Q#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!CwX$e&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!DgP;=`<%l!Bw&n!DoX$e&jOY!=yYZ&cZ!^!=y!^!_!@Y!_#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!E_P;=`<%l!=y(Q!Eki$e&j'|!b!SSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!Eb#[#]&}#]#^!Eb#^#a&}#a#b!Eb#b#g&}#g#h!Eb#h#i&}#i#j!Eb#j#m&}#m#n!Eb#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!GaZ'|!b!SSOY!GYZw!GYwx!@Yx!P!GY!P!Q!HS!Q!}!GY!}#O!Ic#O#P!Bb#P;'S!GY;'S;=`!JZ<%lO!GY!f!HZb'|!b!SSOY'}Zw'}x#O'}#P#Z'}#Z#[!HS#[#]'}#]#^!HS#^#a'}#a#b!HS#b#g'}#g#h!HS#h#i'}#i#j!HS#j#m'}#m#n!HS#n;'S'};'S;=`(f<%lO'}!f!IhX'|!bOY!IcZw!Icwx!Acx#O!Ic#O#P!A{#P#Q!GY#Q;'S!Ic;'S;=`!JT<%lO!Ic!f!JWP;=`<%l!Ic!f!J^P;=`<%l!GY(Q!Jh^$e&j'|!bOY!JaYZ&cZw!Jawx!Bwx!^!Ja!^!_!Ic!_#O!Ja#O#P!Cr#P#Q!<n#Q#o!Ja#o#p!Ic#p;'S!Ja;'S;=`!Kd<%lO!Ja(Q!KgP;=`<%l!Ja(Q!KmP;=`<%l!<n'`!Ky`$e&j'yp!SSOY!KpYZ&cZr!Kprs!=ys!P!Kp!P!Q!L{!Q!^!Kp!^!_!Ns!_!}!Kp!}#O##z#O#P!Dj#P#o!Kp#o#p!Ns#p;'S!Kp;'S;=`#%T<%lO!Kp'`!MUi$e&j'yp!SSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!L{#[#](r#]#^!L{#^#a(r#a#b!L{#b#g(r#g#h!L{#h#i(r#i#j!L{#j#m(r#m#n!L{#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!NzZ'yp!SSOY!NsZr!Nsrs!@Ys!P!Ns!P!Q# m!Q!}!Ns!}#O#!|#O#P!Bb#P;'S!Ns;'S;=`##t<%lO!Nst# tb'yp!SSOY)rZr)rs#O)r#P#Z)r#Z#[# m#[#])r#]#^# m#^#a)r#a#b# m#b#g)r#g#h# m#h#i)r#i#j# m#j#m)r#m#n# m#n;'S)r;'S;=`*Z<%lO)rt##RX'ypOY#!|Zr#!|rs!Acs#O#!|#O#P!A{#P#Q!Ns#Q;'S#!|;'S;=`##n<%lO#!|t##qP;=`<%l#!|t##wP;=`<%l!Ns'`#$R^$e&j'ypOY##zYZ&cZr##zrs!Bws!^##z!^!_#!|!_#O##z#O#P!Cr#P#Q!Kp#Q#o##z#o#p#!|#p;'S##z;'S;=`#$}<%lO##z'`#%QP;=`<%l##z'`#%WP;=`<%l!Kp(r#%fk$e&j'yp'|!b!SSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[#%Z#[#]%Z#]#^#%Z#^#a%Z#a#b#%Z#b#g%Z#g#h#%Z#h#i%Z#i#j#%Z#j#m%Z#m#n#%Z#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W#'d]'yp'|!b!SSOY#'ZZr#'Zrs!GYsw#'Zwx!Nsx!P#'Z!P!Q#(]!Q!}#'Z!}#O#)w#O#P!Bb#P;'S#'Z;'S;=`#*w<%lO#'Z#W#(fe'yp'|!b!SSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[#(]#[#]*g#]#^#(]#^#a*g#a#b#(]#b#g*g#g#h#(]#h#i*g#i#j#(]#j#m*g#m#n#(]#n;'S*g;'S;=`+Z<%lO*g#W#*OZ'yp'|!bOY#)wZr#)wrs!Icsw#)wwx#!|x#O#)w#O#P!A{#P#Q#'Z#Q;'S#)w;'S;=`#*q<%lO#)w#W#*tP;=`<%l#)w#W#*zP;=`<%l#'Z(r#+W`$e&j'yp'|!bOY#*}YZ&cZr#*}rs!Jasw#*}wx##zx!^#*}!^!_#)w!_#O#*}#O#P!Cr#P#Q!;Z#Q#o#*}#o#p#)w#p;'S#*};'S;=`#,Y<%lO#*}(r#,]P;=`<%l#*}(r#,cP;=`<%l!;Z(CS#,sb$e&j'yp'|!b'q(;d!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(CS#.W_$e&j'yp'|!bR(;dOY#-{YZ&cZr#-{rs#/Vsw#-{wx#2gx!^#-{!^!_#4f!_#O#-{#O#P#0X#P#o#-{#o#p#4f#p;'S#-{;'S;=`#5e<%lO#-{(Bb#/`]$e&j'|!bR(;dOY#/VYZ&cZw#/Vwx#0Xx!^#/V!^!_#1j!_#O#/V#O#P#0X#P#o#/V#o#p#1j#p;'S#/V;'S;=`#2a<%lO#/V(AO#0`X$e&jR(;dOY#0XYZ&cZ!^#0X!^!_#0{!_#o#0X#o#p#0{#p;'S#0X;'S;=`#1d<%lO#0X(;d#1QSR(;dOY#0{Z;'S#0{;'S;=`#1^<%lO#0{(;d#1aP;=`<%l#0{(AO#1gP;=`<%l#0X(<v#1qW'|!bR(;dOY#1jZw#1jwx#0{x#O#1j#O#P#0{#P;'S#1j;'S;=`#2Z<%lO#1j(<v#2^P;=`<%l#1j(Bb#2dP;=`<%l#/V(Ap#2p]$e&j'ypR(;dOY#2gYZ&cZr#2grs#0Xs!^#2g!^!_#3i!_#O#2g#O#P#0X#P#o#2g#o#p#3i#p;'S#2g;'S;=`#4`<%lO#2g(<U#3pW'ypR(;dOY#3iZr#3irs#0{s#O#3i#O#P#0{#P;'S#3i;'S;=`#4Y<%lO#3i(<U#4]P;=`<%l#3i(Ap#4cP;=`<%l#2g(=h#4oY'yp'|!bR(;dOY#4fZr#4frs#1jsw#4fwx#3ix#O#4f#O#P#0{#P;'S#4f;'S;=`#5_<%lO#4f(=h#5bP;=`<%l#4f(CS#5hP;=`<%l#-{%#W#5xb$e&j#|$Id'yp'|!b!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z+h#7_b$U#t$e&j'yp'|!b!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z$/l#8rp$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#U%Z#U#V#>Q#V#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#d#AY#d#l%Z#l#m#D[#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;Rk$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#=R_$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>Zd$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#?tf$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Acc$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Bye$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Deg$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#FXi$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#HT_!b$b$e&j#z%<f'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#I___l$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Jm^(P!*v!f'.r'yp'|!b$V)d(pSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Ki!Q!^*g!^!_#L_!_!`#NP!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#KrX$g&j'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#LhZ#l$Id'yp'|!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#MZ!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#MdX#|$Id'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#NYX#m$Id'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh$ Qa#Y%?x$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$!V!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W$!b_#e$Ih$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh$#paeBf#m$Id$b#|$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$$u!`!a$&P!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$%Q_#m$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$&[a#l$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$'a!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$'l`#l$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$(yc(d$Ip$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$*U!P!^%Z!^!_*g!_!a%Z!a!b$+`!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$*a_{'#p$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$+k`$e&j#w$Id'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$,x_!y!Ln$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$.S_}(8n$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/WZ$e&jO!^$/y!^!_$0a!_#i$/y#i#j$0f#j#l$/y#l#m$2X#m#o$/y#o#p$0a#p;'S$/y;'S;=`$4d<%lO$/y(n$0QT]#S$e&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0fO]#S(n$0k[$e&jO!Q&c!Q![$1a![!^&c!_!c&c!c!i$1a!i#T&c#T#Z$1a#Z#o&c#o#p$3w#p;'S&c;'S;=`&w<%lO&c(n$1fZ$e&jO!Q&c!Q![$2X![!^&c!_!c&c!c!i$2X!i#T&c#T#Z$2X#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2^Z$e&jO!Q&c!Q![$3P![!^&c!_!c&c!c!i$3P!i#T&c#T#Z$3P#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3UZ$e&jO!Q&c!Q![$/y![!^&c!_!c&c!c!i$/y!i#T&c#T#Z$/y#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$3zR!Q![$4T!c!i$4T#T#Z$4T#S$4WS!Q![$4T!c!i$4T#T#Z$4T#q#r$0a(n$4gP;=`<%l$/y!2r$4u_!T!+S$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$6P`#t$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$7^_$e&j'yp'|!b(T&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$8lk$e&j'yp'|!b(W!LY'v&;d$Z#tOY%ZYZ&cZr%Zrs&}st%Ztu$8]uw%Zwx(rx}%Z}!O$:a!O!Q%Z!Q![$8]![!^%Z!^!_*g!_!c%Z!c!}$8]!}#O%Z#O#P&c#P#R%Z#R#S$8]#S#T%Z#T#o$8]#o#p*g#p$g%Z$g;'S$8];'S;=`$<g<%lO$8]+d$:lk$e&j'yp'|!b$Z#tOY%ZYZ&cZr%Zrs&}st%Ztu$:auw%Zwx(rx}%Z}!O$:a!O!Q%Z!Q![$:a![!^%Z!^!_*g!_!c%Z!c!}$:a!}#O%Z#O#P&c#P#R%Z#R#S$:a#S#T%Z#T#o$:a#o#p*g#p$g%Z$g;'S$:a;'S;=`$<a<%lO$:a+d$<dP;=`<%l$:a(CS$<jP;=`<%l$8]!5p$<vX!Y!3l'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$=na(k%<v$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+`#q;'S%Z;'S;=`+a<%lO%Z%#`$?Q_!X$I`p`$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$@[_!nS$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$Al|$e&j'yp'|!b'o(;d(W!LY'v&;d$X#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$AZ#BZ$ISEr$IS$I_$AZ$I_$JTEr$JT$JU$AZ$JU$KVEr$KV$KW$AZ$KW&FUEr&FU&FV$AZ&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AZ?HUOEr(CS$Dwk$e&j'yp'|!b'p(;d(W!LY'v&;d$X#tOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[FC,HC,2,3,4,5,6,7,8,9,10,11,12,13,GC,new Ou("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOr~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!P~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(V~~",141,328),new Ou("j~RQYZXz{^~^O's~~aP!P!Qd~iO't~~",25,310)],topRules:{Script:[0,5],SingleExpression:[1,268],SingleClassItem:[2,269]},dialects:{jsx:12842,ts:12844},dynamicPrecedences:{67:1,77:1,79:1,164:1,192:1},specialized:[{term:314,get:n=>KC[n]||-1},{term:330,get:n=>JC[n]||-1},{term:68,get:n=>e$[n]||-1}],tokenPrec:12868}),sv=[Jt("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Jt("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Jt("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Jt("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Jt("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Jt(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Jt("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Jt(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Jt(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Jt('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Jt('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],i$=sv.concat([Jt("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Jt("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Jt("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Ng=new kx,ov=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function lo(n){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,n),!0}}const r$=["FunctionDeclaration"],n$={FunctionDeclaration:lo("function"),ClassDeclaration:lo("class"),ClassExpression:()=>!0,EnumDeclaration:lo("constant"),TypeAliasDeclaration:lo("type"),NamespaceDeclaration:lo("namespace"),VariableDefinition(n,e){n.matchContext(r$)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function lv(n,e){let t=Ng.get(e);if(t)return t;let i=[],s=!0;function l(a,u){let d=n.sliceString(a.from,a.to);i.push({label:d,type:u})}return e.cursor(gt.IncludeAnonymous).iterate(a=>{if(s)s=!1;else if(a.name){let u=n$[a.name];if(u&&u(a,l)||ov.has(a.name))return!1}else if(a.to-a.from>8192){for(let u of lv(n,a.node))i.push(u);return!1}}),Ng.set(e,i),i}const Bg=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,av=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function s$(n){let e=mt(n.state).resolveInner(n.pos,-1);if(av.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&Bg.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let i=[];for(let s=e;s;s=s.parent)ov.has(s.name)&&(i=i.concat(lv(n.state.doc,s)));return{options:i,from:t?e.from:n.pos,validFor:Bg}}const vn=xa.define({name:"javascript",parser:t$.configure({props:[Ym.add({IfStatement:uf({except:/^\s*({|else\b)/}),TryStatement:uf({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:_x,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:i?1:2)*n.unit},Block:zx({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":uf({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),Dm.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":Fx,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),hv={test:n=>/^JSX/.test(n.name),facet:Am({commentTokens:{block:{open:"{/*",close:"*/}"}}})},o$=vn.configure({dialect:"ts"},"typescript"),l$=vn.configure({dialect:"jsx",props:[Yu.add(n=>n.isTop?[hv]:void 0)]}),a$=vn.configure({dialect:"jsx ts",props:[Yu.add(n=>n.isTop?[hv]:void 0)]},"typescript");let fv=n=>({label:n,type:"keyword"});const uv="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(fv),h$=uv.concat(["declare","implements","private","protected","public"].map(fv));function f$(n={}){let e=n.jsx?n.typescript?a$:l$:n.typescript?o$:vn,t=n.typescript?i$.concat(h$):sv.concat(uv);return new Dx(e,[vn.data.of({autocomplete:uQ(av,X0(t))}),vn.data.of({autocomplete:s$}),n.jsx?d$:[]])}function u$(n){for(;;){if(n.name=="JSXOpenTag"||n.name=="JSXSelfClosingTag"||n.name=="JSXFragmentTag")return n;if(n.name=="JSXEscape"||!n.parent)return null;n=n.parent}}function Ug(n,e,t=n.length){for(let i=e==null?void 0:e.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return n.sliceString(i.from,Math.min(i.to,t));return""}const c$=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),d$=te.inputHandler.of((n,e,t,i,s)=>{if((c$?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||i!=">"&&i!="/"||!vn.isActiveAt(n.state,e,-1))return!1;let l=s(),{state:a}=l,u=a.changeByRange(d=>{var g;let{head:O}=d,v=mt(a).resolveInner(O-1,-1),x;if(v.name=="JSXStartTag"&&(v=v.parent),!(a.doc.sliceString(O-1,O)!=i||v.name=="JSXAttributeValue"&&v.to>O)){if(i==">"&&v.name=="JSXFragmentTag")return{range:d,changes:{from:O,insert:"</>"}};if(i=="/"&&v.name=="JSXStartCloseTag"){let k=v.parent,C=k.parent;if(C&&k.from==O-2&&((x=Ug(a.doc,C.firstChild,O))||((g=C.firstChild)===null||g===void 0?void 0:g.name)=="JSXFragmentTag")){let R=`${x}>`;return{range:B.cursor(O+R.length,-1),changes:{from:O,insert:R}}}}else if(i==">"){let k=u$(v);if(k&&!/^\/?>|^<\//.test(a.doc.sliceString(O,O+2))&&(x=Ug(a.doc,k,O)))return{range:d,changes:{from:O,insert:`</${x}>`}}}}return{range:d}});return u.changes.empty?!1:(n.dispatch([l,a.update(u,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),p$="#e5c07b",zg="#e06c75",g$="#56b6c2",O$="#ffffff",ua="#abb2bf",mu="#7d8799",m$="#61afef",v$="#98c379",_g="#d19a66",y$="#c678dd",b$="#21252b",jg="#2c313a",qg="#282c34",xf="#353a42",S$="#3E4451",Gg="#528bff",x$=te.theme({"&":{color:ua,backgroundColor:qg},".cm-content":{caretColor:Gg},".cm-cursor, .cm-dropCursor":{borderLeftColor:Gg},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:S$},".cm-panels":{backgroundColor:b$,color:ua},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:qg,color:mu,border:"none"},".cm-activeLineGutter":{backgroundColor:jg},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:xf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:xf,borderBottomColor:xf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:jg,color:ua}}},{dark:!0}),w$=No.define([{tag:Y.keyword,color:y$},{tag:[Y.name,Y.deleted,Y.character,Y.propertyName,Y.macroName],color:zg},{tag:[Y.function(Y.variableName),Y.labelName],color:m$},{tag:[Y.color,Y.constant(Y.name),Y.standard(Y.name)],color:_g},{tag:[Y.definition(Y.name),Y.separator],color:ua},{tag:[Y.typeName,Y.className,Y.number,Y.changed,Y.annotation,Y.modifier,Y.self,Y.namespace],color:p$},{tag:[Y.operator,Y.operatorKeyword,Y.url,Y.escape,Y.regexp,Y.link,Y.special(Y.string)],color:g$},{tag:[Y.meta,Y.comment],color:mu},{tag:Y.strong,fontWeight:"bold"},{tag:Y.emphasis,fontStyle:"italic"},{tag:Y.strikethrough,textDecoration:"line-through"},{tag:Y.link,color:mu,textDecoration:"underline"},{tag:Y.heading,fontWeight:"bold",color:zg},{tag:[Y.atom,Y.bool,Y.special(Y.variableName)],color:_g},{tag:[Y.processingInstruction,Y.string,Y.inserted],color:v$},{tag:Y.invalid,color:O$}]),k$=[x$,zm(w$)];var Q$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C$(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cv={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Q$,function(){var t=navigator.userAgent,i=navigator.platform,s=/gecko\/\d/i.test(t),l=/MSIE \d/.test(t),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),u=/Edge\/(\d+)/.exec(t),d=l||a||u,g=d&&(l?document.documentMode||6:+(u||a)[1]),O=!u&&/WebKit\//.test(t),v=O&&/Qt\/\d+\.\d+/.test(t),x=!u&&/Chrome\/(\d+)/.exec(t),k=x&&+x[1],C=/Opera\//.test(t),R=/Apple Computer/.test(navigator.vendor),M=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),D=/PhantomJS/.test(t),E=R&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),F=/Android/.test(t),z=E||F||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),U=E||/Mac/.test(i),j=/\bCrOS\b/.test(t),oe=/win/i.test(i),de=C&&t.match(/Version\/(\d*\.\d*)/);de&&(de=Number(de[1])),de&&de>=15&&(C=!1,O=!0);var ge=U&&(v||C&&(de==null||de<12.11)),pe=s||d&&g>=9;function Qe(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}var Ae=function(r,o){var f=r.className,h=Qe(o).exec(f);if(h){var c=f.slice(h.index+h[0].length);r.className=f.slice(0,h.index)+(c?h[1]+c:"")}};function I(r){for(var o=r.childNodes.length;o>0;--o)r.removeChild(r.firstChild);return r}function J(r,o){return I(r).appendChild(o)}function T(r,o,f,h){var c=document.createElement(r);if(f&&(c.className=f),h&&(c.style.cssText=h),typeof o=="string")c.appendChild(document.createTextNode(o));else if(o)for(var p=0;p<o.length;++p)c.appendChild(o[p]);return c}function De(r,o,f,h){var c=T(r,o,f,h);return c.setAttribute("role","presentation"),c}var Ne;document.createRange?Ne=function(r,o,f,h){var c=document.createRange();return c.setEnd(h||r,f),c.setStart(r,o),c}:Ne=function(r,o,f){var h=document.body.createTextRange();try{h.moveToElementText(r.parentNode)}catch{return h}return h.collapse(!0),h.moveEnd("character",f),h.moveStart("character",o),h};function Ee(r,o){if(o.nodeType==3&&(o=o.parentNode),r.contains)return r.contains(o);do if(o.nodeType==11&&(o=o.host),o==r)return!0;while(o=o.parentNode)}function ye(r){var o;try{o=r.activeElement}catch{o=r.body||null}for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o}function Ce(r,o){var f=r.className;Qe(o).test(f)||(r.className+=(f?" ":"")+o)}function bt(r,o){for(var f=r.split(" "),h=0;h<f.length;h++)f[h]&&!Qe(f[h]).test(o)&&(o+=" "+f[h]);return o}var Gt=function(r){r.select()};E?Gt=function(r){r.selectionStart=0,r.selectionEnd=r.value.length}:d&&(Gt=function(r){try{r.select()}catch{}});function _e(r){return r.display.wrapper.ownerDocument}function di(r){return _e(r).defaultView}function Xt(r){var o=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,o)}}function fe(r,o,f){o||(o={});for(var h in r)r.hasOwnProperty(h)&&(f!==!1||!o.hasOwnProperty(h))&&(o[h]=r[h]);return o}function le(r,o,f,h,c){o==null&&(o=r.search(/[^\s\u00a0]/),o==-1&&(o=r.length));for(var p=h||0,m=c||0;;){var y=r.indexOf("	",p);if(y<0||y>=o)return m+(o-p);m+=y-p,m+=f-m%f,p=y+1}}var me=function(){this.id=null,this.f=null,this.time=0,this.handler=Xt(this.onTimeout,this)};me.prototype.onTimeout=function(r){r.id=0,r.time<=+new Date?r.f():setTimeout(r.handler,r.time-+new Date)},me.prototype.set=function(r,o){this.f=o;var f=+new Date+r;(!this.id||f<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,r),this.time=f)};function Se(r,o){for(var f=0;f<r.length;++f)if(r[f]==o)return f;return-1}var _o=50,Re={toString:function(){return"CodeMirror.Pass"}},je={scroll:!1},Vr={origin:"*mouse"},Sr={origin:"+move"};function Yi(r,o,f){for(var h=0,c=0;;){var p=r.indexOf("	",h);p==-1&&(p=r.length);var m=p-h;if(p==r.length||c+m>=o)return h+Math.min(m,o-c);if(c+=p-h,c+=f-c%f,h=p+1,c>=o)return h}}var pi=[""];function Ri(r){for(;pi.length<=r;)pi.push(xe(pi)+" ");return pi[r]}function xe(r){return r[r.length-1]}function Qn(r,o){for(var f=[],h=0;h<r.length;h++)f[h]=o(r[h],h);return f}function jo(r,o,f){for(var h=0,c=f(o);h<r.length&&f(r[h])<=c;)h++;r.splice(h,0,o)}function bs(){}function qo(r,o){var f;return Object.create?f=Object.create(r):(bs.prototype=r,f=new bs),o&&fe(o,f),f}var Fa=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ss(r){return/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||Fa.test(r))}function Cn(r,o){return o?o.source.indexOf("\\w")>-1&&Ss(r)?!0:o.test(r):Ss(r)}function Go(r){for(var o in r)if(r.hasOwnProperty(o)&&r[o])return!1;return!0}var $n=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function xs(r){return r.charCodeAt(0)>=768&&$n.test(r)}function Li(r,o,f){for(;(f<0?o>0:o<r.length)&&xs(r.charAt(o));)o+=f;return o}function Fe(r,o,f){for(var h=o>f?-1:1;;){if(o==f)return o;var c=(o+f)/2,p=h<0?Math.ceil(c):Math.floor(c);if(p==o)return r(p)?o:f;r(p)?f=p:o=p+h}}function Kr(r,o,f,h){if(!r)return h(o,f,"ltr",0);for(var c=!1,p=0;p<r.length;++p){var m=r[p];(m.from<f&&m.to>o||o==f&&m.to==o)&&(h(Math.max(m.from,o),Math.min(m.to,f),m.level==1?"rtl":"ltr",p),c=!0)}c||h(o,f,"ltr")}var Di=null;function gi(r,o,f){var h;Di=null;for(var c=0;c<r.length;++c){var p=r[c];if(p.from<o&&p.to>o)return c;p.to==o&&(p.from!=p.to&&f=="before"?h=c:Di=c),p.from==o&&(p.from!=p.to&&f!="before"?h=c:Di=c)}return h??Di}var Ha=function(){var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",o="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function f(S){return S<=247?r.charAt(S):1424<=S&&S<=1524?"R":1536<=S&&S<=1785?o.charAt(S-1536):1774<=S&&S<=2220?"r":8192<=S&&S<=8203?"w":S==8204?"b":"L"}var h=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,p=/[LRr]/,m=/[Lb1n]/,y=/[1n]/;function b(S,Q,$){this.level=S,this.from=Q,this.to=$}return function(S,Q){var $=Q=="ltr"?"L":"R";if(S.length==0||Q=="ltr"&&!h.test(S))return!1;for(var L=S.length,A=[],X=0;X<L;++X)A.push(f(S.charCodeAt(X)));for(var N=0,_=$;N<L;++N){var q=A[N];q=="m"?A[N]=_:_=q}for(var V=0,G=$;V<L;++V){var ee=A[V];ee=="1"&&G=="r"?A[V]="n":p.test(ee)&&(G=ee,ee=="r"&&(A[V]="R"))}for(var ae=1,se=A[0];ae<L-1;++ae){var ve=A[ae];ve=="+"&&se=="1"&&A[ae+1]=="1"?A[ae]="1":ve==","&&se==A[ae+1]&&(se=="1"||se=="n")&&(A[ae]=se),se=ve}for(var Le=0;Le<L;++Le){var ut=A[Le];if(ut==",")A[Le]="N";else if(ut=="%"){var qe=void 0;for(qe=Le+1;qe<L&&A[qe]=="%";++qe);for(var Vt=Le&&A[Le-1]=="!"||qe<L&&A[qe]=="1"?"1":"N",Bt=Le;Bt<qe;++Bt)A[Bt]=Vt;Le=qe-1}}for(var tt=0,Ut=$;tt<L;++tt){var vt=A[tt];Ut=="L"&&vt=="1"?A[tt]="L":p.test(vt)&&(Ut=vt)}for(var ot=0;ot<L;++ot)if(c.test(A[ot])){var it=void 0;for(it=ot+1;it<L&&c.test(A[it]);++it);for(var Ke=(ot?A[ot-1]:$)=="L",zt=(it<L?A[it]:$)=="L",Gn=Ke==zt?Ke?"L":"R":$,Rr=ot;Rr<it;++Rr)A[Rr]=Gn;ot=it-1}for(var kt=[],Ui,ct=0;ct<L;)if(m.test(A[ct])){var zh=ct;for(++ct;ct<L&&m.test(A[ct]);++ct);kt.push(new b(0,zh,ct))}else{var dr=ct,hn=kt.length,fn=Q=="rtl"?1:0;for(++ct;ct<L&&A[ct]!="L";++ct);for(var Mt=dr;Mt<ct;)if(y.test(A[Mt])){dr<Mt&&(kt.splice(hn,0,new b(1,dr,Mt)),hn+=fn);var Fn=Mt;for(++Mt;Mt<ct&&y.test(A[Mt]);++Mt);kt.splice(hn,0,new b(2,Fn,Mt)),hn+=fn,dr=Mt}else++Mt;dr<ct&&kt.splice(hn,0,new b(1,dr,ct))}return Q=="ltr"&&(kt[0].level==1&&(Ui=S.match(/^\s+/))&&(kt[0].from=Ui[0].length,kt.unshift(new b(0,0,Ui[0].length))),xe(kt).level==1&&(Ui=S.match(/\s+$/))&&(xe(kt).to-=Ui[0].length,kt.push(new b(0,L-Ui[0].length,L)))),Q=="rtl"?kt.reverse():kt}}();function Oi(r,o){var f=r.order;return f==null&&(f=r.order=Ha(r.text,o)),f}var Fo=[],H=function(r,o,f){if(r.addEventListener)r.addEventListener(o,f,!1);else if(r.attachEvent)r.attachEvent("on"+o,f);else{var h=r._handlers||(r._handlers={});h[o]=(h[o]||Fo).concat(f)}};function ws(r,o){return r._handlers&&r._handlers[o]||Fo}function St(r,o,f){if(r.removeEventListener)r.removeEventListener(o,f,!1);else if(r.detachEvent)r.detachEvent("on"+o,f);else{var h=r._handlers,c=h&&h[o];if(c){var p=Se(c,f);p>-1&&(h[o]=c.slice(0,p).concat(c.slice(p+1)))}}}function We(r,o){var f=ws(r,o);if(f.length)for(var h=Array.prototype.slice.call(arguments,2),c=0;c<f.length;++c)f[c].apply(null,h)}function He(r,o,f){return typeof o=="string"&&(o={type:o,preventDefault:function(){this.defaultPrevented=!0}}),We(r,f||o.type,r,o),ks(o)||o.codemirrorIgnore}function Ho(r){var o=r._handlers&&r._handlers.cursorActivity;if(o)for(var f=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]),h=0;h<o.length;++h)Se(f,o[h])==-1&&f.push(o[h])}function Tt(r,o){return ws(r,o).length>0}function Zt(r){r.prototype.on=function(o,f){H(this,o,f)},r.prototype.off=function(o,f){St(this,o,f)}}function xt(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function Jr(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function ks(r){return r.defaultPrevented!=null?r.defaultPrevented:r.returnValue==!1}function nr(r){xt(r),Jr(r)}function Et(r){return r.target||r.srcElement}function Qs(r){var o=r.which;return o==null&&(r.button&1?o=1:r.button&2?o=3:r.button&4&&(o=2)),U&&r.ctrlKey&&o==1&&(o=3),o}var Va=function(){if(d&&g<9)return!1;var r=T("div");return"draggable"in r||"dragDrop"in r}(),mi;function Ka(r){if(mi==null){var o=T("span","​");J(r,T("span",[o,document.createTextNode("x")])),r.firstChild.offsetHeight!=0&&(mi=o.offsetWidth<=1&&o.offsetHeight>2&&!(d&&g<8))}var f=mi?T("span","​"):T("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return f.setAttribute("cm-text",""),f}var Pn;function Vo(r){if(Pn!=null)return Pn;var o=J(r,document.createTextNode("AخA")),f=Ne(o,0,1).getBoundingClientRect(),h=Ne(o,1,2).getBoundingClientRect();return I(r),!f||f.left==f.right?!1:Pn=h.right-f.right<3}var Cs=`

b`.split(/\n/).length!=3?function(r){for(var o=0,f=[],h=r.length;o<=h;){var c=r.indexOf(`
`,o);c==-1&&(c=r.length);var p=r.slice(o,r.charAt(c-1)=="\r"?c-1:c),m=p.indexOf("\r");m!=-1?(f.push(p.slice(0,m)),o+=m+1):(f.push(p),o=c+1)}return f}:function(r){return r.split(/\r\n?|\n/)},xr=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch{return!1}}:function(r){var o;try{o=r.ownerDocument.selection.createRange()}catch{}return!o||o.parentElement()!=r?!1:o.compareEndPoints("StartToEnd",o)!=0},Wi=function(){var r=T("div");return"oncopy"in r?!0:(r.setAttribute("oncopy","return;"),typeof r.oncopy=="function")}(),Xi=null;function Ko(r){if(Xi!=null)return Xi;var o=J(r,T("span","x")),f=o.getBoundingClientRect(),h=Ne(o,0,1).getBoundingClientRect();return Xi=Math.abs(f.left-h.left)>1}var ki={},wr={};function Jo(r,o){arguments.length>2&&(o.dependencies=Array.prototype.slice.call(arguments,2)),ki[r]=o}function Tn(r,o){wr[r]=o}function Ft(r){if(typeof r=="string"&&wr.hasOwnProperty(r))r=wr[r];else if(r&&typeof r.name=="string"&&wr.hasOwnProperty(r.name)){var o=wr[r.name];typeof o=="string"&&(o={name:o}),r=qo(o,r),r.name=o.name}else{if(typeof r=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r))return Ft("application/xml");if(typeof r=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(r))return Ft("application/json")}return typeof r=="string"?{name:r}:r||{name:"null"}}function sr(r,o){o=Ft(o);var f=ki[o.name];if(!f)return sr(r,"text/plain");var h=f(r,o);if(kr.hasOwnProperty(o.name)){var c=kr[o.name];for(var p in c)c.hasOwnProperty(p)&&(h.hasOwnProperty(p)&&(h["_"+p]=h[p]),h[p]=c[p])}if(h.name=o.name,o.helperType&&(h.helperType=o.helperType),o.modeProps)for(var m in o.modeProps)h[m]=o.modeProps[m];return h}var kr={};function el(r,o){var f=kr.hasOwnProperty(r)?kr[r]:kr[r]={};fe(o,f)}function or(r,o){if(o===!0)return o;if(r.copyState)return r.copyState(o);var f={};for(var h in o){var c=o[h];c instanceof Array&&(c=c.concat([])),f[h]=c}return f}function Qr(r,o){for(var f;r.innerMode&&(f=r.innerMode(o),!(!f||f.mode==r));)o=f.state,r=f.mode;return f||{mode:r,state:o}}function $s(r,o,f){return r.startState?r.startState(o,f):!0}var Ve=function(r,o,f){this.pos=this.start=0,this.string=r,this.tabSize=o||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=f};Ve.prototype.eol=function(){return this.pos>=this.string.length},Ve.prototype.sol=function(){return this.pos==this.lineStart},Ve.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ve.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ve.prototype.eat=function(r){var o=this.string.charAt(this.pos),f;if(typeof r=="string"?f=o==r:f=o&&(r.test?r.test(o):r(o)),f)return++this.pos,o},Ve.prototype.eatWhile=function(r){for(var o=this.pos;this.eat(r););return this.pos>o},Ve.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>r},Ve.prototype.skipToEnd=function(){this.pos=this.string.length},Ve.prototype.skipTo=function(r){var o=this.string.indexOf(r,this.pos);if(o>-1)return this.pos=o,!0},Ve.prototype.backUp=function(r){this.pos-=r},Ve.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=le(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?le(this.string,this.lineStart,this.tabSize):0)},Ve.prototype.indentation=function(){return le(this.string,null,this.tabSize)-(this.lineStart?le(this.string,this.lineStart,this.tabSize):0)},Ve.prototype.match=function(r,o,f){if(typeof r=="string"){var h=function(m){return f?m.toLowerCase():m},c=this.string.substr(this.pos,r.length);if(h(c)==h(r))return o!==!1&&(this.pos+=r.length),!0}else{var p=this.string.slice(this.pos).match(r);return p&&p.index>0?null:(p&&o!==!1&&(this.pos+=p[0].length),p)}},Ve.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ve.prototype.hideFirstChars=function(r,o){this.lineStart+=r;try{return o()}finally{this.lineStart-=r}},Ve.prototype.lookAhead=function(r){var o=this.lineOracle;return o&&o.lookAhead(r)},Ve.prototype.baseToken=function(){var r=this.lineOracle;return r&&r.baseToken(this.pos)};function ie(r,o){if(o-=r.first,o<0||o>=r.size)throw new Error("There is no line "+(o+r.first)+" in the document.");for(var f=r;!f.lines;)for(var h=0;;++h){var c=f.children[h],p=c.chunkSize();if(o<p){f=c;break}o-=p}return f.lines[o]}function lr(r,o,f){var h=[],c=o.line;return r.iter(o.line,f.line+1,function(p){var m=p.text;c==f.line&&(m=m.slice(0,f.ch)),c==o.line&&(m=m.slice(o.ch)),h.push(m),++c}),h}function Zn(r,o,f){var h=[];return r.iter(o,f,function(c){h.push(c.text)}),h}function vi(r,o){var f=o-r.height;if(f)for(var h=r;h;h=h.parent)h.height+=f}function Pe(r){if(r.parent==null)return null;for(var o=r.parent,f=Se(o.lines,r),h=o.parent;h;o=h,h=h.parent)for(var c=0;h.children[c]!=o;++c)f+=h.children[c].chunkSize();return f+o.first}function Ei(r,o){var f=r.first;e:do{for(var h=0;h<r.children.length;++h){var c=r.children[h],p=c.height;if(o<p){r=c;continue e}o-=p,f+=c.chunkSize()}return f}while(!r.lines);for(var m=0;m<r.lines.length;++m){var y=r.lines[m],b=y.height;if(o<b)break;o-=b}return f+m}function w(r,o){return o>=r.first&&o<r.first+r.size}function P(r,o){return String(r.lineNumberFormatter(o+r.firstLineNumber))}function Z(r,o,f){if(f===void 0&&(f=null),!(this instanceof Z))return new Z(r,o,f);this.line=r,this.ch=o,this.sticky=f}function W(r,o){return r.line-o.line||r.ch-o.ch}function ue(r,o){return r.sticky==o.sticky&&W(r,o)==0}function be(r){return Z(r.line,r.ch)}function $e(r,o){return W(r,o)<0?o:r}function st(r,o){return W(r,o)<0?r:o}function ni(r,o){return Math.max(r.first,Math.min(o,r.first+r.size-1))}function ce(r,o){if(o.line<r.first)return Z(r.first,0);var f=r.first+r.size-1;return o.line>f?Z(f,ie(r,f).text.length):gv(o,ie(r,o.line).text.length)}function gv(r,o){var f=r.ch;return f==null||f>o?Z(r.line,o):f<0?Z(r.line,0):r}function Vu(r,o){for(var f=[],h=0;h<o.length;h++)f[h]=ce(r,o[h]);return f}var tl=function(r,o){this.state=r,this.lookAhead=o},Ii=function(r,o,f,h){this.state=o,this.doc=r,this.line=f,this.maxLookAhead=h||0,this.baseTokens=null,this.baseTokenPos=1};Ii.prototype.lookAhead=function(r){var o=this.doc.getLine(this.line+r);return o!=null&&r>this.maxLookAhead&&(this.maxLookAhead=r),o},Ii.prototype.baseToken=function(r){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=r;)this.baseTokenPos+=2;var o=this.baseTokens[this.baseTokenPos+1];return{type:o&&o.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-r}},Ii.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ii.fromSaved=function(r,o,f){return o instanceof tl?new Ii(r,or(r.mode,o.state),f,o.lookAhead):new Ii(r,or(r.mode,o),f)},Ii.prototype.save=function(r){var o=r!==!1?or(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new tl(o,this.maxLookAhead):o};function Ku(r,o,f,h){var c=[r.state.modeGen],p={};nc(r,o.text,r.doc.mode,f,function(S,Q){return c.push(S,Q)},p,h);for(var m=f.state,y=function(S){f.baseTokens=c;var Q=r.state.overlays[S],$=1,L=0;f.state=!0,nc(r,o.text,Q.mode,f,function(A,X){for(var N=$;L<A;){var _=c[$];_>A&&c.splice($,1,A,c[$+1],_),$+=2,L=Math.min(A,_)}if(X)if(Q.opaque)c.splice(N,$-N,A,"overlay "+X),$=N+2;else for(;N<$;N+=2){var q=c[N+1];c[N+1]=(q?q+" ":"")+"overlay "+X}},p),f.state=m,f.baseTokens=null,f.baseTokenPos=1},b=0;b<r.state.overlays.length;++b)y(b);return{styles:c,classes:p.bgClass||p.textClass?p:null}}function Ju(r,o,f){if(!o.styles||o.styles[0]!=r.state.modeGen){var h=Ps(r,Pe(o)),c=o.text.length>r.options.maxHighlightLength&&or(r.doc.mode,h.state),p=Ku(r,o,h);c&&(h.state=c),o.stateAfter=h.save(!c),o.styles=p.styles,p.classes?o.styleClasses=p.classes:o.styleClasses&&(o.styleClasses=null),f===r.doc.highlightFrontier&&(r.doc.modeFrontier=Math.max(r.doc.modeFrontier,++r.doc.highlightFrontier))}return o.styles}function Ps(r,o,f){var h=r.doc,c=r.display;if(!h.mode.startState)return new Ii(h,!0,o);var p=Ov(r,o,f),m=p>h.first&&ie(h,p-1).stateAfter,y=m?Ii.fromSaved(h,m,p):new Ii(h,$s(h.mode),p);return h.iter(p,o,function(b){Ja(r,b.text,y);var S=y.line;b.stateAfter=S==o-1||S%5==0||S>=c.viewFrom&&S<c.viewTo?y.save():null,y.nextLine()}),f&&(h.modeFrontier=y.line),y}function Ja(r,o,f,h){var c=r.doc.mode,p=new Ve(o,r.options.tabSize,f);for(p.start=p.pos=h||0,o==""&&ec(c,f.state);!p.eol();)eh(c,p,f.state),p.start=p.pos}function ec(r,o){if(r.blankLine)return r.blankLine(o);if(r.innerMode){var f=Qr(r,o);if(f.mode.blankLine)return f.mode.blankLine(f.state)}}function eh(r,o,f,h){for(var c=0;c<10;c++){h&&(h[0]=Qr(r,f).mode);var p=r.token(o,f);if(o.pos>o.start)return p}throw new Error("Mode "+r.name+" failed to advance stream.")}var tc=function(r,o,f){this.start=r.start,this.end=r.pos,this.string=r.current(),this.type=o||null,this.state=f};function ic(r,o,f,h){var c=r.doc,p=c.mode,m;o=ce(c,o);var y=ie(c,o.line),b=Ps(r,o.line,f),S=new Ve(y.text,r.options.tabSize,b),Q;for(h&&(Q=[]);(h||S.pos<o.ch)&&!S.eol();)S.start=S.pos,m=eh(p,S,b.state),h&&Q.push(new tc(S,m,or(c.mode,b.state)));return h?Q:new tc(S,m,b.state)}function rc(r,o){if(r)for(;;){var f=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!f)break;r=r.slice(0,f.index)+r.slice(f.index+f[0].length);var h=f[1]?"bgClass":"textClass";o[h]==null?o[h]=f[2]:new RegExp("(?:^|\\s)"+f[2]+"(?:$|\\s)").test(o[h])||(o[h]+=" "+f[2])}return r}function nc(r,o,f,h,c,p,m){var y=f.flattenSpans;y==null&&(y=r.options.flattenSpans);var b=0,S=null,Q=new Ve(o,r.options.tabSize,h),$,L=r.options.addModeClass&&[null];for(o==""&&rc(ec(f,h.state),p);!Q.eol();){if(Q.pos>r.options.maxHighlightLength?(y=!1,m&&Ja(r,o,h,Q.pos),Q.pos=o.length,$=null):$=rc(eh(f,Q,h.state,L),p),L){var A=L[0].name;A&&($="m-"+($?A+" "+$:A))}if(!y||S!=$){for(;b<Q.start;)b=Math.min(Q.start,b+5e3),c(b,S);S=$}Q.start=Q.pos}for(;b<Q.pos;){var X=Math.min(Q.pos,b+5e3);c(X,S),b=X}}function Ov(r,o,f){for(var h,c,p=r.doc,m=f?-1:o-(r.doc.mode.innerMode?1e3:100),y=o;y>m;--y){if(y<=p.first)return p.first;var b=ie(p,y-1),S=b.stateAfter;if(S&&(!f||y+(S instanceof tl?S.lookAhead:0)<=p.modeFrontier))return y;var Q=le(b.text,null,r.options.tabSize);(c==null||h>Q)&&(c=y-1,h=Q)}return c}function mv(r,o){if(r.modeFrontier=Math.min(r.modeFrontier,o),!(r.highlightFrontier<o-10)){for(var f=r.first,h=o-1;h>f;h--){var c=ie(r,h).stateAfter;if(c&&(!(c instanceof tl)||h+c.lookAhead<o)){f=h+1;break}}r.highlightFrontier=Math.min(r.highlightFrontier,f)}}var sc=!1,ar=!1;function vv(){sc=!0}function yv(){ar=!0}function il(r,o,f){this.marker=r,this.from=o,this.to=f}function Ts(r,o){if(r)for(var f=0;f<r.length;++f){var h=r[f];if(h.marker==o)return h}}function bv(r,o){for(var f,h=0;h<r.length;++h)r[h]!=o&&(f||(f=[])).push(r[h]);return f}function Sv(r,o,f){var h=f&&window.WeakSet&&(f.markedSpans||(f.markedSpans=new WeakSet));h&&r.markedSpans&&h.has(r.markedSpans)?r.markedSpans.push(o):(r.markedSpans=r.markedSpans?r.markedSpans.concat([o]):[o],h&&h.add(r.markedSpans)),o.marker.attachLine(r)}function xv(r,o,f){var h;if(r)for(var c=0;c<r.length;++c){var p=r[c],m=p.marker,y=p.from==null||(m.inclusiveLeft?p.from<=o:p.from<o);if(y||p.from==o&&m.type=="bookmark"&&(!f||!p.marker.insertLeft)){var b=p.to==null||(m.inclusiveRight?p.to>=o:p.to>o);(h||(h=[])).push(new il(m,p.from,b?null:p.to))}}return h}function wv(r,o,f){var h;if(r)for(var c=0;c<r.length;++c){var p=r[c],m=p.marker,y=p.to==null||(m.inclusiveRight?p.to>=o:p.to>o);if(y||p.from==o&&m.type=="bookmark"&&(!f||p.marker.insertLeft)){var b=p.from==null||(m.inclusiveLeft?p.from<=o:p.from<o);(h||(h=[])).push(new il(m,b?null:p.from-o,p.to==null?null:p.to-o))}}return h}function th(r,o){if(o.full)return null;var f=w(r,o.from.line)&&ie(r,o.from.line).markedSpans,h=w(r,o.to.line)&&ie(r,o.to.line).markedSpans;if(!f&&!h)return null;var c=o.from.ch,p=o.to.ch,m=W(o.from,o.to)==0,y=xv(f,c,m),b=wv(h,p,m),S=o.text.length==1,Q=xe(o.text).length+(S?c:0);if(y)for(var $=0;$<y.length;++$){var L=y[$];if(L.to==null){var A=Ts(b,L.marker);A?S&&(L.to=A.to==null?null:A.to+Q):L.to=c}}if(b)for(var X=0;X<b.length;++X){var N=b[X];if(N.to!=null&&(N.to+=Q),N.from==null){var _=Ts(y,N.marker);_||(N.from=Q,S&&(y||(y=[])).push(N))}else N.from+=Q,S&&(y||(y=[])).push(N)}y&&(y=oc(y)),b&&b!=y&&(b=oc(b));var q=[y];if(!S){var V=o.text.length-2,G;if(V>0&&y)for(var ee=0;ee<y.length;++ee)y[ee].to==null&&(G||(G=[])).push(new il(y[ee].marker,null,null));for(var ae=0;ae<V;++ae)q.push(G);q.push(b)}return q}function oc(r){for(var o=0;o<r.length;++o){var f=r[o];f.from!=null&&f.from==f.to&&f.marker.clearWhenEmpty!==!1&&r.splice(o--,1)}return r.length?r:null}function kv(r,o,f){var h=null;if(r.iter(o.line,f.line+1,function(A){if(A.markedSpans)for(var X=0;X<A.markedSpans.length;++X){var N=A.markedSpans[X].marker;N.readOnly&&(!h||Se(h,N)==-1)&&(h||(h=[])).push(N)}}),!h)return null;for(var c=[{from:o,to:f}],p=0;p<h.length;++p)for(var m=h[p],y=m.find(0),b=0;b<c.length;++b){var S=c[b];if(!(W(S.to,y.from)<0||W(S.from,y.to)>0)){var Q=[b,1],$=W(S.from,y.from),L=W(S.to,y.to);($<0||!m.inclusiveLeft&&!$)&&Q.push({from:S.from,to:y.from}),(L>0||!m.inclusiveRight&&!L)&&Q.push({from:y.to,to:S.to}),c.splice.apply(c,Q),b+=Q.length-3}}return c}function lc(r){var o=r.markedSpans;if(o){for(var f=0;f<o.length;++f)o[f].marker.detachLine(r);r.markedSpans=null}}function ac(r,o){if(o){for(var f=0;f<o.length;++f)o[f].marker.attachLine(r);r.markedSpans=o}}function rl(r){return r.inclusiveLeft?-1:0}function nl(r){return r.inclusiveRight?1:0}function ih(r,o){var f=r.lines.length-o.lines.length;if(f!=0)return f;var h=r.find(),c=o.find(),p=W(h.from,c.from)||rl(r)-rl(o);if(p)return-p;var m=W(h.to,c.to)||nl(r)-nl(o);return m||o.id-r.id}function hc(r,o){var f=ar&&r.markedSpans,h;if(f)for(var c=void 0,p=0;p<f.length;++p)c=f[p],c.marker.collapsed&&(o?c.from:c.to)==null&&(!h||ih(h,c.marker)<0)&&(h=c.marker);return h}function fc(r){return hc(r,!0)}function sl(r){return hc(r,!1)}function Qv(r,o){var f=ar&&r.markedSpans,h;if(f)for(var c=0;c<f.length;++c){var p=f[c];p.marker.collapsed&&(p.from==null||p.from<o)&&(p.to==null||p.to>o)&&(!h||ih(h,p.marker)<0)&&(h=p.marker)}return h}function uc(r,o,f,h,c){var p=ie(r,o),m=ar&&p.markedSpans;if(m)for(var y=0;y<m.length;++y){var b=m[y];if(b.marker.collapsed){var S=b.marker.find(0),Q=W(S.from,f)||rl(b.marker)-rl(c),$=W(S.to,h)||nl(b.marker)-nl(c);if(!(Q>=0&&$<=0||Q<=0&&$>=0)&&(Q<=0&&(b.marker.inclusiveRight&&c.inclusiveLeft?W(S.to,f)>=0:W(S.to,f)>0)||Q>=0&&(b.marker.inclusiveRight&&c.inclusiveLeft?W(S.from,h)<=0:W(S.from,h)<0)))return!0}}}function Qi(r){for(var o;o=fc(r);)r=o.find(-1,!0).line;return r}function Cv(r){for(var o;o=sl(r);)r=o.find(1,!0).line;return r}function $v(r){for(var o,f;o=sl(r);)r=o.find(1,!0).line,(f||(f=[])).push(r);return f}function rh(r,o){var f=ie(r,o),h=Qi(f);return f==h?o:Pe(h)}function cc(r,o){if(o>r.lastLine())return o;var f=ie(r,o),h;if(!Cr(r,f))return o;for(;h=sl(f);)f=h.find(1,!0).line;return Pe(f)+1}function Cr(r,o){var f=ar&&o.markedSpans;if(f){for(var h=void 0,c=0;c<f.length;++c)if(h=f[c],!!h.marker.collapsed){if(h.from==null)return!0;if(!h.marker.widgetNode&&h.from==0&&h.marker.inclusiveLeft&&nh(r,o,h))return!0}}}function nh(r,o,f){if(f.to==null){var h=f.marker.find(1,!0);return nh(r,h.line,Ts(h.line.markedSpans,f.marker))}if(f.marker.inclusiveRight&&f.to==o.text.length)return!0;for(var c=void 0,p=0;p<o.markedSpans.length;++p)if(c=o.markedSpans[p],c.marker.collapsed&&!c.marker.widgetNode&&c.from==f.to&&(c.to==null||c.to!=f.from)&&(c.marker.inclusiveLeft||f.marker.inclusiveRight)&&nh(r,o,c))return!0}function hr(r){r=Qi(r);for(var o=0,f=r.parent,h=0;h<f.lines.length;++h){var c=f.lines[h];if(c==r)break;o+=c.height}for(var p=f.parent;p;f=p,p=f.parent)for(var m=0;m<p.children.length;++m){var y=p.children[m];if(y==f)break;o+=y.height}return o}function ol(r){if(r.height==0)return 0;for(var o=r.text.length,f,h=r;f=fc(h);){var c=f.find(0,!0);h=c.from.line,o+=c.from.ch-c.to.ch}for(h=r;f=sl(h);){var p=f.find(0,!0);o-=h.text.length-p.from.ch,h=p.to.line,o+=h.text.length-p.to.ch}return o}function sh(r){var o=r.display,f=r.doc;o.maxLine=ie(f,f.first),o.maxLineLength=ol(o.maxLine),o.maxLineChanged=!0,f.iter(function(h){var c=ol(h);c>o.maxLineLength&&(o.maxLineLength=c,o.maxLine=h)})}var An=function(r,o,f){this.text=r,ac(this,o),this.height=f?f(this):1};An.prototype.lineNo=function(){return Pe(this)},Zt(An);function Pv(r,o,f,h){r.text=o,r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null),r.order!=null&&(r.order=null),lc(r),ac(r,f);var c=h?h(r):1;c!=r.height&&vi(r,c)}function Tv(r){r.parent=null,lc(r)}var Zv={},Av={};function dc(r,o){if(!r||/^\s*$/.test(r))return null;var f=o.addModeClass?Av:Zv;return f[r]||(f[r]=r.replace(/\S+/g,"cm-$&"))}function pc(r,o){var f=De("span",null,null,O?"padding-right: .1px":null),h={pre:De("pre",[f],"CodeMirror-line"),content:f,col:0,pos:0,cm:r,trailingSpace:!1,splitSpaces:r.getOption("lineWrapping")};o.measure={};for(var c=0;c<=(o.rest?o.rest.length:0);c++){var p=c?o.rest[c-1]:o.line,m=void 0;h.pos=0,h.addToken=Yv,Vo(r.display.measure)&&(m=Oi(p,r.doc.direction))&&(h.addToken=Lv(h.addToken,m)),h.map=[];var y=o!=r.display.externalMeasured&&Pe(p);Dv(p,h,Ju(r,p,y)),p.styleClasses&&(p.styleClasses.bgClass&&(h.bgClass=bt(p.styleClasses.bgClass,h.bgClass||"")),p.styleClasses.textClass&&(h.textClass=bt(p.styleClasses.textClass,h.textClass||""))),h.map.length==0&&h.map.push(0,0,h.content.appendChild(Ka(r.display.measure))),c==0?(o.measure.map=h.map,o.measure.cache={}):((o.measure.maps||(o.measure.maps=[])).push(h.map),(o.measure.caches||(o.measure.caches=[])).push({}))}if(O){var b=h.content.lastChild;(/\bcm-tab\b/.test(b.className)||b.querySelector&&b.querySelector(".cm-tab"))&&(h.content.className="cm-tab-wrap-hack")}return We(r,"renderLine",r,o.line,h.pre),h.pre.className&&(h.textClass=bt(h.pre.className,h.textClass||"")),h}function Mv(r){var o=T("span","•","cm-invalidchar");return o.title="\\u"+r.charCodeAt(0).toString(16),o.setAttribute("aria-label",o.title),o}function Yv(r,o,f,h,c,p,m){if(o){var y=r.splitSpaces?Rv(o,r.trailingSpace):o,b=r.cm.state.specialChars,S=!1,Q;if(!b.test(o))r.col+=o.length,Q=document.createTextNode(y),r.map.push(r.pos,r.pos+o.length,Q),d&&g<9&&(S=!0),r.pos+=o.length;else{Q=document.createDocumentFragment();for(var $=0;;){b.lastIndex=$;var L=b.exec(o),A=L?L.index-$:o.length-$;if(A){var X=document.createTextNode(y.slice($,$+A));d&&g<9?Q.appendChild(T("span",[X])):Q.appendChild(X),r.map.push(r.pos,r.pos+A,X),r.col+=A,r.pos+=A}if(!L)break;$+=A+1;var N=void 0;if(L[0]=="	"){var _=r.cm.options.tabSize,q=_-r.col%_;N=Q.appendChild(T("span",Ri(q),"cm-tab")),N.setAttribute("role","presentation"),N.setAttribute("cm-text","	"),r.col+=q}else L[0]=="\r"||L[0]==`
`?(N=Q.appendChild(T("span",L[0]=="\r"?"␍":"␤","cm-invalidchar")),N.setAttribute("cm-text",L[0]),r.col+=1):(N=r.cm.options.specialCharPlaceholder(L[0]),N.setAttribute("cm-text",L[0]),d&&g<9?Q.appendChild(T("span",[N])):Q.appendChild(N),r.col+=1);r.map.push(r.pos,r.pos+1,N),r.pos++}}if(r.trailingSpace=y.charCodeAt(o.length-1)==32,f||h||c||S||p||m){var V=f||"";h&&(V+=h),c&&(V+=c);var G=T("span",[Q],V,p);if(m)for(var ee in m)m.hasOwnProperty(ee)&&ee!="style"&&ee!="class"&&G.setAttribute(ee,m[ee]);return r.content.appendChild(G)}r.content.appendChild(Q)}}function Rv(r,o){if(r.length>1&&!/  /.test(r))return r;for(var f=o,h="",c=0;c<r.length;c++){var p=r.charAt(c);p==" "&&f&&(c==r.length-1||r.charCodeAt(c+1)==32)&&(p=" "),h+=p,f=p==" "}return h}function Lv(r,o){return function(f,h,c,p,m,y,b){c=c?c+" cm-force-border":"cm-force-border";for(var S=f.pos,Q=S+h.length;;){for(var $=void 0,L=0;L<o.length&&($=o[L],!($.to>S&&$.from<=S));L++);if($.to>=Q)return r(f,h,c,p,m,y,b);r(f,h.slice(0,$.to-S),c,p,null,y,b),p=null,h=h.slice($.to-S),S=$.to}}}function gc(r,o,f,h){var c=!h&&f.widgetNode;c&&r.map.push(r.pos,r.pos+o,c),!h&&r.cm.display.input.needsContentAttribute&&(c||(c=r.content.appendChild(document.createElement("span"))),c.setAttribute("cm-marker",f.id)),c&&(r.cm.display.input.setUneditable(c),r.content.appendChild(c)),r.pos+=o,r.trailingSpace=!1}function Dv(r,o,f){var h=r.markedSpans,c=r.text,p=0;if(!h){for(var m=1;m<f.length;m+=2)o.addToken(o,c.slice(p,p=f[m]),dc(f[m+1],o.cm.options));return}for(var y=c.length,b=0,S=1,Q="",$,L,A=0,X,N,_,q,V;;){if(A==b){X=N=_=L="",V=null,q=null,A=1/0;for(var G=[],ee=void 0,ae=0;ae<h.length;++ae){var se=h[ae],ve=se.marker;if(ve.type=="bookmark"&&se.from==b&&ve.widgetNode)G.push(ve);else if(se.from<=b&&(se.to==null||se.to>b||ve.collapsed&&se.to==b&&se.from==b)){if(se.to!=null&&se.to!=b&&A>se.to&&(A=se.to,N=""),ve.className&&(X+=" "+ve.className),ve.css&&(L=(L?L+";":"")+ve.css),ve.startStyle&&se.from==b&&(_+=" "+ve.startStyle),ve.endStyle&&se.to==A&&(ee||(ee=[])).push(ve.endStyle,se.to),ve.title&&((V||(V={})).title=ve.title),ve.attributes)for(var Le in ve.attributes)(V||(V={}))[Le]=ve.attributes[Le];ve.collapsed&&(!q||ih(q.marker,ve)<0)&&(q=se)}else se.from>b&&A>se.from&&(A=se.from)}if(ee)for(var ut=0;ut<ee.length;ut+=2)ee[ut+1]==A&&(N+=" "+ee[ut]);if(!q||q.from==b)for(var qe=0;qe<G.length;++qe)gc(o,0,G[qe]);if(q&&(q.from||0)==b){if(gc(o,(q.to==null?y+1:q.to)-b,q.marker,q.from==null),q.to==null)return;q.to==b&&(q=!1)}}if(b>=y)break;for(var Vt=Math.min(y,A);;){if(Q){var Bt=b+Q.length;if(!q){var tt=Bt>Vt?Q.slice(0,Vt-b):Q;o.addToken(o,tt,$?$+X:X,_,b+tt.length==A?N:"",L,V)}if(Bt>=Vt){Q=Q.slice(Vt-b),b=Vt;break}b=Bt,_=""}Q=c.slice(p,p=f[S++]),$=dc(f[S++],o.cm.options)}}}function Oc(r,o,f){this.line=o,this.rest=$v(o),this.size=this.rest?Pe(xe(this.rest))-f+1:1,this.node=this.text=null,this.hidden=Cr(r,o)}function ll(r,o,f){for(var h=[],c,p=o;p<f;p=c){var m=new Oc(r.doc,ie(r.doc,p),p);c=p+m.size,h.push(m)}return h}var Mn=null;function Wv(r){Mn?Mn.ops.push(r):r.ownsGroup=Mn={ops:[r],delayedCallbacks:[]}}function Xv(r){var o=r.delayedCallbacks,f=0;do{for(;f<o.length;f++)o[f].call(null);for(var h=0;h<r.ops.length;h++){var c=r.ops[h];if(c.cursorActivityHandlers)for(;c.cursorActivityCalled<c.cursorActivityHandlers.length;)c.cursorActivityHandlers[c.cursorActivityCalled++].call(null,c.cm)}}while(f<o.length)}function Ev(r,o){var f=r.ownsGroup;if(f)try{Xv(f)}finally{Mn=null,o(f)}}var Zs=null;function at(r,o){var f=ws(r,o);if(f.length){var h=Array.prototype.slice.call(arguments,2),c;Mn?c=Mn.delayedCallbacks:Zs?c=Zs:(c=Zs=[],setTimeout(Iv,0));for(var p=function(y){c.push(function(){return f[y].apply(null,h)})},m=0;m<f.length;++m)p(m)}}function Iv(){var r=Zs;Zs=null;for(var o=0;o<r.length;++o)r[o]()}function mc(r,o,f,h){for(var c=0;c<o.changes.length;c++){var p=o.changes[c];p=="text"?Bv(r,o):p=="gutter"?yc(r,o,f,h):p=="class"?oh(r,o):p=="widget"&&Uv(r,o,h)}o.changes=null}function As(r){return r.node==r.text&&(r.node=T("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),d&&g<8&&(r.node.style.zIndex=2)),r.node}function Nv(r,o){var f=o.bgClass?o.bgClass+" "+(o.line.bgClass||""):o.line.bgClass;if(f&&(f+=" CodeMirror-linebackground"),o.background)f?o.background.className=f:(o.background.parentNode.removeChild(o.background),o.background=null);else if(f){var h=As(o);o.background=h.insertBefore(T("div",null,f),h.firstChild),r.display.input.setUneditable(o.background)}}function vc(r,o){var f=r.display.externalMeasured;return f&&f.line==o.line?(r.display.externalMeasured=null,o.measure=f.measure,f.built):pc(r,o)}function Bv(r,o){var f=o.text.className,h=vc(r,o);o.text==o.node&&(o.node=h.pre),o.text.parentNode.replaceChild(h.pre,o.text),o.text=h.pre,h.bgClass!=o.bgClass||h.textClass!=o.textClass?(o.bgClass=h.bgClass,o.textClass=h.textClass,oh(r,o)):f&&(o.text.className=f)}function oh(r,o){Nv(r,o),o.line.wrapClass?As(o).className=o.line.wrapClass:o.node!=o.text&&(o.node.className="");var f=o.textClass?o.textClass+" "+(o.line.textClass||""):o.line.textClass;o.text.className=f||""}function yc(r,o,f,h){if(o.gutter&&(o.node.removeChild(o.gutter),o.gutter=null),o.gutterBackground&&(o.node.removeChild(o.gutterBackground),o.gutterBackground=null),o.line.gutterClass){var c=As(o);o.gutterBackground=T("div",null,"CodeMirror-gutter-background "+o.line.gutterClass,"left: "+(r.options.fixedGutter?h.fixedPos:-h.gutterTotalWidth)+"px; width: "+h.gutterTotalWidth+"px"),r.display.input.setUneditable(o.gutterBackground),c.insertBefore(o.gutterBackground,o.text)}var p=o.line.gutterMarkers;if(r.options.lineNumbers||p){var m=As(o),y=o.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?h.fixedPos:-h.gutterTotalWidth)+"px");if(y.setAttribute("aria-hidden","true"),r.display.input.setUneditable(y),m.insertBefore(y,o.text),o.line.gutterClass&&(y.className+=" "+o.line.gutterClass),r.options.lineNumbers&&(!p||!p["CodeMirror-linenumbers"])&&(o.lineNumber=y.appendChild(T("div",P(r.options,f),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+h.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px"))),p)for(var b=0;b<r.display.gutterSpecs.length;++b){var S=r.display.gutterSpecs[b].className,Q=p.hasOwnProperty(S)&&p[S];Q&&y.appendChild(T("div",[Q],"CodeMirror-gutter-elt","left: "+h.gutterLeft[S]+"px; width: "+h.gutterWidth[S]+"px"))}}}function Uv(r,o,f){o.alignable&&(o.alignable=null);for(var h=Qe("CodeMirror-linewidget"),c=o.node.firstChild,p=void 0;c;c=p)p=c.nextSibling,h.test(c.className)&&o.node.removeChild(c);bc(r,o,f)}function zv(r,o,f,h){var c=vc(r,o);return o.text=o.node=c.pre,c.bgClass&&(o.bgClass=c.bgClass),c.textClass&&(o.textClass=c.textClass),oh(r,o),yc(r,o,f,h),bc(r,o,h),o.node}function bc(r,o,f){if(Sc(r,o.line,o,f,!0),o.rest)for(var h=0;h<o.rest.length;h++)Sc(r,o.rest[h],o,f,!1)}function Sc(r,o,f,h,c){if(o.widgets)for(var p=As(f),m=0,y=o.widgets;m<y.length;++m){var b=y[m],S=T("div",[b.node],"CodeMirror-linewidget"+(b.className?" "+b.className:""));b.handleMouseEvents||S.setAttribute("cm-ignore-events","true"),_v(b,S,f,h),r.display.input.setUneditable(S),c&&b.above?p.insertBefore(S,f.gutter||f.text):p.appendChild(S),at(b,"redraw")}}function _v(r,o,f,h){if(r.noHScroll){(f.alignable||(f.alignable=[])).push(o);var c=h.wrapperWidth;o.style.left=h.fixedPos+"px",r.coverGutter||(c-=h.gutterTotalWidth,o.style.paddingLeft=h.gutterTotalWidth+"px"),o.style.width=c+"px"}r.coverGutter&&(o.style.zIndex=5,o.style.position="relative",r.noHScroll||(o.style.marginLeft=-h.gutterTotalWidth+"px"))}function Ms(r){if(r.height!=null)return r.height;var o=r.doc.cm;if(!o)return 0;if(!Ee(document.body,r.node)){var f="position: relative;";r.coverGutter&&(f+="margin-left: -"+o.display.gutters.offsetWidth+"px;"),r.noHScroll&&(f+="width: "+o.display.wrapper.clientWidth+"px;"),J(o.display.measure,T("div",[r.node],null,f))}return r.height=r.node.parentNode.offsetHeight}function fr(r,o){for(var f=Et(o);f!=r.wrapper;f=f.parentNode)if(!f||f.nodeType==1&&f.getAttribute("cm-ignore-events")=="true"||f.parentNode==r.sizer&&f!=r.mover)return!0}function al(r){return r.lineSpace.offsetTop}function lh(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function xc(r){if(r.cachedPaddingH)return r.cachedPaddingH;var o=J(r.measure,T("pre","x","CodeMirror-line-like")),f=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,h={left:parseInt(f.paddingLeft),right:parseInt(f.paddingRight)};return!isNaN(h.left)&&!isNaN(h.right)&&(r.cachedPaddingH=h),h}function Ni(r){return _o-r.display.nativeBarWidth}function en(r){return r.display.scroller.clientWidth-Ni(r)-r.display.barWidth}function ah(r){return r.display.scroller.clientHeight-Ni(r)-r.display.barHeight}function jv(r,o,f){var h=r.options.lineWrapping,c=h&&en(r);if(!o.measure.heights||h&&o.measure.width!=c){var p=o.measure.heights=[];if(h){o.measure.width=c;for(var m=o.text.firstChild.getClientRects(),y=0;y<m.length-1;y++){var b=m[y],S=m[y+1];Math.abs(b.bottom-S.bottom)>2&&p.push((b.bottom+S.top)/2-f.top)}}p.push(f.bottom-f.top)}}function wc(r,o,f){if(r.line==o)return{map:r.measure.map,cache:r.measure.cache};if(r.rest){for(var h=0;h<r.rest.length;h++)if(r.rest[h]==o)return{map:r.measure.maps[h],cache:r.measure.caches[h]};for(var c=0;c<r.rest.length;c++)if(Pe(r.rest[c])>f)return{map:r.measure.maps[c],cache:r.measure.caches[c],before:!0}}}function qv(r,o){o=Qi(o);var f=Pe(o),h=r.display.externalMeasured=new Oc(r.doc,o,f);h.lineN=f;var c=h.built=pc(r,h);return h.text=c.pre,J(r.display.lineMeasure,c.pre),h}function kc(r,o,f,h){return Bi(r,Yn(r,o),f,h)}function hh(r,o){if(o>=r.display.viewFrom&&o<r.display.viewTo)return r.display.view[nn(r,o)];var f=r.display.externalMeasured;if(f&&o>=f.lineN&&o<f.lineN+f.size)return f}function Yn(r,o){var f=Pe(o),h=hh(r,f);h&&!h.text?h=null:h&&h.changes&&(mc(r,h,f,ph(r)),r.curOp.forceUpdate=!0),h||(h=qv(r,o));var c=wc(h,o,f);return{line:o,view:h,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function Bi(r,o,f,h,c){o.before&&(f=-1);var p=f+(h||""),m;return o.cache.hasOwnProperty(p)?m=o.cache[p]:(o.rect||(o.rect=o.view.text.getBoundingClientRect()),o.hasHeights||(jv(r,o.view,o.rect),o.hasHeights=!0),m=Fv(r,o,f,h),m.bogus||(o.cache[p]=m)),{left:m.left,right:m.right,top:c?m.rtop:m.top,bottom:c?m.rbottom:m.bottom}}var Qc={left:0,right:0,top:0,bottom:0};function Cc(r,o,f){for(var h,c,p,m,y,b,S=0;S<r.length;S+=3)if(y=r[S],b=r[S+1],o<y?(c=0,p=1,m="left"):o<b?(c=o-y,p=c+1):(S==r.length-3||o==b&&r[S+3]>o)&&(p=b-y,c=p-1,o>=b&&(m="right")),c!=null){if(h=r[S+2],y==b&&f==(h.insertLeft?"left":"right")&&(m=f),f=="left"&&c==0)for(;S&&r[S-2]==r[S-3]&&r[S-1].insertLeft;)h=r[(S-=3)+2],m="left";if(f=="right"&&c==b-y)for(;S<r.length-3&&r[S+3]==r[S+4]&&!r[S+5].insertLeft;)h=r[(S+=3)+2],m="right";break}return{node:h,start:c,end:p,collapse:m,coverStart:y,coverEnd:b}}function Gv(r,o){var f=Qc;if(o=="left")for(var h=0;h<r.length&&(f=r[h]).left==f.right;h++);else for(var c=r.length-1;c>=0&&(f=r[c]).left==f.right;c--);return f}function Fv(r,o,f,h){var c=Cc(o.map,f,h),p=c.node,m=c.start,y=c.end,b=c.collapse,S;if(p.nodeType==3){for(var Q=0;Q<4;Q++){for(;m&&xs(o.line.text.charAt(c.coverStart+m));)--m;for(;c.coverStart+y<c.coverEnd&&xs(o.line.text.charAt(c.coverStart+y));)++y;if(d&&g<9&&m==0&&y==c.coverEnd-c.coverStart?S=p.parentNode.getBoundingClientRect():S=Gv(Ne(p,m,y).getClientRects(),h),S.left||S.right||m==0)break;y=m,m=m-1,b="right"}d&&g<11&&(S=Hv(r.display.measure,S))}else{m>0&&(b=h="right");var $;r.options.lineWrapping&&($=p.getClientRects()).length>1?S=$[h=="right"?$.length-1:0]:S=p.getBoundingClientRect()}if(d&&g<9&&!m&&(!S||!S.left&&!S.right)){var L=p.parentNode.getClientRects()[0];L?S={left:L.left,right:L.left+Ln(r.display),top:L.top,bottom:L.bottom}:S=Qc}for(var A=S.top-o.rect.top,X=S.bottom-o.rect.top,N=(A+X)/2,_=o.view.measure.heights,q=0;q<_.length-1&&!(N<_[q]);q++);var V=q?_[q-1]:0,G=_[q],ee={left:(b=="right"?S.right:S.left)-o.rect.left,right:(b=="left"?S.left:S.right)-o.rect.left,top:V,bottom:G};return!S.left&&!S.right&&(ee.bogus=!0),r.options.singleCursorHeightPerLine||(ee.rtop=A,ee.rbottom=X),ee}function Hv(r,o){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Ko(r))return o;var f=screen.logicalXDPI/screen.deviceXDPI,h=screen.logicalYDPI/screen.deviceYDPI;return{left:o.left*f,right:o.right*f,top:o.top*h,bottom:o.bottom*h}}function $c(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest))for(var o=0;o<r.rest.length;o++)r.measure.caches[o]={}}function Pc(r){r.display.externalMeasure=null,I(r.display.lineMeasure);for(var o=0;o<r.display.view.length;o++)$c(r.display.view[o])}function Ys(r){Pc(r),r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null,r.options.lineWrapping||(r.display.maxLineChanged=!0),r.display.lineNumChars=null}function Tc(r){return x&&F?-(r.body.getBoundingClientRect().left-parseInt(getComputedStyle(r.body).marginLeft)):r.defaultView.pageXOffset||(r.documentElement||r.body).scrollLeft}function Zc(r){return x&&F?-(r.body.getBoundingClientRect().top-parseInt(getComputedStyle(r.body).marginTop)):r.defaultView.pageYOffset||(r.documentElement||r.body).scrollTop}function fh(r){var o=Qi(r),f=o.widgets,h=0;if(f)for(var c=0;c<f.length;++c)f[c].above&&(h+=Ms(f[c]));return h}function hl(r,o,f,h,c){if(!c){var p=fh(o);f.top+=p,f.bottom+=p}if(h=="line")return f;h||(h="local");var m=hr(o);if(h=="local"?m+=al(r.display):m-=r.display.viewOffset,h=="page"||h=="window"){var y=r.display.lineSpace.getBoundingClientRect();m+=y.top+(h=="window"?0:Zc(_e(r)));var b=y.left+(h=="window"?0:Tc(_e(r)));f.left+=b,f.right+=b}return f.top+=m,f.bottom+=m,f}function Ac(r,o,f){if(f=="div")return o;var h=o.left,c=o.top;if(f=="page")h-=Tc(_e(r)),c-=Zc(_e(r));else if(f=="local"||!f){var p=r.display.sizer.getBoundingClientRect();h+=p.left,c+=p.top}var m=r.display.lineSpace.getBoundingClientRect();return{left:h-m.left,top:c-m.top}}function fl(r,o,f,h,c){return h||(h=ie(r.doc,o.line)),hl(r,h,kc(r,h,o.ch,c),f)}function Ci(r,o,f,h,c,p){h=h||ie(r.doc,o.line),c||(c=Yn(r,h));function m(X,N){var _=Bi(r,c,X,N?"right":"left",p);return N?_.left=_.right:_.right=_.left,hl(r,h,_,f)}var y=Oi(h,r.doc.direction),b=o.ch,S=o.sticky;if(b>=h.text.length?(b=h.text.length,S="before"):b<=0&&(b=0,S="after"),!y)return m(S=="before"?b-1:b,S=="before");function Q(X,N,_){var q=y[N],V=q.level==1;return m(_?X-1:X,V!=_)}var $=gi(y,b,S),L=Di,A=Q(b,$,S=="before");return L!=null&&(A.other=Q(b,L,S!="before")),A}function Mc(r,o){var f=0;o=ce(r.doc,o),r.options.lineWrapping||(f=Ln(r.display)*o.ch);var h=ie(r.doc,o.line),c=hr(h)+al(r.display);return{left:f,right:f,top:c,bottom:c+h.height}}function uh(r,o,f,h,c){var p=Z(r,o,f);return p.xRel=c,h&&(p.outside=h),p}function ch(r,o,f){var h=r.doc;if(f+=r.display.viewOffset,f<0)return uh(h.first,0,null,-1,-1);var c=Ei(h,f),p=h.first+h.size-1;if(c>p)return uh(h.first+h.size-1,ie(h,p).text.length,null,1,1);o<0&&(o=0);for(var m=ie(h,c);;){var y=Vv(r,m,c,o,f),b=Qv(m,y.ch+(y.xRel>0||y.outside>0?1:0));if(!b)return y;var S=b.find(1);if(S.line==c)return S;m=ie(h,c=S.line)}}function Yc(r,o,f,h){h-=fh(o);var c=o.text.length,p=Fe(function(m){return Bi(r,f,m-1).bottom<=h},c,0);return c=Fe(function(m){return Bi(r,f,m).top>h},p,c),{begin:p,end:c}}function Rc(r,o,f,h){f||(f=Yn(r,o));var c=hl(r,o,Bi(r,f,h),"line").top;return Yc(r,o,f,c)}function dh(r,o,f,h){return r.bottom<=f?!1:r.top>f?!0:(h?r.left:r.right)>o}function Vv(r,o,f,h,c){c-=hr(o);var p=Yn(r,o),m=fh(o),y=0,b=o.text.length,S=!0,Q=Oi(o,r.doc.direction);if(Q){var $=(r.options.lineWrapping?Jv:Kv)(r,o,f,p,Q,h,c);S=$.level!=1,y=S?$.from:$.to-1,b=S?$.to:$.from-1}var L=null,A=null,X=Fe(function(ae){var se=Bi(r,p,ae);return se.top+=m,se.bottom+=m,dh(se,h,c,!1)?(se.top<=c&&se.left<=h&&(L=ae,A=se),!0):!1},y,b),N,_,q=!1;if(A){var V=h-A.left<A.right-h,G=V==S;X=L+(G?0:1),_=G?"after":"before",N=V?A.left:A.right}else{!S&&(X==b||X==y)&&X++,_=X==0?"after":X==o.text.length?"before":Bi(r,p,X-(S?1:0)).bottom+m<=c==S?"after":"before";var ee=Ci(r,Z(f,X,_),"line",o,p);N=ee.left,q=c<ee.top?-1:c>=ee.bottom?1:0}return X=Li(o.text,X,1),uh(f,X,_,q,h-N)}function Kv(r,o,f,h,c,p,m){var y=Fe(function($){var L=c[$],A=L.level!=1;return dh(Ci(r,Z(f,A?L.to:L.from,A?"before":"after"),"line",o,h),p,m,!0)},0,c.length-1),b=c[y];if(y>0){var S=b.level!=1,Q=Ci(r,Z(f,S?b.from:b.to,S?"after":"before"),"line",o,h);dh(Q,p,m,!0)&&Q.top>m&&(b=c[y-1])}return b}function Jv(r,o,f,h,c,p,m){var y=Yc(r,o,h,m),b=y.begin,S=y.end;/\s/.test(o.text.charAt(S-1))&&S--;for(var Q=null,$=null,L=0;L<c.length;L++){var A=c[L];if(!(A.from>=S||A.to<=b)){var X=A.level!=1,N=Bi(r,h,X?Math.min(S,A.to)-1:Math.max(b,A.from)).right,_=N<p?p-N+1e9:N-p;(!Q||$>_)&&(Q=A,$=_)}}return Q||(Q=c[c.length-1]),Q.from<b&&(Q={from:b,to:Q.to,level:Q.level}),Q.to>S&&(Q={from:Q.from,to:S,level:Q.level}),Q}var tn;function Rn(r){if(r.cachedTextHeight!=null)return r.cachedTextHeight;if(tn==null){tn=T("pre",null,"CodeMirror-line-like");for(var o=0;o<49;++o)tn.appendChild(document.createTextNode("x")),tn.appendChild(T("br"));tn.appendChild(document.createTextNode("x"))}J(r.measure,tn);var f=tn.offsetHeight/50;return f>3&&(r.cachedTextHeight=f),I(r.measure),f||1}function Ln(r){if(r.cachedCharWidth!=null)return r.cachedCharWidth;var o=T("span","xxxxxxxxxx"),f=T("pre",[o],"CodeMirror-line-like");J(r.measure,f);var h=o.getBoundingClientRect(),c=(h.right-h.left)/10;return c>2&&(r.cachedCharWidth=c),c||10}function ph(r){for(var o=r.display,f={},h={},c=o.gutters.clientLeft,p=o.gutters.firstChild,m=0;p;p=p.nextSibling,++m){var y=r.display.gutterSpecs[m].className;f[y]=p.offsetLeft+p.clientLeft+c,h[y]=p.clientWidth}return{fixedPos:gh(o),gutterTotalWidth:o.gutters.offsetWidth,gutterLeft:f,gutterWidth:h,wrapperWidth:o.wrapper.clientWidth}}function gh(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function Lc(r){var o=Rn(r.display),f=r.options.lineWrapping,h=f&&Math.max(5,r.display.scroller.clientWidth/Ln(r.display)-3);return function(c){if(Cr(r.doc,c))return 0;var p=0;if(c.widgets)for(var m=0;m<c.widgets.length;m++)c.widgets[m].height&&(p+=c.widgets[m].height);return f?p+(Math.ceil(c.text.length/h)||1)*o:p+o}}function Oh(r){var o=r.doc,f=Lc(r);o.iter(function(h){var c=f(h);c!=h.height&&vi(h,c)})}function rn(r,o,f,h){var c=r.display;if(!f&&Et(o).getAttribute("cm-not-content")=="true")return null;var p,m,y=c.lineSpace.getBoundingClientRect();try{p=o.clientX-y.left,m=o.clientY-y.top}catch{return null}var b=ch(r,p,m),S;if(h&&b.xRel>0&&(S=ie(r.doc,b.line).text).length==b.ch){var Q=le(S,S.length,r.options.tabSize)-S.length;b=Z(b.line,Math.max(0,Math.round((p-xc(r.display).left)/Ln(r.display))-Q))}return b}function nn(r,o){if(o>=r.display.viewTo||(o-=r.display.viewFrom,o<0))return null;for(var f=r.display.view,h=0;h<f.length;h++)if(o-=f[h].size,o<0)return h}function It(r,o,f,h){o==null&&(o=r.doc.first),f==null&&(f=r.doc.first+r.doc.size),h||(h=0);var c=r.display;if(h&&f<c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>o)&&(c.updateLineNumbers=o),r.curOp.viewChanged=!0,o>=c.viewTo)ar&&rh(r.doc,o)<c.viewTo&&Pr(r);else if(f<=c.viewFrom)ar&&cc(r.doc,f+h)>c.viewFrom?Pr(r):(c.viewFrom+=h,c.viewTo+=h);else if(o<=c.viewFrom&&f>=c.viewTo)Pr(r);else if(o<=c.viewFrom){var p=ul(r,f,f+h,1);p?(c.view=c.view.slice(p.index),c.viewFrom=p.lineN,c.viewTo+=h):Pr(r)}else if(f>=c.viewTo){var m=ul(r,o,o,-1);m?(c.view=c.view.slice(0,m.index),c.viewTo=m.lineN):Pr(r)}else{var y=ul(r,o,o,-1),b=ul(r,f,f+h,1);y&&b?(c.view=c.view.slice(0,y.index).concat(ll(r,y.lineN,b.lineN)).concat(c.view.slice(b.index)),c.viewTo+=h):Pr(r)}var S=c.externalMeasured;S&&(f<S.lineN?S.lineN+=h:o<S.lineN+S.size&&(c.externalMeasured=null))}function $r(r,o,f){r.curOp.viewChanged=!0;var h=r.display,c=r.display.externalMeasured;if(c&&o>=c.lineN&&o<c.lineN+c.size&&(h.externalMeasured=null),!(o<h.viewFrom||o>=h.viewTo)){var p=h.view[nn(r,o)];if(p.node!=null){var m=p.changes||(p.changes=[]);Se(m,f)==-1&&m.push(f)}}}function Pr(r){r.display.viewFrom=r.display.viewTo=r.doc.first,r.display.view=[],r.display.viewOffset=0}function ul(r,o,f,h){var c=nn(r,o),p,m=r.display.view;if(!ar||f==r.doc.first+r.doc.size)return{index:c,lineN:f};for(var y=r.display.viewFrom,b=0;b<c;b++)y+=m[b].size;if(y!=o){if(h>0){if(c==m.length-1)return null;p=y+m[c].size-o,c++}else p=y-o;o+=p,f+=p}for(;rh(r.doc,f)!=f;){if(c==(h<0?0:m.length-1))return null;f+=h*m[c-(h<0?1:0)].size,c+=h}return{index:c,lineN:f}}function ey(r,o,f){var h=r.display,c=h.view;c.length==0||o>=h.viewTo||f<=h.viewFrom?(h.view=ll(r,o,f),h.viewFrom=o):(h.viewFrom>o?h.view=ll(r,o,h.viewFrom).concat(h.view):h.viewFrom<o&&(h.view=h.view.slice(nn(r,o))),h.viewFrom=o,h.viewTo<f?h.view=h.view.concat(ll(r,h.viewTo,f)):h.viewTo>f&&(h.view=h.view.slice(0,nn(r,f)))),h.viewTo=f}function Dc(r){for(var o=r.display.view,f=0,h=0;h<o.length;h++){var c=o[h];!c.hidden&&(!c.node||c.changes)&&++f}return f}function Rs(r){r.display.input.showSelection(r.display.input.prepareSelection())}function Wc(r,o){o===void 0&&(o=!0);var f=r.doc,h={},c=h.cursors=document.createDocumentFragment(),p=h.selection=document.createDocumentFragment(),m=r.options.$customCursor;m&&(o=!0);for(var y=0;y<f.sel.ranges.length;y++)if(!(!o&&y==f.sel.primIndex)){var b=f.sel.ranges[y];if(!(b.from().line>=r.display.viewTo||b.to().line<r.display.viewFrom)){var S=b.empty();if(m){var Q=m(r,b);Q&&mh(r,Q,c)}else(S||r.options.showCursorWhenSelecting)&&mh(r,b.head,c);S||ty(r,b,p)}}return h}function mh(r,o,f){var h=Ci(r,o,"div",null,null,!r.options.singleCursorHeightPerLine),c=f.appendChild(T("div"," ","CodeMirror-cursor"));if(c.style.left=h.left+"px",c.style.top=h.top+"px",c.style.height=Math.max(0,h.bottom-h.top)*r.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(r.getWrapperElement().className)){var p=fl(r,o,"div",null,null),m=p.right-p.left;c.style.width=(m>0?m:r.defaultCharWidth())+"px"}if(h.other){var y=f.appendChild(T("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));y.style.display="",y.style.left=h.other.left+"px",y.style.top=h.other.top+"px",y.style.height=(h.other.bottom-h.other.top)*.85+"px"}}function cl(r,o){return r.top-o.top||r.left-o.left}function ty(r,o,f){var h=r.display,c=r.doc,p=document.createDocumentFragment(),m=xc(r.display),y=m.left,b=Math.max(h.sizerWidth,en(r)-h.sizer.offsetLeft)-m.right,S=c.direction=="ltr";function Q(G,ee,ae,se){ee<0&&(ee=0),ee=Math.round(ee),se=Math.round(se),p.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+G+`px;
                             top: `+ee+"px; width: "+(ae??b-G)+`px;
                             height: `+(se-ee)+"px"))}function $(G,ee,ae){var se=ie(c,G),ve=se.text.length,Le,ut;function qe(tt,Ut){return fl(r,Z(G,tt),"div",se,Ut)}function Vt(tt,Ut,vt){var ot=Rc(r,se,null,tt),it=Ut=="ltr"==(vt=="after")?"left":"right",Ke=vt=="after"?ot.begin:ot.end-(/\s/.test(se.text.charAt(ot.end-1))?2:1);return qe(Ke,it)[it]}var Bt=Oi(se,c.direction);return Kr(Bt,ee||0,ae??ve,function(tt,Ut,vt,ot){var it=vt=="ltr",Ke=qe(tt,it?"left":"right"),zt=qe(Ut-1,it?"right":"left"),Gn=ee==null&&tt==0,Rr=ae==null&&Ut==ve,kt=ot==0,Ui=!Bt||ot==Bt.length-1;if(zt.top-Ke.top<=3){var ct=(S?Gn:Rr)&&kt,zh=(S?Rr:Gn)&&Ui,dr=ct?y:(it?Ke:zt).left,hn=zh?b:(it?zt:Ke).right;Q(dr,Ke.top,hn-dr,Ke.bottom)}else{var fn,Mt,Fn,_h;it?(fn=S&&Gn&&kt?y:Ke.left,Mt=S?b:Vt(tt,vt,"before"),Fn=S?y:Vt(Ut,vt,"after"),_h=S&&Rr&&Ui?b:zt.right):(fn=S?Vt(tt,vt,"before"):y,Mt=!S&&Gn&&kt?b:Ke.right,Fn=!S&&Rr&&Ui?y:zt.left,_h=S?Vt(Ut,vt,"after"):b),Q(fn,Ke.top,Mt-fn,Ke.bottom),Ke.bottom<zt.top&&Q(y,Ke.bottom,null,zt.top),Q(Fn,zt.top,_h-Fn,zt.bottom)}(!Le||cl(Ke,Le)<0)&&(Le=Ke),cl(zt,Le)<0&&(Le=zt),(!ut||cl(Ke,ut)<0)&&(ut=Ke),cl(zt,ut)<0&&(ut=zt)}),{start:Le,end:ut}}var L=o.from(),A=o.to();if(L.line==A.line)$(L.line,L.ch,A.ch);else{var X=ie(c,L.line),N=ie(c,A.line),_=Qi(X)==Qi(N),q=$(L.line,L.ch,_?X.text.length+1:null).end,V=$(A.line,_?0:null,A.ch).start;_&&(q.top<V.top-2?(Q(q.right,q.top,null,q.bottom),Q(y,V.top,V.left,V.bottom)):Q(q.right,q.top,V.left-q.right,q.bottom)),q.bottom<V.top&&Q(y,q.bottom,null,V.top)}f.appendChild(p)}function vh(r){if(r.state.focused){var o=r.display;clearInterval(o.blinker);var f=!0;o.cursorDiv.style.visibility="",r.options.cursorBlinkRate>0?o.blinker=setInterval(function(){r.hasFocus()||Dn(r),o.cursorDiv.style.visibility=(f=!f)?"":"hidden"},r.options.cursorBlinkRate):r.options.cursorBlinkRate<0&&(o.cursorDiv.style.visibility="hidden")}}function Xc(r){r.hasFocus()||(r.display.input.focus(),r.state.focused||bh(r))}function yh(r){r.state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,r.state.focused&&Dn(r))},100)}function bh(r,o){r.state.delayingBlurEvent&&!r.state.draggingText&&(r.state.delayingBlurEvent=!1),r.options.readOnly!="nocursor"&&(r.state.focused||(We(r,"focus",r,o),r.state.focused=!0,Ce(r.display.wrapper,"CodeMirror-focused"),!r.curOp&&r.display.selForContextMenu!=r.doc.sel&&(r.display.input.reset(),O&&setTimeout(function(){return r.display.input.reset(!0)},20)),r.display.input.receivedFocus()),vh(r))}function Dn(r,o){r.state.delayingBlurEvent||(r.state.focused&&(We(r,"blur",r,o),r.state.focused=!1,Ae(r.display.wrapper,"CodeMirror-focused")),clearInterval(r.display.blinker),setTimeout(function(){r.state.focused||(r.display.shift=!1)},150))}function dl(r){for(var o=r.display,f=o.lineDiv.offsetTop,h=Math.max(0,o.scroller.getBoundingClientRect().top),c=o.lineDiv.getBoundingClientRect().top,p=0,m=0;m<o.view.length;m++){var y=o.view[m],b=r.options.lineWrapping,S=void 0,Q=0;if(!y.hidden){if(c+=y.line.height,d&&g<8){var $=y.node.offsetTop+y.node.offsetHeight;S=$-f,f=$}else{var L=y.node.getBoundingClientRect();S=L.bottom-L.top,!b&&y.text.firstChild&&(Q=y.text.firstChild.getBoundingClientRect().right-L.left-1)}var A=y.line.height-S;if((A>.005||A<-.005)&&(c<h&&(p-=A),vi(y.line,S),Ec(y.line),y.rest))for(var X=0;X<y.rest.length;X++)Ec(y.rest[X]);if(Q>r.display.sizerWidth){var N=Math.ceil(Q/Ln(r.display));N>r.display.maxLineLength&&(r.display.maxLineLength=N,r.display.maxLine=y.line,r.display.maxLineChanged=!0)}}}Math.abs(p)>2&&(o.scroller.scrollTop+=p)}function Ec(r){if(r.widgets)for(var o=0;o<r.widgets.length;++o){var f=r.widgets[o],h=f.node.parentNode;h&&(f.height=h.offsetHeight)}}function pl(r,o,f){var h=f&&f.top!=null?Math.max(0,f.top):r.scroller.scrollTop;h=Math.floor(h-al(r));var c=f&&f.bottom!=null?f.bottom:h+r.wrapper.clientHeight,p=Ei(o,h),m=Ei(o,c);if(f&&f.ensure){var y=f.ensure.from.line,b=f.ensure.to.line;y<p?(p=y,m=Ei(o,hr(ie(o,y))+r.wrapper.clientHeight)):Math.min(b,o.lastLine())>=m&&(p=Ei(o,hr(ie(o,b))-r.wrapper.clientHeight),m=b)}return{from:p,to:Math.max(m,p+1)}}function iy(r,o){if(!He(r,"scrollCursorIntoView")){var f=r.display,h=f.sizer.getBoundingClientRect(),c=null,p=f.wrapper.ownerDocument;if(o.top+h.top<0?c=!0:o.bottom+h.top>(p.defaultView.innerHeight||p.documentElement.clientHeight)&&(c=!1),c!=null&&!D){var m=T("div","​",null,`position: absolute;
                         top: `+(o.top-f.viewOffset-al(r.display))+`px;
                         height: `+(o.bottom-o.top+Ni(r)+f.barHeight)+`px;
                         left: `+o.left+"px; width: "+Math.max(2,o.right-o.left)+"px;");r.display.lineSpace.appendChild(m),m.scrollIntoView(c),r.display.lineSpace.removeChild(m)}}}function ry(r,o,f,h){h==null&&(h=0);var c;!r.options.lineWrapping&&o==f&&(f=o.sticky=="before"?Z(o.line,o.ch+1,"before"):o,o=o.ch?Z(o.line,o.sticky=="before"?o.ch-1:o.ch,"after"):o);for(var p=0;p<5;p++){var m=!1,y=Ci(r,o),b=!f||f==o?y:Ci(r,f);c={left:Math.min(y.left,b.left),top:Math.min(y.top,b.top)-h,right:Math.max(y.left,b.left),bottom:Math.max(y.bottom,b.bottom)+h};var S=Sh(r,c),Q=r.doc.scrollTop,$=r.doc.scrollLeft;if(S.scrollTop!=null&&(Ds(r,S.scrollTop),Math.abs(r.doc.scrollTop-Q)>1&&(m=!0)),S.scrollLeft!=null&&(sn(r,S.scrollLeft),Math.abs(r.doc.scrollLeft-$)>1&&(m=!0)),!m)break}return c}function ny(r,o){var f=Sh(r,o);f.scrollTop!=null&&Ds(r,f.scrollTop),f.scrollLeft!=null&&sn(r,f.scrollLeft)}function Sh(r,o){var f=r.display,h=Rn(r.display);o.top<0&&(o.top=0);var c=r.curOp&&r.curOp.scrollTop!=null?r.curOp.scrollTop:f.scroller.scrollTop,p=ah(r),m={};o.bottom-o.top>p&&(o.bottom=o.top+p);var y=r.doc.height+lh(f),b=o.top<h,S=o.bottom>y-h;if(o.top<c)m.scrollTop=b?0:o.top;else if(o.bottom>c+p){var Q=Math.min(o.top,(S?y:o.bottom)-p);Q!=c&&(m.scrollTop=Q)}var $=r.options.fixedGutter?0:f.gutters.offsetWidth,L=r.curOp&&r.curOp.scrollLeft!=null?r.curOp.scrollLeft:f.scroller.scrollLeft-$,A=en(r)-f.gutters.offsetWidth,X=o.right-o.left>A;return X&&(o.right=o.left+A),o.left<10?m.scrollLeft=0:o.left<L?m.scrollLeft=Math.max(0,o.left+$-(X?0:10)):o.right>A+L-3&&(m.scrollLeft=o.right+(X?0:10)-A),m}function xh(r,o){o!=null&&(gl(r),r.curOp.scrollTop=(r.curOp.scrollTop==null?r.doc.scrollTop:r.curOp.scrollTop)+o)}function Wn(r){gl(r);var o=r.getCursor();r.curOp.scrollToPos={from:o,to:o,margin:r.options.cursorScrollMargin}}function Ls(r,o,f){(o!=null||f!=null)&&gl(r),o!=null&&(r.curOp.scrollLeft=o),f!=null&&(r.curOp.scrollTop=f)}function sy(r,o){gl(r),r.curOp.scrollToPos=o}function gl(r){var o=r.curOp.scrollToPos;if(o){r.curOp.scrollToPos=null;var f=Mc(r,o.from),h=Mc(r,o.to);Ic(r,f,h,o.margin)}}function Ic(r,o,f,h){var c=Sh(r,{left:Math.min(o.left,f.left),top:Math.min(o.top,f.top)-h,right:Math.max(o.right,f.right),bottom:Math.max(o.bottom,f.bottom)+h});Ls(r,c.scrollLeft,c.scrollTop)}function Ds(r,o){Math.abs(r.doc.scrollTop-o)<2||(s||kh(r,{top:o}),Nc(r,o,!0),s&&kh(r),Es(r,100))}function Nc(r,o,f){o=Math.max(0,Math.min(r.display.scroller.scrollHeight-r.display.scroller.clientHeight,o)),!(r.display.scroller.scrollTop==o&&!f)&&(r.doc.scrollTop=o,r.display.scrollbars.setScrollTop(o),r.display.scroller.scrollTop!=o&&(r.display.scroller.scrollTop=o))}function sn(r,o,f,h){o=Math.max(0,Math.min(o,r.display.scroller.scrollWidth-r.display.scroller.clientWidth)),!((f?o==r.doc.scrollLeft:Math.abs(r.doc.scrollLeft-o)<2)&&!h)&&(r.doc.scrollLeft=o,jc(r),r.display.scroller.scrollLeft!=o&&(r.display.scroller.scrollLeft=o),r.display.scrollbars.setScrollLeft(o))}function Ws(r){var o=r.display,f=o.gutters.offsetWidth,h=Math.round(r.doc.height+lh(r.display));return{clientHeight:o.scroller.clientHeight,viewHeight:o.wrapper.clientHeight,scrollWidth:o.scroller.scrollWidth,clientWidth:o.scroller.clientWidth,viewWidth:o.wrapper.clientWidth,barLeft:r.options.fixedGutter?f:0,docHeight:h,scrollHeight:h+Ni(r)+o.barHeight,nativeBarWidth:o.nativeBarWidth,gutterWidth:f}}var on=function(r,o,f){this.cm=f;var h=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");h.tabIndex=c.tabIndex=-1,r(h),r(c),H(h,"scroll",function(){h.clientHeight&&o(h.scrollTop,"vertical")}),H(c,"scroll",function(){c.clientWidth&&o(c.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};on.prototype.update=function(r){var o=r.scrollWidth>r.clientWidth+1,f=r.scrollHeight>r.clientHeight+1,h=r.nativeBarWidth;if(f){this.vert.style.display="block",this.vert.style.bottom=o?h+"px":"0";var c=r.viewHeight-(o?h:0);this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+c)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(o){this.horiz.style.display="block",this.horiz.style.right=f?h+"px":"0",this.horiz.style.left=r.barLeft+"px";var p=r.viewWidth-r.barLeft-(f?h:0);this.horiz.firstChild.style.width=Math.max(0,r.scrollWidth-r.clientWidth+p)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&r.clientHeight>0&&(h==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:f?h:0,bottom:o?h:0}},on.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},on.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},on.prototype.zeroWidthHack=function(){var r=U&&!M?"12px":"18px";this.horiz.style.height=this.vert.style.width=r,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new me,this.disableVert=new me},on.prototype.enableZeroWidthBar=function(r,o,f){r.style.visibility="";function h(){var c=r.getBoundingClientRect(),p=f=="vert"?document.elementFromPoint(c.right-1,(c.top+c.bottom)/2):document.elementFromPoint((c.right+c.left)/2,c.bottom-1);p!=r?r.style.visibility="hidden":o.set(1e3,h)}o.set(1e3,h)},on.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz),r.removeChild(this.vert)};var Xs=function(){};Xs.prototype.update=function(){return{bottom:0,right:0}},Xs.prototype.setScrollLeft=function(){},Xs.prototype.setScrollTop=function(){},Xs.prototype.clear=function(){};function Xn(r,o){o||(o=Ws(r));var f=r.display.barWidth,h=r.display.barHeight;Bc(r,o);for(var c=0;c<4&&f!=r.display.barWidth||h!=r.display.barHeight;c++)f!=r.display.barWidth&&r.options.lineWrapping&&dl(r),Bc(r,Ws(r)),f=r.display.barWidth,h=r.display.barHeight}function Bc(r,o){var f=r.display,h=f.scrollbars.update(o);f.sizer.style.paddingRight=(f.barWidth=h.right)+"px",f.sizer.style.paddingBottom=(f.barHeight=h.bottom)+"px",f.heightForcer.style.borderBottom=h.bottom+"px solid transparent",h.right&&h.bottom?(f.scrollbarFiller.style.display="block",f.scrollbarFiller.style.height=h.bottom+"px",f.scrollbarFiller.style.width=h.right+"px"):f.scrollbarFiller.style.display="",h.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(f.gutterFiller.style.display="block",f.gutterFiller.style.height=h.bottom+"px",f.gutterFiller.style.width=o.gutterWidth+"px"):f.gutterFiller.style.display=""}var Uc={native:on,null:Xs};function zc(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&Ae(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new Uc[r.options.scrollbarStyle](function(o){r.display.wrapper.insertBefore(o,r.display.scrollbarFiller),H(o,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),o.setAttribute("cm-not-content","true")},function(o,f){f=="horizontal"?sn(r,o):Ds(r,o)},r),r.display.scrollbars.addClass&&Ce(r.display.wrapper,r.display.scrollbars.addClass)}var oy=0;function ln(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++oy,markArrays:null},Wv(r.curOp)}function an(r){var o=r.curOp;o&&Ev(o,function(f){for(var h=0;h<f.ops.length;h++)f.ops[h].cm.curOp=null;ly(f)})}function ly(r){for(var o=r.ops,f=0;f<o.length;f++)ay(o[f]);for(var h=0;h<o.length;h++)hy(o[h]);for(var c=0;c<o.length;c++)fy(o[c]);for(var p=0;p<o.length;p++)uy(o[p]);for(var m=0;m<o.length;m++)cy(o[m])}function ay(r){var o=r.cm,f=o.display;py(o),r.updateMaxLine&&sh(o),r.mustUpdate=r.viewChanged||r.forceUpdate||r.scrollTop!=null||r.scrollToPos&&(r.scrollToPos.from.line<f.viewFrom||r.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&o.options.lineWrapping,r.update=r.mustUpdate&&new Ol(o,r.mustUpdate&&{top:r.scrollTop,ensure:r.scrollToPos},r.forceUpdate)}function hy(r){r.updatedDisplay=r.mustUpdate&&wh(r.cm,r.update)}function fy(r){var o=r.cm,f=o.display;r.updatedDisplay&&dl(o),r.barMeasure=Ws(o),f.maxLineChanged&&!o.options.lineWrapping&&(r.adjustWidthTo=kc(o,f.maxLine,f.maxLine.text.length).left+3,o.display.sizerWidth=r.adjustWidthTo,r.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+r.adjustWidthTo+Ni(o)+o.display.barWidth),r.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+r.adjustWidthTo-en(o))),(r.updatedDisplay||r.selectionChanged)&&(r.preparedSelection=f.input.prepareSelection())}function uy(r){var o=r.cm;r.adjustWidthTo!=null&&(o.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<o.doc.scrollLeft&&sn(o,Math.min(o.display.scroller.scrollLeft,r.maxScrollLeft),!0),o.display.maxLineChanged=!1);var f=r.focus&&r.focus==ye(_e(o));r.preparedSelection&&o.display.input.showSelection(r.preparedSelection,f),(r.updatedDisplay||r.startHeight!=o.doc.height)&&Xn(o,r.barMeasure),r.updatedDisplay&&Ch(o,r.barMeasure),r.selectionChanged&&vh(o),o.state.focused&&r.updateInput&&o.display.input.reset(r.typing),f&&Xc(r.cm)}function cy(r){var o=r.cm,f=o.display,h=o.doc;if(r.updatedDisplay&&_c(o,r.update),f.wheelStartX!=null&&(r.scrollTop!=null||r.scrollLeft!=null||r.scrollToPos)&&(f.wheelStartX=f.wheelStartY=null),r.scrollTop!=null&&Nc(o,r.scrollTop,r.forceScroll),r.scrollLeft!=null&&sn(o,r.scrollLeft,!0,!0),r.scrollToPos){var c=ry(o,ce(h,r.scrollToPos.from),ce(h,r.scrollToPos.to),r.scrollToPos.margin);iy(o,c)}var p=r.maybeHiddenMarkers,m=r.maybeUnhiddenMarkers;if(p)for(var y=0;y<p.length;++y)p[y].lines.length||We(p[y],"hide");if(m)for(var b=0;b<m.length;++b)m[b].lines.length&&We(m[b],"unhide");f.wrapper.offsetHeight&&(h.scrollTop=o.display.scroller.scrollTop),r.changeObjs&&We(o,"changes",o,r.changeObjs),r.update&&r.update.finish()}function Ht(r,o){if(r.curOp)return o();ln(r);try{return o()}finally{an(r)}}function ht(r,o){return function(){if(r.curOp)return o.apply(r,arguments);ln(r);try{return o.apply(r,arguments)}finally{an(r)}}}function At(r){return function(){if(this.curOp)return r.apply(this,arguments);ln(this);try{return r.apply(this,arguments)}finally{an(this)}}}function ft(r){return function(){var o=this.cm;if(!o||o.curOp)return r.apply(this,arguments);ln(o);try{return r.apply(this,arguments)}finally{an(o)}}}function Es(r,o){r.doc.highlightFrontier<r.display.viewTo&&r.state.highlight.set(o,Xt(dy,r))}function dy(r){var o=r.doc;if(!(o.highlightFrontier>=r.display.viewTo)){var f=+new Date+r.options.workTime,h=Ps(r,o.highlightFrontier),c=[];o.iter(h.line,Math.min(o.first+o.size,r.display.viewTo+500),function(p){if(h.line>=r.display.viewFrom){var m=p.styles,y=p.text.length>r.options.maxHighlightLength?or(o.mode,h.state):null,b=Ku(r,p,h,!0);y&&(h.state=y),p.styles=b.styles;var S=p.styleClasses,Q=b.classes;Q?p.styleClasses=Q:S&&(p.styleClasses=null);for(var $=!m||m.length!=p.styles.length||S!=Q&&(!S||!Q||S.bgClass!=Q.bgClass||S.textClass!=Q.textClass),L=0;!$&&L<m.length;++L)$=m[L]!=p.styles[L];$&&c.push(h.line),p.stateAfter=h.save(),h.nextLine()}else p.text.length<=r.options.maxHighlightLength&&Ja(r,p.text,h),p.stateAfter=h.line%5==0?h.save():null,h.nextLine();if(+new Date>f)return Es(r,r.options.workDelay),!0}),o.highlightFrontier=h.line,o.modeFrontier=Math.max(o.modeFrontier,h.line),c.length&&Ht(r,function(){for(var p=0;p<c.length;p++)$r(r,c[p],"text")})}}var Ol=function(r,o,f){var h=r.display;this.viewport=o,this.visible=pl(h,r.doc,o),this.editorIsHidden=!h.wrapper.offsetWidth,this.wrapperHeight=h.wrapper.clientHeight,this.wrapperWidth=h.wrapper.clientWidth,this.oldDisplayWidth=en(r),this.force=f,this.dims=ph(r),this.events=[]};Ol.prototype.signal=function(r,o){Tt(r,o)&&this.events.push(arguments)},Ol.prototype.finish=function(){for(var r=0;r<this.events.length;r++)We.apply(null,this.events[r])};function py(r){var o=r.display;!o.scrollbarsClipped&&o.scroller.offsetWidth&&(o.nativeBarWidth=o.scroller.offsetWidth-o.scroller.clientWidth,o.heightForcer.style.height=Ni(r)+"px",o.sizer.style.marginBottom=-o.nativeBarWidth+"px",o.sizer.style.borderRightWidth=Ni(r)+"px",o.scrollbarsClipped=!0)}function gy(r){if(r.hasFocus())return null;var o=ye(_e(r));if(!o||!Ee(r.display.lineDiv,o))return null;var f={activeElt:o};if(window.getSelection){var h=di(r).getSelection();h.anchorNode&&h.extend&&Ee(r.display.lineDiv,h.anchorNode)&&(f.anchorNode=h.anchorNode,f.anchorOffset=h.anchorOffset,f.focusNode=h.focusNode,f.focusOffset=h.focusOffset)}return f}function Oy(r){if(!(!r||!r.activeElt||r.activeElt==ye(r.activeElt.ownerDocument))&&(r.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(r.activeElt.nodeName)&&r.anchorNode&&Ee(document.body,r.anchorNode)&&Ee(document.body,r.focusNode))){var o=r.activeElt.ownerDocument,f=o.defaultView.getSelection(),h=o.createRange();h.setEnd(r.anchorNode,r.anchorOffset),h.collapse(!1),f.removeAllRanges(),f.addRange(h),f.extend(r.focusNode,r.focusOffset)}}function wh(r,o){var f=r.display,h=r.doc;if(o.editorIsHidden)return Pr(r),!1;if(!o.force&&o.visible.from>=f.viewFrom&&o.visible.to<=f.viewTo&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo)&&f.renderedView==f.view&&Dc(r)==0)return!1;qc(r)&&(Pr(r),o.dims=ph(r));var c=h.first+h.size,p=Math.max(o.visible.from-r.options.viewportMargin,h.first),m=Math.min(c,o.visible.to+r.options.viewportMargin);f.viewFrom<p&&p-f.viewFrom<20&&(p=Math.max(h.first,f.viewFrom)),f.viewTo>m&&f.viewTo-m<20&&(m=Math.min(c,f.viewTo)),ar&&(p=rh(r.doc,p),m=cc(r.doc,m));var y=p!=f.viewFrom||m!=f.viewTo||f.lastWrapHeight!=o.wrapperHeight||f.lastWrapWidth!=o.wrapperWidth;ey(r,p,m),f.viewOffset=hr(ie(r.doc,f.viewFrom)),r.display.mover.style.top=f.viewOffset+"px";var b=Dc(r);if(!y&&b==0&&!o.force&&f.renderedView==f.view&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo))return!1;var S=gy(r);return b>4&&(f.lineDiv.style.display="none"),my(r,f.updateLineNumbers,o.dims),b>4&&(f.lineDiv.style.display=""),f.renderedView=f.view,Oy(S),I(f.cursorDiv),I(f.selectionDiv),f.gutters.style.height=f.sizer.style.minHeight=0,y&&(f.lastWrapHeight=o.wrapperHeight,f.lastWrapWidth=o.wrapperWidth,Es(r,400)),f.updateLineNumbers=null,!0}function _c(r,o){for(var f=o.viewport,h=!0;;h=!1){if(!h||!r.options.lineWrapping||o.oldDisplayWidth==en(r)){if(f&&f.top!=null&&(f={top:Math.min(r.doc.height+lh(r.display)-ah(r),f.top)}),o.visible=pl(r.display,r.doc,f),o.visible.from>=r.display.viewFrom&&o.visible.to<=r.display.viewTo)break}else h&&(o.visible=pl(r.display,r.doc,f));if(!wh(r,o))break;dl(r);var c=Ws(r);Rs(r),Xn(r,c),Ch(r,c),o.force=!1}o.signal(r,"update",r),(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo)&&(o.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo)}function kh(r,o){var f=new Ol(r,o);if(wh(r,f)){dl(r),_c(r,f);var h=Ws(r);Rs(r),Xn(r,h),Ch(r,h),f.finish()}}function my(r,o,f){var h=r.display,c=r.options.lineNumbers,p=h.lineDiv,m=p.firstChild;function y(X){var N=X.nextSibling;return O&&U&&r.display.currentWheelTarget==X?X.style.display="none":X.parentNode.removeChild(X),N}for(var b=h.view,S=h.viewFrom,Q=0;Q<b.length;Q++){var $=b[Q];if(!$.hidden)if(!$.node||$.node.parentNode!=p){var L=zv(r,$,S,f);p.insertBefore(L,m)}else{for(;m!=$.node;)m=y(m);var A=c&&o!=null&&o<=S&&$.lineNumber;$.changes&&(Se($.changes,"gutter")>-1&&(A=!1),mc(r,$,S,f)),A&&(I($.lineNumber),$.lineNumber.appendChild(document.createTextNode(P(r.options,S)))),m=$.node.nextSibling}S+=$.size}for(;m;)m=y(m)}function Qh(r){var o=r.gutters.offsetWidth;r.sizer.style.marginLeft=o+"px",at(r,"gutterChanged",r)}function Ch(r,o){r.display.sizer.style.minHeight=o.docHeight+"px",r.display.heightForcer.style.top=o.docHeight+"px",r.display.gutters.style.height=o.docHeight+r.display.barHeight+Ni(r)+"px"}function jc(r){var o=r.display,f=o.view;if(!(!o.alignWidgets&&(!o.gutters.firstChild||!r.options.fixedGutter))){for(var h=gh(o)-o.scroller.scrollLeft+r.doc.scrollLeft,c=o.gutters.offsetWidth,p=h+"px",m=0;m<f.length;m++)if(!f[m].hidden){r.options.fixedGutter&&(f[m].gutter&&(f[m].gutter.style.left=p),f[m].gutterBackground&&(f[m].gutterBackground.style.left=p));var y=f[m].alignable;if(y)for(var b=0;b<y.length;b++)y[b].style.left=p}r.options.fixedGutter&&(o.gutters.style.left=h+c+"px")}}function qc(r){if(!r.options.lineNumbers)return!1;var o=r.doc,f=P(r.options,o.first+o.size-1),h=r.display;if(f.length!=h.lineNumChars){var c=h.measure.appendChild(T("div",[T("div",f)],"CodeMirror-linenumber CodeMirror-gutter-elt")),p=c.firstChild.offsetWidth,m=c.offsetWidth-p;return h.lineGutter.style.width="",h.lineNumInnerWidth=Math.max(p,h.lineGutter.offsetWidth-m)+1,h.lineNumWidth=h.lineNumInnerWidth+m,h.lineNumChars=h.lineNumInnerWidth?f.length:-1,h.lineGutter.style.width=h.lineNumWidth+"px",Qh(r.display),!0}return!1}function $h(r,o){for(var f=[],h=!1,c=0;c<r.length;c++){var p=r[c],m=null;if(typeof p!="string"&&(m=p.style,p=p.className),p=="CodeMirror-linenumbers")if(o)h=!0;else continue;f.push({className:p,style:m})}return o&&!h&&f.push({className:"CodeMirror-linenumbers",style:null}),f}function Gc(r){var o=r.gutters,f=r.gutterSpecs;I(o),r.lineGutter=null;for(var h=0;h<f.length;++h){var c=f[h],p=c.className,m=c.style,y=o.appendChild(T("div",null,"CodeMirror-gutter "+p));m&&(y.style.cssText=m),p=="CodeMirror-linenumbers"&&(r.lineGutter=y,y.style.width=(r.lineNumWidth||1)+"px")}o.style.display=f.length?"":"none",Qh(r)}function Is(r){Gc(r.display),It(r),jc(r)}function vy(r,o,f,h){var c=this;this.input=f,c.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),c.scrollbarFiller.setAttribute("cm-not-content","true"),c.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),c.gutterFiller.setAttribute("cm-not-content","true"),c.lineDiv=De("div",null,"CodeMirror-code"),c.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),c.cursorDiv=T("div",null,"CodeMirror-cursors"),c.measure=T("div",null,"CodeMirror-measure"),c.lineMeasure=T("div",null,"CodeMirror-measure"),c.lineSpace=De("div",[c.measure,c.lineMeasure,c.selectionDiv,c.cursorDiv,c.lineDiv],null,"position: relative; outline: none");var p=De("div",[c.lineSpace],"CodeMirror-lines");c.mover=T("div",[p],null,"position: relative"),c.sizer=T("div",[c.mover],"CodeMirror-sizer"),c.sizerWidth=null,c.heightForcer=T("div",null,null,"position: absolute; height: "+_o+"px; width: 1px;"),c.gutters=T("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=T("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=T("div",[c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),x&&k>=105&&(c.wrapper.style.clipPath="inset(0px)"),c.wrapper.setAttribute("translate","no"),d&&g<8&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),!O&&!(s&&z)&&(c.scroller.draggable=!0),r&&(r.appendChild?r.appendChild(c.wrapper):r(c.wrapper)),c.viewFrom=c.viewTo=o.first,c.reportedViewFrom=c.reportedViewTo=o.first,c.view=[],c.renderedView=null,c.externalMeasured=null,c.viewOffset=0,c.lastWrapHeight=c.lastWrapWidth=0,c.updateLineNumbers=null,c.nativeBarWidth=c.barHeight=c.barWidth=0,c.scrollbarsClipped=!1,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.alignWidgets=!1,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c.shift=!1,c.selForContextMenu=null,c.activeTouch=null,c.gutterSpecs=$h(h.gutters,h.lineNumbers),Gc(c),f.init(c)}var ml=0,ur=null;d?ur=-.53:s?ur=15:x?ur=-.7:R&&(ur=-1/3);function Fc(r){var o=r.wheelDeltaX,f=r.wheelDeltaY;return o==null&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(o=r.detail),f==null&&r.detail&&r.axis==r.VERTICAL_AXIS?f=r.detail:f==null&&(f=r.wheelDelta),{x:o,y:f}}function yy(r){var o=Fc(r);return o.x*=ur,o.y*=ur,o}function Hc(r,o){x&&k==102&&(r.display.chromeScrollHack==null?r.display.sizer.style.pointerEvents="none":clearTimeout(r.display.chromeScrollHack),r.display.chromeScrollHack=setTimeout(function(){r.display.chromeScrollHack=null,r.display.sizer.style.pointerEvents=""},100));var f=Fc(o),h=f.x,c=f.y,p=ur;o.deltaMode===0&&(h=o.deltaX,c=o.deltaY,p=1);var m=r.display,y=m.scroller,b=y.scrollWidth>y.clientWidth,S=y.scrollHeight>y.clientHeight;if(h&&b||c&&S){if(c&&U&&O){e:for(var Q=o.target,$=m.view;Q!=y;Q=Q.parentNode)for(var L=0;L<$.length;L++)if($[L].node==Q){r.display.currentWheelTarget=Q;break e}}if(h&&!s&&!C&&p!=null){c&&S&&Ds(r,Math.max(0,y.scrollTop+c*p)),sn(r,Math.max(0,y.scrollLeft+h*p)),(!c||c&&S)&&xt(o),m.wheelStartX=null;return}if(c&&p!=null){var A=c*p,X=r.doc.scrollTop,N=X+m.wrapper.clientHeight;A<0?X=Math.max(0,X+A-50):N=Math.min(r.doc.height,N+A+50),kh(r,{top:X,bottom:N})}ml<20&&o.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=y.scrollLeft,m.wheelStartY=y.scrollTop,m.wheelDX=h,m.wheelDY=c,setTimeout(function(){if(m.wheelStartX!=null){var _=y.scrollLeft-m.wheelStartX,q=y.scrollTop-m.wheelStartY,V=q&&m.wheelDY&&q/m.wheelDY||_&&m.wheelDX&&_/m.wheelDX;m.wheelStartX=m.wheelStartY=null,V&&(ur=(ur*ml+V)/(ml+1),++ml)}},200)):(m.wheelDX+=h,m.wheelDY+=c))}}var si=function(r,o){this.ranges=r,this.primIndex=o};si.prototype.primary=function(){return this.ranges[this.primIndex]},si.prototype.equals=function(r){if(r==this)return!0;if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length)return!1;for(var o=0;o<this.ranges.length;o++){var f=this.ranges[o],h=r.ranges[o];if(!ue(f.anchor,h.anchor)||!ue(f.head,h.head))return!1}return!0},si.prototype.deepCopy=function(){for(var r=[],o=0;o<this.ranges.length;o++)r[o]=new Te(be(this.ranges[o].anchor),be(this.ranges[o].head));return new si(r,this.primIndex)},si.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++)if(!this.ranges[r].empty())return!0;return!1},si.prototype.contains=function(r,o){o||(o=r);for(var f=0;f<this.ranges.length;f++){var h=this.ranges[f];if(W(o,h.from())>=0&&W(r,h.to())<=0)return f}return-1};var Te=function(r,o){this.anchor=r,this.head=o};Te.prototype.from=function(){return st(this.anchor,this.head)},Te.prototype.to=function(){return $e(this.anchor,this.head)},Te.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function $i(r,o,f){var h=r&&r.options.selectionsMayTouch,c=o[f];o.sort(function(L,A){return W(L.from(),A.from())}),f=Se(o,c);for(var p=1;p<o.length;p++){var m=o[p],y=o[p-1],b=W(y.to(),m.from());if(h&&!m.empty()?b>0:b>=0){var S=st(y.from(),m.from()),Q=$e(y.to(),m.to()),$=y.empty()?m.from()==m.head:y.from()==y.head;p<=f&&--f,o.splice(--p,2,new Te($?Q:S,$?S:Q))}}return new si(o,f)}function Tr(r,o){return new si([new Te(r,o||r)],0)}function Zr(r){return r.text?Z(r.from.line+r.text.length-1,xe(r.text).length+(r.text.length==1?r.from.ch:0)):r.to}function Vc(r,o){if(W(r,o.from)<0)return r;if(W(r,o.to)<=0)return Zr(o);var f=r.line+o.text.length-(o.to.line-o.from.line)-1,h=r.ch;return r.line==o.to.line&&(h+=Zr(o).ch-o.to.ch),Z(f,h)}function Ph(r,o){for(var f=[],h=0;h<r.sel.ranges.length;h++){var c=r.sel.ranges[h];f.push(new Te(Vc(c.anchor,o),Vc(c.head,o)))}return $i(r.cm,f,r.sel.primIndex)}function Kc(r,o,f){return r.line==o.line?Z(f.line,r.ch-o.ch+f.ch):Z(f.line+(r.line-o.line),r.ch)}function by(r,o,f){for(var h=[],c=Z(r.first,0),p=c,m=0;m<o.length;m++){var y=o[m],b=Kc(y.from,c,p),S=Kc(Zr(y),c,p);if(c=y.to,p=S,f=="around"){var Q=r.sel.ranges[m],$=W(Q.head,Q.anchor)<0;h[m]=new Te($?S:b,$?b:S)}else h[m]=new Te(b,b)}return new si(h,r.sel.primIndex)}function Th(r){r.doc.mode=sr(r.options,r.doc.modeOption),Ns(r)}function Ns(r){r.doc.iter(function(o){o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null)}),r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first,Es(r,100),r.state.modeGen++,r.curOp&&It(r)}function Jc(r,o){return o.from.ch==0&&o.to.ch==0&&xe(o.text)==""&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function Zh(r,o,f,h){function c(V){return f?f[V]:null}function p(V,G,ee){Pv(V,G,ee,h),at(V,"change",V,o)}function m(V,G){for(var ee=[],ae=V;ae<G;++ae)ee.push(new An(S[ae],c(ae),h));return ee}var y=o.from,b=o.to,S=o.text,Q=ie(r,y.line),$=ie(r,b.line),L=xe(S),A=c(S.length-1),X=b.line-y.line;if(o.full)r.insert(0,m(0,S.length)),r.remove(S.length,r.size-S.length);else if(Jc(r,o)){var N=m(0,S.length-1);p($,$.text,A),X&&r.remove(y.line,X),N.length&&r.insert(y.line,N)}else if(Q==$)if(S.length==1)p(Q,Q.text.slice(0,y.ch)+L+Q.text.slice(b.ch),A);else{var _=m(1,S.length-1);_.push(new An(L+Q.text.slice(b.ch),A,h)),p(Q,Q.text.slice(0,y.ch)+S[0],c(0)),r.insert(y.line+1,_)}else if(S.length==1)p(Q,Q.text.slice(0,y.ch)+S[0]+$.text.slice(b.ch),c(0)),r.remove(y.line+1,X);else{p(Q,Q.text.slice(0,y.ch)+S[0],c(0)),p($,L+$.text.slice(b.ch),A);var q=m(1,S.length-1);X>1&&r.remove(y.line+1,X-1),r.insert(y.line+1,q)}at(r,"change",r,o)}function Ar(r,o,f){function h(c,p,m){if(c.linked)for(var y=0;y<c.linked.length;++y){var b=c.linked[y];if(b.doc!=p){var S=m&&b.sharedHist;f&&!S||(o(b.doc,S),h(b.doc,c,S))}}}h(r,null,!0)}function ed(r,o){if(o.cm)throw new Error("This document is already in use.");r.doc=o,o.cm=r,Oh(r),Th(r),td(r),r.options.direction=o.direction,r.options.lineWrapping||sh(r),r.options.mode=o.modeOption,It(r)}function td(r){(r.doc.direction=="rtl"?Ce:Ae)(r.display.lineDiv,"CodeMirror-rtl")}function Sy(r){Ht(r,function(){td(r),It(r)})}function vl(r){this.done=[],this.undone=[],this.undoDepth=r?r.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=r?r.maxGeneration:1}function Ah(r,o){var f={from:be(o.from),to:Zr(o),text:lr(r,o.from,o.to)};return nd(r,f,o.from.line,o.to.line+1),Ar(r,function(h){return nd(h,f,o.from.line,o.to.line+1)},!0),f}function id(r){for(;r.length;){var o=xe(r);if(o.ranges)r.pop();else break}}function xy(r,o){if(o)return id(r.done),xe(r.done);if(r.done.length&&!xe(r.done).ranges)return xe(r.done);if(r.done.length>1&&!r.done[r.done.length-2].ranges)return r.done.pop(),xe(r.done)}function rd(r,o,f,h){var c=r.history;c.undone.length=0;var p=+new Date,m,y;if((c.lastOp==h||c.lastOrigin==o.origin&&o.origin&&(o.origin.charAt(0)=="+"&&c.lastModTime>p-(r.cm?r.cm.options.historyEventDelay:500)||o.origin.charAt(0)=="*"))&&(m=xy(c,c.lastOp==h)))y=xe(m.changes),W(o.from,o.to)==0&&W(o.from,y.to)==0?y.to=Zr(o):m.changes.push(Ah(r,o));else{var b=xe(c.done);for((!b||!b.ranges)&&yl(r.sel,c.done),m={changes:[Ah(r,o)],generation:c.generation},c.done.push(m);c.done.length>c.undoDepth;)c.done.shift(),c.done[0].ranges||c.done.shift()}c.done.push(f),c.generation=++c.maxGeneration,c.lastModTime=c.lastSelTime=p,c.lastOp=c.lastSelOp=h,c.lastOrigin=c.lastSelOrigin=o.origin,y||We(r,"historyAdded")}function wy(r,o,f,h){var c=o.charAt(0);return c=="*"||c=="+"&&f.ranges.length==h.ranges.length&&f.somethingSelected()==h.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}function ky(r,o,f,h){var c=r.history,p=h&&h.origin;f==c.lastSelOp||p&&c.lastSelOrigin==p&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==p||wy(r,p,xe(c.done),o))?c.done[c.done.length-1]=o:yl(o,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=p,c.lastSelOp=f,h&&h.clearRedo!==!1&&id(c.undone)}function yl(r,o){var f=xe(o);f&&f.ranges&&f.equals(r)||o.push(r)}function nd(r,o,f,h){var c=o["spans_"+r.id],p=0;r.iter(Math.max(r.first,f),Math.min(r.first+r.size,h),function(m){m.markedSpans&&((c||(c=o["spans_"+r.id]={}))[p]=m.markedSpans),++p})}function Qy(r){if(!r)return null;for(var o,f=0;f<r.length;++f)r[f].marker.explicitlyCleared?o||(o=r.slice(0,f)):o&&o.push(r[f]);return o?o.length?o:null:r}function Cy(r,o){var f=o["spans_"+r.id];if(!f)return null;for(var h=[],c=0;c<o.text.length;++c)h.push(Qy(f[c]));return h}function sd(r,o){var f=Cy(r,o),h=th(r,o);if(!f)return h;if(!h)return f;for(var c=0;c<f.length;++c){var p=f[c],m=h[c];if(p&&m)e:for(var y=0;y<m.length;++y){for(var b=m[y],S=0;S<p.length;++S)if(p[S].marker==b.marker)continue e;p.push(b)}else m&&(f[c]=m)}return f}function En(r,o,f){for(var h=[],c=0;c<r.length;++c){var p=r[c];if(p.ranges){h.push(f?si.prototype.deepCopy.call(p):p);continue}var m=p.changes,y=[];h.push({changes:y});for(var b=0;b<m.length;++b){var S=m[b],Q=void 0;if(y.push({from:S.from,to:S.to,text:S.text}),o)for(var $ in S)(Q=$.match(/^spans_(\d+)$/))&&Se(o,Number(Q[1]))>-1&&(xe(y)[$]=S[$],delete S[$])}}return h}function Mh(r,o,f,h){if(h){var c=r.anchor;if(f){var p=W(o,c)<0;p!=W(f,c)<0?(c=o,o=f):p!=W(o,f)<0&&(o=f)}return new Te(c,o)}else return new Te(f||o,o)}function bl(r,o,f,h,c){c==null&&(c=r.cm&&(r.cm.display.shift||r.extend)),wt(r,new si([Mh(r.sel.primary(),o,f,c)],0),h)}function od(r,o,f){for(var h=[],c=r.cm&&(r.cm.display.shift||r.extend),p=0;p<r.sel.ranges.length;p++)h[p]=Mh(r.sel.ranges[p],o[p],null,c);var m=$i(r.cm,h,r.sel.primIndex);wt(r,m,f)}function Yh(r,o,f,h){var c=r.sel.ranges.slice(0);c[o]=f,wt(r,$i(r.cm,c,r.sel.primIndex),h)}function ld(r,o,f,h){wt(r,Tr(o,f),h)}function $y(r,o,f){var h={ranges:o.ranges,update:function(c){this.ranges=[];for(var p=0;p<c.length;p++)this.ranges[p]=new Te(ce(r,c[p].anchor),ce(r,c[p].head))},origin:f&&f.origin};return We(r,"beforeSelectionChange",r,h),r.cm&&We(r.cm,"beforeSelectionChange",r.cm,h),h.ranges!=o.ranges?$i(r.cm,h.ranges,h.ranges.length-1):o}function ad(r,o,f){var h=r.history.done,c=xe(h);c&&c.ranges?(h[h.length-1]=o,Sl(r,o,f)):wt(r,o,f)}function wt(r,o,f){Sl(r,o,f),ky(r,r.sel,r.cm?r.cm.curOp.id:NaN,f)}function Sl(r,o,f){(Tt(r,"beforeSelectionChange")||r.cm&&Tt(r.cm,"beforeSelectionChange"))&&(o=$y(r,o,f));var h=f&&f.bias||(W(o.primary().head,r.sel.primary().head)<0?-1:1);hd(r,ud(r,o,h,!0)),!(f&&f.scroll===!1)&&r.cm&&r.cm.getOption("readOnly")!="nocursor"&&Wn(r.cm)}function hd(r,o){o.equals(r.sel)||(r.sel=o,r.cm&&(r.cm.curOp.updateInput=1,r.cm.curOp.selectionChanged=!0,Ho(r.cm)),at(r,"cursorActivity",r))}function fd(r){hd(r,ud(r,r.sel,null,!1))}function ud(r,o,f,h){for(var c,p=0;p<o.ranges.length;p++){var m=o.ranges[p],y=o.ranges.length==r.sel.ranges.length&&r.sel.ranges[p],b=xl(r,m.anchor,y&&y.anchor,f,h),S=m.head==m.anchor?b:xl(r,m.head,y&&y.head,f,h);(c||b!=m.anchor||S!=m.head)&&(c||(c=o.ranges.slice(0,p)),c[p]=new Te(b,S))}return c?$i(r.cm,c,o.primIndex):o}function In(r,o,f,h,c){var p=ie(r,o.line);if(p.markedSpans)for(var m=0;m<p.markedSpans.length;++m){var y=p.markedSpans[m],b=y.marker,S="selectLeft"in b?!b.selectLeft:b.inclusiveLeft,Q="selectRight"in b?!b.selectRight:b.inclusiveRight;if((y.from==null||(S?y.from<=o.ch:y.from<o.ch))&&(y.to==null||(Q?y.to>=o.ch:y.to>o.ch))){if(c&&(We(b,"beforeCursorEnter"),b.explicitlyCleared))if(p.markedSpans){--m;continue}else break;if(!b.atomic)continue;if(f){var $=b.find(h<0?1:-1),L=void 0;if((h<0?Q:S)&&($=cd(r,$,-h,$&&$.line==o.line?p:null)),$&&$.line==o.line&&(L=W($,f))&&(h<0?L<0:L>0))return In(r,$,o,h,c)}var A=b.find(h<0?-1:1);return(h<0?S:Q)&&(A=cd(r,A,h,A.line==o.line?p:null)),A?In(r,A,o,h,c):null}}return o}function xl(r,o,f,h,c){var p=h||1,m=In(r,o,f,p,c)||!c&&In(r,o,f,p,!0)||In(r,o,f,-p,c)||!c&&In(r,o,f,-p,!0);return m||(r.cantEdit=!0,Z(r.first,0))}function cd(r,o,f,h){return f<0&&o.ch==0?o.line>r.first?ce(r,Z(o.line-1)):null:f>0&&o.ch==(h||ie(r,o.line)).text.length?o.line<r.first+r.size-1?Z(o.line+1,0):null:new Z(o.line,o.ch+f)}function dd(r){r.setSelection(Z(r.firstLine(),0),Z(r.lastLine()),je)}function pd(r,o,f){var h={canceled:!1,from:o.from,to:o.to,text:o.text,origin:o.origin,cancel:function(){return h.canceled=!0}};return f&&(h.update=function(c,p,m,y){c&&(h.from=ce(r,c)),p&&(h.to=ce(r,p)),m&&(h.text=m),y!==void 0&&(h.origin=y)}),We(r,"beforeChange",r,h),r.cm&&We(r.cm,"beforeChange",r.cm,h),h.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:h.from,to:h.to,text:h.text,origin:h.origin}}function Nn(r,o,f){if(r.cm){if(!r.cm.curOp)return ht(r.cm,Nn)(r,o,f);if(r.cm.state.suppressEdits)return}if(!((Tt(r,"beforeChange")||r.cm&&Tt(r.cm,"beforeChange"))&&(o=pd(r,o,!0),!o))){var h=sc&&!f&&kv(r,o.from,o.to);if(h)for(var c=h.length-1;c>=0;--c)gd(r,{from:h[c].from,to:h[c].to,text:c?[""]:o.text,origin:o.origin});else gd(r,o)}}function gd(r,o){if(!(o.text.length==1&&o.text[0]==""&&W(o.from,o.to)==0)){var f=Ph(r,o);rd(r,o,f,r.cm?r.cm.curOp.id:NaN),Bs(r,o,f,th(r,o));var h=[];Ar(r,function(c,p){!p&&Se(h,c.history)==-1&&(yd(c.history,o),h.push(c.history)),Bs(c,o,null,th(c,o))})}}function wl(r,o,f){var h=r.cm&&r.cm.state.suppressEdits;if(!(h&&!f)){for(var c=r.history,p,m=r.sel,y=o=="undo"?c.done:c.undone,b=o=="undo"?c.undone:c.done,S=0;S<y.length&&(p=y[S],!(f?p.ranges&&!p.equals(r.sel):!p.ranges));S++);if(S!=y.length){for(c.lastOrigin=c.lastSelOrigin=null;;)if(p=y.pop(),p.ranges){if(yl(p,b),f&&!p.equals(r.sel)){wt(r,p,{clearRedo:!1});return}m=p}else if(h){y.push(p);return}else break;var Q=[];yl(m,b),b.push({changes:Q,generation:c.generation}),c.generation=p.generation||++c.maxGeneration;for(var $=Tt(r,"beforeChange")||r.cm&&Tt(r.cm,"beforeChange"),L=function(N){var _=p.changes[N];if(_.origin=o,$&&!pd(r,_,!1))return y.length=0,{};Q.push(Ah(r,_));var q=N?Ph(r,_):xe(y);Bs(r,_,q,sd(r,_)),!N&&r.cm&&r.cm.scrollIntoView({from:_.from,to:Zr(_)});var V=[];Ar(r,function(G,ee){!ee&&Se(V,G.history)==-1&&(yd(G.history,_),V.push(G.history)),Bs(G,_,null,sd(G,_))})},A=p.changes.length-1;A>=0;--A){var X=L(A);if(X)return X.v}}}}function Od(r,o){if(o!=0&&(r.first+=o,r.sel=new si(Qn(r.sel.ranges,function(c){return new Te(Z(c.anchor.line+o,c.anchor.ch),Z(c.head.line+o,c.head.ch))}),r.sel.primIndex),r.cm)){It(r.cm,r.first,r.first-o,o);for(var f=r.cm.display,h=f.viewFrom;h<f.viewTo;h++)$r(r.cm,h,"gutter")}}function Bs(r,o,f,h){if(r.cm&&!r.cm.curOp)return ht(r.cm,Bs)(r,o,f,h);if(o.to.line<r.first){Od(r,o.text.length-1-(o.to.line-o.from.line));return}if(!(o.from.line>r.lastLine())){if(o.from.line<r.first){var c=o.text.length-1-(r.first-o.from.line);Od(r,c),o={from:Z(r.first,0),to:Z(o.to.line+c,o.to.ch),text:[xe(o.text)],origin:o.origin}}var p=r.lastLine();o.to.line>p&&(o={from:o.from,to:Z(p,ie(r,p).text.length),text:[o.text[0]],origin:o.origin}),o.removed=lr(r,o.from,o.to),f||(f=Ph(r,o)),r.cm?Py(r.cm,o,h):Zh(r,o,h),Sl(r,f,je),r.cantEdit&&xl(r,Z(r.firstLine(),0))&&(r.cantEdit=!1)}}function Py(r,o,f){var h=r.doc,c=r.display,p=o.from,m=o.to,y=!1,b=p.line;r.options.lineWrapping||(b=Pe(Qi(ie(h,p.line))),h.iter(b,m.line+1,function(A){if(A==c.maxLine)return y=!0,!0})),h.sel.contains(o.from,o.to)>-1&&Ho(r),Zh(h,o,f,Lc(r)),r.options.lineWrapping||(h.iter(b,p.line+o.text.length,function(A){var X=ol(A);X>c.maxLineLength&&(c.maxLine=A,c.maxLineLength=X,c.maxLineChanged=!0,y=!1)}),y&&(r.curOp.updateMaxLine=!0)),mv(h,p.line),Es(r,400);var S=o.text.length-(m.line-p.line)-1;o.full?It(r):p.line==m.line&&o.text.length==1&&!Jc(r.doc,o)?$r(r,p.line,"text"):It(r,p.line,m.line+1,S);var Q=Tt(r,"changes"),$=Tt(r,"change");if($||Q){var L={from:p,to:m,text:o.text,removed:o.removed,origin:o.origin};$&&at(r,"change",r,L),Q&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(L)}r.display.selForContextMenu=null}function Bn(r,o,f,h,c){var p;h||(h=f),W(h,f)<0&&(p=[h,f],f=p[0],h=p[1]),typeof o=="string"&&(o=r.splitLines(o)),Nn(r,{from:f,to:h,text:o,origin:c})}function md(r,o,f,h){f<r.line?r.line+=h:o<r.line&&(r.line=o,r.ch=0)}function vd(r,o,f,h){for(var c=0;c<r.length;++c){var p=r[c],m=!0;if(p.ranges){p.copied||(p=r[c]=p.deepCopy(),p.copied=!0);for(var y=0;y<p.ranges.length;y++)md(p.ranges[y].anchor,o,f,h),md(p.ranges[y].head,o,f,h);continue}for(var b=0;b<p.changes.length;++b){var S=p.changes[b];if(f<S.from.line)S.from=Z(S.from.line+h,S.from.ch),S.to=Z(S.to.line+h,S.to.ch);else if(o<=S.to.line){m=!1;break}}m||(r.splice(0,c+1),c=0)}}function yd(r,o){var f=o.from.line,h=o.to.line,c=o.text.length-(h-f)-1;vd(r.done,f,h,c),vd(r.undone,f,h,c)}function Us(r,o,f,h){var c=o,p=o;return typeof o=="number"?p=ie(r,ni(r,o)):c=Pe(o),c==null?null:(h(p,c)&&r.cm&&$r(r.cm,c,f),p)}function zs(r){this.lines=r,this.parent=null;for(var o=0,f=0;f<r.length;++f)r[f].parent=this,o+=r[f].height;this.height=o}zs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,o){for(var f=r,h=r+o;f<h;++f){var c=this.lines[f];this.height-=c.height,Tv(c),at(c,"delete")}this.lines.splice(r,o)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(r,o,f){this.height+=f,this.lines=this.lines.slice(0,r).concat(o).concat(this.lines.slice(r));for(var h=0;h<o.length;++h)o[h].parent=this},iterN:function(r,o,f){for(var h=r+o;r<h;++r)if(f(this.lines[r]))return!0}};function _s(r){this.children=r;for(var o=0,f=0,h=0;h<r.length;++h){var c=r[h];o+=c.chunkSize(),f+=c.height,c.parent=this}this.size=o,this.height=f,this.parent=null}_s.prototype={chunkSize:function(){return this.size},removeInner:function(r,o){this.size-=o;for(var f=0;f<this.children.length;++f){var h=this.children[f],c=h.chunkSize();if(r<c){var p=Math.min(o,c-r),m=h.height;if(h.removeInner(r,p),this.height-=m-h.height,c==p&&(this.children.splice(f--,1),h.parent=null),(o-=p)==0)break;r=0}else r-=c}if(this.size-o<25&&(this.children.length>1||!(this.children[0]instanceof zs))){var y=[];this.collapse(y),this.children=[new zs(y)],this.children[0].parent=this}},collapse:function(r){for(var o=0;o<this.children.length;++o)this.children[o].collapse(r)},insertInner:function(r,o,f){this.size+=o.length,this.height+=f;for(var h=0;h<this.children.length;++h){var c=this.children[h],p=c.chunkSize();if(r<=p){if(c.insertInner(r,o,f),c.lines&&c.lines.length>50){for(var m=c.lines.length%25+25,y=m;y<c.lines.length;){var b=new zs(c.lines.slice(y,y+=25));c.height-=b.height,this.children.splice(++h,0,b),b.parent=this}c.lines=c.lines.slice(0,m),this.maybeSpill()}break}r-=p}},maybeSpill:function(){if(!(this.children.length<=10)){var r=this;do{var o=r.children.splice(r.children.length-5,5),f=new _s(o);if(r.parent){r.size-=f.size,r.height-=f.height;var c=Se(r.parent.children,r);r.parent.children.splice(c+1,0,f)}else{var h=new _s(r.children);h.parent=r,r.children=[h,f],r=h}f.parent=r.parent}while(r.children.length>10);r.parent.maybeSpill()}},iterN:function(r,o,f){for(var h=0;h<this.children.length;++h){var c=this.children[h],p=c.chunkSize();if(r<p){var m=Math.min(o,p-r);if(c.iterN(r,m,f))return!0;if((o-=m)==0)break;r=0}else r-=p}}};var js=function(r,o,f){if(f)for(var h in f)f.hasOwnProperty(h)&&(this[h]=f[h]);this.doc=r,this.node=o};js.prototype.clear=function(){var r=this.doc.cm,o=this.line.widgets,f=this.line,h=Pe(f);if(!(h==null||!o)){for(var c=0;c<o.length;++c)o[c]==this&&o.splice(c--,1);o.length||(f.widgets=null);var p=Ms(this);vi(f,Math.max(0,f.height-p)),r&&(Ht(r,function(){bd(r,f,-p),$r(r,h,"widget")}),at(r,"lineWidgetCleared",r,this,h))}},js.prototype.changed=function(){var r=this,o=this.height,f=this.doc.cm,h=this.line;this.height=null;var c=Ms(this)-o;c&&(Cr(this.doc,h)||vi(h,h.height+c),f&&Ht(f,function(){f.curOp.forceUpdate=!0,bd(f,h,c),at(f,"lineWidgetChanged",f,r,Pe(h))}))},Zt(js);function bd(r,o,f){hr(o)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&xh(r,f)}function Ty(r,o,f,h){var c=new js(r,f,h),p=r.cm;return p&&c.noHScroll&&(p.display.alignWidgets=!0),Us(r,o,"widget",function(m){var y=m.widgets||(m.widgets=[]);if(c.insertAt==null?y.push(c):y.splice(Math.min(y.length,Math.max(0,c.insertAt)),0,c),c.line=m,p&&!Cr(r,m)){var b=hr(m)<r.scrollTop;vi(m,m.height+Ms(c)),b&&xh(p,c.height),p.curOp.forceUpdate=!0}return!0}),p&&at(p,"lineWidgetAdded",p,c,typeof o=="number"?o:Pe(o)),c}var Sd=0,Mr=function(r,o){this.lines=[],this.type=o,this.doc=r,this.id=++Sd};Mr.prototype.clear=function(){if(!this.explicitlyCleared){var r=this.doc.cm,o=r&&!r.curOp;if(o&&ln(r),Tt(this,"clear")){var f=this.find();f&&at(this,"clear",f.from,f.to)}for(var h=null,c=null,p=0;p<this.lines.length;++p){var m=this.lines[p],y=Ts(m.markedSpans,this);r&&!this.collapsed?$r(r,Pe(m),"text"):r&&(y.to!=null&&(c=Pe(m)),y.from!=null&&(h=Pe(m))),m.markedSpans=bv(m.markedSpans,y),y.from==null&&this.collapsed&&!Cr(this.doc,m)&&r&&vi(m,Rn(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var b=0;b<this.lines.length;++b){var S=Qi(this.lines[b]),Q=ol(S);Q>r.display.maxLineLength&&(r.display.maxLine=S,r.display.maxLineLength=Q,r.display.maxLineChanged=!0)}h!=null&&r&&this.collapsed&&It(r,h,c+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&fd(r.doc)),r&&at(r,"markerCleared",r,this,h,c),o&&an(r),this.parent&&this.parent.clear()}},Mr.prototype.find=function(r,o){r==null&&this.type=="bookmark"&&(r=1);for(var f,h,c=0;c<this.lines.length;++c){var p=this.lines[c],m=Ts(p.markedSpans,this);if(m.from!=null&&(f=Z(o?p:Pe(p),m.from),r==-1))return f;if(m.to!=null&&(h=Z(o?p:Pe(p),m.to),r==1))return h}return f&&{from:f,to:h}},Mr.prototype.changed=function(){var r=this,o=this.find(-1,!0),f=this,h=this.doc.cm;!o||!h||Ht(h,function(){var c=o.line,p=Pe(o.line),m=hh(h,p);if(m&&($c(m),h.curOp.selectionChanged=h.curOp.forceUpdate=!0),h.curOp.updateMaxLine=!0,!Cr(f.doc,c)&&f.height!=null){var y=f.height;f.height=null;var b=Ms(f)-y;b&&vi(c,c.height+b)}at(h,"markerChanged",h,r)})},Mr.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(!o.maybeHiddenMarkers||Se(o.maybeHiddenMarkers,this)==-1)&&(o.maybeUnhiddenMarkers||(o.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)},Mr.prototype.detachLine=function(r){if(this.lines.splice(Se(this.lines,r),1),!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this)}},Zt(Mr);function Un(r,o,f,h,c){if(h&&h.shared)return Zy(r,o,f,h,c);if(r.cm&&!r.cm.curOp)return ht(r.cm,Un)(r,o,f,h,c);var p=new Mr(r,c),m=W(o,f);if(h&&fe(h,p,!1),m>0||m==0&&p.clearWhenEmpty!==!1)return p;if(p.replacedWith&&(p.collapsed=!0,p.widgetNode=De("span",[p.replacedWith],"CodeMirror-widget"),h.handleMouseEvents||p.widgetNode.setAttribute("cm-ignore-events","true"),h.insertLeft&&(p.widgetNode.insertLeft=!0)),p.collapsed){if(uc(r,o.line,o,f,p)||o.line!=f.line&&uc(r,f.line,o,f,p))throw new Error("Inserting collapsed marker partially overlapping an existing one");yv()}p.addToHistory&&rd(r,{from:o,to:f,origin:"markText"},r.sel,NaN);var y=o.line,b=r.cm,S;if(r.iter(y,f.line+1,function($){b&&p.collapsed&&!b.options.lineWrapping&&Qi($)==b.display.maxLine&&(S=!0),p.collapsed&&y!=o.line&&vi($,0),Sv($,new il(p,y==o.line?o.ch:null,y==f.line?f.ch:null),r.cm&&r.cm.curOp),++y}),p.collapsed&&r.iter(o.line,f.line+1,function($){Cr(r,$)&&vi($,0)}),p.clearOnEnter&&H(p,"beforeCursorEnter",function(){return p.clear()}),p.readOnly&&(vv(),(r.history.done.length||r.history.undone.length)&&r.clearHistory()),p.collapsed&&(p.id=++Sd,p.atomic=!0),b){if(S&&(b.curOp.updateMaxLine=!0),p.collapsed)It(b,o.line,f.line+1);else if(p.className||p.startStyle||p.endStyle||p.css||p.attributes||p.title)for(var Q=o.line;Q<=f.line;Q++)$r(b,Q,"text");p.atomic&&fd(b.doc),at(b,"markerAdded",b,p)}return p}var qs=function(r,o){this.markers=r,this.primary=o;for(var f=0;f<r.length;++f)r[f].parent=this};qs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r)this.markers[r].clear();at(this,"clear")}},qs.prototype.find=function(r,o){return this.primary.find(r,o)},Zt(qs);function Zy(r,o,f,h,c){h=fe(h),h.shared=!1;var p=[Un(r,o,f,h,c)],m=p[0],y=h.widgetNode;return Ar(r,function(b){y&&(h.widgetNode=y.cloneNode(!0)),p.push(Un(b,ce(b,o),ce(b,f),h,c));for(var S=0;S<b.linked.length;++S)if(b.linked[S].isParent)return;m=xe(p)}),new qs(p,m)}function xd(r){return r.findMarks(Z(r.first,0),r.clipPos(Z(r.lastLine())),function(o){return o.parent})}function Ay(r,o){for(var f=0;f<o.length;f++){var h=o[f],c=h.find(),p=r.clipPos(c.from),m=r.clipPos(c.to);if(W(p,m)){var y=Un(r,p,m,h.primary,h.primary.type);h.markers.push(y),y.parent=h}}}function My(r){for(var o=function(h){var c=r[h],p=[c.primary.doc];Ar(c.primary.doc,function(b){return p.push(b)});for(var m=0;m<c.markers.length;m++){var y=c.markers[m];Se(p,y.doc)==-1&&(y.parent=null,c.markers.splice(m--,1))}},f=0;f<r.length;f++)o(f)}var Yy=0,Nt=function(r,o,f,h,c){if(!(this instanceof Nt))return new Nt(r,o,f,h,c);f==null&&(f=0),_s.call(this,[new zs([new An("",null)])]),this.first=f,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=f;var p=Z(f,0);this.sel=Tr(p),this.history=new vl(null),this.id=++Yy,this.modeOption=o,this.lineSep=h,this.direction=c=="rtl"?"rtl":"ltr",this.extend=!1,typeof r=="string"&&(r=this.splitLines(r)),Zh(this,{from:p,to:p,text:r}),wt(this,Tr(p),je)};Nt.prototype=qo(_s.prototype,{constructor:Nt,iter:function(r,o,f){f?this.iterN(r-this.first,o-r,f):this.iterN(this.first,this.first+this.size,r)},insert:function(r,o){for(var f=0,h=0;h<o.length;++h)f+=o[h].height;this.insertInner(r-this.first,o,f)},remove:function(r,o){this.removeInner(r-this.first,o)},getValue:function(r){var o=Zn(this,this.first,this.first+this.size);return r===!1?o:o.join(r||this.lineSeparator())},setValue:ft(function(r){var o=Z(this.first,0),f=this.first+this.size-1;Nn(this,{from:o,to:Z(f,ie(this,f).text.length),text:this.splitLines(r),origin:"setValue",full:!0},!0),this.cm&&Ls(this.cm,0,0),wt(this,Tr(o),je)}),replaceRange:function(r,o,f,h){o=ce(this,o),f=f?ce(this,f):o,Bn(this,r,o,f,h)},getRange:function(r,o,f){var h=lr(this,ce(this,r),ce(this,o));return f===!1?h:f===""?h.join(""):h.join(f||this.lineSeparator())},getLine:function(r){var o=this.getLineHandle(r);return o&&o.text},getLineHandle:function(r){if(w(this,r))return ie(this,r)},getLineNumber:function(r){return Pe(r)},getLineHandleVisualStart:function(r){return typeof r=="number"&&(r=ie(this,r)),Qi(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return ce(this,r)},getCursor:function(r){var o=this.sel.primary(),f;return r==null||r=="head"?f=o.head:r=="anchor"?f=o.anchor:r=="end"||r=="to"||r===!1?f=o.to():f=o.from(),f},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ft(function(r,o,f){ld(this,ce(this,typeof r=="number"?Z(r,o||0):r),null,f)}),setSelection:ft(function(r,o,f){ld(this,ce(this,r),ce(this,o||r),f)}),extendSelection:ft(function(r,o,f){bl(this,ce(this,r),o&&ce(this,o),f)}),extendSelections:ft(function(r,o){od(this,Vu(this,r),o)}),extendSelectionsBy:ft(function(r,o){var f=Qn(this.sel.ranges,r);od(this,Vu(this,f),o)}),setSelections:ft(function(r,o,f){if(r.length){for(var h=[],c=0;c<r.length;c++)h[c]=new Te(ce(this,r[c].anchor),ce(this,r[c].head||r[c].anchor));o==null&&(o=Math.min(r.length-1,this.sel.primIndex)),wt(this,$i(this.cm,h,o),f)}}),addSelection:ft(function(r,o,f){var h=this.sel.ranges.slice(0);h.push(new Te(ce(this,r),ce(this,o||r))),wt(this,$i(this.cm,h,h.length-1),f)}),getSelection:function(r){for(var o=this.sel.ranges,f,h=0;h<o.length;h++){var c=lr(this,o[h].from(),o[h].to());f=f?f.concat(c):c}return r===!1?f:f.join(r||this.lineSeparator())},getSelections:function(r){for(var o=[],f=this.sel.ranges,h=0;h<f.length;h++){var c=lr(this,f[h].from(),f[h].to());r!==!1&&(c=c.join(r||this.lineSeparator())),o[h]=c}return o},replaceSelection:function(r,o,f){for(var h=[],c=0;c<this.sel.ranges.length;c++)h[c]=r;this.replaceSelections(h,o,f||"+input")},replaceSelections:ft(function(r,o,f){for(var h=[],c=this.sel,p=0;p<c.ranges.length;p++){var m=c.ranges[p];h[p]={from:m.from(),to:m.to(),text:this.splitLines(r[p]),origin:f}}for(var y=o&&o!="end"&&by(this,h,o),b=h.length-1;b>=0;b--)Nn(this,h[b]);y?ad(this,y):this.cm&&Wn(this.cm)}),undo:ft(function(){wl(this,"undo")}),redo:ft(function(){wl(this,"redo")}),undoSelection:ft(function(){wl(this,"undo",!0)}),redoSelection:ft(function(){wl(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,o=0,f=0,h=0;h<r.done.length;h++)r.done[h].ranges||++o;for(var c=0;c<r.undone.length;c++)r.undone[c].ranges||++f;return{undo:o,redo:f}},clearHistory:function(){var r=this;this.history=new vl(this.history),Ar(this,function(o){return o.history=r.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){return r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:En(this.history.done),undone:En(this.history.undone)}},setHistory:function(r){var o=this.history=new vl(this.history);o.done=En(r.done.slice(0),null,!0),o.undone=En(r.undone.slice(0),null,!0)},setGutterMarker:ft(function(r,o,f){return Us(this,r,"gutter",function(h){var c=h.gutterMarkers||(h.gutterMarkers={});return c[o]=f,!f&&Go(c)&&(h.gutterMarkers=null),!0})}),clearGutter:ft(function(r){var o=this;this.iter(function(f){f.gutterMarkers&&f.gutterMarkers[r]&&Us(o,f,"gutter",function(){return f.gutterMarkers[r]=null,Go(f.gutterMarkers)&&(f.gutterMarkers=null),!0})})}),lineInfo:function(r){var o;if(typeof r=="number"){if(!w(this,r)||(o=r,r=ie(this,r),!r))return null}else if(o=Pe(r),o==null)return null;return{line:o,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},addLineClass:ft(function(r,o,f){return Us(this,r,o=="gutter"?"gutter":"class",function(h){var c=o=="text"?"textClass":o=="background"?"bgClass":o=="gutter"?"gutterClass":"wrapClass";if(!h[c])h[c]=f;else{if(Qe(f).test(h[c]))return!1;h[c]+=" "+f}return!0})}),removeLineClass:ft(function(r,o,f){return Us(this,r,o=="gutter"?"gutter":"class",function(h){var c=o=="text"?"textClass":o=="background"?"bgClass":o=="gutter"?"gutterClass":"wrapClass",p=h[c];if(p)if(f==null)h[c]=null;else{var m=p.match(Qe(f));if(!m)return!1;var y=m.index+m[0].length;h[c]=p.slice(0,m.index)+(!m.index||y==p.length?"":" ")+p.slice(y)||null}else return!1;return!0})}),addLineWidget:ft(function(r,o,f){return Ty(this,r,o,f)}),removeLineWidget:function(r){r.clear()},markText:function(r,o,f){return Un(this,ce(this,r),ce(this,o),f,f&&f.type||"range")},setBookmark:function(r,o){var f={replacedWith:o&&(o.nodeType==null?o.widget:o),insertLeft:o&&o.insertLeft,clearWhenEmpty:!1,shared:o&&o.shared,handleMouseEvents:o&&o.handleMouseEvents};return r=ce(this,r),Un(this,r,r,f,"bookmark")},findMarksAt:function(r){r=ce(this,r);var o=[],f=ie(this,r.line).markedSpans;if(f)for(var h=0;h<f.length;++h){var c=f[h];(c.from==null||c.from<=r.ch)&&(c.to==null||c.to>=r.ch)&&o.push(c.marker.parent||c.marker)}return o},findMarks:function(r,o,f){r=ce(this,r),o=ce(this,o);var h=[],c=r.line;return this.iter(r.line,o.line+1,function(p){var m=p.markedSpans;if(m)for(var y=0;y<m.length;y++){var b=m[y];!(b.to!=null&&c==r.line&&r.ch>=b.to||b.from==null&&c!=r.line||b.from!=null&&c==o.line&&b.from>=o.ch)&&(!f||f(b.marker))&&h.push(b.marker.parent||b.marker)}++c}),h},getAllMarks:function(){var r=[];return this.iter(function(o){var f=o.markedSpans;if(f)for(var h=0;h<f.length;++h)f[h].from!=null&&r.push(f[h].marker)}),r},posFromIndex:function(r){var o,f=this.first,h=this.lineSeparator().length;return this.iter(function(c){var p=c.text.length+h;if(p>r)return o=r,!0;r-=p,++f}),ce(this,Z(f,o))},indexFromPos:function(r){r=ce(this,r);var o=r.ch;if(r.line<this.first||r.ch<0)return 0;var f=this.lineSeparator().length;return this.iter(this.first,r.line,function(h){o+=h.text.length+f}),o},copy:function(r){var o=new Nt(Zn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return o.scrollTop=this.scrollTop,o.scrollLeft=this.scrollLeft,o.sel=this.sel,o.extend=!1,r&&(o.history.undoDepth=this.history.undoDepth,o.setHistory(this.getHistory())),o},linkedDoc:function(r){r||(r={});var o=this.first,f=this.first+this.size;r.from!=null&&r.from>o&&(o=r.from),r.to!=null&&r.to<f&&(f=r.to);var h=new Nt(Zn(this,o,f),r.mode||this.modeOption,o,this.lineSep,this.direction);return r.sharedHist&&(h.history=this.history),(this.linked||(this.linked=[])).push({doc:h,sharedHist:r.sharedHist}),h.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}],Ay(h,xd(this)),h},unlinkDoc:function(r){if(r instanceof Be&&(r=r.doc),this.linked)for(var o=0;o<this.linked.length;++o){var f=this.linked[o];if(f.doc==r){this.linked.splice(o,1),r.unlinkDoc(this),My(xd(this));break}}if(r.history==this.history){var h=[r.id];Ar(r,function(c){return h.push(c.id)},!0),r.history=new vl(null),r.history.done=En(this.history.done,h),r.history.undone=En(this.history.undone,h)}},iterLinkedDocs:function(r){Ar(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):Cs(r)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ft(function(r){r!="rtl"&&(r="ltr"),r!=this.direction&&(this.direction=r,this.iter(function(o){return o.order=null}),this.cm&&Sy(this.cm))})}),Nt.prototype.eachLine=Nt.prototype.iter;var wd=0;function Ry(r){var o=this;if(kd(o),!(He(o,r)||fr(o.display,r))){xt(r),d&&(wd=+new Date);var f=rn(o,r,!0),h=r.dataTransfer.files;if(!(!f||o.isReadOnly()))if(h&&h.length&&window.FileReader&&window.File)for(var c=h.length,p=Array(c),m=0,y=function(){++m==c&&ht(o,function(){f=ce(o.doc,f);var A={from:f,to:f,text:o.doc.splitLines(p.filter(function(X){return X!=null}).join(o.doc.lineSeparator())),origin:"paste"};Nn(o.doc,A),ad(o.doc,Tr(ce(o.doc,f),ce(o.doc,Zr(A))))})()},b=function(A,X){if(o.options.allowDropFileTypes&&Se(o.options.allowDropFileTypes,A.type)==-1){y();return}var N=new FileReader;N.onerror=function(){return y()},N.onload=function(){var _=N.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(_)){y();return}p[X]=_,y()},N.readAsText(A)},S=0;S<h.length;S++)b(h[S],S);else{if(o.state.draggingText&&o.doc.sel.contains(f)>-1){o.state.draggingText(r),setTimeout(function(){return o.display.input.focus()},20);return}try{var Q=r.dataTransfer.getData("Text");if(Q){var $;if(o.state.draggingText&&!o.state.draggingText.copy&&($=o.listSelections()),Sl(o.doc,Tr(f,f)),$)for(var L=0;L<$.length;++L)Bn(o.doc,"",$[L].anchor,$[L].head,"drag");o.replaceSelection(Q,"around","paste"),o.display.input.focus()}}catch{}}}}function Ly(r,o){if(d&&(!r.state.draggingText||+new Date-wd<100)){nr(o);return}if(!(He(r,o)||fr(r.display,o))&&(o.dataTransfer.setData("Text",r.getSelection()),o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setDragImage&&!R)){var f=T("img",null,null,"position: fixed; left: 0; top: 0;");f.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",C&&(f.width=f.height=1,r.display.wrapper.appendChild(f),f._top=f.offsetTop),o.dataTransfer.setDragImage(f,0,0),C&&f.parentNode.removeChild(f)}}function Dy(r,o){var f=rn(r,o);if(f){var h=document.createDocumentFragment();mh(r,f,h),r.display.dragCursor||(r.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),J(r.display.dragCursor,h)}}function kd(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function Qd(r){if(document.getElementsByClassName){for(var o=document.getElementsByClassName("CodeMirror"),f=[],h=0;h<o.length;h++){var c=o[h].CodeMirror;c&&f.push(c)}f.length&&f[0].operation(function(){for(var p=0;p<f.length;p++)r(f[p])})}}var Cd=!1;function Wy(){Cd||(Xy(),Cd=!0)}function Xy(){var r;H(window,"resize",function(){r==null&&(r=setTimeout(function(){r=null,Qd(Ey)},100))}),H(window,"blur",function(){return Qd(Dn)})}function Ey(r){var o=r.display;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.scrollbarsClipped=!1,r.setSize()}for(var Yr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Gs=0;Gs<10;Gs++)Yr[Gs+48]=Yr[Gs+96]=String(Gs);for(var kl=65;kl<=90;kl++)Yr[kl]=String.fromCharCode(kl);for(var Fs=1;Fs<=12;Fs++)Yr[Fs+111]=Yr[Fs+63235]="F"+Fs;var cr={};cr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},cr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},cr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},cr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},cr.default=U?cr.macDefault:cr.pcDefault;function Iy(r){var o=r.split(/-(?!$)/);r=o[o.length-1];for(var f,h,c,p,m=0;m<o.length-1;m++){var y=o[m];if(/^(cmd|meta|m)$/i.test(y))p=!0;else if(/^a(lt)?$/i.test(y))f=!0;else if(/^(c|ctrl|control)$/i.test(y))h=!0;else if(/^s(hift)?$/i.test(y))c=!0;else throw new Error("Unrecognized modifier name: "+y)}return f&&(r="Alt-"+r),h&&(r="Ctrl-"+r),p&&(r="Cmd-"+r),c&&(r="Shift-"+r),r}function Ny(r){var o={};for(var f in r)if(r.hasOwnProperty(f)){var h=r[f];if(/^(name|fallthrough|(de|at)tach)$/.test(f))continue;if(h=="..."){delete r[f];continue}for(var c=Qn(f.split(" "),Iy),p=0;p<c.length;p++){var m=void 0,y=void 0;p==c.length-1?(y=c.join(" "),m=h):(y=c.slice(0,p+1).join(" "),m="...");var b=o[y];if(!b)o[y]=m;else if(b!=m)throw new Error("Inconsistent bindings for "+y)}delete r[f]}for(var S in o)r[S]=o[S];return r}function zn(r,o,f,h){o=Ql(o);var c=o.call?o.call(r,h):o[r];if(c===!1)return"nothing";if(c==="...")return"multi";if(c!=null&&f(c))return"handled";if(o.fallthrough){if(Object.prototype.toString.call(o.fallthrough)!="[object Array]")return zn(r,o.fallthrough,f,h);for(var p=0;p<o.fallthrough.length;p++){var m=zn(r,o.fallthrough[p],f,h);if(m)return m}}}function $d(r){var o=typeof r=="string"?r:Yr[r.keyCode];return o=="Ctrl"||o=="Alt"||o=="Shift"||o=="Mod"}function Pd(r,o,f){var h=r;return o.altKey&&h!="Alt"&&(r="Alt-"+r),(ge?o.metaKey:o.ctrlKey)&&h!="Ctrl"&&(r="Ctrl-"+r),(ge?o.ctrlKey:o.metaKey)&&h!="Mod"&&(r="Cmd-"+r),!f&&o.shiftKey&&h!="Shift"&&(r="Shift-"+r),r}function Td(r,o){if(C&&r.keyCode==34&&r.char)return!1;var f=Yr[r.keyCode];return f==null||r.altGraphKey?!1:(r.keyCode==3&&r.code&&(f=r.code),Pd(f,r,o))}function Ql(r){return typeof r=="string"?cr[r]:r}function _n(r,o){for(var f=r.doc.sel.ranges,h=[],c=0;c<f.length;c++){for(var p=o(f[c]);h.length&&W(p.from,xe(h).to)<=0;){var m=h.pop();if(W(m.from,p.from)<0){p.from=m.from;break}}h.push(p)}Ht(r,function(){for(var y=h.length-1;y>=0;y--)Bn(r.doc,"",h[y].from,h[y].to,"+delete");Wn(r)})}function Rh(r,o,f){var h=Li(r.text,o+f,f);return h<0||h>r.text.length?null:h}function Lh(r,o,f){var h=Rh(r,o.ch,f);return h==null?null:new Z(o.line,h,f<0?"after":"before")}function Dh(r,o,f,h,c){if(r){o.doc.direction=="rtl"&&(c=-c);var p=Oi(f,o.doc.direction);if(p){var m=c<0?xe(p):p[0],y=c<0==(m.level==1),b=y?"after":"before",S;if(m.level>0||o.doc.direction=="rtl"){var Q=Yn(o,f);S=c<0?f.text.length-1:0;var $=Bi(o,Q,S).top;S=Fe(function(L){return Bi(o,Q,L).top==$},c<0==(m.level==1)?m.from:m.to-1,S),b=="before"&&(S=Rh(f,S,1))}else S=c<0?m.to:m.from;return new Z(h,S,b)}}return new Z(h,c<0?f.text.length:0,c<0?"before":"after")}function By(r,o,f,h){var c=Oi(o,r.doc.direction);if(!c)return Lh(o,f,h);f.ch>=o.text.length?(f.ch=o.text.length,f.sticky="before"):f.ch<=0&&(f.ch=0,f.sticky="after");var p=gi(c,f.ch,f.sticky),m=c[p];if(r.doc.direction=="ltr"&&m.level%2==0&&(h>0?m.to>f.ch:m.from<f.ch))return Lh(o,f,h);var y=function(q,V){return Rh(o,q instanceof Z?q.ch:q,V)},b,S=function(q){return r.options.lineWrapping?(b=b||Yn(r,o),Rc(r,o,b,q)):{begin:0,end:o.text.length}},Q=S(f.sticky=="before"?y(f,-1):f.ch);if(r.doc.direction=="rtl"||m.level==1){var $=m.level==1==h<0,L=y(f,$?1:-1);if(L!=null&&($?L<=m.to&&L<=Q.end:L>=m.from&&L>=Q.begin)){var A=$?"before":"after";return new Z(f.line,L,A)}}var X=function(q,V,G){for(var ee=function(Le,ut){return ut?new Z(f.line,y(Le,1),"before"):new Z(f.line,Le,"after")};q>=0&&q<c.length;q+=V){var ae=c[q],se=V>0==(ae.level!=1),ve=se?G.begin:y(G.end,-1);if(ae.from<=ve&&ve<ae.to||(ve=se?ae.from:y(ae.to,-1),G.begin<=ve&&ve<G.end))return ee(ve,se)}},N=X(p+h,h,Q);if(N)return N;var _=h>0?Q.end:y(Q.begin,-1);return _!=null&&!(h>0&&_==o.text.length)&&(N=X(h>0?0:c.length-1,h,S(_)),N)?N:null}var Hs={selectAll:dd,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),je)},killLine:function(r){return _n(r,function(o){if(o.empty()){var f=ie(r.doc,o.head.line).text.length;return o.head.ch==f&&o.head.line<r.lastLine()?{from:o.head,to:Z(o.head.line+1,0)}:{from:o.head,to:Z(o.head.line,f)}}else return{from:o.from(),to:o.to()}})},deleteLine:function(r){return _n(r,function(o){return{from:Z(o.from().line,0),to:ce(r.doc,Z(o.to().line+1,0))}})},delLineLeft:function(r){return _n(r,function(o){return{from:Z(o.from().line,0),to:o.from()}})},delWrappedLineLeft:function(r){return _n(r,function(o){var f=r.charCoords(o.head,"div").top+5,h=r.coordsChar({left:0,top:f},"div");return{from:h,to:o.from()}})},delWrappedLineRight:function(r){return _n(r,function(o){var f=r.charCoords(o.head,"div").top+5,h=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:f},"div");return{from:o.from(),to:h}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(Z(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(Z(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(o){return Zd(r,o.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(o){return Ad(r,o.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(o){return Uy(r,o.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(o){var f=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:f},"div")},Sr)},goLineLeft:function(r){return r.extendSelectionsBy(function(o){var f=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:0,top:f},"div")},Sr)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(o){var f=r.cursorCoords(o.head,"div").top+5,h=r.coordsChar({left:0,top:f},"div");return h.ch<r.getLine(h.line).search(/\S/)?Ad(r,o.head):h},Sr)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"codepoint")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("	")},insertSoftTab:function(r){for(var o=[],f=r.listSelections(),h=r.options.tabSize,c=0;c<f.length;c++){var p=f[c].from(),m=le(r.getLine(p.line),p.ch,h);o.push(Ri(h-m%h))}r.replaceSelections(o)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return Ht(r,function(){for(var o=r.listSelections(),f=[],h=0;h<o.length;h++)if(o[h].empty()){var c=o[h].head,p=ie(r.doc,c.line).text;if(p){if(c.ch==p.length&&(c=new Z(c.line,c.ch-1)),c.ch>0)c=new Z(c.line,c.ch+1),r.replaceRange(p.charAt(c.ch-1)+p.charAt(c.ch-2),Z(c.line,c.ch-2),c,"+transpose");else if(c.line>r.doc.first){var m=ie(r.doc,c.line-1).text;m&&(c=new Z(c.line,1),r.replaceRange(p.charAt(0)+r.doc.lineSeparator()+m.charAt(m.length-1),Z(c.line-1,m.length-1),c,"+transpose"))}}f.push(new Te(c,c))}r.setSelections(f)})},newlineAndIndent:function(r){return Ht(r,function(){for(var o=r.listSelections(),f=o.length-1;f>=0;f--)r.replaceRange(r.doc.lineSeparator(),o[f].anchor,o[f].head,"+input");o=r.listSelections();for(var h=0;h<o.length;h++)r.indentLine(o[h].from().line,null,!0);Wn(r)})},openLine:function(r){return r.replaceSelection(`
`,"start")},toggleOverwrite:function(r){return r.toggleOverwrite()}};function Zd(r,o){var f=ie(r.doc,o),h=Qi(f);return h!=f&&(o=Pe(h)),Dh(!0,r,h,o,1)}function Uy(r,o){var f=ie(r.doc,o),h=Cv(f);return h!=f&&(o=Pe(h)),Dh(!0,r,f,o,-1)}function Ad(r,o){var f=Zd(r,o.line),h=ie(r.doc,f.line),c=Oi(h,r.doc.direction);if(!c||c[0].level==0){var p=Math.max(f.ch,h.text.search(/\S/)),m=o.line==f.line&&o.ch<=p&&o.ch;return Z(f.line,m?0:p,f.sticky)}return f}function Cl(r,o,f){if(typeof o=="string"&&(o=Hs[o],!o))return!1;r.display.input.ensurePolled();var h=r.display.shift,c=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),f&&(r.display.shift=!1),c=o(r)!=Re}finally{r.display.shift=h,r.state.suppressEdits=!1}return c}function zy(r,o,f){for(var h=0;h<r.state.keyMaps.length;h++){var c=zn(o,r.state.keyMaps[h],f,r);if(c)return c}return r.options.extraKeys&&zn(o,r.options.extraKeys,f,r)||zn(o,r.options.keyMap,f,r)}var _y=new me;function Vs(r,o,f,h){var c=r.state.keySeq;if(c){if($d(o))return"handled";if(/\'$/.test(o)?r.state.keySeq=null:_y.set(50,function(){r.state.keySeq==c&&(r.state.keySeq=null,r.display.input.reset())}),Md(r,c+" "+o,f,h))return!0}return Md(r,o,f,h)}function Md(r,o,f,h){var c=zy(r,o,h);return c=="multi"&&(r.state.keySeq=o),c=="handled"&&at(r,"keyHandled",r,o,f),(c=="handled"||c=="multi")&&(xt(f),vh(r)),!!c}function Yd(r,o){var f=Td(o,!0);return f?o.shiftKey&&!r.state.keySeq?Vs(r,"Shift-"+f,o,function(h){return Cl(r,h,!0)})||Vs(r,f,o,function(h){if(typeof h=="string"?/^go[A-Z]/.test(h):h.motion)return Cl(r,h)}):Vs(r,f,o,function(h){return Cl(r,h)}):!1}function jy(r,o,f){return Vs(r,"'"+f+"'",o,function(h){return Cl(r,h,!0)})}var Wh=null;function Rd(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField())&&(o.curOp.focus=ye(_e(o)),!He(o,r))){d&&g<11&&r.keyCode==27&&(r.returnValue=!1);var f=r.keyCode;o.display.shift=f==16||r.shiftKey;var h=Yd(o,r);C&&(Wh=h?f:null,!h&&f==88&&!Wi&&(U?r.metaKey:r.ctrlKey)&&o.replaceSelection("",null,"cut")),s&&!U&&!h&&f==46&&r.shiftKey&&!r.ctrlKey&&document.execCommand&&document.execCommand("cut"),f==18&&!/\bCodeMirror-crosshair\b/.test(o.display.lineDiv.className)&&qy(o)}}function qy(r){var o=r.display.lineDiv;Ce(o,"CodeMirror-crosshair");function f(h){(h.keyCode==18||!h.altKey)&&(Ae(o,"CodeMirror-crosshair"),St(document,"keyup",f),St(document,"mouseover",f))}H(document,"keyup",f),H(document,"mouseover",f)}function Ld(r){r.keyCode==16&&(this.doc.sel.shift=!1),He(this,r)}function Dd(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField())&&!(fr(o.display,r)||He(o,r)||r.ctrlKey&&!r.altKey||U&&r.metaKey)){var f=r.keyCode,h=r.charCode;if(C&&f==Wh){Wh=null,xt(r);return}if(!(C&&(!r.which||r.which<10)&&Yd(o,r))){var c=String.fromCharCode(h??f);c!="\b"&&(jy(o,r,c)||o.display.input.onKeyPress(r))}}}var Gy=400,Xh=function(r,o,f){this.time=r,this.pos=o,this.button=f};Xh.prototype.compare=function(r,o,f){return this.time+Gy>r&&W(o,this.pos)==0&&f==this.button};var Ks,Js;function Fy(r,o){var f=+new Date;return Js&&Js.compare(f,r,o)?(Ks=Js=null,"triple"):Ks&&Ks.compare(f,r,o)?(Js=new Xh(f,r,o),Ks=null,"double"):(Ks=new Xh(f,r,o),Js=null,"single")}function Wd(r){var o=this,f=o.display;if(!(He(o,r)||f.activeTouch&&f.input.supportsTouch())){if(f.input.ensurePolled(),f.shift=r.shiftKey,fr(f,r)){O||(f.scroller.draggable=!1,setTimeout(function(){return f.scroller.draggable=!0},100));return}if(!Eh(o,r)){var h=rn(o,r),c=Qs(r),p=h?Fy(h,c):"single";di(o).focus(),c==1&&o.state.selectingText&&o.state.selectingText(r),!(h&&Hy(o,c,h,p,r))&&(c==1?h?Ky(o,h,p,r):Et(r)==f.scroller&&xt(r):c==2?(h&&bl(o.doc,h),setTimeout(function(){return f.input.focus()},20)):c==3&&(pe?o.display.input.onContextMenu(r):yh(o)))}}}function Hy(r,o,f,h,c){var p="Click";return h=="double"?p="Double"+p:h=="triple"&&(p="Triple"+p),p=(o==1?"Left":o==2?"Middle":"Right")+p,Vs(r,Pd(p,c),c,function(m){if(typeof m=="string"&&(m=Hs[m]),!m)return!1;var y=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),y=m(r,f)!=Re}finally{r.state.suppressEdits=!1}return y})}function Vy(r,o,f){var h=r.getOption("configureMouse"),c=h?h(r,o,f):{};if(c.unit==null){var p=j?f.shiftKey&&f.metaKey:f.altKey;c.unit=p?"rectangle":o=="single"?"char":o=="double"?"word":"line"}return(c.extend==null||r.doc.extend)&&(c.extend=r.doc.extend||f.shiftKey),c.addNew==null&&(c.addNew=U?f.metaKey:f.ctrlKey),c.moveOnDrag==null&&(c.moveOnDrag=!(U?f.altKey:f.ctrlKey)),c}function Ky(r,o,f,h){d?setTimeout(Xt(Xc,r),0):r.curOp.focus=ye(_e(r));var c=Vy(r,f,h),p=r.doc.sel,m;r.options.dragDrop&&Va&&!r.isReadOnly()&&f=="single"&&(m=p.contains(o))>-1&&(W((m=p.ranges[m]).from(),o)<0||o.xRel>0)&&(W(m.to(),o)>0||o.xRel<0)?Jy(r,h,o,c):eb(r,h,o,c)}function Jy(r,o,f,h){var c=r.display,p=!1,m=ht(r,function(S){O&&(c.scroller.draggable=!1),r.state.draggingText=!1,r.state.delayingBlurEvent&&(r.hasFocus()?r.state.delayingBlurEvent=!1:yh(r)),St(c.wrapper.ownerDocument,"mouseup",m),St(c.wrapper.ownerDocument,"mousemove",y),St(c.scroller,"dragstart",b),St(c.scroller,"drop",m),p||(xt(S),h.addNew||bl(r.doc,f,null,null,h.extend),O&&!R||d&&g==9?setTimeout(function(){c.wrapper.ownerDocument.body.focus({preventScroll:!0}),c.input.focus()},20):c.input.focus())}),y=function(S){p=p||Math.abs(o.clientX-S.clientX)+Math.abs(o.clientY-S.clientY)>=10},b=function(){return p=!0};O&&(c.scroller.draggable=!0),r.state.draggingText=m,m.copy=!h.moveOnDrag,H(c.wrapper.ownerDocument,"mouseup",m),H(c.wrapper.ownerDocument,"mousemove",y),H(c.scroller,"dragstart",b),H(c.scroller,"drop",m),r.state.delayingBlurEvent=!0,setTimeout(function(){return c.input.focus()},20),c.scroller.dragDrop&&c.scroller.dragDrop()}function Xd(r,o,f){if(f=="char")return new Te(o,o);if(f=="word")return r.findWordAt(o);if(f=="line")return new Te(Z(o.line,0),ce(r.doc,Z(o.line+1,0)));var h=f(r,o);return new Te(h.from,h.to)}function eb(r,o,f,h){d&&yh(r);var c=r.display,p=r.doc;xt(o);var m,y,b=p.sel,S=b.ranges;if(h.addNew&&!h.extend?(y=p.sel.contains(f),y>-1?m=S[y]:m=new Te(f,f)):(m=p.sel.primary(),y=p.sel.primIndex),h.unit=="rectangle")h.addNew||(m=new Te(f,f)),f=rn(r,o,!0,!0),y=-1;else{var Q=Xd(r,f,h.unit);h.extend?m=Mh(m,Q.anchor,Q.head,h.extend):m=Q}h.addNew?y==-1?(y=S.length,wt(p,$i(r,S.concat([m]),y),{scroll:!1,origin:"*mouse"})):S.length>1&&S[y].empty()&&h.unit=="char"&&!h.extend?(wt(p,$i(r,S.slice(0,y).concat(S.slice(y+1)),0),{scroll:!1,origin:"*mouse"}),b=p.sel):Yh(p,y,m,Vr):(y=0,wt(p,new si([m],0),Vr),b=p.sel);var $=f;function L(G){if(W($,G)!=0)if($=G,h.unit=="rectangle"){for(var ee=[],ae=r.options.tabSize,se=le(ie(p,f.line).text,f.ch,ae),ve=le(ie(p,G.line).text,G.ch,ae),Le=Math.min(se,ve),ut=Math.max(se,ve),qe=Math.min(f.line,G.line),Vt=Math.min(r.lastLine(),Math.max(f.line,G.line));qe<=Vt;qe++){var Bt=ie(p,qe).text,tt=Yi(Bt,Le,ae);Le==ut?ee.push(new Te(Z(qe,tt),Z(qe,tt))):Bt.length>tt&&ee.push(new Te(Z(qe,tt),Z(qe,Yi(Bt,ut,ae))))}ee.length||ee.push(new Te(f,f)),wt(p,$i(r,b.ranges.slice(0,y).concat(ee),y),{origin:"*mouse",scroll:!1}),r.scrollIntoView(G)}else{var Ut=m,vt=Xd(r,G,h.unit),ot=Ut.anchor,it;W(vt.anchor,ot)>0?(it=vt.head,ot=st(Ut.from(),vt.anchor)):(it=vt.anchor,ot=$e(Ut.to(),vt.head));var Ke=b.ranges.slice(0);Ke[y]=tb(r,new Te(ce(p,ot),it)),wt(p,$i(r,Ke,y),Vr)}}var A=c.wrapper.getBoundingClientRect(),X=0;function N(G){var ee=++X,ae=rn(r,G,!0,h.unit=="rectangle");if(ae)if(W(ae,$)!=0){r.curOp.focus=ye(_e(r)),L(ae);var se=pl(c,p);(ae.line>=se.to||ae.line<se.from)&&setTimeout(ht(r,function(){X==ee&&N(G)}),150)}else{var ve=G.clientY<A.top?-20:G.clientY>A.bottom?20:0;ve&&setTimeout(ht(r,function(){X==ee&&(c.scroller.scrollTop+=ve,N(G))}),50)}}function _(G){r.state.selectingText=!1,X=1/0,G&&(xt(G),c.input.focus()),St(c.wrapper.ownerDocument,"mousemove",q),St(c.wrapper.ownerDocument,"mouseup",V),p.history.lastSelOrigin=null}var q=ht(r,function(G){G.buttons===0||!Qs(G)?_(G):N(G)}),V=ht(r,_);r.state.selectingText=V,H(c.wrapper.ownerDocument,"mousemove",q),H(c.wrapper.ownerDocument,"mouseup",V)}function tb(r,o){var f=o.anchor,h=o.head,c=ie(r.doc,f.line);if(W(f,h)==0&&f.sticky==h.sticky)return o;var p=Oi(c);if(!p)return o;var m=gi(p,f.ch,f.sticky),y=p[m];if(y.from!=f.ch&&y.to!=f.ch)return o;var b=m+(y.from==f.ch==(y.level!=1)?0:1);if(b==0||b==p.length)return o;var S;if(h.line!=f.line)S=(h.line-f.line)*(r.doc.direction=="ltr"?1:-1)>0;else{var Q=gi(p,h.ch,h.sticky),$=Q-m||(h.ch-f.ch)*(y.level==1?-1:1);Q==b-1||Q==b?S=$<0:S=$>0}var L=p[b+(S?-1:0)],A=S==(L.level==1),X=A?L.from:L.to,N=A?"after":"before";return f.ch==X&&f.sticky==N?o:new Te(new Z(f.line,X,N),h)}function Ed(r,o,f,h){var c,p;if(o.touches)c=o.touches[0].clientX,p=o.touches[0].clientY;else try{c=o.clientX,p=o.clientY}catch{return!1}if(c>=Math.floor(r.display.gutters.getBoundingClientRect().right))return!1;h&&xt(o);var m=r.display,y=m.lineDiv.getBoundingClientRect();if(p>y.bottom||!Tt(r,f))return ks(o);p-=y.top-m.viewOffset;for(var b=0;b<r.display.gutterSpecs.length;++b){var S=m.gutters.childNodes[b];if(S&&S.getBoundingClientRect().right>=c){var Q=Ei(r.doc,p),$=r.display.gutterSpecs[b];return We(r,f,r,Q,$.className,o),ks(o)}}}function Eh(r,o){return Ed(r,o,"gutterClick",!0)}function Id(r,o){fr(r.display,o)||ib(r,o)||He(r,o,"contextmenu")||pe||r.display.input.onContextMenu(o)}function ib(r,o){return Tt(r,"gutterContextMenu")?Ed(r,o,"gutterContextMenu",!1):!1}function Nd(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ys(r)}var jn={toString:function(){return"CodeMirror.Init"}},Bd={},$l={};function rb(r){var o=r.optionHandlers;function f(h,c,p,m){r.defaults[h]=c,p&&(o[h]=m?function(y,b,S){S!=jn&&p(y,b,S)}:p)}r.defineOption=f,r.Init=jn,f("value","",function(h,c){return h.setValue(c)},!0),f("mode",null,function(h,c){h.doc.modeOption=c,Th(h)},!0),f("indentUnit",2,Th,!0),f("indentWithTabs",!1),f("smartIndent",!0),f("tabSize",4,function(h){Ns(h),Ys(h),It(h)},!0),f("lineSeparator",null,function(h,c){if(h.doc.lineSep=c,!!c){var p=[],m=h.doc.first;h.doc.iter(function(b){for(var S=0;;){var Q=b.text.indexOf(c,S);if(Q==-1)break;S=Q+c.length,p.push(Z(m,Q))}m++});for(var y=p.length-1;y>=0;y--)Bn(h.doc,c,p[y],Z(p[y].line,p[y].ch+c.length))}}),f("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(h,c,p){h.state.specialChars=new RegExp(c.source+(c.test("	")?"":"|	"),"g"),p!=jn&&h.refresh()}),f("specialCharPlaceholder",Mv,function(h){return h.refresh()},!0),f("electricChars",!0),f("inputStyle",z?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),f("spellcheck",!1,function(h,c){return h.getInputField().spellcheck=c},!0),f("autocorrect",!1,function(h,c){return h.getInputField().autocorrect=c},!0),f("autocapitalize",!1,function(h,c){return h.getInputField().autocapitalize=c},!0),f("rtlMoveVisually",!oe),f("wholeLineUpdateBefore",!0),f("theme","default",function(h){Nd(h),Is(h)},!0),f("keyMap","default",function(h,c,p){var m=Ql(c),y=p!=jn&&Ql(p);y&&y.detach&&y.detach(h,m),m.attach&&m.attach(h,y||null)}),f("extraKeys",null),f("configureMouse",null),f("lineWrapping",!1,sb,!0),f("gutters",[],function(h,c){h.display.gutterSpecs=$h(c,h.options.lineNumbers),Is(h)},!0),f("fixedGutter",!0,function(h,c){h.display.gutters.style.left=c?gh(h.display)+"px":"0",h.refresh()},!0),f("coverGutterNextToScrollbar",!1,function(h){return Xn(h)},!0),f("scrollbarStyle","native",function(h){zc(h),Xn(h),h.display.scrollbars.setScrollTop(h.doc.scrollTop),h.display.scrollbars.setScrollLeft(h.doc.scrollLeft)},!0),f("lineNumbers",!1,function(h,c){h.display.gutterSpecs=$h(h.options.gutters,c),Is(h)},!0),f("firstLineNumber",1,Is,!0),f("lineNumberFormatter",function(h){return h},Is,!0),f("showCursorWhenSelecting",!1,Rs,!0),f("resetSelectionOnContextMenu",!0),f("lineWiseCopyCut",!0),f("pasteLinesPerSelection",!0),f("selectionsMayTouch",!1),f("readOnly",!1,function(h,c){c=="nocursor"&&(Dn(h),h.display.input.blur()),h.display.input.readOnlyChanged(c)}),f("screenReaderLabel",null,function(h,c){c=c===""?null:c,h.display.input.screenReaderLabelChanged(c)}),f("disableInput",!1,function(h,c){c||h.display.input.reset()},!0),f("dragDrop",!0,nb),f("allowDropFileTypes",null),f("cursorBlinkRate",530),f("cursorScrollMargin",0),f("cursorHeight",1,Rs,!0),f("singleCursorHeightPerLine",!0,Rs,!0),f("workTime",100),f("workDelay",100),f("flattenSpans",!0,Ns,!0),f("addModeClass",!1,Ns,!0),f("pollInterval",100),f("undoDepth",200,function(h,c){return h.doc.history.undoDepth=c}),f("historyEventDelay",1250),f("viewportMargin",10,function(h){return h.refresh()},!0),f("maxHighlightLength",1e4,Ns,!0),f("moveInputWithCursor",!0,function(h,c){c||h.display.input.resetPosition()}),f("tabindex",null,function(h,c){return h.display.input.getField().tabIndex=c||""}),f("autofocus",null),f("direction","ltr",function(h,c){return h.doc.setDirection(c)},!0),f("phrases",null)}function nb(r,o,f){var h=f&&f!=jn;if(!o!=!h){var c=r.display.dragFunctions,p=o?H:St;p(r.display.scroller,"dragstart",c.start),p(r.display.scroller,"dragenter",c.enter),p(r.display.scroller,"dragover",c.over),p(r.display.scroller,"dragleave",c.leave),p(r.display.scroller,"drop",c.drop)}}function sb(r){r.options.lineWrapping?(Ce(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(Ae(r.display.wrapper,"CodeMirror-wrap"),sh(r)),Oh(r),It(r),Ys(r),setTimeout(function(){return Xn(r)},100)}function Be(r,o){var f=this;if(!(this instanceof Be))return new Be(r,o);this.options=o=o?fe(o):{},fe(Bd,o,!1);var h=o.value;typeof h=="string"?h=new Nt(h,o.mode,null,o.lineSeparator,o.direction):o.mode&&(h.modeOption=o.mode),this.doc=h;var c=new Be.inputStyles[o.inputStyle](this),p=this.display=new vy(r,h,c,o);p.wrapper.CodeMirror=this,Nd(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),zc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new me,keySeq:null,specialChars:null},o.autofocus&&!z&&p.input.focus(),d&&g<11&&setTimeout(function(){return f.display.input.reset(!0)},20),ob(this),Wy(),ln(this),this.curOp.forceUpdate=!0,ed(this,h),o.autofocus&&!z||this.hasFocus()?setTimeout(function(){f.hasFocus()&&!f.state.focused&&bh(f)},20):Dn(this);for(var m in $l)$l.hasOwnProperty(m)&&$l[m](this,o[m],jn);qc(this),o.finishInit&&o.finishInit(this);for(var y=0;y<Ih.length;++y)Ih[y](this);an(this),O&&o.lineWrapping&&getComputedStyle(p.lineDiv).textRendering=="optimizelegibility"&&(p.lineDiv.style.textRendering="auto")}Be.defaults=Bd,Be.optionHandlers=$l;function ob(r){var o=r.display;H(o.scroller,"mousedown",ht(r,Wd)),d&&g<11?H(o.scroller,"dblclick",ht(r,function(b){if(!He(r,b)){var S=rn(r,b);if(!(!S||Eh(r,b)||fr(r.display,b))){xt(b);var Q=r.findWordAt(S);bl(r.doc,Q.anchor,Q.head)}}})):H(o.scroller,"dblclick",function(b){return He(r,b)||xt(b)}),H(o.scroller,"contextmenu",function(b){return Id(r,b)}),H(o.input.getField(),"contextmenu",function(b){o.scroller.contains(b.target)||Id(r,b)});var f,h={end:0};function c(){o.activeTouch&&(f=setTimeout(function(){return o.activeTouch=null},1e3),h=o.activeTouch,h.end=+new Date)}function p(b){if(b.touches.length!=1)return!1;var S=b.touches[0];return S.radiusX<=1&&S.radiusY<=1}function m(b,S){if(S.left==null)return!0;var Q=S.left-b.left,$=S.top-b.top;return Q*Q+$*$>20*20}H(o.scroller,"touchstart",function(b){if(!He(r,b)&&!p(b)&&!Eh(r,b)){o.input.ensurePolled(),clearTimeout(f);var S=+new Date;o.activeTouch={start:S,moved:!1,prev:S-h.end<=300?h:null},b.touches.length==1&&(o.activeTouch.left=b.touches[0].pageX,o.activeTouch.top=b.touches[0].pageY)}}),H(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),H(o.scroller,"touchend",function(b){var S=o.activeTouch;if(S&&!fr(o,b)&&S.left!=null&&!S.moved&&new Date-S.start<300){var Q=r.coordsChar(o.activeTouch,"page"),$;!S.prev||m(S,S.prev)?$=new Te(Q,Q):!S.prev.prev||m(S,S.prev.prev)?$=r.findWordAt(Q):$=new Te(Z(Q.line,0),ce(r.doc,Z(Q.line+1,0))),r.setSelection($.anchor,$.head),r.focus(),xt(b)}c()}),H(o.scroller,"touchcancel",c),H(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Ds(r,o.scroller.scrollTop),sn(r,o.scroller.scrollLeft,!0),We(r,"scroll",r))}),H(o.scroller,"mousewheel",function(b){return Hc(r,b)}),H(o.scroller,"DOMMouseScroll",function(b){return Hc(r,b)}),H(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(b){He(r,b)||nr(b)},over:function(b){He(r,b)||(Dy(r,b),nr(b))},start:function(b){return Ly(r,b)},drop:ht(r,Ry),leave:function(b){He(r,b)||kd(r)}};var y=o.input.getField();H(y,"keyup",function(b){return Ld.call(r,b)}),H(y,"keydown",ht(r,Rd)),H(y,"keypress",ht(r,Dd)),H(y,"focus",function(b){return bh(r,b)}),H(y,"blur",function(b){return Dn(r,b)})}var Ih=[];Be.defineInitHook=function(r){return Ih.push(r)};function eo(r,o,f,h){var c=r.doc,p;f==null&&(f="add"),f=="smart"&&(c.mode.indent?p=Ps(r,o).state:f="prev");var m=r.options.tabSize,y=ie(c,o),b=le(y.text,null,m);y.stateAfter&&(y.stateAfter=null);var S=y.text.match(/^\s*/)[0],Q;if(!h&&!/\S/.test(y.text))Q=0,f="not";else if(f=="smart"&&(Q=c.mode.indent(p,y.text.slice(S.length),y.text),Q==Re||Q>150)){if(!h)return;f="prev"}f=="prev"?o>c.first?Q=le(ie(c,o-1).text,null,m):Q=0:f=="add"?Q=b+r.options.indentUnit:f=="subtract"?Q=b-r.options.indentUnit:typeof f=="number"&&(Q=b+f),Q=Math.max(0,Q);var $="",L=0;if(r.options.indentWithTabs)for(var A=Math.floor(Q/m);A;--A)L+=m,$+="	";if(L<Q&&($+=Ri(Q-L)),$!=S)return Bn(c,$,Z(o,0),Z(o,S.length),"+input"),y.stateAfter=null,!0;for(var X=0;X<c.sel.ranges.length;X++){var N=c.sel.ranges[X];if(N.head.line==o&&N.head.ch<S.length){var _=Z(o,S.length);Yh(c,X,new Te(_,_));break}}}var Pi=null;function Pl(r){Pi=r}function Nh(r,o,f,h,c){var p=r.doc;r.display.shift=!1,h||(h=p.sel);var m=+new Date-200,y=c=="paste"||r.state.pasteIncoming>m,b=Cs(o),S=null;if(y&&h.ranges.length>1)if(Pi&&Pi.text.join(`
`)==o){if(h.ranges.length%Pi.text.length==0){S=[];for(var Q=0;Q<Pi.text.length;Q++)S.push(p.splitLines(Pi.text[Q]))}}else b.length==h.ranges.length&&r.options.pasteLinesPerSelection&&(S=Qn(b,function(q){return[q]}));for(var $=r.curOp.updateInput,L=h.ranges.length-1;L>=0;L--){var A=h.ranges[L],X=A.from(),N=A.to();A.empty()&&(f&&f>0?X=Z(X.line,X.ch-f):r.state.overwrite&&!y?N=Z(N.line,Math.min(ie(p,N.line).text.length,N.ch+xe(b).length)):y&&Pi&&Pi.lineWise&&Pi.text.join(`
`)==b.join(`
`)&&(X=N=Z(X.line,0)));var _={from:X,to:N,text:S?S[L%S.length]:b,origin:c||(y?"paste":r.state.cutIncoming>m?"cut":"+input")};Nn(r.doc,_),at(r,"inputRead",r,_)}o&&!y&&zd(r,o),Wn(r),r.curOp.updateInput<2&&(r.curOp.updateInput=$),r.curOp.typing=!0,r.state.pasteIncoming=r.state.cutIncoming=-1}function Ud(r,o){var f=r.clipboardData&&r.clipboardData.getData("Text");if(f)return r.preventDefault(),!o.isReadOnly()&&!o.options.disableInput&&o.hasFocus()&&Ht(o,function(){return Nh(o,f,0,null,"paste")}),!0}function zd(r,o){if(!(!r.options.electricChars||!r.options.smartIndent))for(var f=r.doc.sel,h=f.ranges.length-1;h>=0;h--){var c=f.ranges[h];if(!(c.head.ch>100||h&&f.ranges[h-1].head.line==c.head.line)){var p=r.getModeAt(c.head),m=!1;if(p.electricChars){for(var y=0;y<p.electricChars.length;y++)if(o.indexOf(p.electricChars.charAt(y))>-1){m=eo(r,c.head.line,"smart");break}}else p.electricInput&&p.electricInput.test(ie(r.doc,c.head.line).text.slice(0,c.head.ch))&&(m=eo(r,c.head.line,"smart"));m&&at(r,"electricInput",r,c.head.line)}}}function _d(r){for(var o=[],f=[],h=0;h<r.doc.sel.ranges.length;h++){var c=r.doc.sel.ranges[h].head.line,p={anchor:Z(c,0),head:Z(c+1,0)};f.push(p),o.push(r.getRange(p.anchor,p.head))}return{text:o,ranges:f}}function Bh(r,o,f,h){r.setAttribute("autocorrect",f?"on":"off"),r.setAttribute("autocapitalize",h?"on":"off"),r.setAttribute("spellcheck",!!o)}function jd(){var r=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),o=T("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return O?r.style.width="1000px":r.setAttribute("wrap","off"),E&&(r.style.border="1px solid black"),o}function lb(r){var o=r.optionHandlers,f=r.helpers={};r.prototype={constructor:r,focus:function(){di(this).focus(),this.display.input.focus()},setOption:function(h,c){var p=this.options,m=p[h];p[h]==c&&h!="mode"||(p[h]=c,o.hasOwnProperty(h)&&ht(this,o[h])(this,c,m),We(this,"optionChange",this,h))},getOption:function(h){return this.options[h]},getDoc:function(){return this.doc},addKeyMap:function(h,c){this.state.keyMaps[c?"push":"unshift"](Ql(h))},removeKeyMap:function(h){for(var c=this.state.keyMaps,p=0;p<c.length;++p)if(c[p]==h||c[p].name==h)return c.splice(p,1),!0},addOverlay:At(function(h,c){var p=h.token?h:r.getMode(this.options,h);if(p.startState)throw new Error("Overlays may not be stateful.");jo(this.state.overlays,{mode:p,modeSpec:h,opaque:c&&c.opaque,priority:c&&c.priority||0},function(m){return m.priority}),this.state.modeGen++,It(this)}),removeOverlay:At(function(h){for(var c=this.state.overlays,p=0;p<c.length;++p){var m=c[p].modeSpec;if(m==h||typeof h=="string"&&m.name==h){c.splice(p,1),this.state.modeGen++,It(this);return}}}),indentLine:At(function(h,c,p){typeof c!="string"&&typeof c!="number"&&(c==null?c=this.options.smartIndent?"smart":"prev":c=c?"add":"subtract"),w(this.doc,h)&&eo(this,h,c,p)}),indentSelection:At(function(h){for(var c=this.doc.sel.ranges,p=-1,m=0;m<c.length;m++){var y=c[m];if(y.empty())y.head.line>p&&(eo(this,y.head.line,h,!0),p=y.head.line,m==this.doc.sel.primIndex&&Wn(this));else{var b=y.from(),S=y.to(),Q=Math.max(p,b.line);p=Math.min(this.lastLine(),S.line-(S.ch?0:1))+1;for(var $=Q;$<p;++$)eo(this,$,h);var L=this.doc.sel.ranges;b.ch==0&&c.length==L.length&&L[m].from().ch>0&&Yh(this.doc,m,new Te(b,L[m].to()),je)}}}),getTokenAt:function(h,c){return ic(this,h,c)},getLineTokens:function(h,c){return ic(this,Z(h),c,!0)},getTokenTypeAt:function(h){h=ce(this.doc,h);var c=Ju(this,ie(this.doc,h.line)),p=0,m=(c.length-1)/2,y=h.ch,b;if(y==0)b=c[2];else for(;;){var S=p+m>>1;if((S?c[S*2-1]:0)>=y)m=S;else if(c[S*2+1]<y)p=S+1;else{b=c[S*2+2];break}}var Q=b?b.indexOf("overlay "):-1;return Q<0?b:Q==0?null:b.slice(0,Q-1)},getModeAt:function(h){var c=this.doc.mode;return c.innerMode?r.innerMode(c,this.getTokenAt(h).state).mode:c},getHelper:function(h,c){return this.getHelpers(h,c)[0]},getHelpers:function(h,c){var p=[];if(!f.hasOwnProperty(c))return p;var m=f[c],y=this.getModeAt(h);if(typeof y[c]=="string")m[y[c]]&&p.push(m[y[c]]);else if(y[c])for(var b=0;b<y[c].length;b++){var S=m[y[c][b]];S&&p.push(S)}else y.helperType&&m[y.helperType]?p.push(m[y.helperType]):m[y.name]&&p.push(m[y.name]);for(var Q=0;Q<m._global.length;Q++){var $=m._global[Q];$.pred(y,this)&&Se(p,$.val)==-1&&p.push($.val)}return p},getStateAfter:function(h,c){var p=this.doc;return h=ni(p,h??p.first+p.size-1),Ps(this,h+1,c).state},cursorCoords:function(h,c){var p,m=this.doc.sel.primary();return h==null?p=m.head:typeof h=="object"?p=ce(this.doc,h):p=h?m.from():m.to(),Ci(this,p,c||"page")},charCoords:function(h,c){return fl(this,ce(this.doc,h),c||"page")},coordsChar:function(h,c){return h=Ac(this,h,c||"page"),ch(this,h.left,h.top)},lineAtHeight:function(h,c){return h=Ac(this,{top:h,left:0},c||"page").top,Ei(this.doc,h+this.display.viewOffset)},heightAtLine:function(h,c,p){var m=!1,y;if(typeof h=="number"){var b=this.doc.first+this.doc.size-1;h<this.doc.first?h=this.doc.first:h>b&&(h=b,m=!0),y=ie(this.doc,h)}else y=h;return hl(this,y,{top:0,left:0},c||"page",p||m).top+(m?this.doc.height-hr(y):0)},defaultTextHeight:function(){return Rn(this.display)},defaultCharWidth:function(){return Ln(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(h,c,p,m,y){var b=this.display;h=Ci(this,ce(this.doc,h));var S=h.bottom,Q=h.left;if(c.style.position="absolute",c.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(c),b.sizer.appendChild(c),m=="over")S=h.top;else if(m=="above"||m=="near"){var $=Math.max(b.wrapper.clientHeight,this.doc.height),L=Math.max(b.sizer.clientWidth,b.lineSpace.clientWidth);(m=="above"||h.bottom+c.offsetHeight>$)&&h.top>c.offsetHeight?S=h.top-c.offsetHeight:h.bottom+c.offsetHeight<=$&&(S=h.bottom),Q+c.offsetWidth>L&&(Q=L-c.offsetWidth)}c.style.top=S+"px",c.style.left=c.style.right="",y=="right"?(Q=b.sizer.clientWidth-c.offsetWidth,c.style.right="0px"):(y=="left"?Q=0:y=="middle"&&(Q=(b.sizer.clientWidth-c.offsetWidth)/2),c.style.left=Q+"px"),p&&ny(this,{left:Q,top:S,right:Q+c.offsetWidth,bottom:S+c.offsetHeight})},triggerOnKeyDown:At(Rd),triggerOnKeyPress:At(Dd),triggerOnKeyUp:Ld,triggerOnMouseDown:At(Wd),execCommand:function(h){if(Hs.hasOwnProperty(h))return Hs[h].call(null,this)},triggerElectric:At(function(h){zd(this,h)}),findPosH:function(h,c,p,m){var y=1;c<0&&(y=-1,c=-c);for(var b=ce(this.doc,h),S=0;S<c&&(b=Uh(this.doc,b,y,p,m),!b.hitSide);++S);return b},moveH:At(function(h,c){var p=this;this.extendSelectionsBy(function(m){return p.display.shift||p.doc.extend||m.empty()?Uh(p.doc,m.head,h,c,p.options.rtlMoveVisually):h<0?m.from():m.to()},Sr)}),deleteH:At(function(h,c){var p=this.doc.sel,m=this.doc;p.somethingSelected()?m.replaceSelection("",null,"+delete"):_n(this,function(y){var b=Uh(m,y.head,h,c,!1);return h<0?{from:b,to:y.head}:{from:y.head,to:b}})}),findPosV:function(h,c,p,m){var y=1,b=m;c<0&&(y=-1,c=-c);for(var S=ce(this.doc,h),Q=0;Q<c;++Q){var $=Ci(this,S,"div");if(b==null?b=$.left:$.left=b,S=qd(this,$,y,p),S.hitSide)break}return S},moveV:At(function(h,c){var p=this,m=this.doc,y=[],b=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(Q){if(b)return h<0?Q.from():Q.to();var $=Ci(p,Q.head,"div");Q.goalColumn!=null&&($.left=Q.goalColumn),y.push($.left);var L=qd(p,$,h,c);return c=="page"&&Q==m.sel.primary()&&xh(p,fl(p,L,"div").top-$.top),L},Sr),y.length)for(var S=0;S<m.sel.ranges.length;S++)m.sel.ranges[S].goalColumn=y[S]}),findWordAt:function(h){var c=this.doc,p=ie(c,h.line).text,m=h.ch,y=h.ch;if(p){var b=this.getHelper(h,"wordChars");(h.sticky=="before"||y==p.length)&&m?--m:++y;for(var S=p.charAt(m),Q=Cn(S,b)?function($){return Cn($,b)}:/\s/.test(S)?function($){return/\s/.test($)}:function($){return!/\s/.test($)&&!Cn($)};m>0&&Q(p.charAt(m-1));)--m;for(;y<p.length&&Q(p.charAt(y));)++y}return new Te(Z(h.line,m),Z(h.line,y))},toggleOverwrite:function(h){h!=null&&h==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ce(this.display.cursorDiv,"CodeMirror-overwrite"):Ae(this.display.cursorDiv,"CodeMirror-overwrite"),We(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ye(_e(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:At(function(h,c){Ls(this,h,c)}),getScrollInfo:function(){var h=this.display.scroller;return{left:h.scrollLeft,top:h.scrollTop,height:h.scrollHeight-Ni(this)-this.display.barHeight,width:h.scrollWidth-Ni(this)-this.display.barWidth,clientHeight:ah(this),clientWidth:en(this)}},scrollIntoView:At(function(h,c){h==null?(h={from:this.doc.sel.primary().head,to:null},c==null&&(c=this.options.cursorScrollMargin)):typeof h=="number"?h={from:Z(h,0),to:null}:h.from==null&&(h={from:h,to:null}),h.to||(h.to=h.from),h.margin=c||0,h.from.line!=null?sy(this,h):Ic(this,h.from,h.to,h.margin)}),setSize:At(function(h,c){var p=this,m=function(b){return typeof b=="number"||/^\d+$/.test(String(b))?b+"px":b};h!=null&&(this.display.wrapper.style.width=m(h)),c!=null&&(this.display.wrapper.style.height=m(c)),this.options.lineWrapping&&Pc(this);var y=this.display.viewFrom;this.doc.iter(y,this.display.viewTo,function(b){if(b.widgets){for(var S=0;S<b.widgets.length;S++)if(b.widgets[S].noHScroll){$r(p,y,"widget");break}}++y}),this.curOp.forceUpdate=!0,We(this,"refresh",this)}),operation:function(h){return Ht(this,h)},startOperation:function(){return ln(this)},endOperation:function(){return an(this)},refresh:At(function(){var h=this.display.cachedTextHeight;It(this),this.curOp.forceUpdate=!0,Ys(this),Ls(this,this.doc.scrollLeft,this.doc.scrollTop),Qh(this.display),(h==null||Math.abs(h-Rn(this.display))>.5||this.options.lineWrapping)&&Oh(this),We(this,"refresh",this)}),swapDoc:At(function(h){var c=this.doc;return c.cm=null,this.state.selectingText&&this.state.selectingText(),ed(this,h),Ys(this),this.display.input.reset(),Ls(this,h.scrollLeft,h.scrollTop),this.curOp.forceScroll=!0,at(this,"swapDoc",this,c),c}),phrase:function(h){var c=this.options.phrases;return c&&Object.prototype.hasOwnProperty.call(c,h)?c[h]:h},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Zt(r),r.registerHelper=function(h,c,p){f.hasOwnProperty(h)||(f[h]=r[h]={_global:[]}),f[h][c]=p},r.registerGlobalHelper=function(h,c,p,m){r.registerHelper(h,c,m),f[h]._global.push({pred:p,val:m})}}function Uh(r,o,f,h,c){var p=o,m=f,y=ie(r,o.line),b=c&&r.direction=="rtl"?-f:f;function S(){var V=o.line+b;return V<r.first||V>=r.first+r.size?!1:(o=new Z(V,o.ch,o.sticky),y=ie(r,V))}function Q(V){var G;if(h=="codepoint"){var ee=y.text.charCodeAt(o.ch+(f>0?0:-1));if(isNaN(ee))G=null;else{var ae=f>0?ee>=55296&&ee<56320:ee>=56320&&ee<57343;G=new Z(o.line,Math.max(0,Math.min(y.text.length,o.ch+f*(ae?2:1))),-f)}}else c?G=By(r.cm,y,o,f):G=Lh(y,o,f);if(G==null)if(!V&&S())o=Dh(c,r.cm,y,o.line,b);else return!1;else o=G;return!0}if(h=="char"||h=="codepoint")Q();else if(h=="column")Q(!0);else if(h=="word"||h=="group")for(var $=null,L=h=="group",A=r.cm&&r.cm.getHelper(o,"wordChars"),X=!0;!(f<0&&!Q(!X));X=!1){var N=y.text.charAt(o.ch)||`
`,_=Cn(N,A)?"w":L&&N==`
`?"n":!L||/\s/.test(N)?null:"p";if(L&&!X&&!_&&(_="s"),$&&$!=_){f<0&&(f=1,Q(),o.sticky="after");break}if(_&&($=_),f>0&&!Q(!X))break}var q=xl(r,o,p,m,!0);return ue(p,q)&&(q.hitSide=!0),q}function qd(r,o,f,h){var c=r.doc,p=o.left,m;if(h=="page"){var y=Math.min(r.display.wrapper.clientHeight,di(r).innerHeight||c(r).documentElement.clientHeight),b=Math.max(y-.5*Rn(r.display),3);m=(f>0?o.bottom:o.top)+f*b}else h=="line"&&(m=f>0?o.bottom+3:o.top-3);for(var S;S=ch(r,p,m),!!S.outside;){if(f<0?m<=0:m>=c.height){S.hitSide=!0;break}m+=f*5}return S}var Me=function(r){this.cm=r,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new me,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Me.prototype.init=function(r){var o=this,f=this,h=f.cm,c=f.div=r.lineDiv;c.contentEditable=!0,Bh(c,h.options.spellcheck,h.options.autocorrect,h.options.autocapitalize);function p(y){for(var b=y.target;b;b=b.parentNode){if(b==c)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(b.className))break}return!1}H(c,"paste",function(y){!p(y)||He(h,y)||Ud(y,h)||g<=11&&setTimeout(ht(h,function(){return o.updateFromDOM()}),20)}),H(c,"compositionstart",function(y){o.composing={data:y.data,done:!1}}),H(c,"compositionupdate",function(y){o.composing||(o.composing={data:y.data,done:!1})}),H(c,"compositionend",function(y){o.composing&&(y.data!=o.composing.data&&o.readFromDOMSoon(),o.composing.done=!0)}),H(c,"touchstart",function(){return f.forceCompositionEnd()}),H(c,"input",function(){o.composing||o.readFromDOMSoon()});function m(y){if(!(!p(y)||He(h,y))){if(h.somethingSelected())Pl({lineWise:!1,text:h.getSelections()}),y.type=="cut"&&h.replaceSelection("",null,"cut");else if(h.options.lineWiseCopyCut){var b=_d(h);Pl({lineWise:!0,text:b.text}),y.type=="cut"&&h.operation(function(){h.setSelections(b.ranges,0,je),h.replaceSelection("",null,"cut")})}else return;if(y.clipboardData){y.clipboardData.clearData();var S=Pi.text.join(`
`);if(y.clipboardData.setData("Text",S),y.clipboardData.getData("Text")==S){y.preventDefault();return}}var Q=jd(),$=Q.firstChild;Bh($),h.display.lineSpace.insertBefore(Q,h.display.lineSpace.firstChild),$.value=Pi.text.join(`
`);var L=ye(c.ownerDocument);Gt($),setTimeout(function(){h.display.lineSpace.removeChild(Q),L.focus(),L==c&&f.showPrimarySelection()},50)}}H(c,"copy",m),H(c,"cut",m)},Me.prototype.screenReaderLabelChanged=function(r){r?this.div.setAttribute("aria-label",r):this.div.removeAttribute("aria-label")},Me.prototype.prepareSelection=function(){var r=Wc(this.cm,!1);return r.focus=ye(this.div.ownerDocument)==this.div,r},Me.prototype.showSelection=function(r,o){!r||!this.cm.display.view.length||((r.focus||o)&&this.showPrimarySelection(),this.showMultipleSelections(r))},Me.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Me.prototype.showPrimarySelection=function(){var r=this.getSelection(),o=this.cm,f=o.doc.sel.primary(),h=f.from(),c=f.to();if(o.display.viewTo==o.display.viewFrom||h.line>=o.display.viewTo||c.line<o.display.viewFrom){r.removeAllRanges();return}var p=Tl(o,r.anchorNode,r.anchorOffset),m=Tl(o,r.focusNode,r.focusOffset);if(!(p&&!p.bad&&m&&!m.bad&&W(st(p,m),h)==0&&W($e(p,m),c)==0)){var y=o.display.view,b=h.line>=o.display.viewFrom&&Gd(o,h)||{node:y[0].measure.map[2],offset:0},S=c.line<o.display.viewTo&&Gd(o,c);if(!S){var Q=y[y.length-1].measure,$=Q.maps?Q.maps[Q.maps.length-1]:Q.map;S={node:$[$.length-1],offset:$[$.length-2]-$[$.length-3]}}if(!b||!S){r.removeAllRanges();return}var L=r.rangeCount&&r.getRangeAt(0),A;try{A=Ne(b.node,b.offset,S.offset,S.node)}catch{}A&&(!s&&o.state.focused?(r.collapse(b.node,b.offset),A.collapsed||(r.removeAllRanges(),r.addRange(A))):(r.removeAllRanges(),r.addRange(A)),L&&r.anchorNode==null?r.addRange(L):s&&this.startGracePeriod()),this.rememberSelection()}},Me.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){r.gracePeriod=!1,r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)},Me.prototype.showMultipleSelections=function(r){J(this.cm.display.cursorDiv,r.cursors),J(this.cm.display.selectionDiv,r.selection)},Me.prototype.rememberSelection=function(){var r=this.getSelection();this.lastAnchorNode=r.anchorNode,this.lastAnchorOffset=r.anchorOffset,this.lastFocusNode=r.focusNode,this.lastFocusOffset=r.focusOffset},Me.prototype.selectionInEditor=function(){var r=this.getSelection();if(!r.rangeCount)return!1;var o=r.getRangeAt(0).commonAncestorContainer;return Ee(this.div,o)},Me.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ye(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Me.prototype.blur=function(){this.div.blur()},Me.prototype.getField=function(){return this.div},Me.prototype.supportsTouch=function(){return!0},Me.prototype.receivedFocus=function(){var r=this,o=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):Ht(this.cm,function(){return o.cm.curOp.selectionChanged=!0});function f(){o.cm.state.focused&&(o.pollSelection(),o.polling.set(o.cm.options.pollInterval,f))}this.polling.set(this.cm.options.pollInterval,f)},Me.prototype.selectionChanged=function(){var r=this.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset},Me.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var r=this.getSelection(),o=this.cm;if(F&&x&&this.cm.display.gutterSpecs.length&&ab(r.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var f=Tl(o,r.anchorNode,r.anchorOffset),h=Tl(o,r.focusNode,r.focusOffset);f&&h&&Ht(o,function(){wt(o.doc,Tr(f,h),je),(f.bad||h.bad)&&(o.curOp.selectionChanged=!0)})}}},Me.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var r=this.cm,o=r.display,f=r.doc.sel.primary(),h=f.from(),c=f.to();if(h.ch==0&&h.line>r.firstLine()&&(h=Z(h.line-1,ie(r.doc,h.line-1).length)),c.ch==ie(r.doc,c.line).text.length&&c.line<r.lastLine()&&(c=Z(c.line+1,0)),h.line<o.viewFrom||c.line>o.viewTo-1)return!1;var p,m,y;h.line==o.viewFrom||(p=nn(r,h.line))==0?(m=Pe(o.view[0].line),y=o.view[0].node):(m=Pe(o.view[p].line),y=o.view[p-1].node.nextSibling);var b=nn(r,c.line),S,Q;if(b==o.view.length-1?(S=o.viewTo-1,Q=o.lineDiv.lastChild):(S=Pe(o.view[b+1].line)-1,Q=o.view[b+1].node.previousSibling),!y)return!1;for(var $=r.doc.splitLines(hb(r,y,Q,m,S)),L=lr(r.doc,Z(m,0),Z(S,ie(r.doc,S).text.length));$.length>1&&L.length>1;)if(xe($)==xe(L))$.pop(),L.pop(),S--;else if($[0]==L[0])$.shift(),L.shift(),m++;else break;for(var A=0,X=0,N=$[0],_=L[0],q=Math.min(N.length,_.length);A<q&&N.charCodeAt(A)==_.charCodeAt(A);)++A;for(var V=xe($),G=xe(L),ee=Math.min(V.length-($.length==1?A:0),G.length-(L.length==1?A:0));X<ee&&V.charCodeAt(V.length-X-1)==G.charCodeAt(G.length-X-1);)++X;if($.length==1&&L.length==1&&m==h.line)for(;A&&A>h.ch&&V.charCodeAt(V.length-X-1)==G.charCodeAt(G.length-X-1);)A--,X++;$[$.length-1]=V.slice(0,V.length-X).replace(/^\u200b+/,""),$[0]=$[0].slice(A).replace(/\u200b+$/,"");var ae=Z(m,A),se=Z(S,L.length?xe(L).length-X:0);if($.length>1||$[0]||W(ae,se))return Bn(r.doc,$,ae,se,"+input"),!0},Me.prototype.ensurePolled=function(){this.forceCompositionEnd()},Me.prototype.reset=function(){this.forceCompositionEnd()},Me.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Me.prototype.readFromDOMSoon=function(){var r=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(r.readDOMTimeout=null,r.composing)if(r.composing.done)r.composing=null;else return;r.updateFromDOM()},80))},Me.prototype.updateFromDOM=function(){var r=this;(this.cm.isReadOnly()||!this.pollContent())&&Ht(this.cm,function(){return It(r.cm)})},Me.prototype.setUneditable=function(r){r.contentEditable="false"},Me.prototype.onKeyPress=function(r){r.charCode==0||this.composing||(r.preventDefault(),this.cm.isReadOnly()||ht(this.cm,Nh)(this.cm,String.fromCharCode(r.charCode==null?r.keyCode:r.charCode),0))},Me.prototype.readOnlyChanged=function(r){this.div.contentEditable=String(r!="nocursor")},Me.prototype.onContextMenu=function(){},Me.prototype.resetPosition=function(){},Me.prototype.needsContentAttribute=!0;function Gd(r,o){var f=hh(r,o.line);if(!f||f.hidden)return null;var h=ie(r.doc,o.line),c=wc(f,h,o.line),p=Oi(h,r.doc.direction),m="left";if(p){var y=gi(p,o.ch);m=y%2?"right":"left"}var b=Cc(c.map,o.ch,m);return b.offset=b.collapse=="right"?b.end:b.start,b}function ab(r){for(var o=r;o;o=o.parentNode)if(/CodeMirror-gutter-wrapper/.test(o.className))return!0;return!1}function qn(r,o){return o&&(r.bad=!0),r}function hb(r,o,f,h,c){var p="",m=!1,y=r.doc.lineSeparator(),b=!1;function S(A){return function(X){return X.id==A}}function Q(){m&&(p+=y,b&&(p+=y),m=b=!1)}function $(A){A&&(Q(),p+=A)}function L(A){if(A.nodeType==1){var X=A.getAttribute("cm-text");if(X){$(X);return}var N=A.getAttribute("cm-marker"),_;if(N){var q=r.findMarks(Z(h,0),Z(c+1,0),S(+N));q.length&&(_=q[0].find(0))&&$(lr(r.doc,_.from,_.to).join(y));return}if(A.getAttribute("contenteditable")=="false")return;var V=/^(pre|div|p|li|table|br)$/i.test(A.nodeName);if(!/^br$/i.test(A.nodeName)&&A.textContent.length==0)return;V&&Q();for(var G=0;G<A.childNodes.length;G++)L(A.childNodes[G]);/^(pre|p)$/i.test(A.nodeName)&&(b=!0),V&&(m=!0)}else A.nodeType==3&&$(A.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;L(o),o!=f;)o=o.nextSibling,b=!1;return p}function Tl(r,o,f){var h;if(o==r.display.lineDiv){if(h=r.display.lineDiv.childNodes[f],!h)return qn(r.clipPos(Z(r.display.viewTo-1)),!0);o=null,f=0}else for(h=o;;h=h.parentNode){if(!h||h==r.display.lineDiv)return null;if(h.parentNode&&h.parentNode==r.display.lineDiv)break}for(var c=0;c<r.display.view.length;c++){var p=r.display.view[c];if(p.node==h)return fb(p,o,f)}}function fb(r,o,f){var h=r.text.firstChild,c=!1;if(!o||!Ee(h,o))return qn(Z(Pe(r.line),0),!0);if(o==h&&(c=!0,o=h.childNodes[f],f=0,!o)){var p=r.rest?xe(r.rest):r.line;return qn(Z(Pe(p),p.text.length),c)}var m=o.nodeType==3?o:null,y=o;for(!m&&o.childNodes.length==1&&o.firstChild.nodeType==3&&(m=o.firstChild,f&&(f=m.nodeValue.length));y.parentNode!=h;)y=y.parentNode;var b=r.measure,S=b.maps;function Q(_,q,V){for(var G=-1;G<(S?S.length:0);G++)for(var ee=G<0?b.map:S[G],ae=0;ae<ee.length;ae+=3){var se=ee[ae+2];if(se==_||se==q){var ve=Pe(G<0?r.line:r.rest[G]),Le=ee[ae]+V;return(V<0||se!=_)&&(Le=ee[ae+(V?1:0)]),Z(ve,Le)}}}var $=Q(m,y,f);if($)return qn($,c);for(var L=y.nextSibling,A=m?m.nodeValue.length-f:0;L;L=L.nextSibling){if($=Q(L,L.firstChild,0),$)return qn(Z($.line,$.ch-A),c);A+=L.textContent.length}for(var X=y.previousSibling,N=f;X;X=X.previousSibling){if($=Q(X,X.firstChild,-1),$)return qn(Z($.line,$.ch+N),c);N+=X.textContent.length}}var et=function(r){this.cm=r,this.prevInput="",this.pollingFast=!1,this.polling=new me,this.hasSelection=!1,this.composing=null,this.resetting=!1};et.prototype.init=function(r){var o=this,f=this,h=this.cm;this.createField(r);var c=this.textarea;r.wrapper.insertBefore(this.wrapper,r.wrapper.firstChild),E&&(c.style.width="0px"),H(c,"input",function(){d&&g>=9&&o.hasSelection&&(o.hasSelection=null),f.poll()}),H(c,"paste",function(m){He(h,m)||Ud(m,h)||(h.state.pasteIncoming=+new Date,f.fastPoll())});function p(m){if(!He(h,m)){if(h.somethingSelected())Pl({lineWise:!1,text:h.getSelections()});else if(h.options.lineWiseCopyCut){var y=_d(h);Pl({lineWise:!0,text:y.text}),m.type=="cut"?h.setSelections(y.ranges,null,je):(f.prevInput="",c.value=y.text.join(`
`),Gt(c))}else return;m.type=="cut"&&(h.state.cutIncoming=+new Date)}}H(c,"cut",p),H(c,"copy",p),H(r.scroller,"paste",function(m){if(!(fr(r,m)||He(h,m))){if(!c.dispatchEvent){h.state.pasteIncoming=+new Date,f.focus();return}var y=new Event("paste");y.clipboardData=m.clipboardData,c.dispatchEvent(y)}}),H(r.lineSpace,"selectstart",function(m){fr(r,m)||xt(m)}),H(c,"compositionstart",function(){var m=h.getCursor("from");f.composing&&f.composing.range.clear(),f.composing={start:m,range:h.markText(m,h.getCursor("to"),{className:"CodeMirror-composing"})}}),H(c,"compositionend",function(){f.composing&&(f.poll(),f.composing.range.clear(),f.composing=null)})},et.prototype.createField=function(r){this.wrapper=jd(),this.textarea=this.wrapper.firstChild;var o=this.cm.options;Bh(this.textarea,o.spellcheck,o.autocorrect,o.autocapitalize)},et.prototype.screenReaderLabelChanged=function(r){r?this.textarea.setAttribute("aria-label",r):this.textarea.removeAttribute("aria-label")},et.prototype.prepareSelection=function(){var r=this.cm,o=r.display,f=r.doc,h=Wc(r);if(r.options.moveInputWithCursor){var c=Ci(r,f.sel.primary().head,"div"),p=o.wrapper.getBoundingClientRect(),m=o.lineDiv.getBoundingClientRect();h.teTop=Math.max(0,Math.min(o.wrapper.clientHeight-10,c.top+m.top-p.top)),h.teLeft=Math.max(0,Math.min(o.wrapper.clientWidth-10,c.left+m.left-p.left))}return h},et.prototype.showSelection=function(r){var o=this.cm,f=o.display;J(f.cursorDiv,r.cursors),J(f.selectionDiv,r.selection),r.teTop!=null&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},et.prototype.reset=function(r){if(!(this.contextMenuPending||this.composing&&r)){var o=this.cm;if(this.resetting=!0,o.somethingSelected()){this.prevInput="";var f=o.getSelection();this.textarea.value=f,o.state.focused&&Gt(this.textarea),d&&g>=9&&(this.hasSelection=f)}else r||(this.prevInput=this.textarea.value="",d&&g>=9&&(this.hasSelection=null));this.resetting=!1}},et.prototype.getField=function(){return this.textarea},et.prototype.supportsTouch=function(){return!1},et.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!z||ye(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},et.prototype.blur=function(){this.textarea.blur()},et.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},et.prototype.receivedFocus=function(){this.slowPoll()},et.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll(),r.cm.state.focused&&r.slowPoll()})},et.prototype.fastPoll=function(){var r=!1,o=this;o.pollingFast=!0;function f(){var h=o.poll();!h&&!r?(r=!0,o.polling.set(60,f)):(o.pollingFast=!1,o.slowPoll())}o.polling.set(20,f)},et.prototype.poll=function(){var r=this,o=this.cm,f=this.textarea,h=this.prevInput;if(this.contextMenuPending||this.resetting||!o.state.focused||xr(f)&&!h&&!this.composing||o.isReadOnly()||o.options.disableInput||o.state.keySeq)return!1;var c=f.value;if(c==h&&!o.somethingSelected())return!1;if(d&&g>=9&&this.hasSelection===c||U&&/[\uf700-\uf7ff]/.test(c))return o.display.input.reset(),!1;if(o.doc.sel==o.display.selForContextMenu){var p=c.charCodeAt(0);if(p==8203&&!h&&(h="​"),p==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,y=Math.min(h.length,c.length);m<y&&h.charCodeAt(m)==c.charCodeAt(m);)++m;return Ht(o,function(){Nh(o,c.slice(m),h.length-m,null,r.composing?"*compose":null),c.length>1e3||c.indexOf(`
`)>-1?f.value=r.prevInput="":r.prevInput=c,r.composing&&(r.composing.range.clear(),r.composing.range=o.markText(r.composing.start,o.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},et.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},et.prototype.onKeyPress=function(){d&&g>=9&&(this.hasSelection=null),this.fastPoll()},et.prototype.onContextMenu=function(r){var o=this,f=o.cm,h=f.display,c=o.textarea;o.contextMenuPending&&o.contextMenuPending();var p=rn(f,r),m=h.scroller.scrollTop;if(!p||C)return;var y=f.options.resetSelectionOnContextMenu;y&&f.doc.sel.contains(p)==-1&&ht(f,wt)(f.doc,Tr(p),je);var b=c.style.cssText,S=o.wrapper.style.cssText,Q=o.wrapper.offsetParent.getBoundingClientRect();o.wrapper.style.cssText="position: static",c.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(r.clientY-Q.top-5)+"px; left: "+(r.clientX-Q.left-5)+`px;
      z-index: 1000; background: `+(d?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var $;O&&($=c.ownerDocument.defaultView.scrollY),h.input.focus(),O&&c.ownerDocument.defaultView.scrollTo(null,$),h.input.reset(),f.somethingSelected()||(c.value=o.prevInput=" "),o.contextMenuPending=A,h.selForContextMenu=f.doc.sel,clearTimeout(h.detectingSelectAll);function L(){if(c.selectionStart!=null){var N=f.somethingSelected(),_="​"+(N?c.value:"");c.value="⇚",c.value=_,o.prevInput=N?"":"​",c.selectionStart=1,c.selectionEnd=_.length,h.selForContextMenu=f.doc.sel}}function A(){if(o.contextMenuPending==A&&(o.contextMenuPending=!1,o.wrapper.style.cssText=S,c.style.cssText=b,d&&g<9&&h.scrollbars.setScrollTop(h.scroller.scrollTop=m),c.selectionStart!=null)){(!d||d&&g<9)&&L();var N=0,_=function(){h.selForContextMenu==f.doc.sel&&c.selectionStart==0&&c.selectionEnd>0&&o.prevInput=="​"?ht(f,dd)(f):N++<10?h.detectingSelectAll=setTimeout(_,500):(h.selForContextMenu=null,h.input.reset())};h.detectingSelectAll=setTimeout(_,200)}}if(d&&g>=9&&L(),pe){nr(r);var X=function(){St(window,"mouseup",X),setTimeout(A,20)};H(window,"mouseup",X)}else setTimeout(A,50)},et.prototype.readOnlyChanged=function(r){r||this.reset(),this.textarea.disabled=r=="nocursor",this.textarea.readOnly=!!r},et.prototype.setUneditable=function(){},et.prototype.needsContentAttribute=!1;function ub(r,o){if(o=o?fe(o):{},o.value=r.value,!o.tabindex&&r.tabIndex&&(o.tabindex=r.tabIndex),!o.placeholder&&r.placeholder&&(o.placeholder=r.placeholder),o.autofocus==null){var f=ye(r.ownerDocument);o.autofocus=f==r||r.getAttribute("autofocus")!=null&&f==document.body}function h(){r.value=y.getValue()}var c;if(r.form&&(H(r.form,"submit",h),!o.leaveSubmitMethodAlone)){var p=r.form;c=p.submit;try{var m=p.submit=function(){h(),p.submit=c,p.submit(),p.submit=m}}catch{}}o.finishInit=function(b){b.save=h,b.getTextArea=function(){return r},b.toTextArea=function(){b.toTextArea=isNaN,h(),r.parentNode.removeChild(b.getWrapperElement()),r.style.display="",r.form&&(St(r.form,"submit",h),!o.leaveSubmitMethodAlone&&typeof r.form.submit=="function"&&(r.form.submit=c))}},r.style.display="none";var y=Be(function(b){return r.parentNode.insertBefore(b,r.nextSibling)},o);return y}function cb(r){r.off=St,r.on=H,r.wheelEventPixels=yy,r.Doc=Nt,r.splitLines=Cs,r.countColumn=le,r.findColumn=Yi,r.isWordChar=Ss,r.Pass=Re,r.signal=We,r.Line=An,r.changeEnd=Zr,r.scrollbarModel=Uc,r.Pos=Z,r.cmpPos=W,r.modes=ki,r.mimeModes=wr,r.resolveMode=Ft,r.getMode=sr,r.modeExtensions=kr,r.extendMode=el,r.copyState=or,r.startState=$s,r.innerMode=Qr,r.commands=Hs,r.keyMap=cr,r.keyName=Td,r.isModifierKey=$d,r.lookupKey=zn,r.normalizeKeyMap=Ny,r.StringStream=Ve,r.SharedTextMarker=qs,r.TextMarker=Mr,r.LineWidget=js,r.e_preventDefault=xt,r.e_stopPropagation=Jr,r.e_stop=nr,r.addClass=Ce,r.contains=Ee,r.rmClass=Ae,r.keyNames=Yr}rb(Be),lb(Be);var db="iter insert remove copy getEditor constructor".split(" ");for(var Zl in Nt.prototype)Nt.prototype.hasOwnProperty(Zl)&&Se(db,Zl)<0&&(Be.prototype[Zl]=function(r){return function(){return r.apply(this.doc,arguments)}}(Nt.prototype[Zl]));return Zt(Nt),Be.inputStyles={textarea:et,contenteditable:Me},Be.defineMode=function(r){!Be.defaults.mode&&r!="null"&&(Be.defaults.mode=r),Jo.apply(this,arguments)},Be.defineMIME=Tn,Be.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}}),Be.defineMIME("text/plain","null"),Be.defineExtension=function(r,o){Be.prototype[r]=o},Be.defineDocExtension=function(r,o){Nt.prototype[r]=o},Be.fromTextArea=ub,cb(Be),Be.version="5.65.15",Be})})(cv);var dv=cv.exports,pv={};const $$=({origin:n,senderId:e,receiverId:t,type:i})=>i==="script"?`<!doctype html>
<html lang="en">
<body></body>
</html>`:`<!doctype html>
<html lang="en">
<body>
<script>
const origin = "${n}";
const senderId = "${e}";
const receiverId = "${t}";
const handleMessage = async (event) => {
  if (event.source !== window.parent) {
    return;
  }
  if (event.origin !== origin) {
    return;
  }
  const { id, src } = event.data || {};
  if (id !== receiverId) {
    return;
  }
  try {
    const AsyncFunction = Object.getPrototypeOf(async function () {}).constructor;
    ${(()=>i==="module"?"await import(`data:text/javascript;charset=utf-8, ${encodeURIComponent(src)}`);window.parent.postMessage({ id: senderId, result: undefined }, origin);":i==="AsyncFunction"?"await new AsyncFunction(src)();window.parent.postMessage({ id: senderId, result: undefined }, origin);":"const result = eval(src);window.parent.postMessage({ id: senderId, result }, origin);")()};
  } catch (error) {
    window.parent.postMessage({ id: senderId, error: {message:error.message} }, origin);
  }
  window.removeEventListener("message", handleMessage);
};
window.addEventListener("message", handleMessage);
window.parent.postMessage({ id: senderId, ready: true }, origin);
<\/script>
</body>
</html>`;function Fg(){return Array.from(crypto.getRandomValues(new Uint32Array(4))).map(n=>n.toString(36)).join("")}function P$(){const n=document.createElement("iframe");n.setAttribute("style","display: none;");const e=Fg(),t=Fg();return{remove:()=>{document.body.removeChild(n)},run:(i,s={},l={})=>new Promise((a,u)=>{const d=v=>{if(v.source!==n.contentWindow)return;const{id:x,result:k,error:C,ready:R}=v.data||{};if(x===e){if(R){n.contentWindow.postMessage({id:t,src:i},"*");return}C?u(new Error(C.message)):a(k),window.removeEventListener("message",d)}};window.addEventListener("message",d);const g=l.type?l.type:"script";n.srcdoc=$$({origin:window.location.origin,senderId:e,receiverId:t,type:g}),n.dataset.mirrorConsole=g,document.body.appendChild(n);const O=n.contentWindow;if(Object.keys(s).forEach(function(v){O[v]=s[v]}),g==="script")try{a(O.eval(i))}catch(v){u(v)}})}}pv.createContextEval=P$;(function(n,e){(function(t){t(dv)})(function(t){t.defineMode("javascript",function(i,s){var l=i.indentUnit,a=s.statementIndent,u=s.jsonld,d=s.json||u,g=s.trackScope!==!1,O=s.typescript,v=s.wordCharacters||/[\w$\xa1-\uffff]/,x=function(){function w(st){return{type:st,style:"keyword"}}var P=w("keyword a"),Z=w("keyword b"),W=w("keyword c"),ue=w("keyword d"),be=w("operator"),$e={type:"atom",style:"atom"};return{if:w("if"),while:P,with:P,else:Z,do:Z,try:Z,finally:Z,return:ue,break:ue,continue:ue,new:w("new"),delete:W,void:W,throw:W,debugger:w("debugger"),var:w("var"),const:w("var"),let:w("var"),function:w("function"),catch:w("catch"),for:w("for"),switch:w("switch"),case:w("case"),default:w("default"),in:be,typeof:be,instanceof:be,true:$e,false:$e,null:$e,undefined:$e,NaN:$e,Infinity:$e,this:w("this"),class:w("class"),super:w("atom"),yield:W,export:w("export"),import:w("import"),extends:W,await:W}}(),k=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function R(w){for(var P=!1,Z,W=!1;(Z=w.next())!=null;){if(!P){if(Z=="/"&&!W)return;Z=="["?W=!0:W&&Z=="]"&&(W=!1)}P=!P&&Z=="\\"}}var M,D;function E(w,P,Z){return M=w,D=Z,P}function F(w,P){var Z=w.next();if(Z=='"'||Z=="'")return P.tokenize=z(Z),P.tokenize(w,P);if(Z=="."&&w.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return E("number","number");if(Z=="."&&w.match(".."))return E("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Z))return E(Z);if(Z=="="&&w.eat(">"))return E("=>","operator");if(Z=="0"&&w.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return E("number","number");if(/\d/.test(Z))return w.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),E("number","number");if(Z=="/")return w.eat("*")?(P.tokenize=U,U(w,P)):w.eat("/")?(w.skipToEnd(),E("comment","comment")):Ei(w,P,1)?(R(w),w.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),E("regexp","string-2")):(w.eat("="),E("operator","operator",w.current()));if(Z=="`")return P.tokenize=j,j(w,P);if(Z=="#"&&w.peek()=="!")return w.skipToEnd(),E("meta","meta");if(Z=="#"&&w.eatWhile(v))return E("variable","property");if(Z=="<"&&w.match("!--")||Z=="-"&&w.match("->")&&!/\S/.test(w.string.slice(0,w.start)))return w.skipToEnd(),E("comment","comment");if(k.test(Z))return(Z!=">"||!P.lexical||P.lexical.type!=">")&&(w.eat("=")?(Z=="!"||Z=="=")&&w.eat("="):/[<>*+\-|&?]/.test(Z)&&(w.eat(Z),Z==">"&&w.eat(Z))),Z=="?"&&w.eat(".")?E("."):E("operator","operator",w.current());if(v.test(Z)){w.eatWhile(v);var W=w.current();if(P.lastType!="."){if(x.propertyIsEnumerable(W)){var ue=x[W];return E(ue.type,ue.style,W)}if(W=="async"&&w.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return E("async","keyword",W)}return E("variable","variable",W)}}function z(w){return function(P,Z){var W=!1,ue;if(u&&P.peek()=="@"&&P.match(C))return Z.tokenize=F,E("jsonld-keyword","meta");for(;(ue=P.next())!=null&&!(ue==w&&!W);)W=!W&&ue=="\\";return W||(Z.tokenize=F),E("string","string")}}function U(w,P){for(var Z=!1,W;W=w.next();){if(W=="/"&&Z){P.tokenize=F;break}Z=W=="*"}return E("comment","comment")}function j(w,P){for(var Z=!1,W;(W=w.next())!=null;){if(!Z&&(W=="`"||W=="$"&&w.eat("{"))){P.tokenize=F;break}Z=!Z&&W=="\\"}return E("quasi","string-2",w.current())}var oe="([{}])";function de(w,P){P.fatArrowAt&&(P.fatArrowAt=null);var Z=w.string.indexOf("=>",w.start);if(!(Z<0)){if(O){var W=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(w.string.slice(w.start,Z));W&&(Z=W.index)}for(var ue=0,be=!1,$e=Z-1;$e>=0;--$e){var st=w.string.charAt($e),ni=oe.indexOf(st);if(ni>=0&&ni<3){if(!ue){++$e;break}if(--ue==0){st=="("&&(be=!0);break}}else if(ni>=3&&ni<6)++ue;else if(v.test(st))be=!0;else if(/["'\/`]/.test(st))for(;;--$e){if($e==0)return;var ce=w.string.charAt($e-1);if(ce==st&&w.string.charAt($e-2)!="\\"){$e--;break}}else if(be&&!ue){++$e;break}}be&&!ue&&(P.fatArrowAt=$e)}}var ge={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function pe(w,P,Z,W,ue,be){this.indented=w,this.column=P,this.type=Z,this.prev=ue,this.info=be,W!=null&&(this.align=W)}function Qe(w,P){if(!g)return!1;for(var Z=w.localVars;Z;Z=Z.next)if(Z.name==P)return!0;for(var W=w.context;W;W=W.prev)for(var Z=W.vars;Z;Z=Z.next)if(Z.name==P)return!0}function Ae(w,P,Z,W,ue){var be=w.cc;for(I.state=w,I.stream=ue,I.marked=null,I.cc=be,I.style=P,w.lexical.hasOwnProperty("align")||(w.lexical.align=!0);;){var $e=be.length?be.pop():d?Re:Se;if($e(Z,W)){for(;be.length&&be[be.length-1].lex;)be.pop()();return I.marked?I.marked:Z=="variable"&&Qe(w,W)?"variable-2":P}}}var I={state:null,column:null,marked:null,cc:null};function J(){for(var w=arguments.length-1;w>=0;w--)I.cc.push(arguments[w])}function T(){return J.apply(null,arguments),!0}function De(w,P){for(var Z=P;Z;Z=Z.next)if(Z.name==w)return!0;return!1}function Ne(w){var P=I.state;if(I.marked="def",!!g){if(P.context){if(P.lexical.info=="var"&&P.context&&P.context.block){var Z=Ee(w,P.context);if(Z!=null){P.context=Z;return}}else if(!De(w,P.localVars)){P.localVars=new bt(w,P.localVars);return}}s.globalVars&&!De(w,P.globalVars)&&(P.globalVars=new bt(w,P.globalVars))}}function Ee(w,P){if(P)if(P.block){var Z=Ee(w,P.prev);return Z?Z==P.prev?P:new Ce(Z,P.vars,!0):null}else return De(w,P.vars)?P:new Ce(P.prev,new bt(w,P.vars),!1);else return null}function ye(w){return w=="public"||w=="private"||w=="protected"||w=="abstract"||w=="readonly"}function Ce(w,P,Z){this.prev=w,this.vars=P,this.block=Z}function bt(w,P){this.name=w,this.next=P}var Gt=new bt("this",new bt("arguments",null));function _e(){I.state.context=new Ce(I.state.context,I.state.localVars,!1),I.state.localVars=Gt}function di(){I.state.context=new Ce(I.state.context,I.state.localVars,!0),I.state.localVars=null}_e.lex=di.lex=!0;function Xt(){I.state.localVars=I.state.context.vars,I.state.context=I.state.context.prev}Xt.lex=!0;function fe(w,P){var Z=function(){var W=I.state,ue=W.indented;if(W.lexical.type=="stat")ue=W.lexical.indented;else for(var be=W.lexical;be&&be.type==")"&&be.align;be=be.prev)ue=be.indented;W.lexical=new pe(ue,I.stream.column(),w,null,W.lexical,P)};return Z.lex=!0,Z}function le(){var w=I.state;w.lexical.prev&&(w.lexical.type==")"&&(w.indented=w.lexical.indented),w.lexical=w.lexical.prev)}le.lex=!0;function me(w){function P(Z){return Z==w?T():w==";"||Z=="}"||Z==")"||Z=="]"?J():T(P)}return P}function Se(w,P){return w=="var"?T(fe("vardef",P),nr,me(";"),le):w=="keyword a"?T(fe("form"),Vr,Se,le):w=="keyword b"?T(fe("form"),Se,le):w=="keyword d"?I.stream.match(/^\s*$/,!1)?T():T(fe("stat"),Yi,me(";"),le):w=="debugger"?T(me(";")):w=="{"?T(fe("}"),di,Di,le,Xt):w==";"?T():w=="if"?(I.state.lexical.info=="else"&&I.state.cc[I.state.cc.length-1]==le&&I.state.cc.pop()(),T(fe("form"),Vr,Se,le,Pn)):w=="function"?T(Wi):w=="for"?T(fe("form"),di,Vo,Se,Xt,le):w=="class"||O&&P=="interface"?(I.marked="keyword",T(fe("form",w=="class"?w:P),Jo,le)):w=="variable"?O&&P=="declare"?(I.marked="keyword",T(Se)):O&&(P=="module"||P=="enum"||P=="type")&&I.stream.match(/^\s*\w/,!1)?(I.marked="keyword",P=="enum"?T(Zn):P=="type"?T(Ko,me("operator"),H,me(";")):T(fe("form"),Et,me("{"),fe("}"),Di,le,le)):O&&P=="namespace"?(I.marked="keyword",T(fe("form"),Re,Se,le)):O&&P=="abstract"?(I.marked="keyword",T(Se)):T(fe("stat"),Cn):w=="switch"?T(fe("form"),Vr,me("{"),fe("}","switch"),di,Di,le,le,Xt):w=="case"?T(Re,me(":")):w=="default"?T(me(":")):w=="catch"?T(fe("form"),_e,_o,Se,le,Xt):w=="export"?T(fe("stat"),kr,le):w=="import"?T(fe("stat"),or,le):w=="async"?T(Se):P=="@"?T(Re,Se):J(fe("stat"),Re,me(";"),le)}function _o(w){if(w=="(")return T(ki,me(")"))}function Re(w,P){return Sr(w,P,!1)}function je(w,P){return Sr(w,P,!0)}function Vr(w){return w!="("?J():T(fe(")"),Yi,me(")"),le)}function Sr(w,P,Z){if(I.state.fatArrowAt==I.stream.start){var W=Z?bs:jo;if(w=="(")return T(_e,fe(")"),Fe(ki,")"),le,me("=>"),W,Xt);if(w=="variable")return J(_e,Et,me("=>"),W,Xt)}var ue=Z?Ri:pi;return ge.hasOwnProperty(w)?T(ue):w=="function"?T(Wi,ue):w=="class"||O&&P=="interface"?(I.marked="keyword",T(fe("form"),wr,le)):w=="keyword c"||w=="async"?T(Z?je:Re):w=="("?T(fe(")"),Yi,me(")"),le,ue):w=="operator"||w=="spread"?T(Z?je:Re):w=="["?T(fe("]"),lr,le,ue):w=="{"?Kr($n,"}",null,ue):w=="quasi"?J(xe,ue):w=="new"?T(qo(Z)):T()}function Yi(w){return w.match(/[;\}\)\],]/)?J():J(Re)}function pi(w,P){return w==","?T(Yi):Ri(w,P,!1)}function Ri(w,P,Z){var W=Z==!1?pi:Ri,ue=Z==!1?Re:je;if(w=="=>")return T(_e,Z?bs:jo,Xt);if(w=="operator")return/\+\+|--/.test(P)||O&&P=="!"?T(W):O&&P=="<"&&I.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?T(fe(">"),Fe(H,">"),le,W):P=="?"?T(Re,me(":"),ue):T(ue);if(w=="quasi")return J(xe,W);if(w!=";"){if(w=="(")return Kr(je,")","call",W);if(w==".")return T(Go,W);if(w=="[")return T(fe("]"),Yi,me("]"),le,W);if(O&&P=="as")return I.marked="keyword",T(H,W);if(w=="regexp")return I.state.lastType=I.marked="operator",I.stream.backUp(I.stream.pos-I.stream.start-1),T(ue)}}function xe(w,P){return w!="quasi"?J():P.slice(P.length-2)!="${"?T(xe):T(Yi,Qn)}function Qn(w){if(w=="}")return I.marked="string-2",I.state.tokenize=j,T(xe)}function jo(w){return de(I.stream,I.state),J(w=="{"?Se:Re)}function bs(w){return de(I.stream,I.state),J(w=="{"?Se:je)}function qo(w){return function(P){return P=="."?T(w?Ss:Fa):P=="variable"&&O?T(xt,w?Ri:pi):J(w?je:Re)}}function Fa(w,P){if(P=="target")return I.marked="keyword",T(pi)}function Ss(w,P){if(P=="target")return I.marked="keyword",T(Ri)}function Cn(w){return w==":"?T(le,Se):J(pi,me(";"),le)}function Go(w){if(w=="variable")return I.marked="property",T()}function $n(w,P){if(w=="async")return I.marked="property",T($n);if(w=="variable"||I.style=="keyword"){if(I.marked="property",P=="get"||P=="set")return T(xs);var Z;return O&&I.state.fatArrowAt==I.stream.start&&(Z=I.stream.match(/^\s*:\s*/,!1))&&(I.state.fatArrowAt=I.stream.pos+Z[0].length),T(Li)}else{if(w=="number"||w=="string")return I.marked=u?"property":I.style+" property",T(Li);if(w=="jsonld-keyword")return T(Li);if(O&&ye(P))return I.marked="keyword",T($n);if(w=="[")return T(Re,gi,me("]"),Li);if(w=="spread")return T(je,Li);if(P=="*")return I.marked="keyword",T($n);if(w==":")return J(Li)}}function xs(w){return w!="variable"?J(Li):(I.marked="property",T(Wi))}function Li(w){if(w==":")return T(je);if(w=="(")return J(Wi)}function Fe(w,P,Z){function W(ue,be){if(Z?Z.indexOf(ue)>-1:ue==","){var $e=I.state.lexical;return $e.info=="call"&&($e.pos=($e.pos||0)+1),T(function(st,ni){return st==P||ni==P?J():J(w)},W)}return ue==P||be==P?T():Z&&Z.indexOf(";")>-1?J(w):T(me(P))}return function(ue,be){return ue==P||be==P?T():J(w,W)}}function Kr(w,P,Z){for(var W=3;W<arguments.length;W++)I.cc.push(arguments[W]);return T(fe(P,Z),Fe(w,P),le)}function Di(w){return w=="}"?T():J(Se,Di)}function gi(w,P){if(O){if(w==":")return T(H);if(P=="?")return T(gi)}}function Ha(w,P){if(O&&(w==":"||P=="in"))return T(H)}function Oi(w){if(O&&w==":")return I.stream.match(/^\s*\w+\s+is\b/,!1)?T(Re,Fo,H):T(H)}function Fo(w,P){if(P=="is")return I.marked="keyword",T()}function H(w,P){if(P=="keyof"||P=="typeof"||P=="infer"||P=="readonly")return I.marked="keyword",T(P=="typeof"?je:H);if(w=="variable"||P=="void")return I.marked="type",T(Zt);if(P=="|"||P=="&")return T(H);if(w=="string"||w=="number"||w=="atom")return T(Zt);if(w=="[")return T(fe("]"),Fe(H,"]",","),le,Zt);if(w=="{")return T(fe("}"),St,le,Zt);if(w=="(")return T(Fe(Tt,")"),ws,Zt);if(w=="<")return T(Fe(H,">"),H);if(w=="quasi")return J(He,Zt)}function ws(w){if(w=="=>")return T(H)}function St(w){return w.match(/[\}\)\]]/)?T():w==","||w==";"?T(St):J(We,St)}function We(w,P){if(w=="variable"||I.style=="keyword")return I.marked="property",T(We);if(P=="?"||w=="number"||w=="string")return T(We);if(w==":")return T(H);if(w=="[")return T(me("variable"),Ha,me("]"),We);if(w=="(")return J(Xi,We);if(!w.match(/[;\}\)\],]/))return T()}function He(w,P){return w!="quasi"?J():P.slice(P.length-2)!="${"?T(He):T(H,Ho)}function Ho(w){if(w=="}")return I.marked="string-2",I.state.tokenize=j,T(He)}function Tt(w,P){return w=="variable"&&I.stream.match(/^\s*[?:]/,!1)||P=="?"?T(Tt):w==":"?T(H):w=="spread"?T(Tt):J(H)}function Zt(w,P){if(P=="<")return T(fe(">"),Fe(H,">"),le,Zt);if(P=="|"||w=="."||P=="&")return T(H);if(w=="[")return T(H,me("]"),Zt);if(P=="extends"||P=="implements")return I.marked="keyword",T(H);if(P=="?")return T(H,me(":"),H)}function xt(w,P){if(P=="<")return T(fe(">"),Fe(H,">"),le,Zt)}function Jr(){return J(H,ks)}function ks(w,P){if(P=="=")return T(H)}function nr(w,P){return P=="enum"?(I.marked="keyword",T(Zn)):J(Et,gi,mi,Ka)}function Et(w,P){if(O&&ye(P))return I.marked="keyword",T(Et);if(w=="variable")return Ne(P),T();if(w=="spread")return T(Et);if(w=="[")return Kr(Va,"]");if(w=="{")return Kr(Qs,"}")}function Qs(w,P){return w=="variable"&&!I.stream.match(/^\s*:/,!1)?(Ne(P),T(mi)):(w=="variable"&&(I.marked="property"),w=="spread"?T(Et):w=="}"?J():w=="["?T(Re,me("]"),me(":"),Qs):T(me(":"),Et,mi))}function Va(){return J(Et,mi)}function mi(w,P){if(P=="=")return T(je)}function Ka(w){if(w==",")return T(nr)}function Pn(w,P){if(w=="keyword b"&&P=="else")return T(fe("form","else"),Se,le)}function Vo(w,P){if(P=="await")return T(Vo);if(w=="(")return T(fe(")"),Cs,le)}function Cs(w){return w=="var"?T(nr,xr):w=="variable"?T(xr):J(xr)}function xr(w,P){return w==")"?T():w==";"?T(xr):P=="in"||P=="of"?(I.marked="keyword",T(Re,xr)):J(Re,xr)}function Wi(w,P){if(P=="*")return I.marked="keyword",T(Wi);if(w=="variable")return Ne(P),T(Wi);if(w=="(")return T(_e,fe(")"),Fe(ki,")"),le,Oi,Se,Xt);if(O&&P=="<")return T(fe(">"),Fe(Jr,">"),le,Wi)}function Xi(w,P){if(P=="*")return I.marked="keyword",T(Xi);if(w=="variable")return Ne(P),T(Xi);if(w=="(")return T(_e,fe(")"),Fe(ki,")"),le,Oi,Xt);if(O&&P=="<")return T(fe(">"),Fe(Jr,">"),le,Xi)}function Ko(w,P){if(w=="keyword"||w=="variable")return I.marked="type",T(Ko);if(P=="<")return T(fe(">"),Fe(Jr,">"),le)}function ki(w,P){return P=="@"&&T(Re,ki),w=="spread"?T(ki):O&&ye(P)?(I.marked="keyword",T(ki)):O&&w=="this"?T(gi,mi):J(Et,gi,mi)}function wr(w,P){return w=="variable"?Jo(w,P):Tn(w,P)}function Jo(w,P){if(w=="variable")return Ne(P),T(Tn)}function Tn(w,P){if(P=="<")return T(fe(">"),Fe(Jr,">"),le,Tn);if(P=="extends"||P=="implements"||O&&w==",")return P=="implements"&&(I.marked="keyword"),T(O?H:Re,Tn);if(w=="{")return T(fe("}"),Ft,le)}function Ft(w,P){if(w=="async"||w=="variable"&&(P=="static"||P=="get"||P=="set"||O&&ye(P))&&I.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return I.marked="keyword",T(Ft);if(w=="variable"||I.style=="keyword")return I.marked="property",T(sr,Ft);if(w=="number"||w=="string")return T(sr,Ft);if(w=="[")return T(Re,gi,me("]"),sr,Ft);if(P=="*")return I.marked="keyword",T(Ft);if(O&&w=="(")return J(Xi,Ft);if(w==";"||w==",")return T(Ft);if(w=="}")return T();if(P=="@")return T(Re,Ft)}function sr(w,P){if(P=="!"||P=="?")return T(sr);if(w==":")return T(H,mi);if(P=="=")return T(je);var Z=I.state.lexical.prev,W=Z&&Z.info=="interface";return J(W?Xi:Wi)}function kr(w,P){return P=="*"?(I.marked="keyword",T(ie,me(";"))):P=="default"?(I.marked="keyword",T(Re,me(";"))):w=="{"?T(Fe(el,"}"),ie,me(";")):J(Se)}function el(w,P){if(P=="as")return I.marked="keyword",T(me("variable"));if(w=="variable")return J(je,el)}function or(w){return w=="string"?T():w=="("?J(Re):w=="."?J(pi):J(Qr,$s,ie)}function Qr(w,P){return w=="{"?Kr(Qr,"}"):(w=="variable"&&Ne(P),P=="*"&&(I.marked="keyword"),T(Ve))}function $s(w){if(w==",")return T(Qr,$s)}function Ve(w,P){if(P=="as")return I.marked="keyword",T(Qr)}function ie(w,P){if(P=="from")return I.marked="keyword",T(Re)}function lr(w){return w=="]"?T():J(Fe(je,"]"))}function Zn(){return J(fe("form"),Et,me("{"),fe("}"),Fe(vi,"}"),le,le)}function vi(){return J(Et,mi)}function Pe(w,P){return w.lastType=="operator"||w.lastType==","||k.test(P.charAt(0))||/[,.]/.test(P.charAt(0))}function Ei(w,P,Z){return P.tokenize==F&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(P.lastType)||P.lastType=="quasi"&&/\{\s*$/.test(w.string.slice(0,w.pos-(Z||0)))}return{startState:function(w){var P={tokenize:F,lastType:"sof",cc:[],lexical:new pe((w||0)-l,0,"block",!1),localVars:s.localVars,context:s.localVars&&new Ce(null,null,!1),indented:w||0};return s.globalVars&&typeof s.globalVars=="object"&&(P.globalVars=s.globalVars),P},token:function(w,P){if(w.sol()&&(P.lexical.hasOwnProperty("align")||(P.lexical.align=!1),P.indented=w.indentation(),de(w,P)),P.tokenize!=U&&w.eatSpace())return null;var Z=P.tokenize(w,P);return M=="comment"?Z:(P.lastType=M=="operator"&&(D=="++"||D=="--")?"incdec":M,Ae(P,Z,M,D,w))},indent:function(w,P){if(w.tokenize==U||w.tokenize==j)return t.Pass;if(w.tokenize!=F)return 0;var Z=P&&P.charAt(0),W=w.lexical,ue;if(!/^\s*else\b/.test(P))for(var be=w.cc.length-1;be>=0;--be){var $e=w.cc[be];if($e==le)W=W.prev;else if($e!=Pn&&$e!=Xt)break}for(;(W.type=="stat"||W.type=="form")&&(Z=="}"||(ue=w.cc[w.cc.length-1])&&(ue==pi||ue==Ri)&&!/^[,\.=+\-*:?[\(]/.test(P));)W=W.prev;a&&W.type==")"&&W.prev.type=="stat"&&(W=W.prev);var st=W.type,ni=Z==st;return st=="vardef"?W.indented+(w.lastType=="operator"||w.lastType==","?W.info.length+1:0):st=="form"&&Z=="{"?W.indented:st=="form"?W.indented+l:st=="stat"?W.indented+(Pe(w,P)?a||l:0):W.info=="switch"&&!ni&&s.doubleIndentSwitch!=!1?W.indented+(/^(?:case|default)\b/.test(P)?l:2*l):W.align?W.column+(ni?0:1):W.indented+(ni?0:l)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:u,jsonMode:d,expressionAllowed:Ei,skipExpression:function(w){Ae(w,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();const T$=dv,{createContextEval:Z$}=pv;function kn(){this.editor=this.createEditor(),this.runningEvalContext=void 0}kn.prototype.createEditor=function(){return this.textareaHolder=document.createElement("div"),this.textarea=document.createElement("textarea"),this.textareaHolder.appendChild(this.textarea),T$.fromTextArea(this.textarea)};kn.prototype.setText=function(n){this.editor.setValue(n)};kn.prototype.getText=function(){return this.editor.getValue()};kn.prototype.swapWithElement=function(n){this.originalElemenet=n,n.parentNode.replaceChild(this.textareaHolder,n),this.editor.refresh()};kn.prototype.destroy=function(){if(this.originalElemenet==null)throw new Error("Haven't `originalElement` : You have to call #swapWithElement before call this");this.textareaHolder.parentNode.replaceChild(this.originalElemenet,this.textareaHolder),this.originalElemenet=null,this.textarea=null,this.textareaHolder=null,this.editor=null,this.runningEvalContext&&this.runningEvalContext.remove(),Object.freeze(this)};kn.prototype.runInContext=async function(n,e={}){this.runningEvalContext&&this.runningEvalContext.remove();const t=this.editor.getValue();return this.runningEvalContext=Z$(),this.runningEvalContext.run(t,n,e)};var A$=kn;const M$=C$(A$),Y$=[{message:"Affiche le mot pomme dans la console",response:"pomme",validate:!1},{message:"Crée une fonction qui additionne 5 et 10 et les affiches dans la console",response:"15",validate:!1},{message:"Utiliser une fonction qui affiche pomme a l'anvers dans la console",response:"emmop",validate:!1}],R$={class:"text-yellow-accent-2"},L$=gr("h3",null,"Editeur",-1),D$={id:""},W$=gr("p",{id:"jsEditor"},null,-1),X$=gr("h3",null,"Sortie",-1),E$={class:"text-left"},I$=gr("hr",null,null,-1),N$=gr("div",{id:"anchor"},null,-1),B$=gr("p",{id:"console"},null,-1),G$=Hg({__name:"MiniCodeurPage",setup(n){const e=Al(`function afficher(chaine){ 
 console.log(chaine);
}
afficher('Hello world!');`),t=[f$(),k$],i=Al([]),s=Al(),l=Al([]);Vg(async()=>{s.value=Y$});function a(){const d=document.getElementById("console"),g=new M$;g.setText(e.value),g.swapWithElement(d);const O={log:function(v){u(v)}};g.runInContext({console:O},function(v){v&&l.value.push(v)}),g.destroy()}function u(d){var g;i.value.push(d),(g=s.value)==null||g.forEach(O=>{O.response==d&&(O.validate=!0)})}return(d,g)=>{const O=Hn("v-icon"),v=Hn("v-col"),x=Hn("v-row"),k=Hn("v-card-text"),C=Hn("v-card"),R=Hn("v-btn");return qh(),Fd(pb,null,{default:Kt(()=>[gr("h1",R$,[Ml("Carré de sable "),oi(O,{color:"green"},{default:Kt(()=>[Ml(" mdi-code-braces-box")]),_:1})]),oi(x,{class:"ma-5 text-center align-center"},{default:Kt(()=>[oi(v,{cols:"6"},{default:Kt(()=>[L$,gr("div",D$,[oi(bb(QC),{modelValue:e.value,"onUpdate:modelValue":g[0]||(g[0]=M=>e.value=M),placeholder:"Code goes here...",style:{height:"400px",textAlign:"left"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:t},null,8,["modelValue"]),W$])]),_:1}),oi(v,{cols:"6"},{default:Kt(()=>[X$,oi(C,{id:"console",height:"400px",style:{"overflow-y":"auto","overflow-anchor":"auto"}},{default:Kt(()=>[oi(k,null,{default:Kt(()=>[oi(x,null,{default:Kt(()=>[(qh(!0),Sb(wb,null,xb(i.value,M=>(qh(),Fd(v,{cols:"12"},{default:Kt(()=>[gr("p",E$," > "+kb(M),1),I$]),_:2},1024))),256))]),_:1}),N$]),_:1})]),_:1})]),_:1}),oi(v,{cols:"10"},{default:Kt(()=>[oi(R,{class:"mt-5",onClick:g[1]||(g[1]=M=>a()),color:"primary"},{default:Kt(()=>[Ml("Exécuter")]),_:1})]),_:1}),oi(v,{cols:"2"},{default:Kt(()=>[oi(R,{class:"mt-5",onClick:g[2]||(g[2]=M=>i.value=[]),color:"red"},{default:Kt(()=>[Ml("Vider")]),_:1})]),_:1}),oi(v,{cols:"12",class:"text-left"},{default:Kt(()=>[B$]),_:1})]),_:1})]),_:1})}}});export{G$ as default};
