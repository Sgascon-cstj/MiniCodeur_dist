import{d as A,r,o as B,a as w,b as c,c as M,e as R,f as d,g as e,w as o,h as l,t as $,F,i as y}from"./index-0979e10b.js";import{U as I}from"./UserRepository-f7559e71.js";const N=d("h1",{class:"text-h1"},[d("span",{style:{color:"yellow"}},"M"),l("ini"),d("span",{style:{color:"yellow"}},"C"),l("odeur ")],-1),S=d("span",null,"Petits curieux, grands codeurs : Réponses à la programmation!",-1),T=d("span",{style:{color:"red"}},"v1.0",-1),E=A({__name:"LoginPage",setup(j){const g=new I,f=r(!1),m=r(!1),v=r(!1),x=r(1e4),_=r(),n=r(""),i=r(""),u={required:t=>!!t||"Champs requis",email:t=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t)?!0:"Courriel invalide"};B(()=>{delete w.defaults.headers.common.Authorization});async function k(){if(m.value=!1,f.value=!0,u.email(n.value)&&u.required(n.value)&&u.required(i.value))try{const t=await g.loginCheck(n.value,i.value);t&&(localStorage.setItem("token",t.token),w.defaults.headers.common={Authorization:`bearer ${t.token}`},y.push({name:"home"}))}catch(t){switch(t.response.status){case 401:_.value="Informations de connexion invalides. Veuillez contacter le support si le problème persiste.";break;case 403:_.value="Votre compte à était désactivé. Pour plus de détails, veuillez contacter le support à support@minicodeur.ca.";break}m.value=!0,f.value=!1}}function C(){y.push({name:"inscription"})}function V(){n.value="amartel-user@cstj.ca",i.value="Password1!",k()}function q(){n.value="amartel-admin@cstj.qc.ca",i.value="Password1!",k()}return(t,a)=>{const b=c("v-text-field"),p=c("v-btn"),h=c("v-col"),U=c("v-row"),P=c("v-sheet"),z=c("v-snackbar");return M(),R(F,null,[d("div",null,[N,S,e(P,{border:"",rounded:"lg",elevation:"10","max-width":"40vh",width:"auto",class:"mx-auto pa-5 ma-10"},{default:o(()=>[e(b,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),label:"Courriel","prepend-inner-icon":"mdi-email",type:"text",rules:[u.required,u.email],class:"my-2"},null,8,["modelValue","rules"]),e(b,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=s=>i.value=s),"append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",type:v.value?"text":"password","onClick:appendInner":a[2]||(a[2]=s=>v.value=!v.value),label:"Mot de passe",rules:[u.required],"prepend-inner-icon":"mdi-lock-outline",class:"my-2"},null,8,["modelValue","append-inner-icon","type","rules"]),e(p,{onClick:k,loading:f.value,block:"",color:"green"},{default:o(()=>[l("Connexion")]),_:1},8,["loading"]),e(p,{onClick:C,block:"",class:"mt-3",color:"blue"},{default:o(()=>[l("Créer compte")]),_:1}),e(U,{class:"mt-1"},{default:o(()=>[e(h,{cols:"6"},{default:o(()=>[e(p,{onClick:V,block:"",color:"red"},{default:o(()=>[l("Triche user")]),_:1})]),_:1}),e(h,{cols:"6"},{default:o(()=>[e(p,{onClick:q,block:"",color:"red"},{default:o(()=>[l("Triche Admin")]),_:1})]),_:1})]),_:1})]),_:1})]),e(z,{modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=s=>m.value=s),timeout:x.value},{actions:o(()=>[e(p,{color:"red",variant:"text",onClick:a[3]||(a[3]=s=>m.value=!1)},{default:o(()=>[l(" Fermer ")]),_:1})]),default:o(()=>[l($(_.value)+" ",1)]),_:1},8,["modelValue","timeout"]),T],64)}}});export{E as default};
